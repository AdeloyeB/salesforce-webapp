<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<!-- saved from url=(0284)https://livecareer.nanorep.co/widget/widget.html?cv=cv=8D676D38AE5D900#account=livecareer&kb=57219090&doctype=html5&refencoded=true&referer=aHR0cHM6Ly93d3cubXlwZXJmZWN0Y3YuY28udWsvYnVpbGQtY3YvZmluYWwtY3Y_&cnf=true&reportEvents=true&dynamicsize=true&dynamicmaxsize=500&notifyclick=true -->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	
	<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
	
	<title>nanoRep Widget</title>
	
	<!-- includes -->
    
<!-- Start: injected by AdGuard -->
<style type="text/css" nonce="78B747448AE34E12A01B2004B8604D5D">embed[width="640"][height="160"], iframe[width="100%"][height="60"], img[width="240"][height="400"], object[width="1000"][height="250"], object[width="1000"][height="270"], object[width="200"][height="200"], object[width="260"][height="130"], object[width="300"][height="60"], object[width="640"][height="100"], object[width="640"][height="160"], a[href^="https://redirect.ero-advertising.com"] > img, a[href*="://kingandqueenpro.com/r/?"], a[href^="http://metrika.yandex.ru/stat/"], a[href^="http://www.liveinternet.ru/stat/"], a[href^="https://metrika.yandex.ru/stat/"], img[width="88"][height="31"], a[href^="//twitter.com/share"], a[href^="//www.odnoklassniki.ru/dk?st.cmd=addShare"], .share-twitter, :not(.sharingOptionsGroup) > .share-menu, a[href^="fb-messenger://share"], a[href^="http://b.hatena.ne.jp/add?url="], a[href^="http://b.hatena.ne.jp/entry/s/"], a[href^="https://feedly.com/i/subscription/"], a[href^="http://vkrugudruzei.ru/x/button?url="], .social-hatena, .line-it-button, .share-line, .share-hatebu, .share-hatena, .hatena-bookmark-button-frame, .social-btn, a[href^="https://www.facebook.com/dialog/send"], a[href^="https://facebook.com/sharer/sharer.php?"], a[href^="https://pinterest.com/share?url="], a[href^="//pinterest.com/pin/create/"], a[href^="https://pinterest.com/pin/create/"], a[href^="https://api.whatsapp.com/send?text="], a[href^="https://web.whatsapp.com/send?text="], .share-page, a[href^="fb-messenger://share/"], .share-container, .article-sharing, a[href^="http://www.facebook.com/plugins/like.php"], a[href^="http://www.wykop.pl/dodaj/link/url,"], .article-share, a[href^="http://www.facebook.com/dialog/feed?"], a[href^="https://share.yandex.ru/go.xml?service="], .share-icon, .social-box, a[href^="https://pinterest.com/pin/create/link/?"], a[href^="http://connect.ok.ru/offer?url="], a[href^="https://connect.ok.ru/offer?url="], a[href^="https://www.pinterest.com/pin/create/link/"], a[href^="http://www.ok.ru/dk?st.cmd=addShare"], a[href^="//connect.ok.ru/dk?st.cmd=WidgetSharePreview"], a[href^="https://connect.ok.ru/dk?st.cmd=WidgetSharePreview"], a[href^="https://connect.ok.ru/dk?cmd=WidgetSharePreview"], .postShare, #facebook-icon, #fb-root:not(body):not(html), #fb_groups, #flickr_badge_source, #flickr_badge_uber_wrapper, #odklocs0, #odklocs1, #share-facebook, #share_bar, #sharer, #social-buttons, #social-widget, #socialbar, #socials, #twitter-icon, #vk_donate, #vk_group, #vk_groups, #vk_poll, #vk_share, #vkshare0, .DiggThisButton, .addthis_toolbox, .b-social, .content-share, .entry-share, .et_social_facebook, .et_social_icons_container, .et_social_networks, .et_social_pinterest, .et_social_twitter, .fa-linkedin-square, .fa-pinterest-p, .fa-reddit-square, .fa-tumblr-square, .fa-youtube-square, .facebook-like, .facebook-share, .fb-page, .google-buzz-button, .header-social, .icon-facebook, .icon-twitter, .icon-gplus, .icon-google-plus, .icon-pinterest, .icon-linkedin, .icon-facebook-squared, .icon-reddit, .img-share, .likely, .nav-social, .odkl-share-oc, .odkl-share-oc-fc, .odkl-share_button, .page-share, .post-share, .share-box, .share-button, .share-buttons, .share-link, .share-links, .share-list, .share-panel, .share-text, .shareContent, .share_bar, .share_buttons, .sharebox, .shares, .skype-share, .soc-buttons, .soc-links, .social-bar, .social-block, .social-button, .social-button-small, .social-buttons, .social-count, .social-icon, .social-icons, .social-icons-big, .social-likes, .social-media, .social-nav, .social-networks, .social-share, .social-wrapper, .socialButtons, .socialLinks, .social__icon, .social_share, .socialbutton, .socialbuttons, .socialmedia, .socials, .sticky-shares, .top-share, .vk-like, .vk_share_button, a.mrc__plugin_like_button, a.mrc__plugin_recommendations, a.mrc__plugin_share_friends, a.mrc__share, a.odkl-klass, a.odkl-klass-s, a.odkl-klass-stat, a[href="http://twitter.com/share"], a[href="http://www.addtoany.com/share_save"], a[href="http://www.facebook.com/sharer.php"], a[href="http://www.simplesharebuttons.com"], a[href^="//plus.google.com/share"], a[href^="//twitter.com/intent/tweet?"], a[href^="//vk.com/share.php"], a[href^="//www.facebook.com/sharer.php?"], a[href^="//www.facebook.com/sharer/sharer.php?"], a[href^="http://del.icio.us/post?url="], a[href^="http://digg.com/submit?"], a[href^="http://facebook.com/share.php?"], a[href^="http://facebook.com/sharer.php?"], a[href^="http://linkedin.com/shareArticle?"], a[href^="http://pinterest.com/pin/create/bookmarklet/"], a[href^="http://pinterest.com/pin/create/button/"], a[href^="http://pinterest.com/pin/create/link/"], a[href^="http://plus.google.com/share"], a[href^="http://reddit.com/submit?url="], a[href^="https://reddit.com/submit?url="], a[href^="http://service.weibo.com/share/share.php"], a[href^="http://share.yandex.ru/go.xml?service="], a[href^="http://technorati.com/faves?add="], a[href^="http://twitter.com/?status="], a[href^="http://twitter.com/home/?"], a[href^="http://twitter.com/home?"], a[href^="http://twitter.com/intent/tweet?"], a[href^="http://twitter.com/share?"], a[href^="http://vk.com/share.php"], a[href^="http://vkontakte.ru/share.php"], a[href^="http://wow.ya.ru/posts_share_link.xml"], a[href^="http://www.digg.com/submit?"], a[href^="http://www.facebook.com/share.php"], a[href^="http://www.facebook.com/sharer.php?"], a[href^="http://www.facebook.com/sharer/sharer.php"], a[href^="http://www.friendfeed.com/share?"], a[href^="http://www.google.com/bookmarks/mark?"], a[href^="http://www.linkedin.com/shareArticle"], a[href^="//www.livejournal.com/update.bml"], a[href^="http://www.livejournal.com/update.bml"], a[href^="http://www.myspace.com/Modules/PostTo/Pages/?u="], a[href^="http://www.pinterest.com/pin/create/"], a[href^="http://www.reddit.com/submit"], a[href^="http://www.sharethis.com/share/?publisher="], a[href^="http://www.stumbleupon.com/submit?url"], a[href^="http://www.tumblr.com/share"], a[href^="http://www.twitter.com/home?"], a[href^="http://www.twitter.com/share"], a[href^="https://facebook.com/sharer.php?"], a[href^="https://getpocket.com/edit?url="], a[href^="https://getpocket.com/save?url="], a[href^="https://m.facebook.com/sharer.php"], a[href^="https://pinterest.com/pin/create/button/"], a[href^="https://plus.google.com/share"], a[href^="https://plusone.google.com/_/+1/confirm?"], a[href^="https://share.yandex.net/go.xml?service="], a[href^="https://twitter.com/home/?"], a[href^="https://twitter.com/home?"], a[href^="https://twitter.com/intent/follow?"], a[href^="https://twitter.com/intent/retweet?tweet_id"], a[href^="https://twitter.com/intent/tweet?"], a[href^="https://twitter.com/share"], a[href^="https://vk.com/share.php"], a[href^="https://www.facebook.com/dialog/feed?"], a[href^="https://www.facebook.com/dialog/share?"], a[href^="https://www.facebook.com/share.php"], a[href^="https://www.facebook.com/sharer.php"], a[href^="https://www.facebook.com/sharer/sharer.php"], a[href^="https://www.google.com/bookmarks/mark?"], a[href^="https://www.linkedin.com/shareArticle"], a[href^="https://www.livejournal.com/update.bml"], a[href^="https://www.odnoklassniki.ru/dk?st.cmd=addShare"], a[href^="https://www.pinterest.com/pin/create/button/"], a[href^="https://ru.reddit.com/submit"], a[href^="https://www.reddit.com/submit"], a[href^="https://www.stumbleupon.com/submit?url="], a[href^="https://www.twitter.com/share"], a[href^="whatsapp://send"], a[name="fb_share"], a[onclick^="window.open ('http://www.facebook.com/sharer.php"], a[onclick^="window.open ('http://www.twitter.com/share?url="], a[onclick^="window.open ('https://twitter.com/intent/tweet?"], a[onclick^="window.open('http://twitter.com/home?status"], a[onclick^="window.open('http://vk.com/share.php"], a[onclick^="window.open('http://www.facebook.com/share.php?"], a[onclick^="window.open('https://twitter.com/intent/tweet"], a[onclick^="window.open('https://twitter.com/share"], a[onclick^="window.open('https://www.facebook.com/sharer.php"], a[title="Share on Facebook"] { display: none!important; }
a[title="Share on Twitter"], body .twitter-share-button, body div a[class*="pin_it_button"], div[class^="widget-social"], div[id^="vk_like"], form[action*="livejournal.com/update.bml"], input.fb, input.tweet, input.vk, a[href^="http://csp.cyworld.com/bi/bi_recommend_pop.php?"], #kakaostory-follow-button, #kakaostory-share-button, a[href^="https://story.kakao.com/s/share?url="], a[href^="https://story.kakao.com/share?url="], a[href^="http://blog.naver.com/openapi/share?url="], a[onclick^="window.open('http://blog.naver.com/openapi/share?url="], a[onclick^="javascript:window.open('http://share.naver.com/web/shareView.nhn?"], a[onclick^="window.open('http://www.band.us/plugin/share?"], a[href^="http://www.band.us/plugin/share?"], .sns_list, iframe[width="100%"][height="120"], iframe[width="240"][height="400"], iframe[width="300"][height="250"], iframe[width="728"][height="90"], img[width="240px"][height="400px"], img[width="468"][height="60"], img[width="728"][height="90"], object[width="100%"][height="300"], object[width="300"][height="300"], div[id*="ScriptRootC"], .b-header-banner, .banners_block, .post-ads, .top-banners, div[id^="google_ads_iframe_"], #AD_Top, #AD_banner, #AdColumn, #AdContainer, #AdHeader, #AdImage, #Adcode, #Adrectangle, #AdvHeader, #AdvertiseFrame, #Advertisements, #BodyAd, #BottomAdContainer, #BottomAds, #ContentAd, #HouseAd, #PageLeaderAd, #PreRollAd, #RightAdBlock, #SponsoredLinks, #Tadspacehead, #TopAd, #WNAd41, #ad-1, #ad-2, #ad-area, #ad-background, #ad-bg, #ad-bottom, #ad-column, #ad-container, #ad-header, #ad-header-728x90, #ad-leaderboard, #ad-main, #ad-overlay, #ad-panel, #ad-right, #ad-rotator, #ad-text, #ad-top, #ad-top-banner-placeholder, #ad-top-wrapper, #ad-unit, #ad-wrapper, #ad468, #ad728, #ad728x90, #adBanner, #adBanner1, #adBelt, #adBox, #adComponentWrapper, #adDiv, #adFrame, #adGallery, #adHeader, #adHolder, #adLayer, #adLeader, #adLink, #adLink1, #adPosition0, #adRight, #adSense, #adText, #adTower, #ad_1, #ad_2, #ad_3, #ad_4, #ad_5, #ad_728_90, #ad_area, #ad_banner, #ad_box, #ad_center, #ad_container, #ad_content, #ad_footer, #ad_global_above_footer, #ad_global_header2, #ad_header, #ad_home, #ad_leaderboard, #ad_left, #ad_main, #ad_overlay, #ad_post, #ad_space, #ad_square, #ad_table, #ad_text:not(textarea), #ad_top, #ad_topslot, #ad_unit, #ad_wrap, #ad_wrapper, #adaptv_ad_player_div, #adbackground, #adbanner, #adbar, #adblock, #adboard, #adbody, #adbox, #adbrite, #adcode, #adcontainer, #adcontainer1, #adcontent, #adframe:not(frameset), #adhead, #adheader, #adimg1, #adlabel, #adlayer, #admanager_leaderboard, #adnews, #adposition3, #adright, #ads-col, #ads-wrapper, #ads1, #adsContainer, #adsHeader, #adsIframe, #adsIfrme2, #adsIfrme3, #ads_bottom, #ads_container, #ads_right, #ads_top, #ads_wrapper, #adsdiv, #adsense, #adsense-bottom, #adsense_block, #adsense_inline, #adsense_testa, #adsensewide, #adspace, #adspace_top, #adspot-300x250-pos-1, #adspot-300x250-pos-2, #adstop, #adtechWallpaper, #adtext, #adtop, #adv-masthead, #adv-top, #adver, #advert1, #advert2, #advertContainer, #advert_box, #advertbox3, #advertise, #advertisement1, #advertisetop, #advertising-container, #advertising2, #advertising_wrapper, #adverts, #advtop, #adwrapper, #adzone, #banner-ad, #banner-advert-container, #bannerAd, #bannerAdWrapper, #banner_ad, #banner_topad, #bannerad, #bigAd, #bigad, #block_advert, #body_ad, #bottomAd, #bottomAds, #bottom_ad, #bottomad, #centerads, #cmn_ad_tag_head, #container_ad, #content-header-ad, #contentAd, #content_ads, #content_adv, #contentad, #ctlDisplayAd1_lblAd, #dart-container-728x90, #dfp_ad_Entry_728x90, #dfp_ad_Home_728x90, #divAd, #divAdBox, #div_prerollAd_1, #download_ad, #featuread, #featured-ads, #featuredAds, #footer_ad, #footer_ads, #frameAd, #game-ad, #goads, #google_ads, #googlead, #gridAdSidebar, #head-ad, #header-ads, #headerAd, #headerAdContainer, #header_ad, #homead, #influads_block, #ka_adRightSkyscraperWide, #leaderAd, #leaderBoardAd, #leaderboard-ad { display: none!important; }
#leaderboard-advertisement, #leaderboardad, #left-ad, #left_ads, #leftad, #leftads, #ligatus, #logoAd, #logo_ad, #mainAd, #main_ad, #middleads, #mini-ad, #mochila-column-right-ad-300x250-1, #mpu2, #mpu2_container, #mpu_container, #msad, #my-ads, #my-adsFPAD, #myAd, #player_ads, #post-ad, #pre_advertising_wrapper, #prerollAd, #promo-ad, #publicidad, #reklama, #rh-ad, #rightAd, #right_ads, #right_adsense, #search-sponsor, #searchAd, #searchAdSenseBox, #search_ads, #sideAd, #side_ads, #sidebar-ads, #sidebar_ad, #sidebar_ad_1, #sidebar_ads, #sky_advert, #skybox-ad, #sponsorAdDiv, #sponsorText, #sponsoredwellcontainerbottom, #sponsors-home, #takeover_ad, #text-ads, #theAd, #top-ad, #top-ad-content, #topAd, #topAdSpace, #topAdSpace_div, #topAds, #topAdvert, #topBannerAd, #top_ad, #top_ad_game, #top_ads, #topad, #topadvert, #topbannerad, #under_story_ad, #videoAd, #videoads, #wrapAd, .AD-POST, .AD300, .ADBAR, .ADBox, .AD_area, .AdBar, .AdBody:not(body), .AdBox, .AdHere, .AdInfo, .AdPanel, .AdSense, .AdSidebar, .AdTitle, .AdsRec, .Ads_4, .Adsense, .AdvertContainer, .BannerAd, .GoogleDfpAd, .HomeAds, .IM_ad_unit, .LazyLoadAd, .Ligatus, .RelatedAds, .SponsorAds, .SponsoredContent, .TopAdContainer, .TopBannerAd, .ad-300x250, .ad-970, .ad-banner, .ad-bar, .ad-block, .ad-body, .ad-border, .ad-bottom, .ad-btn, .ad-button, .ad-card, .ad-cat, .ad-cell, .ad-content, .ad-display, .ad-enabled, .ad-fixed, .ad-grid, .ad-head, .ad-header, .ad-holder, .ad-icon, .ad-img, .ad-inner, .ad-inserter, .ad-item, .ad-leader-top, .ad-leaderboard, .ad-left, .ad-link, .ad-links, .ad-loaded, .ad-med-rec, .ad-panel, .ad-placement, .ad-position, .ad-rail, .ad-region, .ad-right, .ad-row, .ad-scroll, .ad-section, .ad-served, .ad-sidebar, .ad-source, .ad-square, .ad-stack, .ad-text, .ad-top, .ad-unit, .ad-unit-300-wrapper, .ad-vertical-container, .ad-wide, .ad-wrap, .ad-wrapper, .ad300, .ad468, .ad728, .ad90, .adBanner, .adBar, .adBlock, .adBottomBoard, .adBox, .adCell, .adChoicesLogo, .adContent, .adDiv, .adElement, .adFrame, .adFrameCnt, .adHead, .adHeader, .adHeaderblack, .adHeadline, .adHolder, .adHoldert, .adImg, .adItem, .adLink, .adMessage, .adMiddle, .adMod, .adModule, .adOverlay, .adPanel, .adPod, .adResult, .adRight, .adRotator, .adRow, .adSense, .adSpace, .adSpot, .adText, .adTitle, .adTopHome, .adTower, .adWidget, .adWrap, .adWrapper, .ad_1, .ad_160, .ad_160x600, .ad_2, .ad_3, .ad_336, .ad_728x90, .ad_960, .ad_Right, .ad__container, .ad_banner, .ad_block, .ad_body, .ad_bottom, .ad_center, .ad_click, .ad_container, .ad_content, .ad_description, .ad_global_header, .ad_head_rectangle, .ad_header, .ad_image, .ad_img, .ad_item, .ad_leaderboard, .ad_links, .ad_middle, .ad_outer, .ad_promo, .ad_slug_table, .ad_space, .ad_spot, .ad_text, .ad_title, .ad_top, .ad_trick_header, .ad_trick_left, .ad_unit, .ad_wrap, .ad_wrapper, .adarea, .adbanner, .adbar, .adbottom, .adbox2, .adbutton, .adcol1, .adcol2, .adcolumn, .adcomment, .adcont, .addiv, .adframe, .adfree, .adheader { display: none!important; }
.adholder, .adinfo, .adkit, .adlink, .adlist, .admain, .admiddle, .adpic, .adright, .adrow1, .adrow2, .ads-1, .ads-2, .ads-3, .ads-300-250, .ads-area, .ads-bg, .ads-col, .ads-content, .ads-header, .ads-holder, .ads-iframe, .ads-inline, .ads-item, .ads-right, .ads-section, .ads-title, .ads-top, .ads1, .ads125-widget, .adsBlock, .adsBox, .adsTop, .adsWidget, .ads_block, .ads_catDiv, .ads_div, .ads_title, .ads_top, .ads_wrapper, .adsbottombox, .adsbygoogle, .adscontainer, .adsense-block, .adsense-right, .adsense_wrapper, .adshome, .adside, .adsizewrapper, .adslot, .adslot_1, .adslot_blurred, .adspace, .adstop, .adtable, .adtile, .adtop, .adunit, .adv-box, .adv-list, .adv300, .advBox, .adv_300, .adv_txt, .advert-block, .advert-box, .advert-container, .advert-content, .advert-horizontal, .advert-sky, .advert-wide, .advert-wrapper, .advert2, .advertColumn, .advertContainer, .advertLink, .advertText, .advert_area, .advert_container, .advert_list, .advertbox, .advertiseText, .advertisement-1, .advertisement-2, .advertisement-block, .advertisement__leaderboard, .advertiser, .advertising_banner, .advertising_block, .advertisment, .advertorial, .adverts, .adverttext, .adwords, .adzone, .affiliate-footer, .afs_ads, .after-post-ad, .article-advert, .article_ad, .b-advert, .banner-728, .banner-ad, .banner-ads, .banner160x600, .banner300, .bannerAd, .banner_728x90, .banner_ad, .banner_ads, .bannerad, .block-ad, .block-adv, .block-ec_ads, .block-simpleads, .blog-ads, .bottom-ad, .bottom-ads, .bottom-left-ad, .bottomAds, .bottomAdvert, .bottom_ad_block, .box-ad, .box-ads, .box-radvert, .box-recommend-ad, .box_ads, .box_adv, .boxad, .boxadv, .btn-ad, .can_ad_slug, .category-ad, .category-advertorial, .change_AdContainer, .chitika-ad, .chitikaAdBlock, .container_ad, .container_row_ad, .contentAd, .contentAds, .content_ad, .content_ads, .content_tagsAdTech, .contentad, .cp-adsInited, .custom-ad, .custom_ads, .desktop-ad, .detail-ads, .dfp-ad, .dfp-ad-unit, .dfp-tag-wrapper, .dfp_ad, .displayAd, .download_ad, .easyazon-block, .ec-ads-remove-if-empty, .featured-ad, .featuredAdBox, .featuredAds, .flash-advertisement, .footer-ad, .footer-ads, .footer_ad, .footerad, .forumAd, .gallery-ad, .googad, .google-ad, .google-sponsored, .googleAdSense, .googleAds, .google_adsense, .gpt-ad, .greyAd, .grid-item-ad, .gujAd, .has-ad, .hasads, .header-ad, .header-advert, .header-google-ads, .headerAd, .header_ad, .header_ad_center, .header_advert, .headerad, .headerads, .home-ad, .home-ads, .homeAd, .homead, .homepage-ad, .homepage_ads, .horizontal_ad, .iframe-ad, .img_ad, .imgad, .inner_ad, .innerad, .insert-post-ads, .internal-ad, .ipsAd, .item-ad, .item-ads, .item-container-ad, .jquery-script-ads, .js-sticky-ad, .leaderboard-ad, .leaderboard-ads, .leftAd, .leftad, .ligatus, .list-ad, .list-ads, .listad, .logo-ad, .m-ad, .main-ads, .marketing-ad, .medrect-ad, .mid_ad, .middle_AD, .module-ad, .moduletable-advert, .myTestAd, .naMediaAd, .native-ad, .nativead, .nav-ad, .newsAd, .node-ad, .oasad, .oio-banner-zone, .openx, .overlay-ads, .page-ad, .page_ad, .plainAd, .playerAd, .player_ad, .player_hover_ad, .plistaList > .itemLinkPET, .post-ad, .post-sponsored, .post_ad, .postad, .premiumAdOverlay, .premiumAdOverlayClose, .promoAd, .pub_300x250, .pub_300x250m, .pub_728x90, .publicidade { display: none!important; }
.pushdown-ad, .rail-ad, .rbRectAd, .rectangle_ad, .refreshAds, .region-top-ad-position, .reklam, .reklama, .related-ads, .reportAdLink, .responsive-ad, .resultad, .review-ad, .right-ad, .rightAd, .right_ad, .right_ads_column, .rightad, .rightadv, .searchAds, .searchad, .searchads, .section-sponsor, .showAd, .showads, .side-ad, .side-ads, .side-bar-ad-position1, .sideAd, .sidebar-ads, .sidebaradbox, .single-ad, .singleAd, .skinAd, .sky_ad, .skyscraperAd, .slide-ad, .smallAd, .small_ad, .smallads, .sponsor-box, .sponsor-logo, .sponsorBlock, .sponsorBottom, .sponsoredLinks, .sponsorlink, .sticky-ad, .sticky-ad-wrapper, .story-ad, .taboola-ad, .tc_ad_unit, .td-ad, .td-header-ad-wrap, .text-ad, .text-ad-links, .text-ads, .textAd, .text_ad, .text_ads, .textad, .textads, .top-ad, .top-ad-container, .top-ad-content, .top-ad-wrapper, .top-ads, .top-advert, .top-advertisement, .topAds, .top_ad, .top_ad_div, .top_ad_wrap, .top_ads, .topads, .tower-ad, .trc-content-sponsored, .type_ads_default, .vertical-ads, .view_ad, .wide-ad, .wideAd, .with-background-ads, .withAds, .wnad, .wpInsertInPostAd, .wp_bannerize, .y7-advertisement, .yom-ad, a[href*=".revimedia.com/"], a[href*="/adrotate-out.php?"], a[href^="http://ad-emea.doubleclick.net/"], a[href^="http://ad.doubleclick.net/"], a[href^="http://adclick.g.doubleclick.net/"], a[href^="http://adfarm.mediaplex.com/"], a[href^="http://ads.betfair.com/redirect.aspx?"], a[href^="http://ads2.williamhill.com/redirect.aspx?"], a[href^="http://adserving.unibet.com/"], a[href^="http://adultfriendfinder.com/p/register.cgi?pid="], a[href^="http://affiliate.coral.co.uk/processing/"], a[href^="http://bs.serving-sys.com/"], a[href^="http://marketgid.com"], a[href^="http://mgid.com/"], a[href^="http://online.ladbrokes.com/promoRedirect?"], a[href^="http://pubads.g.doubleclick.net/"], a[href^="http://track.adform.net/"], a[href^="http://us.marketgid.com"], a[href^="http://websitedhoome.com/"], a[href^="http://www.adskeeper.co.uk/"], a[href^="http://www.fbooksluts.com/"], a[href^="http://www.fleshlight.com/"], a[href^="http://www.liutilities.com/"], a[href^="http://www.socialsex.com/"], a[href^="http://www.yourfuckbook.com/?"], a[href^="https://ad.doubleclick.net/"], a[href^="https://servedbyadbutler.com/"], a[href^="https://track.adform.net/"], a[href^="https://www.financeads.net/tc.php?"], a[onmousedown^="this.href='https://paid.outbrain.com/network/redir?"][target="_blank"], div[data-native_ad], div[id^="MarketGid"], div[id^="advads-"], div[id^="crt-"][style], div[id^="dfp-ad-"], div[id^="div-gpt-ad"], div[itemtype="http://schema.org/WPAdBlock"], iframe[id^="google_ads_frame"], iframe[id^="google_ads_iframe"], iframe[src^="http://ad.yieldmanager.com/"], [id*="ScriptRoot"], a[href*=".trust.zone"], #rc-row-container, .rc-item-wrapper, AMP-AD, .ddb, .trc_rbox .syndicatedItem, .trc_rbox_border_elm .syndicatedItem, .trc_rbox_div .syndicatedItem, .trc_related_container div[data-item-syndicated="true"], .socialBar, #share_button, #socialize, .fb-like, .meta-share, .social-sidebar, .social2, .socialwrap, #WerbungObenRechts8_GesamtDIV, #werbeleiste, #werbung, .Werbung, .WerbungLinksRechts, .firstload, .text_werbung, .werbeblock, .werbung, .adv_esterno, .pubblicita { display: none!important; }
</style>
<script src="./Adguard Assistant" type="text/javascript" nonce="78B747448AE34E12A01B2004B8604D5D"></script>
<!-- End: injected by AdGuard -->
<script type="text/javascript" mini="true">function initializeNS(a){var b=a.split(".");var d,e=window;for(var c=0;c<b.length;++c){d=e[b[c]];if(typeof(d)==="undefined"||!d){e[b[c]]=d={}}e=d}return d}function isNSexists(a){var b=a.split(".");var d=window;for(var c=0;c<b.length;++c){d=d[b[c]];if(typeof(d)==="undefined"||!d){return false}}return true}ISQ=initializeNS("ISQ");nanoRep=ISQ;ISQ.isOnPremise=(function(){try{if("cloud"==="onPremise"){return true}else{return false}}catch(a){return false}}());ISQ.version="4.68.1.304";var debugLevel=0;if(!Alloy){!function(a,b){"object"==typeof exports&&"undefined"!=typeof module?b():"function"==typeof define&&define.amd?define(b):b()}(0,function(){function b(c){var f=this.constructor;return this.then(function(e){return f.resolve(c()).then(function(){return e})},function(e){return f.resolve(c()).then(function(){return f.reject(e)})})}function j(){}function p(c){if(!(this instanceof p)){throw new TypeError("Promises must be constructed via new")}if("function"!=typeof c){throw new TypeError("not a function")}this._state=0,this._handled=!1,this._value=undefined,this._deferreds=[],q(c,this)}function k(c,f){for(;3===c._state;){c=c._value}0!==c._state?(c._handled=!0,p._immediateFn(function(){var l=1===c._state?f.onFulfilled:f.onRejected;if(null!==l){var i;try{i=l(c._value)}catch(e){return void g(f.promise,e)}m(f.promise,i)}else{(1===c._state?m:g)(f.promise,c._value)}})):c._deferreds.push(f)}function m(c,f){try{if(f===c){throw new TypeError("A promise cannot be resolved with itself.")}if(f&&("object"==typeof f||"function"==typeof f)){var i=f.then;if(f instanceof p){return c._state=3,c._value=f,void d(c)}if("function"==typeof i){return void q(function(o,r){return function(){o.apply(r,arguments)}}(i,f),c)}}c._state=1,c._value=f,d(c)}catch(l){g(c,l)}}function g(c,f){c._state=2,c._value=f,d(c)}function d(c){2===c._state&&0===c._deferreds.length&&p._immediateFn(function(){c._handled||p._unhandledRejectionFn(c._value)});for(var f=0,i=c._deferreds.length;i>f;f++){k(c,c._deferreds[f])}c._deferreds=null}function q(c,f){var l=!1;try{c(function(n){l||(l=!0,m(f,n))
},function(n){l||(l=!0,g(f,n))})}catch(i){if(l){return}l=!0,g(f,i)}}var a=setTimeout;p.prototype["catch"]=function(c){return this.then(null,c)},p.prototype.then=function(c,i){var f=new this.constructor(j);return k(this,new function(l,o,r){this.onFulfilled="function"==typeof l?l:null,this.onRejected="function"==typeof o?o:null,this.promise=r}(c,i,f)),f},p.prototype["finally"]=b,p.all=function(c){return new p(function(s,w){function u(n,o){try{if(o&&("object"==typeof o||"function"==typeof o)){var r=o.then;if("function"==typeof r){return void r.call(o,function(f){u(n,f)},w)}}v[n]=o,0==--l&&s(v)}catch(i){w(i)}}if(!c||"undefined"==typeof c.length){throw new TypeError("Promise.all accepts an array")}var v=Array.prototype.slice.call(c);if(0===v.length){return s([])}for(var l=v.length,e=0;v.length>e;e++){u(e,v[e])}})},p.resolve=function(c){return c&&"object"==typeof c&&c.constructor===p?c:new p(function(e){e(c)})},p.reject=function(c){return new p(function(e,f){f(c)})},p.race=function(c){return new p(function(e,l){for(var f=0,i=c.length;i>f;f++){c[f].then(e,l)}})},p._immediateFn="function"==typeof setImmediate&&function(c){setImmediate(c)}||function(c){a(c,0)},p._unhandledRejectionFn=function(c){void 0!==console&&console&&console.warn("Possible Unhandled Promise Rejection:",c)};var h=function(){if("undefined"!=typeof self){return self}if("undefined"!=typeof window){return window}if("undefined"!=typeof global){return global}throw Error("unable to locate global object")}();"Promise" in h?h.Promise.prototype["finally"]||(h.Promise.prototype["finally"]=b):h.Promise=p});var Alloy=(function alloy_wrapper(){var Alloy={runningMode:window.ISQ&&ISQ.isOnPremise?0:0,version:"0.41"};var $internals={};var exports=[];Alloy.inject=function(func,context){func.apply(context||window,[$internals])};exports["Alloy.inject"]=Alloy.inject;String.prototype.equals=function(string,startingIndex,ignoreCase){if(!startingIndex){startingIndex=0}if(startingIndex+string.length>this.length){return false}var ndx=0;var max=startingIndex+string.length;for(var i=startingIndex;
i<max;++i,++ndx){var c1=this.charCodeAt(i);var c2=string.charCodeAt(ndx);if(c1==c2){continue}if(!ignoreCase){return false}if(c1>90){c1-=32}if(c2>90){c2-=32}if(c1!=c2){return false}}return true};String.prototype.startsWith=function(sub){if(this.length<sub.length){return false}for(var i=0;i<sub.length;++i){if(this.charAt(i)!==sub.charAt(i)){return false}}return true};String.prototype.endsWith=function(sub){if(this.length<sub.length){return false}var subNdx=sub.length-1;for(var i=this.length-1;i>this.length-1-sub.length;--i){if(sub.charAt(subNdx--)!==this.charAt(i)){return false}}return true};String.prototype.contains=function(txt){return this.indexOf(txt)!==-1};String.prototype.contains_ci=function(txt){if(txt.length>this.length){return false}var max=this.length-txt.length+1;for(var i=0;i<max;++i){var j;for(j=0;j<txt.length;++j,++i){var c1=this.charCodeAt(i);var t1=txt.charCodeAt(j);if(c1===t1){continue}if(c1>96&&c1<123){c1-=32}if(t1>96&&t1<123){t1-=32}if(c1!==t1){break}}if(j===txt.length){return true}}return false};String.prototype.Trim=function(sub){if(sub){var startAt=this.startsWith_repeat(sub);if(startAt<this.length){var endAt=this.endsWith_repeat(sub);if(startAt!=0||endAt!=this.length-1){return this.substring(startAt,endAt+1)}else{return this.toString()}}else{return""}}else{var index=0;var endIndex=this.length;for(;/\s/.test(this.charAt(index))&&index<endIndex;++index){}if(index==endIndex){return""}for(;/\s/.test(this.charAt(endIndex-1));--endIndex){}if(index==0&&endIndex==this.length){return String(this)}return this.substring(index,endIndex)}};String.prototype.startsWith_repeat=function(sub){if(this.length<sub.length){return 0}var x=0;var i=0;for(;i<this.length;i++){if(this.charAt(i)!=sub.charAt(x)){i-=x;break}if(x==sub.length-1){x=0}else{x++}}return i};String.prototype.endsWith_repeat=function(sub){if(this.length<sub.length){return this.length}var x=sub.length-1;var i=this.length-1;for(;i>0;i--){if(this.charAt(i)!=sub.charAt(x)){i+=x;break}if(x==0){x=sub.length-1}else{x--}}return i};Alloy.Base=function Class(){};
Alloy.Base.polymorphismCtor=function(scope,args){if(this.mBase!==null&&typeof(this.mBase.prototype.polymorphismCtor)==="function"){this.initBase.apply(this,args);this.mBase.prototype.polymorphismCtor(scope,args)}if(this.ctor!==this.mBase.prototype.ctor){this.ctor.apply(scope,args)}};Alloy.Base.extend=function(obj){var derived=function(){if(typeof(obj)==="object"&&obj.abstractClass&&this instanceof derived){throw ("Trying to create an instance of an abstract class")}if(this.mBase!==null&&typeof(this.mBase.abstractClass)==="object"){for(var m in this.mBase.abstractClass){if(typeof(this[m])!=="function"){throw ("un-implemented abstract method: "+m)}}}this.polymorphismCtor(this,arguments);if(Alloy.runningMode>2){profiler.registerObjectCreation(this)}};for(var n in obj){switch(n){case"name":case"prototype":case"abstractClass":continue}derived[n]=obj[n]}for(var n in this.prototype){derived.prototype[n]=this.prototype[n]}if(obj._prototype){for(var n in obj._prototype){derived.prototype[n]=obj._prototype[n]}}if(typeof(obj)==="object"&&obj.abstractClass){derived.abstractClass={}}derived.prototype.polymorphismCtor=Alloy.Base.polymorphismCtor;derived.extend=this.extend;derived.prototype.mBase=this;if(typeof(obj)!=="object"||typeof(obj.name)!=="string"){throw ("Class name is missing (ctorObject.name)")}var className=obj.name.replace(/^\s+|\s+$/g,"");if(!className){throw ("Invalid class name")}derived.prototype.__className__=derived.__className__=className;return derived};Alloy.Base.__className__="Base Class";Alloy.Base.prototype.__className__="Base Class";Alloy.Base.prototype.mBase=null;Alloy.Base.prototype.mIsDisposed=false;Alloy.Base.prototype.ctor=function(){};Alloy.Base.prototype.dtor=function(){delete this.mBase};Alloy.Base.prototype.initBase=function(){};Alloy.Base.prototype.isDisposed=function(){return this.mIsDisposed};Alloy.Base.prototype.executeBaseMethod=function(methodName,args){if(!this.mBase){throw ("Alloy.Base.prototype.executeBaseMethod: no base!")}this.mBase.prototype[methodName].apply(this,args||[])};Alloy.Base.prototype.dispose=function(){if(this.mIsDisposed){return false
}this.mIsDisposed=true;var lastDtor=this.dtor;var result=this.dtor.apply(this,arguments);if(result===false){this.mIsDisposed=false;return false}if(Alloy.runningMode>2){profiler.registerObjectDisposal(this)}var current=this.mBase;while(current!==null){if(current.prototype.dtor!==lastDtor){current.prototype.dtor.apply(this,arguments);lastDtor=current.prototype.dtor}current=current.prototype.mBase}this.__dispose__();return true};Alloy.Base.prototype.__dispose__=function(){for(var i in this){try{switch(i){case"mBase":case"__dispose__":case"polymorphismCtor":case"extend":case"__className__":continue;break}if(typeof(this[i])==="undefined"||this[i]===null){continue}if(typeof(this[i])!=="function"&&typeof(this[i])!=="object"){continue}if(typeof(this[i].dispose)==="function"){this[i].dispose()}if(this[i] instanceof Array){for(var j in this[i]){if(this[i][j]&&typeof(this[i][j].dispose)==="function"){this[i][j].dispose()}}}delete this[i]}catch(e){if(Alloy.runningMode>1){alert("base::__dispose__: error disposing:"+i+". "+e.message)}}}};Alloy.Base.prototype.isDerivedOf=function(base,dontCountInstanceOfBase){dontCountInstanceOfBase=dontCountInstanceOfBase===true;if(dontCountInstanceOfBase&&this.__className__===base.__className__){return false}if(this.__className__===base.__className__){return true}var result=false;var current=this.mBase;while(current!==null&&!result){if(base.__className__===current.__className__){result=true}current=current.prototype.mBase}return result};Alloy.Base.isDerivedOf=function(_object,base){if(_object===null){return false}if(typeof(_object)!=="object"||typeof(_object.isDerivedOf)!=="function"){return false}return _object.isDerivedOf(base)};Alloy.Event=Alloy.Base.extend({name:"Event"});Alloy.Event.prototype.ctor=function(){this.mCount=0};Alloy.Event.prototype.dtor=function(){if(this.handlers!==null){var l=this.handlers.length;for(var i=0;i<l;++i){if(this.handlers[i]!==null){this.handlers[i].dispose()}}delete this.handlers}this.handlers=null};Alloy.Event.prototype.handlers=null;Alloy.Event.prototype.mCount=0;
Alloy.Event.prototype.mRemovedHandler=false;Alloy.Event.prototype.dispatch=function(){if(this.isDisposed()){return}if(this.handlers===null){return}var l=this.handlers.length;for(var i=0;i<l;++i){if(this.isDisposed()){return}var handler=this.handlers[i];try{if(!handler){continue}if(handler.isDisposed()){this.mRemovedHandler=true;this.handlers[i]=null}else{handler.handle.apply(handler,arguments)}}catch(e){if(Alloy.runningMode){throw (e)}}}if(this.isDisposed()){return}if(this.mRemovedHandler){this.cleanDisposedHandlers()}};Alloy.Event.prototype.cleanDisposedHandlers=function(){if(!this.mRemovedHandler){return}var l=this.handlers.length;for(var i=0;i<l;++i){if(this.handlers[i]===null){this.handlers.splice(i,1);--i;--l}}this.mRemovedHandler=false};Alloy.Event.prototype.clear=function(){if(!this.handlers){return}var l=this.handlers.length;for(var i=0;i<l;++i){this.handlers[i].dispose()}this.handlers=null};Alloy.Event.prototype.addHandlerObject=function(handlerObj){if(this.isDisposed()){return}if(this.handlers===null){this.handlers=new Array()}var l=this.handlers.length;for(var i=0;i<l;++i){var handle=this.handlers[i];if(handle!==null&&handle.func===handlerObj.func&&handle.context===handlerObj.context){return}}this.handlers.push(handlerObj);++this.mCount;this.cleanDisposedHandlers();return handlerObj};Alloy.Event.prototype.addHandler=function(func,context){if(this.isDisposed()){return}if(this.handlers===null){this.handlers=new Array()}var l=this.handlers.length;for(var i=0;i<l;++i){var handle=this.handlers[i];if(handle!==null&&handle.func===func&&handle.context===context){return}}var handler=new Alloy.Handler(func,context);this.handlers.push(handler);++this.mCount;func=null;context=null;this.cleanDisposedHandlers();return handler};Alloy.Event.prototype.removeHandlerObject=function(handler){if(this.handlers===null){return}var l=this.handlers.length;var handleObject=null;var i;for(i=0;i<l;++i){if(this.handlers[i]===handler){--this.mCount;this.handlers[i]=null;break}}this.mRemovedHandler=true;handler.dispose()};Alloy.Event.prototype.removeHandler=function(func,context){if(this.handlers===null){return
}context=context||null;var l=this.handlers.length;var handleObject=null;var i;for(i=0;(i<l&&handleObject===null);++i){if(this.handlers[i]!==null&&this.handlers[i].func===func&&this.handlers[i].context===context){handleObject=this.handlers[i];this.handlers[i]=null;--this.mCount;break}}this.mRemovedHandler=true;if(handleObject!==null){handleObject.dispose()}func=null;context=null};Alloy.Event.prototype.removeAllHandlers=function(){if(this.handlers===null){return}this.handlers=null};Alloy.Event.prototype.count=function(){return this.mCount};Alloy.Handler=Alloy.Base.extend({name:"Alloy.Handler"});Alloy.Handler.toHandler=function(func){if(Alloy.Base.isDerivedOf(func,Alloy.Handler)){return func}return new Alloy.Handler(func)};Alloy.Handler.prototype.ctor=function(func,context){func=func||null;context=context||null;if(typeof(func)!=="function"){throw ("Error creating event handler: no function is passed")}this.func=func;this.context=context;return this};Alloy.Handler.prototype.dtor=function(){delete this.func;delete this.context;this.func=null;this.context=null};Alloy.Handler.prototype.handle=function(){return this.func.apply(this.context,arguments)};Alloy.Handler.prototype.handleArgumentArray=function(){if(arguments.length===0){throw ("invalid use of Alloy.Handler.handleArgumentArray")}if(typeof(arguments[0].length)!=="number"){throw ("invalid array in Alloy.Handler.handleArgumentArray")}return this.func.apply(this.context,arguments[0] instanceof Array?arguments[0]:[arguments[0]])};Alloy.Handler.prototype.func=null;Alloy.Handler.prototype.context=null;Alloy.Timer=Alloy.Base.extend({name:"Alloy.Timer"});Alloy.Timer.prototype.ctor=function(handler,disposeAfterElapsed){if(!Alloy.Base.isDerivedOf(handler,Alloy.Handler)){throw ("Alloy.Timer.ctor: invalid handler")}this.mHandler=handler;this.mDisposeAfterTimerElapsed=disposeAfterElapsed!==false;this.mParams=new Array();if(arguments.length<=2){return}for(var i=2;i<arguments.length;++i){this.mParams.push(arguments[i])}};Alloy.Timer.prototype.dtor=function(){this.start=null;if(this.mTimer){clearTimeout(this.mTimer);
this.mTimer=null}};Alloy.Timer.prototype.start=function(interval){if(typeof(interval)!=="number"){throw ("Timer interval illegal")}if(arguments.length>1){this.mParams=new Array();for(var i=1;i<arguments.length;++i){this.mParams.push(arguments[i])}}var thisObject=this;this.mTimer=setTimeout(function(){if(thisObject.mTimer===null){return}thisObject.timerElapsed.apply(thisObject,new Array())},interval)};Alloy.Timer.prototype.timerElapsed=function(){this.mHandler.handleArgumentArray(this.mParams);if(this.mDisposeAfterTimerElapsed){this.dispose()}};Alloy.Timer.prototype.cancel=function(){if(this.mTimer===null){return}clearTimeout(this.mTimer);this.mTimer=null};Alloy.Timer.prototype.isRunning=function(){return this.mTimer!==null};Alloy.Timer.prototype.mDisposeAfterTimerElapsed=true;Alloy.Timer.prototype.mTimer=null;Alloy.Timer.prototype.mHandler=null;Alloy.Timer.prototype.mParams=null;$internals.Utils={clone:function Alloy_clone(obj,deep){var target;if(obj===null){return null}if(obj instanceof Array){target=new Array(obj.length);var l=obj.length;while(l--){if(deep){target[l]=Alloy.clone(obj[l],true)}else{target[l]=obj[l]}}return target}else{if(typeof(obj)=="object"){target={};for(var i in obj){if(deep){target[i]=Alloy.clone(obj[i],true)}else{target[i]=obj[i]}}return target}else{return obj}}},compare:function Alloy_compare(obj1,obj2){if(typeof(obj1)!=typeof(obj2)){return false}if(obj1 instanceof Array){if(!(obj2 instanceof Array)){return false}var l=obj1.length;if(obj2.length!=l){return false}while(l--){if(!this.compare(obj1[l],obj2[l])){return false}}return true}else{if(typeof(obj1)=="object"){for(var l in obj1){if(!this.compare(obj1[l],obj2[l])){return false}}return true}else{return obj1==obj2}}},compareArrays:function(arr1,arr2){if(!arr1){if(!arr2){return true}return false}if(!arr2){return false}var l=arr1.length;if(l!==arr2.length){return false}while(l--){if(arr1[l]!==arr2[l]){return false}}return true},inArray:function Alloy_inArray(arr,val,length){var l=length||arr.length;while(l--){if(arr[l]===val){return true}}return false
},insertUniqueToArray:function Alloy_insertUniqueToArray(arr,val){var l=arr.length;while(l--){if(arr[l]===val){return}}arr.push(val)},priorToIE9:(function Alloy_priorToIE9(){var _index;if((_index=navigator.appVersion.indexOf("MSIE "))!==-1){_index+=5;var c=navigator.appVersion.charAt(_index);return c=="8"||c=="7"||c=="6"}return false})(),priorToIE11:(function priorToIE11(){var _index;return navigator.appVersion.indexOf("MSIE ")!==-1})(),removeElement:function Alloy_removeElement(element){element.parentNode.removeChild(element)},replaceDomElement:function replaceDomElement(target,source){var p=source.parentNode;if(!p){return target}p.replaceChild(target,source);return target},copyAttributes:function alloy_copyAttributes(source,target,override){var attrLen=source.attributes.length;if(source.attributes){while(attrLen--){var attrib=source.attributes[attrLen];if(!override&&target.getAttribute(attrib.name)){continue}if(attrib.specified){target.setAttribute(attrib.name,attrib.value)}}}},eval:function alloy_eval(str){try{return eval(str)}catch(e){return null}},compileCSS:function Alloy_compileCSS(styleContent){var styleNode=document.createElement("style");styleNode.type="text/css";document.getElementsByTagName("head")[0].appendChild(styleNode);if($internals.Utils.priorToIE11&&styleNode.styleSheet){styleNode.styleSheet.cssText=styleContent}else{var styleTextNode=document.createTextNode(styleContent);styleNode.appendChild(styleTextNode)}return styleNode},isNSexists:function(_namespace){var _split=_namespace.split(".");var obj=window;for(var i=0;i<_split.length;++i){obj=obj[_split[i]];if(typeof(obj)==="undefined"||!obj){return false}}return true}};Alloy.isPlainObject=function(o){if(Object.prototype.toString.call(o)!=="[object Object]"){return false}var ctor,prot;ctor=o.constructor;if(typeof ctor!=="function"){return false}prot=ctor.prototype;if(prot!==Object.prototype){return false}return true};Alloy.contains=$internals.Utils.inArray;Alloy.insertUnique=$internals.Utils.insertUniqueToArray;Alloy.clone=$internals.Utils.clone;Alloy.compare=$internals.Utils.compare;
exports["Alloy.$di"]=Alloy.$di=(function Alloy_DI(){var ALREADY_DOWNLOADED={};var cache={};var downloadFile=function Alloy_di_downloadFile(path,handler){Alloy.ajax({url:path,method:"GET",timeout:5000,handler:function(status,text){handler(status,text,path)}})};var refactorScriptToTemplate=window.myReplace=function(text){var lastPos=0;var ndx=text.indexOf("<script ",lastPos);if(ndx==-1){return text}var newText=new Array(5);while(ndx!=-1){newText.push(text.substring(lastPos,ndx));var endNdx=text.indexOf(">",ndx);if(endNdx===-1){return text}var tagNdx=text.indexOf(" alloy-tag=",ndx);if(tagNdx>ndx&&tagNdx<endNdx){newText.push("<div ie-hack='1' ");lastPos=ndx+"<script ".length;var scriptEndNdx=endNdx;var scriptStNdx=endNdx;do{var tmpNdx;do{tmpNdx=text.indexOf("/script>",scriptEndNdx);if(tmpNdx===-1){return text}if(text.charAt(--tmpNdx)=="<"){break}else{scriptEndNdx=tmpNdx+5}}while(true);var inlineScriptNdx=text.indexOf("<script",scriptStNdx);if(inlineScriptNdx!==-1&&inlineScriptNdx<tmpNdx){scriptStNdx=inlineScriptNdx+=4;scriptEndNdx=tmpNdx+10}else{newText.push(text.substring(lastPos,tmpNdx));newText.push("</div>");lastPos=tmpNdx+10;break}}while(true)}ndx=text.indexOf("<script ",lastPos)}newText.push(text.substring(lastPos));return newText.join("")};var compileHTML=function compileHTML(templateName,text){if(!text){return"File is empty"}if($internals.Utils.priorToIE9){text=refactorScriptToTemplate(text)}var div=document.createElement("div");div.innerHTML=text;try{var processed=false;var error=null;for(var i=0;i<div.childNodes.length;++i){var cn=div.childNodes[i];if(cn.nodeName==="ALLOY-TEMPLATE"){processed=true;var x=cn.getAttribute("alloy-tag");if(!x){continue}$internals.Templates.set(x,cn.innerHTML)}else{if(cn.nodeName==="SCRIPT"){processed=true;var x=cn.getAttribute("type");if(x==="text/alloy"){x=cn.getAttribute("alloy-tag");if(!x){continue}$internals.Templates.set(x,cn.innerHTML)}else{error=compileScript(cn.innerHTML)}}else{if($internals.Utils.priorToIE9&&cn.nodeName==="DIV"&&cn.getAttribute("ie-hack")==="1"){processed=true;
var x=cn.getAttribute("alloy-tag");if(!x){continue}$internals.Templates.set(x,cn.innerHTML)}else{if(cn.nodeName==="STYLE"){processed=true;$internals.Utils.compileCSS(text)}}}}}if(templateName&&!processed){$internals.Templates.set(templateName,text)}return error}catch(e){return"Failed processing HTML file: "+e}};var compileScript=function compileScript(script,path){if(path&&path!==""){script+="//# sourceURL=https://"+window.location.hostname+(path[0]!=="/"?"/":"")+path}try{var scriptTag=document.createElement("script");scriptTag.type="text/javascript";scriptTag.charset="utf-8";scriptTag.id="testing";scriptTag.defer=true;scriptTag.async=true;scriptTag.text=script;document.getElementsByTagName("head")[0].appendChild(scriptTag);return null}catch(e){try{eval(script);return null}catch(e){try{eval("("+script+")");return null}catch(e){return e}}}};return function Alloy_$di(arr,handler){var resultArr=new Array(arr.length);var totalReceived=0;var fileHandler=function(index,status,text,path){resultArr[index]={status:status,text:text,path:path};if(++totalReceived!==arr.length){return}for(var i=0;i<arr.length;++i){var arrItem=resultArr[i];var path=arr[i];if(arrItem.text===ALREADY_DOWNLOADED){arrItem.status=true}else{if(arrItem.status!==Alloy.Com.SUCCESS){arrItem.status=false;arrItem.error="Request failed"}else{if(path.endsWith(".js")){arrItem.error=compileScript(arrItem.text,path);if(!arrItem.error){arrItem.status=true}else{arrItem.status=false}}else{if(path.endsWith(".css")){$internals.Utils.compileCSS(arrItem.text);arrItem.status=true}else{arrItem.error=compileHTML(arrItem.name,arrItem.text);if(!arrItem.error){arrItem.status=true}else{arrItem.status=false}}}}}arrItem.text=null;if(arrItem.status){cache[arrItem.path]=ALREADY_DOWNLOADED}}handler(resultArr)};var generatedHandler;for(var i=0;i<arr.length;++i){generatedHandler=(function(i){return function(status,text,path){fileHandler(i,status,text,path)}})(i);var cacheValue=cache[arr[i]];if(cacheValue){generatedHandler(Alloy.Com.SUCCESS,cacheValue)}else{downloadFile(arr[i],generatedHandler)
}}}})();$internals.Templates=(function Alloy_initTemplates(){var handleTemplate=function handleTemplate(name,html){var pos=0;while(pos<html.length){var c=html.charCodeAt(pos);if(c==9||c==32||c==10||c==13){++pos;continue}break}var endPos=html.length;while(endPos>pos){var c=html.charCodeAt(endPos-1);if(c==9||c==32||c==10||c==13){--endPos;continue}break}var div=document.createElement("div");document.documentElement.appendChild(div);div.innerHTML=html.substring(pos,endPos);var fragment=document.createDocumentFragment();var l=div.childNodes.length;for(var j=0;j<l;++j){fragment.appendChild(div.firstChild)}if(recursiveFunc){document.createElement(name);document.createElement(name.toUpperCase());document.createElement(name.toLowerCase());recursiveFunc(fragment)}div.parentNode.removeChild(div);templates[name.toUpperCase()]=fragment};var recursiveFunc=null;if($internals.Utils.priorToIE9){recursiveFunc=function recursiveFunc_(dom){if(dom.nodeName.charAt(0)=="#"){return}document.createElement(dom.nodeName);document.createElement(dom.nodeName.toLowerCase());document.createElement(dom.nodeName.toUpperCase());if(dom.tagName){document.createElement(dom.tagName);document.createElement(dom.tagName.toLowerCase());document.createElement(dom.tagName.toUpperCase())}var l=dom.childNodes.length;while(l--){recursiveFunc_(dom.childNodes[l])}};document.createElement("alloy-embedded-data");document.createElement("alloy-template")}$internals.Utils.compileCSS("alloy-embedded-data {display:none}");$internals.Utils.compileCSS("ALLOY-EMBEDDED-DATA {display:none}");var templates={};var scripts=document.getElementsByTagName("script");for(var i=0;i<scripts.length;i++){if(scripts[i].getAttribute("type")!="text/alloy"){continue}var tag=scripts[i].getAttribute("alloy-tag");handleTemplate(tag,scripts[i].innerHTML);$internals.Utils.removeElement(scripts[i--])}return{get:function getTemplate(domElement){var templateName;if(typeof(domElement)==="string"){templateName=domElement.toUpperCase()}else{templateName=domElement.attributes?domElement.getAttribute("alloy-template"):null;
if(!templateName){templateName=domElement.tagName}if(!templateName){return null}templateName=templateName.toUpperCase()}return templates[templateName]},set:function(tag,html){handleTemplate(tag,html)},exists:function(tag){return templates[tag.toUpperCase()]!==undefined}}})();Alloy.injectTemplate=$internals.Templates.set;Alloy.getTemplate=$internals.Templates.get;var lastId=0;var ModelTrieNode=$internals.ModelTrieNode=function ModelTrieNode(word,parent,type){this.word=word;this.parent=parent;this.id=++lastId;this.type=type||0};ModelTrieNode.prototype.toHtml=function(builder){if(!builder){builder=[]}var value=typeof(this.modelValue)==="object"?"object":this.modelValue;builder.push("<span>"+this.word+"="+value+" ("+this.id+")<span>");if(this.nodes){for(var i=0;i<this.nodes.length;++i){builder.push("<div style='padding:5px 45px'>");this.nodes[i].toHtml(builder);builder.push("</div>")}}return builder};ModelTrieNode.prototype.tryCreateNode=function(word){var parsedValue=parseInt(word,10);var key;if(isNaN(parsedValue)){key=word}else{key=parsedValue}if(this.nodesHash){var index=this.nodesHash[key];if(index||index===0){return this.nodes[index]}}else{this.nodesHash={};this.nodes=[]}var newNode=new ModelTrieNode(key,this,0);this.nodesHash[key]=this.nodes.length;this.nodes.push(newNode);return newNode};ModelTrieNode.prototype.createLoopIterationNode=function(id){var node=this.tryCreateNode(id);node.type=2;return node};ModelTrieNode.prototype.createFixedValueNode=function(value){var key="$$"+(this.nodes?this.nodes.length:0);if(!this.nodesHash){this.nodesHash={};this.nodes=[]}var newNode=new ModelTrieNode(key,this,1);newNode.modelValue=value;this.nodesHash[key]=this.nodes.length;this.nodes.push(newNode);return newNode};ModelTrieNode.prototype.addDependency=function(domPointer,expression){if(!this.dependents){this.dependents=[]}this.dependents.push({domPointer:domPointer,expression:expression})};ModelTrieNode.prototype.addDependentScope=function(scope){if(!this.dependentScopes){this.dependentScopes=[]}this.dependentScopes.push(scope)
};ModelTrieNode.prototype.addPriorNode=function(node){if(!this.priorUpdateNodes){this.priorUpdateNodes=[]}this.priorUpdateNodes.push(node)};ModelTrieNode.prototype.id=-1;ModelTrieNode.prototype.type=0;ModelTrieNode.prototype.word=null;ModelTrieNode.prototype.parent=null;ModelTrieNode.prototype.generation=0;ModelTrieNode.prototype.nodes=null;ModelTrieNode.prototype.nodesHash=null;ModelTrieNode.prototype.dependents=null;ModelTrieNode.prototype.modelValue=null;ModelTrieNode.prototype.dependentScopes=null;ModelTrieNode.prototype.pendingUpdateNodes=null;ModelTrieNode.prototype.priorUpdateNodes=null;var ActiveLoop=$internals.ActiveLoop=function ActiveLoop(loopContent,trieNode,parent,index){this.loopContent=loopContent;this.trieNode=trieNode;this.parent=parent;this.index=index;if(!this.parent){this.depth=1}else{this.depth=this.parent.depth+1}};ActiveLoop.prototype.loopContent=null;ActiveLoop.prototype.depth=-1;ActiveLoop.prototype.index=-1;ActiveLoop.prototype.trieNode=null;ActiveLoop.prototype.parent=null;var DomPointer=$internals.DomPointer=function DomPointer(element,attribute,contentInfo){this.element=element;this.attribute=attribute;this.contentInfo=contentInfo;this.id=++lastId};DomPointer.prototype.addDependent=function(modelNode,expression){if(!this.dependents){this.dependents=[]}this.dependents.push({modelNode:modelNode,expression:expression})};DomPointer.prototype.element=null;DomPointer.prototype.attribute=null;DomPointer.prototype.contentInfo=null;DomPointer.prototype.id=-1;DomPointer.prototype.updateCycle=0;DomPointer.prototype.dependents=null;var LoopContent=$internals.LoopContent=function LoopContent(){this.id=++lastId;this.collectionName={start:-1,end:-1}};LoopContent.prototype.filter=null;LoopContent.prototype.id=null;LoopContent.prototype.sorter=null;LoopContent.prototype.elementName=null;LoopContent.prototype.collectionName=null;LoopContent.prototype.limit=null;LoopContent.prototype.thisIndex=-1;LoopContent.prototype.parentLoop=null;LoopContent.prototype.iterator=null;LoopContent.prototype.count=0;var TextContent=$internals.TextContent=function TextContent(value){this.value=value
};TextContent.prototype.value=null;var Expression=$internals.Expression=function Expression(type,index){if(type){this.type=type}if(index!==undefined){this.index=index}};Expression.prototype.index=null;Expression.prototype.type=null;Expression.prototype.compiled=null;var This=$internals.This=function This(trieNode,parentIndex){this.trieNode=trieNode;this.parentIndex=parentIndex};This.prototype.trieNode=null;This.prototype.parentIndex=-1;function Sorter(sortValue,dir){this.dir=dir;this.sortValue=sortValue;this.mergeSort=new Alloy.MergeSort();this.mergeSortString=new Alloy.MergeSort_String();if(sortValue){this.mergeSortString.$comparer=function MergeSort_$comparer(a,b){return Alloy.MergeSort_String.strCmp(a[sortValue],b[sortValue])}}else{this.mergeSortString.$comparer=function MergeSort_$comparer(a,b){return Alloy.MergeSort_String.strCmp(a,b)}}}$internals.Sorter=Sorter;Sorter.map=[];Sorter.getSorter=function Sorter_getSorter(sortValue,dir){var key=sortValue+"_"+dir;var sorter=Sorter.map[key];if(!sorter){sorter=Sorter.map[key]=new Sorter(sortValue,dir)}return sorter};Sorter.prototype.sort=function Sorter_sort(collection){if(!collection||collection.length<2){return collection}if((this.sortValue&&typeof(collection[0][this.sortValue])=="string")||typeof(collection[0])==="string"){this.mergeSortString.sort(collection,this.dir!=="asc")}else{this.mergeSort.sort(collection,this.dir!=="asc")}return collection};Sorter.prototype.sortValue=null;Sorter.prototype.dir=null;Sorter.prototype.mergeSort=null;Sorter.prototype.mergeSortString=null;$internals.Parsers={__parseTextReusedObject:null,__evalLoopFilterBuilder:null,__getAlloyTextObjects:null,__getAlloyCompiledObjects:null,__refCount:0,initMemoryObjects:function(){if(++this.__refCount!==1){return}this.__parseTextReusedObject={html:null,results:null,resultsLength:0};this.__getAlloyTextObjects=[];this.__getAlloyCompiledObjects=[]},createCompiledObject:function(){return{value:null,textResultsCount:0,textResults:[],compiled:null}},createTextObject:function(){return{value:null,modelNode:null,varName:null}
},clearMemoryObjects:function(){if(--this.__refCount!==0){return}this.__parseTextReusedObject=null;this.__evalLoopFilterBuilder=null;this.__getAlloyTextObjects=null;this.__getAlloyCompiledObjects=null},variableCharacters:(function(){var arr=[];for(var i=65;i<=90;++i){arr[i]=1}for(var i=97;i<=122;++i){arr[i]=1}for(var i=48;i<=57;++i){arr[i]=1}arr[36]=1;arr[95]=1;return arr})(),tokenStartCharacters:(function(){var arr=[];for(var i=65;i<=90;++i){arr[i]=1}for(var i=97;i<=122;++i){arr[i]=1}arr[36]=1;return arr})(),variableCharacters_fullPath:(function(){var arr=[];for(var i=65;i<=90;++i){arr[i]=1}for(var i=97;i<=122;++i){arr[i]=1}for(var i=48;i<=57;++i){arr[i]=1}arr[95]=1;arr[46]=1;arr[36]=1;return arr})(),safeWords:(function(){var arr=[];arr["switch"]=1;arr["in"]=1;arr["for"]=1;arr["return"]=1;arr.window=1;arr["true"]=1;arr["false"]=1;arr.eval=1;arr["if"]=1;arr["else"]=1;return arr})(),getAlloyValue:function getAlloyValue(value,valueStart,valueEnd,scope,thisIndex,memoryObjectIndex){memoryObjectIndex=memoryObjectIndex||0;var result=this.getAlloyValue_text(memoryObjectIndex,value,valueStart,valueEnd,scope,thisIndex);if(result){var compiledObject=this.getReturnedCompiledValue(memoryObjectIndex);compiledObject.value=result.value;compiledObject.compiled=null;compiledObject.textResultsCount=1;if(compiledObject.textResults.length===0){compiledObject.textResults.push(result)}else{compiledObject.textResults[0]=result}return compiledObject}else{return this.getAlloyValue_compiled(memoryObjectIndex,value,valueStart,valueEnd,scope,thisIndex)}},getReturnedTextValue:function(objectIndex){if(this.__getAlloyTextObjects.length===objectIndex){this.__getAlloyTextObjects.push(this.createTextObject())}return this.__getAlloyTextObjects[objectIndex]},getReturnedCompiledValue:function(objectIndex){if(this.__getAlloyCompiledObjects.length===objectIndex){this.__getAlloyCompiledObjects.push(this.createCompiledObject())}return this.__getAlloyCompiledObjects[objectIndex]},getAlloyValue_text:function getAlloyValue_text(memoryObjectIndex,value,valueStart,valueEnd,scope,thisIndex){var pos=valueStart;
for(;pos<valueEnd&&value.charAt(pos)===" ";++pos){}for(;valueEnd>=valueStart&&value.charAt(valueEnd-1)===" ";--valueEnd){}var prevPos=pos;var stack_this=scope.$stack.$this;thisIndex=thisIndex===undefined?stack_this.length-1:thisIndex;var This;var firstSegment=true,inIterator=false;var stringEnd=valueEnd+1;var unknownValue,c;var tmpIndex,tmpNode,tmpPos,activeLoop;var modelTrieNode=scope.$dependencies;var obj;for(;pos!==stringEnd;++pos){if(pos!==valueEnd){c=value.charCodeAt(pos);if(!$internals.Parsers.variableCharacters_fullPath[c]){return false}}if(c===46||pos===valueEnd){if(firstSegment){var loopCount=scope.$stack.$activeLoops.count;firstSegment=false;if(value==="$phase"){obj=scope.$phase;modelTrieNode=scope.$dependencies.tryCreateNode("$phase");modelTrieNode.modelValue=obj}else{if(value.equals("this",prevPos)){obj=stack_this[thisIndex].trieNode.modelValue;modelTrieNode=stack_this[thisIndex].trieNode;modelTrieNode.modelValue=obj}else{if(value.equals("embedded",prevPos)){modelTrieNode=modelTrieNode.tryCreateNode("$embedded");obj=scope.$embedded;modelTrieNode.modelValue=obj}else{if(value.equals("model",prevPos)){modelTrieNode=modelTrieNode.tryCreateNode("$model");obj=scope.$model}else{if(value.equals("scope",prevPos)){modelTrieNode=modelTrieNode.tryCreateNode("$model");obj=scope.$model}else{if(value.equals("window",prevPos)){obj=window;modelTrieNode=scope.$dependencies.createFixedValueNode(obj)}else{if(value.equals("$parent",prevPos)){var parentIndex=thisIndex?stack_this[thisIndex].parentIndex:0;modelTrieNode=stack_this[parentIndex].trieNode;obj=modelTrieNode.modelValue}else{if(value.equals("$iterator",prevPos)){inIterator=true;obj=undefined;modelTrieNode=null}else{unknownValue=value.substring(prevPos,pos);if(loopCount!==0){do{activeLoop=scope.$stack.$activeLoops.array[loopCount];if(activeLoop.loopContent.elementName===unknownValue){modelTrieNode=activeLoop.trieNode;obj=modelTrieNode.modelValue;break}else{if(activeLoop.loopContent.iterator===unknownValue){obj=activeLoop.index;modelTrieNode=scope.$dependencies.createFixedValueNode(obj);
break}}if(--loopCount===0){break}}while(true)}if(obj===undefined){This=stack_this[thisIndex].trieNode;obj=This.modelValue[unknownValue];modelTrieNode=This.tryCreateNode(unknownValue);modelTrieNode.modelValue=obj}}}}}}}}}}else{if(inIterator){activeLoop=scope.$stack.$activeLoops.array[loopCount];if(value.equals("back",prevPos)){if(loopCount&&activeLoop.index){tmpNode=activeLoop.trieNode.parent;tmpIndex=tmpNode.nodesHash[activeLoop.index-1];modelTrieNode=tmpNode.nodes[tmpIndex];obj=modelTrieNode.modelValue}}else{if(value.equals("index",prevPos)){if(loopCount){obj=activeLoop.index;modelTrieNode=scope.$dependencies.createFixedValueNode(obj)}}else{if(value.equals("current",prevPos)){if(loopCount){modelTrieNode=activeLoop.trieNode;obj=modelTrieNode.modelValue}}else{if(value.equals("depth",prevPos)){if(loopCount){obj=loopCount;modelTrieNode=scope.$dependencies.createFixedValueNode(obj)}}else{if(value.equals("count",prevPos)){if(loopCount){modelTrieNode=activeLoop.loopContent.countNode;obj=modelTrieNode.modelValue}}}}}}inIterator=false}else{unknownValue=value.substring(prevPos,pos);if(obj){obj=obj[unknownValue]}if(modelTrieNode){if(modelTrieNode.type===1){modelTrieNode=modelTrieNode.createFixedValueNode(obj)}else{modelTrieNode=modelTrieNode.tryCreateNode(unknownValue);modelTrieNode.modelValue=obj}}}}prevPos=pos+1}}if(modelTrieNode===null){modelTrieNode=scope.$dependencies.createFixedValueNode(undefined)}var returnObject=this.getReturnedTextValue(memoryObjectIndex);returnObject.value=obj;returnObject.modelNode=modelTrieNode;return returnObject},getAlloyValue_compiled:function getAlloyValue_compiled(memoryObjectIndex,value,valueStart,valueEnd,scope,thisIndex){var term=value.substring(valueStart,valueEnd);var compiledObject=scope.$compiledEval[term];if(!compiledObject){compiledObject={};var str=["0, (function(vars){return "];compiledObject.vars=$internals.Parsers.parseExpression(term,str);str.push(";})");compiledObject.func=$internals.Utils.eval(str.join(""));scope.$compiledEval[term]=compiledObject}var result;var varArgument={};
var vars=compiledObject.vars;var returnCompiledObject=this.getReturnedCompiledValue(memoryObjectIndex);returnCompiledObject.textResultsCount=0;if(vars){var l=vars.length;while(l--){result=$internals.Parsers.getAlloyValue_text(memoryObjectIndex,vars[l],0,vars[l].length,scope,thisIndex);if(!result){throw ("Alloy: unable to get value = "+vars[l])}result.varName=vars[l];varArgument[vars[l]]=result.value;if(returnCompiledObject.textResultsCount===returnCompiledObject.textResults.length){returnCompiledObject.textResults.push($internals.Utils.clone(result,false))}else{returnCompiledObject.textResults[returnCompiledObject.textResultsCount]=$internals.Utils.clone(result,false)}returnCompiledObject.textResultsCount++}}returnCompiledObject.value=compiledObject.func(varArgument);returnCompiledObject.compiled=compiledObject.func;return returnCompiledObject},parseLoopStatement:function parseLoopStatement(value){var pos=0;var nextPos;var loopContent=new LoopContent();for(;value.charAt(pos)===" ";++pos){}for(nextPos=pos+1;value.charAt(nextPos)!==" ";++nextPos){}loopContent.elementName=value.substring(pos,nextPos);for(pos=nextPos+1;value.charAt(pos)===" ";++pos){}if(!value.equals("in ",pos)){throw"invalid syntax"}for(pos+=3;value.charAt(pos)===" ";++pos){}for(nextPos=pos;nextPos<value.length&&value.charAt(nextPos)!==" "&&value.charAt(nextPos)!=="|";++nextPos){}loopContent.collectionName.start=pos;loopContent.collectionName.end=nextPos;pos=nextPos;for(;pos<value.length&&value.charAt(pos)===" ";++pos){}if(pos===value.length){return loopContent}do{if(value.charAt(pos)!=="|"){throw"invalid syntax"}++pos;for(;value.charAt(pos)===" ";++pos){}for(nextPos=pos+1;nextPos<value.length&&value.charAt(nextPos)!==" ";++nextPos){}var segmentType=value.substring(pos,nextPos);for(pos=nextPos+1;pos<value.length&&value.charAt(pos)===" ";++pos){}for(nextPos=pos+1;nextPos<value.length;++nextPos){if(value.charAt(nextPos)==="|"){if(value.charAt(nextPos+1)==="|"){++nextPos;continue}break}}var trimmedEndPos;for(trimmedEndPos=nextPos;trimmedEndPos<value.length&&value.charAt(trimmedEndPos-1)===" ";
--trimmedEndPos){}if(segmentType==="WHERE"){loopContent.filter=value.substring(pos,trimmedEndPos)}else{if(segmentType==="ITERATOR"){loopContent.iterator=value.substring(pos,trimmedEndPos)}else{if(segmentType==="SORTASC"){loopContent.sorter=Sorter.getSorter(value.length>pos?value.substring(pos,trimmedEndPos):null,"asc")}else{if(segmentType==="SORTDESC"){loopContent.sorter=Sorter.getSorter(value.length>pos?value.substring(pos,trimmedEndPos):null,"desc")}else{if(segmentType==="LIMIT"){loopContent.limit={start:pos,end:trimmedEndPos}}}}}}pos=nextPos}while(pos<value.length);return loopContent},parseText:function parseText(html,scope,thisIndex,preDefinedValues){if(!html){return html}this.__parseTextReusedObject.resultsLength=0;var builder=null;var startIndex=0;var lastEndPos=0;while(startIndex<html.length){startIndex=html.indexOf("{{",lastEndPos);if(startIndex===-1){if(!builder){break}builder.push(html.substring(lastEndPos));break}if(!builder){builder=[]}builder.push(html.substring(lastEndPos,startIndex));lastEndPos=html.indexOf("}}",startIndex);if(lastEndPos===-1){builder.push(html.substring(startIndex));break}if(html.charAt(lastEndPos+2)==="}"){++lastEndPos}if(preDefinedValues){var value=preDefinedValues[this.__parseTextReusedObject.resultsLength];if(value!==undefined&&value.compiled){value=value.compiled(value.vars)}builder.push(value)}else{var parseInfo=$internals.Parsers.getAlloyValue(html,startIndex+2,lastEndPos,scope,thisIndex,this.__parseTextReusedObject.resultsLength);builder.push(parseInfo.value)}++this.__parseTextReusedObject.resultsLength;lastEndPos+=2}if(!builder){this.__parseTextReusedObject.html=html}else{this.__parseTextReusedObject.html=builder.join("")}this.__parseTextReusedObject.results=this.__getAlloyCompiledObjects;return this.__parseTextReusedObject},parseExpression:function parseExpression(expression,builder,fixedVars){var usedValues=[];var skipLocalVariables=[];var state=0;var c,quoteChar,token;var tokenStart=0,chainStart=0,firstChainTokenEnd;var lastInsertEndPos=0;var i=0,len=expression.length;var inReferenceChain=false;
do{switch(state){case 0:for(;i<len;i++){c=expression.charCodeAt(i);if(c===123){skipLocalVariables.push(null);continue}if(c===125){while(skipLocalVariables.pop()!==null){}continue}if($internals.Parsers.tokenStartCharacters[c]){tokenStart=i;state=1;break}if(c>47&&c<58){++i;state=6;break}if(c===34||c===39){++i;quoteChar=c;state=5;break}}break;case 1:for(;i<len;i++){c=expression.charCodeAt(i);if(!$internals.Parsers.variableCharacters[c]){if(!inReferenceChain){var token=expression.substring(tokenStart,i);if(c===32&&(token==="new"||token==="function"||token==="var")){++i;state=2;break}if(!$internals.Parsers.safeWords[token]&&!$internals.Utils.inArray(skipLocalVariables,token)){builder.push(expression.substring(lastInsertEndPos,tokenStart),"vars['");lastInsertEndPos=tokenStart}}switch(c){case 46:if(!inReferenceChain){chainStart=tokenStart;firstChainTokenEnd=i;inReferenceChain=true}tokenStart=++i;break;default:if(inReferenceChain){if(fixedVars&&(token=expression.substring(chainStart,firstChainTokenEnd))&&$internals.Utils.inArray(fixedVars,token)){builder.push(token);builder.push("']");builder.push(expression.substring(firstChainTokenEnd,i));lastInsertEndPos=i;$internals.Utils.insertUniqueToArray(usedValues,token)}else{var tokenEndIndex=c===40?tokenStart-1:i;token=expression.substring(chainStart,tokenEndIndex);if(!token.startsWith("window.")){builder.push(token);builder.push("']");lastInsertEndPos=tokenEndIndex;$internals.Utils.insertUniqueToArray(usedValues,token)}}}else{if(!$internals.Parsers.safeWords[token]&&!$internals.Utils.inArray(skipLocalVariables,token)){builder.push(token);builder.push("']");lastInsertEndPos=i;$internals.Utils.insertUniqueToArray(usedValues,token)}}inReferenceChain=false;if(c===39||c===34){quoteChar=c;state=5}else{state=0}break}break}}break;case 5:var inEscateSequence=false;for(;i<len;i++){if(inEscateSequence){inEscateSequence=false;continue}c=expression.charCodeAt(i);if(c===92){inEscateSequence=true}if(c===quoteChar){++i;state=0;break}}break;case 6:var inEscateSequence=false;for(;i<len;i++){c=expression.charCodeAt(i);
if((c>57||c<48)&&c!==46){++i;state=0;break}}break;case 2:for(;i<len&&expression.charCodeAt(i)===32;i++){}tokenStart=i;for(;i<len;i++){c=expression.charCodeAt(i);if(!((c>96&&c<123)||(c>64&&c<91)||(c>47&&c<58))){var token=expression.substring(tokenStart,i);skipLocalVariables.push(token);state=0;break}}break}}while(i<len);if(state===1){if(!inReferenceChain){token=expression.substring(tokenStart,i);if(!$internals.Parsers.safeWords[token]){if(!$internals.Utils.inArray(skipLocalVariables,token)){builder.push(expression.substring(lastInsertEndPos,tokenStart),"vars['");builder.push(token);builder.push("']");lastInsertEndPos=i;$internals.Utils.insertUniqueToArray(usedValues,token)}}}else{if(lastInsertEndPos!==chainStart){builder.push(expression.substring(lastInsertEndPos,chainStart))}if(fixedVars&&(token=expression.substring(chainStart,firstChainTokenEnd))&&$internals.Utils.inArray(fixedVars,token)){builder.push(token);builder.push("']");builder.push(expression.substring(firstChainTokenEnd,i));lastInsertEndPos=i}else{token=expression.substring(chainStart,i);if(!token.startsWith("window.")){builder.push(token);builder.push("']");lastInsertEndPos=i}else{lastInsertEndPos=chainStart}}if(!$internals.Parsers.safeWords[token]&&!token.startsWith("window")){$internals.Utils.insertUniqueToArray(usedValues,token)}}}if(lastInsertEndPos!==len){builder.push(expression.substring(lastInsertEndPos,len))}return usedValues}};$internals.Binder=(function(){var promise=Promise.all([]);var nextTick=function(cb){promise.then(cb)};function bindLoop(loopStatement,domElement,scope,thisIndex){var comment=document.createComment(loopStatement);$internals.Utils.replaceDomElement(comment,domElement);var loopContent=$internals.Parsers.parseLoopStatement(loopStatement);var getLoopCollectionResult,collection;if(loopContent.collectionName.start!==-1){getLoopCollectionResult=$internals.Parsers.getAlloyValue(loopStatement,loopContent.collectionName.start,loopContent.collectionName.end,scope,thisIndex);collection=getLoopCollectionResult.value}var ex;var domPointer=new DomPointer(domElement,null,loopContent);
var modelNode=getLoopCollectionResult.textResults[0].modelNode.createLoopIterationNode(loopContent.id);modelNode.addDependency(domPointer,new Expression("loop"));loopContent.thisIndex=thisIndex;loopContent.parentLoop=scope.$stack.$activeLoops.array[scope.$stack.$activeLoops.count];loopContent.repeatedElement=domElement;loopContent.commentElement=comment;if(loopContent.parentLoop){modelNode.addPriorNode(loopContent.parentLoop.trieNode)}if(loopContent.limit){var firstChar=loopStatement.charCodeAt(loopContent.limit.start);if(firstChar>=48&&firstChar<=57){loopContent.limit=loopStatement.substring(loopContent.limit.start,loopContent.limit.end)|0}else{var getInfo=$internals.Parsers.getAlloyValue(loopStatement,loopContent.limit.start,loopContent.limit.end,scope,thisIndex);if(getInfo.value!==undefined){loopContent.limit=getInfo.value;var alloyValueObject=getInfo.textResults[0];var exp=new Expression("loop-limit");if(getInfo.compiled){exp.compiled=getInfo.compiled;exp.varName=alloyValueObject.varName}alloyValueObject.modelNode.addDependency(domPointer,exp);modelNode.addPriorNode(alloyValueObject.modelNode)}}}if(loopContent.filter){getLoopFilter(loopContent,modelNode,scope,thisIndex);compileLoopFilterVars(loopContent.filter,scope)}modelNode.modelValue=collection=$internals.Utils.clone(collection,false);scope.$stack.$activeLoops.count++;if(collection&&collection.length){var processedItems=prepareLoopArray(collection,loopContent,modelNode);for(var i=0;i<processedItems;++i){loopItem(scope,loopContent,modelNode,collection[i],i)}}scope.$stack.$activeLoops.count--}function loopItem(scope,loopContent,collectionDependencyNode,collectionItem,index){if(!loopContent.commentElement.parentNode){return}var childDependencyNode=collectionDependencyNode.tryCreateNode(index);childDependencyNode.modelValue=collectionItem;var parentLoop=scope.$stack.$activeLoops.array[scope.$stack.$activeLoops.count-1];var activeLoop=new ActiveLoop(loopContent,childDependencyNode,parentLoop,index);if(scope.$stack.$activeLoops.array.length===scope.$stack.$activeLoops.count){scope.$stack.$activeLoops.array.push(activeLoop)
}else{scope.$stack.$activeLoops.array[scope.$stack.$activeLoops.count]=activeLoop}var clonedElement=loopContent.repeatedElement.cloneNode(true);loopContent.commentElement.parentNode.insertBefore(clonedElement,loopContent.commentElement);clonedElement=main(clonedElement,scope,loopContent.thisIndex);childDependencyNode.addDependency(new DomPointer(clonedElement),new Expression("ui-item"))}function prepareLoopArray(collection,loopContent,loopModelNode){var l=collection.length;var processedItems=0;var collectionItem;var skippedElements=0;var elementName=loopContent.elementName;for(var i=0;i<l;++i){collectionItem=collection[i];if(skippedElements){collection[i-skippedElements]=collectionItem}if(loopContent.filter){loopContent.filter.compiledVars[0][elementName]=collectionItem;if(!loopContent.filter.func.apply(null,loopContent.filter.compiledVars)){++skippedElements;continue}}++processedItems;if(loopContent.limit&&processedItems===loopContent.limit){break}}if(processedItems!==collection.length){collection=collection.slice(0,processedItems)}if(!loopContent.countNode){loopContent.countNode=loopModelNode.createFixedValueNode(processedItems)}else{loopContent.countNode.modelValue=processedItems}if(loopContent.sorter){loopModelNode.modelValue=collection=loopContent.sorter.sort(collection)}return processedItems}function optionItem(selectElement,optionsTrieNode,index,collectionItem,selected){var opt=document.createElement("option");if(typeof(collectionItem)==="object"){opt.innerHTML=collectionItem.html||collectionItem.text||collectionItem.value;opt.value=collectionItem.value||collectionItem.text||collectionItem.html;if(selected==collectionItem.value){opt.selected=true}}else{opt.innerHTML=opt.value=collectionItem;if(selected==collectionItem){opt.selected=true}}var trieNode=optionsTrieNode.tryCreateNode(index);trieNode.addDependency(new DomPointer(opt),new Expression("ui-item"));selectElement.appendChild(opt)}function attributes(domElement,scope,thisIndex){var attributesCount=domElement.attributes.length;if(!attributesCount){return
}var attrib,i,modelNode,events,ex,getValueResult,alloyValueObject;if(domElement.nodeName==="IMG"){attrib=domElement.getAttribute("alloy-src");if(attrib){domElement.setAttribute("src","{{"+attrib+"}}");domElement.removeAttribute("alloy-src")}}while(attributesCount--){attrib=domElement.attributes[attributesCount];if(!attrib){continue}switch(attrib.name){case"alloy-phase":if(attrib.value.indexOf("{{")>-1){var attribParam=attrib.value.replace("{{","").replace("}}","");var phase=$internals.Parsers.getAlloyValue(attribParam,0,attrib.value.length,scope,thisIndex).value;domElement.setAttribute("alloy-phase",phase)}else{var phase=attrib.value}if(scope.$phase!==null&&scope.$phase!==phase){domElement.style.display="none"}else{if(domElement.style.removeProperty){domElement.style.removeProperty("display")}else{if(domElement.style.removeAttribute){domElement.style.removeAttribute("display")}else{domElement.style.display=""}}}modelNode=scope.$dependencies.tryCreateNode("$phase");modelNode.modelValue=scope.$phase;modelNode.addDependency(new DomPointer(domElement,attrib),new Expression("phase"));break;case"alloy-if":if(!attrib.value){break}getValueResult=$internals.Parsers.getAlloyValue(attrib.value,0,attrib.value.length,scope,thisIndex);var domPointer=new DomPointer(domElement,attrib);var ll=getValueResult.textResultsCount;while(ll--){alloyValueObject=getValueResult.textResults[ll];var exp=new Expression();exp.type="if";exp.index=0;if(getValueResult.compiled){exp.compiled=getValueResult.compiled;exp.varName=alloyValueObject.varName}domPointer.addDependent(alloyValueObject.modelNode,exp);alloyValueObject.modelNode.addDependency(domPointer,exp)}if(!getValueResult.value){domElement.style.display="none"}else{if(domElement.style.removeProperty){domElement.style.removeProperty("display")}else{if(domElement.style.removeAttribute){domElement.style.removeAttribute("display")}else{domElement.style.display=""}}}break;case"alloy-bind-html":getValueResult=bindText(domElement,attrib,attrib.value,scope,thisIndex);if(getValueResult!==null){domElement.innerHTML=getValueResult;
executeInlineScripts(domElement)}break;case"alloy-style":getValueResult=bindText(domElement,attrib,attrib.value,scope,thisIndex);setElementStyle(domElement,getValueResult);domElement.removeAttribute("alloy-style");break;default:var attribName=attrib.name;if(attribName.startsWith("alloy-")){if(attribName.equals("bind-event-","alloy-".length)){var evName=attribName.substring("alloy-bind-event-".length);if(!evName){break}var attribValue=attrib.value;if(!attribValue.contains("(")&&attribValue.contains(")")){console.log("Alloy.bind-event: invalid syntax. missing (): "+attribValue);break}var bindData=getBindEventData(evName,attribValue,scope,scope,thisIndex);if(!bindData){break}var eventHandler=(function eventFunc_creator(_scope,_thisIndex,_element,_bindData){return function eventHandler(e){var scope=_scope;var element=_element;var bindData=_bindData;var thisIndex=_thisIndex;var params=[];var evParamIndex=bindData.vars.length;while(evParamIndex--){var varInfo=bindData.vars[evParamIndex];if(evParamIndex){if(varInfo.name==="e"||varInfo.name==="event"){params[varInfo.name]=e}else{if(varInfo.name==="$parent"){var parentIndex=thisIndex?_scope.$stack.$this[thisIndex].parentIndex:0;params[varInfo.name]=_scope.$stack.$this[parentIndex].trieNode.modelValue}else{if(varInfo.name==="$domElement"){params[varInfo.name]=element}else{params[varInfo.name]=varInfo.modelTrieNode.modelValue}}}}else{params[varInfo.name]=function(){return scope[varInfo.name].apply(scope,arguments)}}}var res=bindData.func(params);if(res===undefined){var tar=element.getAttribute("target");if(tar&&tar!=="_self"&&tar!=="self"){return false}var href=element.getAttribute("href");if(!href){return false}if(href.startsWith("#")){return false}if(href.startsWith("javascript:")){return false}}}})(scope,thisIndex,domElement,bindData);if(window.addEventListener){domElement.addEventListener(evName,eventHandler)}else{domElement.attachEvent("on"+evName,eventHandler)}scope.$registeredDomEvents.push({name:evName,element:domElement,func:eventHandler})}else{if(attribName.equals("bind-scope-event-","alloy-".length)){var parentScope=scope.$parent;
if(!parentScope){break}var evName=attribName.substring("alloy-bind-scope-event-".length);if(!evName){break}var attribValue=attrib.value;if(!attribValue.contains("(")&&attribValue.contains(")")){console.log("Alloy.bind-event: invalid syntax. missing (): "+attribValue);break}var bindData=getBindEventData(evName,attribValue,scope,parentScope,thisIndex);if(!bindData){break}scope.regiesterHandler(evName,function(){var mthis=this;var params=[];params[0]=arguments;var customParams=params[1]=[];var evParamIndex=bindData.vars.length;while(evParamIndex--){var varInfo=bindData.vars[evParamIndex];if(evParamIndex){params[varInfo.name]=varInfo.modelTrieNode.modelValue}else{params[varInfo.name]=function(){mthis.scope.$parent[varInfo.name].apply(mthis.scope.$parent,params)}}}customParams.scope=this.scope;bindData.func(params)},{scope:scope,bindData:bindData})}else{break}}}getValueResult=bindText(domElement,attrib,attrib.value,scope,thisIndex);if(getValueResult!==null){attrib.value=getValueResult}break}}var eventFunc,$this;switch(domElement.tagName){case"SELECT":var optionsDomPointer,optionsCollection,optionsTrieNode,selectedValueTrieNode;attrib=domElement.getAttribute("alloy-options");if(!attrib){break}getValueResult=$internals.Parsers.getAlloyValue(attrib,0,attrib.length,scope,thisIndex);if(getValueResult.compiled){throw ("Alloy options must be plain value: "+attrib)}optionsTrieNode=getValueResult.textResults[0].modelNode.createLoopIterationNode(++lastId);optionsDomPointer=new DomPointer(domElement,null,new Expression("options"));optionsTrieNode.addDependency(optionsDomPointer,optionsDomPointer.contentInfo);optionsCollection=getValueResult.value;domElement.innerHTML="";if(optionsCollection){var collectionLen=optionsCollection.length;for(var i=0;i<collectionLen;++i){optionItem(domElement,optionsTrieNode,i,optionsCollection[i])}attrib=domElement.getAttribute("alloy-options-selected");if(attrib){if(attrib.startsWith("{{")&&attrib.endsWith("}}")){getValueResult=$internals.Parsers.getAlloyValue(attrib,2,attrib.length-2,scope,thisIndex);
attrib=getValueResult.value;modelNode=getValueResult.textResults[0].modelNode;modelNode.addDependency(optionsDomPointer,new Expression("options-selected"));optionsDomPointer.contentInfo.value=-1;optionsTrieNode.addPriorNode(modelNode);selectedValueTrieNode=modelNode}var collectionLen=optionsCollection.length;var selectedOption;while(collectionLen--){if(domElement.childNodes[collectionLen].value!=attrib){continue}selectedOption=domElement.childNodes[collectionLen];selectedOption.selected=true;optionsDomPointer.contentInfo.value=domElement.childNodes[collectionLen].value}}}var that=domElement;eventFunc=function(e){var value=that[that.selectedIndex].value;optionsDomPointer.contentInfo.value=value;if(selectedValueTrieNode){updateModelValue(scope,selectedValueTrieNode,value)}};if(window.addEventListener){domElement.addEventListener("change",eventFunc)}else{domElement.attachEvent("onchange",eventFunc)}break;case"TEXTAREA":case"INPUT":var t=domElement.type.toLowerCase();if(!domElement.getAttribute("alloy-this")){break}$this=scope.$stack.$this[thisIndex];var that=domElement;var ex=new Expression(t,0);$this.trieNode.addDependency(new DomPointer(domElement,null,ex),ex);switch(t){case"checkbox":domElement.checked=domElement.defaultChecked=$this.trieNode.modelValue===true;eventFunc=function(e){updateModelValue(scope,$this.trieNode,that.checked)};if(window.addEventListener){domElement.addEventListener("click",eventFunc)}else{domElement.attachEvent("onclick",eventFunc)}break;case"radio":domElement.checked=domElement.defaultChecked=($this.trieNode.modelValue===domElement.value)||(String($this.trieNode.modelValue)===domElement.value);eventFunc=function(e){updateModelValue(scope,$this.trieNode,that.value)};if(window.addEventListener){domElement.addEventListener("click",eventFunc)}else{domElement.attachEvent("onclick",eventFunc)}break;case"text":default:eventFunc=function(e){var newVal=that.value;if(newVal===that.lastValue){if(scope.__markClean__){scope.__markClean__()}return}that.lastValue=newVal;if(that.type!=="number"&&that.type!=="color"){var iCaretPos=0;
if(document.selection){var oSel=document.selection.createRange();oSel.moveStart("character",-that.value.length);iCaretPos=oSel.text.length}else{if(typeof(that.selectionStart)==="number"){iCaretPos=that.selectionStart}}}updateModelValue(scope,$this.trieNode,newVal);if(that.type!=="number"&&that.type!=="color"){if(document.selection){var oSel=document.selection.createRange();oSel.moveStart("character",iCaretPos)}else{if(typeof(that.selectionStart)==="number"){that.selectionStart=iCaretPos;that.selectionEnd=iCaretPos}}}if(scope.__markClean__){scope.__markClean__()}};var debounceEventFunc=function(e){var context=this;clearTimeout(debounceEventFunc.timer);if(scope.__markDirty__){scope.__markDirty__()}debounceEventFunc.timer=setTimeout(function(){eventFunc.call(context,e)},1)};domElement.value=$this.trieNode.modelValue;domElement.lastValue=$this.trieNode.modelValue;if(window.addEventListener){domElement.addEventListener("keyup",debounceEventFunc);domElement.addEventListener("input",debounceEventFunc);domElement.addEventListener("change",debounceEventFunc);domElement.addEventListener("click",debounceEventFunc)}else{domElement.attachEvent("onkeyup",debounceEventFunc);domElement.attachEvent("onchange",debounceEventFunc);domElement.attachEvent("onclick",debounceEventFunc)}break}break}}function getLoopFilter(loopContent,loopTrieNode,scope,thisIndex){loopContent.filter;var compiledObject={};var str=["0, (function(vars){return "];compiledObject.vars=$internals.Parsers.parseExpression(loopContent.filter,str,[loopContent.elementName]);str.push(";})");compiledObject.func=$internals.Utils.eval(str.join(""));var evParamIndex=compiledObject.vars.length;while(evParamIndex--){var paramResult=$internals.Parsers.getAlloyValue(compiledObject.vars[evParamIndex],0,compiledObject.vars[evParamIndex].length,scope,thisIndex);compiledObject.vars[evParamIndex]={name:compiledObject.vars[evParamIndex],modelTrieNode:paramResult.textResults[0].modelNode};if(compiledObject.vars[evParamIndex].name!==loopContent.elementName){loopTrieNode.addPriorNode(compiledObject.vars[evParamIndex].modelTrieNode)
}}loopContent.filter=compiledObject}function compileLoopFilterVars(filterObject,scope){if(!filterObject.compiledVars){filterObject.compiledVars=[{}]}var evParamIndex=filterObject.vars.length;while(evParamIndex--){var paramRes=filterObject.vars[evParamIndex];filterObject.compiledVars[0][paramRes.name]=paramRes.modelTrieNode.modelValue}filterObject.compiledVars[0].scope=scope}function getBindEventData(eventName,eventHandler,dataScope,functionScope,thisIndex){var compiledObject={};var str=["0, (function(vars){return "];compiledObject.vars=$internals.Parsers.parseExpression(eventHandler,str);str.push(";})");compiledObject.func=$internals.Utils.eval(str.join(""));if(typeof(functionScope[compiledObject.vars[0]])!=="function"){console.log("Alloy.bind-event: missing method '"+compiledObject.vars[0]+"' as registered for "+eventName+" event");return null}var evParamIndex=compiledObject.vars.length;while(evParamIndex--){if(evParamIndex){var paramResult=$internals.Parsers.getAlloyValue(compiledObject.vars[evParamIndex],0,compiledObject.vars[evParamIndex].length,dataScope,thisIndex);compiledObject.vars[evParamIndex]={name:compiledObject.vars[evParamIndex],modelTrieNode:paramResult.textResults[0].modelNode}}else{compiledObject.vars[evParamIndex]={name:compiledObject.vars[evParamIndex]}}}return compiledObject}function updateModelValue(scope,modelTrieNode,value){var parentNode=modelTrieNode.parent;parentNode.modelValue[modelTrieNode.word]=value;scope.update()}function bindText(element,attrib,value,scope,selfIndex){if(!value){return null}var parseResult=$internals.Parsers.parseText(value,scope,selfIndex);if(parseResult.html===value){return null}var domPointer=new DomPointer(element,attrib,value);var l=parseResult.resultsLength;var parsedItem,alloyValueObject;while(l--){parsedItem=parseResult.results[l];var ll=parsedItem.textResultsCount;while(ll--){alloyValueObject=parsedItem.textResults[ll];var exp=new Expression();exp.type="text";exp.index=l;if(parsedItem.compiled){exp.compiled=parsedItem.compiled;exp.varName=alloyValueObject.varName
}domPointer.addDependent(alloyValueObject.modelNode,exp);alloyValueObject.modelNode.addDependency(domPointer,exp)}}return parseResult.html}function main(domElement,scope,thisIndex){var mainStack=new Array(20);var stackLastIndex=0;var stackItem;var newScope,$This,template,childIndex,templateSrc;var pendingLoad=null;mainStack[0]=new Array(4);mainStack[0][0]=domElement;mainStack[0][1]=thisIndex;mainStack[0][2]=false;mainStack[0][3]=0;do{stackItem=mainStack[stackLastIndex];domElement=stackItem[0];thisIndex=stackItem[1];childIndex=stackItem[3];template=null;templateSrc=null;newScope=null;if(!stackItem[2]){stackItem[2]=true;while(true){if(domElement.nodeName==="#comment"){break}if(domElement.nodeName==="#text"){var bindResult=bindText(domElement,null,domElement.nodeValue,scope,thisIndex);if(bindResult!==null){domElement.nodeValue=bindResult}break}if(domElement.attributes.length){var loopStatement=domElement.getAttribute("alloy-loop");if(loopStatement){domElement.removeAttribute("alloy-loop");var childNodesToProcess;var previousStackItem=mainStack[stackLastIndex-1];if(stackLastIndex!==0){childNodesToProcess=previousStackItem[0].childNodes.length-previousStackItem[3]}bindLoop(loopStatement,domElement,scope,thisIndex);stackItem[3]=childIndex=domElement.childNodes.length;if(stackLastIndex!==0){previousStackItem[3]=previousStackItem[0].childNodes.length-childNodesToProcess}break}var newThis=domElement.getAttribute("alloy-this");if(newThis){var getValueResult=$internals.Parsers.getAlloyValue(newThis,0,newThis.length,scope,thisIndex);if(getValueResult.compiled){throw ("Invalid alloy-this: "+newThis+". It must be a simple value")}if(getValueResult.value!==undefined){var $this=scope.$stack.$this;$this.push(new This(getValueResult.textResults[0].modelNode,thisIndex));stackItem[1]=thisIndex=$this.length-1}}if(domElement.nodeName!=="IMG"){templateSrc=domElement.getAttribute("alloy-src")}newScope=domElement.getAttribute("alloy-scope");if(newScope&&newScope!=="binded"){newScope=window[newScope]||null;if(newScope){newScope=new newScope(scope.$stack.$this[thisIndex].trieNode.modelValue)
}}}if(domElement.tagName){template=$internals.Templates.get(domElement)}if(template){if(!newScope){newScope=getScopeClass(domElement.tagName.toUpperCase(),scope,thisIndex);if(!newScope&&domElement.id){newScope=getScopeClass("#"+domElement.id,scope,thisIndex)}if(!newScope&&domElement.hasAttribute("alloy-require-scope")){newScope="skip"}}if(!newScope||newScope==="binded"){newScope=false;var templateDom=template.cloneNode(true);templateRefactoring(templateDom,domElement.childNodes,0);var firstChild=templateDom.firstChild;while(firstChild.nodeName=="#comment"){firstChild=firstChild.nextSibling}while(true){if(firstChild.nodeName.charAt(0)!=="#"){break}var tmpNodeValue=firstChild.nodeValue;var tmpPos=0;for(;tmpPos<tmpNodeValue.length;++tmpPos){var c=tmpNodeValue.charCodeAt(tmpPos);if(c==9||c==32||c==10||c==13){continue}break}if(tmpPos==tmpNodeValue.length){firstChild=firstChild.nextSibling}else{break}}if(firstChild.nodeName.charAt(0)!=="#"){$internals.Utils.copyAttributes(domElement,firstChild,true)}$internals.Utils.replaceDomElement(templateDom,domElement);stackItem[0]=domElement=firstChild;if(firstChild.nodeName==="#text"){continue}}}else{if(templateSrc){domElement.removeAttribute("alloy-src");if(!pendingLoad){pendingLoad=[]}pendingLoad.push(stackItem,templateSrc)}}if(newScope&&newScope!=="skip"){domElement.setAttribute("alloy-scope","binded");$This=scope.$stack.$this[thisIndex];$This.trieNode.addDependentScope(newScope);var childNodesToProcess;var previousStackItem=mainStack[stackLastIndex-1];if(stackLastIndex!==0){childNodesToProcess=previousStackItem[0].childNodes.length-previousStackItem[3]}newScope.$parent=scope;newScope.$name=domElement.tagName;scope.$childScopes.push(newScope);var scopeName=domElement.getAttribute("alloy-scope-name");if(scopeName){if(!scope.$childScopesByName){scope.$childScopesByName=[]}scope.$childScopesByName[scopeName]=newScope}scope.childScopeCreated(newScope,domElement);stackItem[0]=domElement=newScope.bind(domElement);stackItem[3]=childIndex=domElement.childNodes.length;if(stackLastIndex!==0){previousStackItem[3]=previousStackItem[0].childNodes.length-childNodesToProcess
}break}attributes(domElement,scope,thisIndex);break}}if(childIndex===domElement.childNodes.length){stackLastIndex--}else{var childNode=domElement.childNodes[childIndex];stackItem[3]++;var childStackItem;if(++stackLastIndex>mainStack.length){childStackItem=new Array(4);mainStack.push(childStackItem)}else{childStackItem=mainStack[stackLastIndex];if(!childStackItem){childStackItem=mainStack[stackLastIndex]=new Array(4)}}childStackItem[0]=childNode;childStackItem[1]=thisIndex;childStackItem[2]=false;childStackItem[3]=0}}while(stackLastIndex!==-1);return mainStack[0][0]}function templateRefactoring(templateNode,instanceChildNodes,instanceChildIndex){var templateChildNodes=templateNode.childNodes,templateLength=templateChildNodes.length,tempChildNode,instanceLength=instanceChildNodes.length,childNode,cIndex,placeholder;while(templateLength--){tempChildNode=templateChildNodes[templateLength];if(!tempChildNode.tagName){continue}placeholder=tempChildNode.getAttribute("alloy-placeholder-id");if(placeholder){for(cIndex=instanceChildIndex;cIndex<instanceLength;++cIndex){childNode=instanceChildNodes[cIndex];if(!childNode.tagName){continue}if(childNode.getAttribute("alloy-placeholder-id")===placeholder){childNode.removeAttribute("alloy-placeholder-id");$internals.Utils.replaceDomElement(childNode,tempChildNode);instanceChildIndex=cIndex;break}}}else{templateRefactoring(tempChildNode,instanceChildNodes,instanceChildIndex)}}}function getScopeClass(tagName,scope,thisIndex){if(scope.$tagToScopeClass){var model=scope.$stack.$this[thisIndex].trieNode.modelValue;var tmpScope=scope.$tagToScopeClass[tagName];if(tmpScope){return new tmpScope(model)}}tmpScope=Alloy.Scope.$staticBinding[tagName];if(tmpScope){return new tmpScope(model)}}function evalEmbeddedData(domElement,scope){var embeddedDataName;try{embeddedDataName=domElement.getAttribute("alloy-data-target")||null;var evalued=eval("("+domElement.innerHTML+")");if(!embeddedDataName){scope.$embedded=evalued}else{scope.$embedded[embeddedDataName]=evalued}}catch(e){throw ("Alloy.bind() - error evaluating embedded-data: "+domElement.innerHTML)
}var comment=document.createComment(domElement.innerHTML);$internals.Utils.replaceDomElement(comment,domElement)}var executeInlineScripts=(function(){var head=document.getElementsByTagName("head")[0]||document.documentElement;function evalScript(elem){var data=elem&&(elem.text||elem.textContent||elem.innerHTML||""),script=document.createElement("script");script.type="text/javascript";try{script.appendChild(document.createTextNode(data))}catch(e){script.text=data}head.insertBefore(script,head.firstChild);head.removeChild(script)}return function(node){var scripts=[],children=node.getElementsByTagName("*");for(var i=0,child;i<children.length;i++){child=children[i];if(child.nodeName&&child.nodeName.toLowerCase()==="script"&&(!child.type||child.type.toLowerCase()==="text/javascript")){scripts.push(child)}}for(i=0;i<scripts.length;i++){evalScript(scripts[i])}}})();function clearMemory(scope){scope.$stack.$activeLoops=null;scope.$compiledEval=null;$internals.Parsers.clearMemoryObjects()}function setElementStyle(domElement,style){var display=domElement.style.display;domElement.setAttribute("style",style);if(domElement.hasAttribute("alloy-if")||domElement.hasAttribute("alloy-phase")){domElement.style.display=display}}return{bind:function bind(domElement,scope){var l=domElement.childNodes.length;for(var i=0;i<l;++i){var d=domElement.childNodes[i];if(d.nodeName.charAt(0)=="#"){continue}if(d.nodeName==="ALLOY-EMBEDDED-DATA"||d.nodeName==="alloy-embedded-data"){evalEmbeddedData(d,scope)}break}scope.beforeBind();scope.$dependencies=new ModelTrieNode();scope.$compiledEval={};scope.$registeredDomEvents=[];scope.$updateCycle=0;scope.$childScopes=[];var modelDepNode=scope.$dependencies.tryCreateNode("$model");modelDepNode.modelValue=scope.$model;scope.$stack={$this:[new This(modelDepNode,-1)],$activeLoops:{array:[null],count:0}};$internals.Parsers.initMemoryObjects();var p=domElement.parentNode;var nextSibling=domElement.nextSibling;$internals.Utils.removeElement(domElement);scope.$domElement=main(domElement,scope,0);if(nextSibling){p.insertBefore(scope.$domElement,nextSibling)
}else{p.appendChild(scope.$domElement)}clearMemory(scope);nextTick(function(){if(!scope.isDisposed()){scope.afterBind(scope.$domElement)}});return scope.$domElement},update:function update(scope){if(!scope.$domElement){return}if(scope.$updating){return}scope.beforeUpdate();scope.$updating=true;scope.window=window;scope.$stack.$activeLoops={array:[null],count:0};scope.$compiledEval={};$internals.Parsers.initMemoryObjects();var stack=new Array(20);stack[0]=new Array(5);stack[0][0]=scope.$dependencies;stack[0][1]=scope;stack[0][2]=0;stack[0][3]=0;stack[0][4]=-1;var stackLastIndex=0;var updateCycle=++scope.$updateCycle;var postLoopUpdate=[];var postLoopUpdateIndices={};var l,arrayItem,domPointer,arr;do{var item=stack[stackLastIndex];var modelTrieNode=item[0];var model=item[1];if(item[4]!==-1){arr=modelTrieNode.priorUpdateNodes;l=item[4];do{arrayItem=arr[l];if(arrayItem.generation===updateCycle){continue}if(!arrayItem.pendingUpdateNodes){arrayItem.pendingUpdateNodes=[]}arrayItem.pendingUpdateNodes.push({node:modelTrieNode,model:model});break}while(--l!==-1);item[4]=l}if(item[4]===-1&&modelTrieNode.generation!==updateCycle){if(modelTrieNode.type===1){model=modelTrieNode.modelValue}if(modelTrieNode.dependentScopes||modelTrieNode.dependents){var valueChanged;if(modelTrieNode.type===1){valueChanged=true}else{if(model instanceof Array){valueChanged=!$internals.Utils.compareArrays(model,modelTrieNode.modelValue)}else{valueChanged=model!==modelTrieNode.modelValue}}var expression,postUpdateObj,evalObj;arr=modelTrieNode.dependentScopes;if(valueChanged&&arr){l=arr.length;while(l--){arr[l].setModel(model)}}arr=modelTrieNode.dependents;if(arr){l=arr.length;while(l--){arrayItem=arr[l];domPointer=arrayItem.domPointer;expression=arrayItem.expression;switch(expression.type){case"if":case"text":if(!valueChanged&&domPointer.updateCycle!=updateCycle){break}postUpdateObj=postLoopUpdateIndices[domPointer.id];if(!postUpdateObj){postUpdateObj=postLoopUpdateIndices[domPointer.id]={domPointer:domPointer,values:[]};postLoopUpdate.push(postUpdateObj);
domPointer.updateCycle=updateCycle;if(domPointer.dependents){var dpd=domPointer.dependents;var dpdl=domPointer.dependents.length;var dpdi;while(dpdl--){dpdi=dpd[dpdl];if(dpdi.modelNode===modelTrieNode){continue}if(dpdi.modelNode.generation!==updateCycle){continue}if(dpdi.expression.compiled){evalObj=postUpdateObj.values[dpdi.expression.index];if(!evalObj){evalObj=postUpdateObj.values[dpdi.expression.index]={compiled:dpdi.expression.compiled,vars:{}}}evalObj.vars[dpdi.expression.varName]=dpdi.modelNode.modelValue}else{postUpdateObj.values[dpdi.expression.index]=dpdi.modelNode.modelValue}}}}if(expression.compiled){evalObj=postUpdateObj.values[expression.index];if(!evalObj){evalObj=postUpdateObj.values[expression.index]={compiled:expression.compiled,vars:{}}}evalObj.vars[expression.varName]=model}else{postUpdateObj.values[expression.index]=model}break;case"loop-limit":if(!valueChanged){break}domPointer.contentInfo.limit=model;break;case"loop":var processedItems=0;var loopContent=domPointer.contentInfo;var ll,collectionItem;if(model){item[1]=model=$internals.Utils.clone(model);if(loopContent.parentLoop){var d=scope.$stack.$activeLoops.count=loopContent.parentLoop.depth+1;var activeLoop=loopContent.parentLoop;while(--d){if(scope.$stack.$activeLoops.array.length===d){scope.$stack.$activeLoops.array.push(activeLoop)}else{scope.$stack.$activeLoops.array[d]=activeLoop}activeLoop=activeLoop.parent}}else{scope.$stack.$activeLoops.count=1}ll=model.length;var skippedElements=0;var elementName=loopContent.elementName;if(loopContent.filter){compileLoopFilterVars(loopContent.filter,scope)}var processedItems=prepareLoopArray(model,loopContent,modelTrieNode);for(var i=0;i<processedItems;++i){if(!modelTrieNode.nodesHash||modelTrieNode.nodesHash[i]===undefined){loopItem(scope,loopContent,modelTrieNode,model[i],i);valueChanged=true}}}var tmpIndex,toRemoveArr,nodeToRemove;if(modelTrieNode.nodes){var tmpIndex=0,newNodes,newHash;var lll=modelTrieNode.nodes.length;while(lll--){nodeToRemove=modelTrieNode.nodes[lll];if(typeof(nodeToRemove.word)==="number"&&nodeToRemove.word>=processedItems){break
}}if(lll!==-1){valueChanged=true;newNodes=new Array(modelTrieNode.nodes.length);newHash={};for(lll=0;lll<modelTrieNode.nodes.length;++lll){nodeToRemove=modelTrieNode.nodes[lll];if(typeof(nodeToRemove.word)!=="number"||nodeToRemove.word<processedItems){newNodes[tmpIndex]=nodeToRemove;newHash[nodeToRemove.word]=tmpIndex++}else{toRemoveArr=nodeToRemove.dependentScopes;if(toRemoveArr){ll=toRemoveArr.length;while(ll--){toRemoveArr[ll].dispose()}}toRemoveArr=nodeToRemove.dependents;if(toRemoveArr){ll=toRemoveArr.length;while(ll--){if(toRemoveArr[ll].expression.type!=="ui-item"){continue}$internals.Utils.removeElement(toRemoveArr[ll].domPointer.element)}}}}}if(lll!==-1&&modelTrieNode.nodes&&tmpIndex!==modelTrieNode.nodes.length){valueChanged=true;modelTrieNode.nodesHash=newHash;modelTrieNode.nodes=newNodes;modelTrieNode.nodes.splice(tmpIndex,modelTrieNode.nodes.length-tmpIndex)}}break;case"options-selected":if(!valueChanged){break}domPointer.contentInfo.value=model;break;case"options":if(model){ll=model.length;for(var i=0;i<ll;++i){var pos=modelTrieNode.nodesHash?modelTrieNode.nodesHash[i]:undefined;if(pos===undefined){optionItem(domPointer.element,modelTrieNode,i,model[i],expression.value)}else{if(expression.value==model[i]||expression.value==model[i].value){modelTrieNode.nodes[pos].dependents[0].domPointer.element.selected=true}}}}if((!model&&modelTrieNode.modelValue)||(modelTrieNode.modelValue&&modelTrieNode.nodes&&model.length<modelTrieNode.nodes.length)){var tmpIndex=model.length;var depIndex=modelTrieNode.nodesHash[tmpIndex];while(!isNaN(depIndex)){delete modelTrieNode.nodesHash[tmpIndex];var nodeToRemove=modelTrieNode.nodes[depIndex];var toRemoveArr=nodeToRemove.dependentScopes;if(toRemoveArr){ll=toRemoveArr.length;while(ll--){toRemoveArr[ll].dispose()}}toRemoveArr=nodeToRemove.dependents;if(toRemoveArr){ll=toRemoveArr.length;while(ll--){if(toRemoveArr[ll].expression.type!=="ui-item"){continue}$internals.Utils.removeElement(toRemoveArr[ll].domPointer.element)}}depIndex=modelTrieNode.nodesHash[++tmpIndex]}if(tmpIndex){modelTrieNode.nodes.splice(processedItems,tmpIndex)
}}break;case"checkbox":if(!valueChanged){break}domPointer.element.checked=domPointer.element.defaultChecked=model;break;case"phase":var phase=domPointer.attribute.value;if(scope.$phase!==null&&scope.$phase!==phase){domPointer.element.style.display="none"}else{if(domPointer.element.style.removeProperty){domPointer.element.style.removeProperty("display")}else{if(domPointer.element.style.removeAttribute){domPointer.element.style.removeAttribute("display")}else{domPointer.element.style.display=""}}}break;default:break}}}if(valueChanged){modelTrieNode.modelValue=model}}else{modelTrieNode.modelValue=model}modelTrieNode.generation=updateCycle}var nextNode=null,nextNodeValue;if(item[4]!==-1){stackLastIndex--}else{if(!modelTrieNode.nodes||item[2]==modelTrieNode.nodes.length){if(!modelTrieNode.pendingUpdateNodes||item[3]===modelTrieNode.pendingUpdateNodes.length){stackLastIndex--;modelTrieNode.pendingUpdateNodes=null}else{nextNode=modelTrieNode.pendingUpdateNodes[item[3]].node;nextNodeValue=modelTrieNode.pendingUpdateNodes[item[3]].model;item[3]++}}else{nextNode=modelTrieNode.nodes[item[2]++];if(nextNode.type===2){nextNodeValue=model}else{if(model){nextNodeValue=model[nextNode.word]}}}}if(nextNode){var tmpArr;if(stack.length===++stackLastIndex){tmpArr=new Array(5);stack.push(tmpArr)}else{tmpArr=stack[stackLastIndex];if(!tmpArr){tmpArr=stack[stackLastIndex]=new Array(4)}}tmpArr[0]=nextNode;tmpArr[1]=nextNodeValue;tmpArr[2]=0;tmpArr[3]=0;tmpArr[4]=nextNode.priorUpdateNodes?nextNode.priorUpdateNodes.length-1:-1}}while(stackLastIndex!==-1);var l=postLoopUpdate.length;var result,p;while(l--){arrayItem=postLoopUpdate[l];domPointer=arrayItem.domPointer;try{p=domPointer.element.parentNode;if(!p||!p.offsetParent){while(p&&p!==document.body){p=p.parentNode}if(!p){continue}}}catch(e){continue}if(domPointer.contentInfo===undefined){var firstValue=arrayItem.values[0];if(firstValue===undefined){}if(firstValue.compiled){result=firstValue.compiled(firstValue.vars)}else{result=firstValue}if(!result){domPointer.element.style.display="none"}else{if(domPointer.element.style.removeProperty){domPointer.element.style.removeProperty("display")
}else{if(domPointer.element.style.removeAttribute){domPointer.element.style.removeAttribute("display")}else{domPointer.element.style.display=""}}}}else{if(typeof(domPointer.contentInfo)==="string"){result=$internals.Parsers.parseText(domPointer.contentInfo,scope,0,arrayItem.values);if(domPointer.attribute){if(domPointer.attribute.name==="alloy-bind-html"){domPointer.element.innerHTML=result.html}else{if(domPointer.attribute.name==="alloy-style"){setElementStyle(domPointer.element,result.html)}else{domPointer.attribute.value=result.html}}}else{domPointer.element.nodeValue=result.html}}else{if(domPointer.contentInfo instanceof Expression){if(domPointer.element.nodeName==="INPUT"){domPointer.element.value=arrayItem.values[0];domPointer.element.lastValue=arrayItem.values[0]}}}}}clearMemory(scope);stack=scope.$childScopes;l=stack.length;var disposedChildren=0;for(var i=0;i<l;++i){if(stack[i].isDisposed()){++disposedChildren}else{$internals.Binder.update(stack[i])}}if(disposedChildren){ll=l-disposedChildren;var newStack=new Array(ll);for(var i=0;i<l;++i){if(stack[i].isDisposed()){continue}newStack[--ll]=stack[i]}scope.$childScopes=newStack}scope.afterUpdate();scope.$updating=false},dispose:function dispose(scope){if(scope.__cleanHTML!==false&&scope.$domElement){scope.$domElement.innerHTML=""}scope.$parent=null;for(var i=1;i<scope.$childScopes.length;++i){scope.$childScopes[i].dispose()}var evnts=scope.$registeredDomEvents;var l=evnts.length;while(l--){if(window.removeEventListener){evnts[l].element.removeEventListener(evnts[l].name,evnts[l].func)}else{evnts[l].element.detachEvent("on"+evnts[l].name,evnts[l].func)}}}}})();exports["Alloy.Scope"]=Alloy.Scope=Alloy.Base.extend({name:"Scope"});Alloy.Scope.$staticBinding={};Alloy.Scope.bindGlobalStaticScope=function(tagName,scope){Alloy.Scope.$staticBinding[tagName.toUpperCase()]=scope};Alloy.Scope.prototype.ctor=function(model){this.$embedded={};this.$model=model||{};this.$events={};this.initEventListeners()};Alloy.Scope.prototype.dtor=function(){$internals.Binder.dispose(this)
};Alloy.Scope.prototype.getChildScope=function(childName){if(!this.$childScopesByName){return}return this.$childScopesByName[childName]};Alloy.Scope.prototype.getChildScopeByTag=function(tagName){tagName=tagName.toUpperCase();for(var i=0;i<this.$childScopes.length;i++){var child=this.$childScopes[i];if(child.$name===tagName){return child}}return null};Alloy.Scope.prototype.getChildScopesByTag=function(tagName){var scopes=[];tagName=tagName.toUpperCase();for(var i=0;i<this.$childScopes.length;i++){var child=this.$childScopes[i];if(child.$name===tagName){scopes.push(child)}}return scopes};Alloy.Scope.prototype.setScopeClass=function(tagName,scope){if(!this.$tagToScopeClass){this.$tagToScopeClass={}}this.$tagToScopeClass[tagName.toUpperCase()]=scope};Alloy.Scope.prototype.setModel=function(obj){var prev=this.$model;this.$model=obj;this.onModelChanged(prev);this.update()};Alloy.Scope.prototype.setModelProperty=function(obj,model){model=model||this.$model;for(var i in obj){model[i]=obj[i]}this.update()};Alloy.Scope.prototype.childScopeCreated=function(childScope,domElement){};Alloy.Scope.prototype.beforeBind=function(){};Alloy.Scope.prototype.afterBind=function(domElement){};Alloy.Scope.prototype.beforeUpdate=function(){};Alloy.Scope.prototype.afterUpdate=function(){};Alloy.Scope.prototype.onModelChanged=function(previousModel){};Alloy.Scope.prototype.setPhase=function(phase){this.$phase=phase;this.update()};Alloy.Scope.prototype.bind=function Alloy_Scope_Bind(domElement,template){if(typeof(domElement)=="string"){if(domElement.startsWith("#")){domElement=document.getElementById(domElement.substring(1))}else{domElement=document.querySelector(domElement)}}if(!domElement){throw (this.__className__+".bind() - invalid domElement")}if(template){domElement.setAttribute("alloy-template",template)}return $internals.Binder.bind(domElement,this)};Alloy.Scope.prototype.update=function Alloy_Scope_Update(){$internals.Binder.update(this)};Alloy.Scope.prototype.createEvent=function(event_name){if(!event_name){throw"Event name is not provided."
}event_name=event_name.toLowerCase();if(!this.$events[event_name]){this.$events[event_name]=new Alloy.Event()}return this.$events[event_name]};Alloy.Scope.prototype.registerHandler=function(event_name,callback,context){if(this.isDisposed()){throw"Cannot register to a disposed object event"}if(!event_name){throw"Event name is not provided."}event_name=event_name.toLowerCase();if(this.$events[event_name]==null){this.createEvent(event_name)}if(typeof context=="undefined"){context=null}if(!callback){throw"Callback is not provided."}this.$events[event_name].addHandler(callback,context)};Alloy.Scope.prototype.regiesterHandler=Alloy.Scope.prototype.registerHandler;Alloy.Scope.prototype.unregisterHandler=function(event_name,callback,context){if(this.isDisposed()){return}if(!event_name){throw"Event name is not provided"}event_name=event_name.toLowerCase();if(this.$events[event_name]==null){throw event_name+" Event dosen't exists"}if(!callback){throw"Callback is not provided."}this.$events[event_name].removeHandler(callback,context)};Alloy.Scope.prototype.dispatchEvent=function(event_name,params){if(this.isDisposed()){return}if(!event_name){throw this.__className__+".dispatch(): Event name is not provided"}event_name=event_name.toLowerCase();var event=this.$events[event_name]||this.createEvent(event_name);if(!(params instanceof Array)){params=[params]}event.dispatch.apply(event,params)};Alloy.Scope.prototype.delegateChildrenEvent=function(event_name,delegated_event_name){if(this.isDisposed()){return}if(!event_name){throw this.__className__+".dispatch(): Event name is not provided"}delegated_event_name=delegated_event_name||event_name;for(var i=0;i<this.$childScopes.length;i++){var child=this.$childScopes[i];child.registerHandler(event_name,function(params){this.dispatchEvent(delegated_event_name,[].slice.call(arguments))},this)}};Alloy.Scope.prototype.initEventListeners=function(){if(this.$model&&this.$model.$events){for(var key in this.$model.$events){if(this.$model.$events.hasOwnProperty(key)){this.registerHandler(key,this.$model.$events[key])
}}delete this.$model.$events}};Alloy.Scope.prototype.$model=null;Alloy.Scope.prototype.$embedded=null;Alloy.Scope.prototype.$tagToScopeClass=null;Alloy.Scope.prototype.$domElement=null;Alloy.Scope.prototype.$stack=null;Alloy.Scope.prototype.$childScopes=null;Alloy.Scope.prototype.$childScopesByName=null;Alloy.Scope.prototype.$name=null;Alloy.Scope.prototype.$parent=null;Alloy.Scope.prototype.$phase=null;Alloy.Scope.prototype.$updating=false;Alloy.Scope.prototype.$events=null;Alloy.Scope.prototype.$dependencies=null;Alloy.Scope.prototype.$compiledEval=null;Alloy.Scope.prototype.$registeredDomEvents=null;Alloy.Scope.prototype.$updateCycle=0;Alloy.MergeSort=Alloy.Base.extend({name:"MergeSort"});Alloy.MergeSort.prototype.sort=function MergeSort_sort(array,desc){this.$sort(array,0,array.length,desc)};Alloy.MergeSort.prototype.$sort=function MergeSort_$sort(array,begin,end,desc){var size=end-begin;if(size<2){return}var begin_right=begin+Math.floor(size/2);this.$sort(array,begin,begin_right,desc);this.$sort(array,begin_right,end,desc);if(desc){this.$merge_desc(array,begin,begin_right,end)}else{this.$merge_asc(array,begin,begin_right,end)}};Alloy.MergeSort.prototype.$merge_asc=function(array,begin,begin_right,end){var lastIndex=end-1;for(;begin<begin_right;++begin){if(this.$comparer(array[begin],array[begin_right])===-1){var v=array[begin];array[begin]=array[begin_right];if(begin_right===lastIndex){array[begin_right]=v}else{var targetIndex=this.$binaryIndexOf_asc(array,v,begin_right,lastIndex);var startingIndex=begin_right;for(;startingIndex<targetIndex;++startingIndex){array[startingIndex]=array[startingIndex+1]}array[targetIndex]=v}}}};Alloy.MergeSort.prototype.$merge_desc=function(array,begin,begin_right,end){var lastIndex=end-1;for(;begin<begin_right;++begin){if(this.$comparer(array[begin],array[begin_right])===1){var v=array[begin];array[begin]=array[begin_right];if(begin_right===lastIndex){array[begin_right]=v}else{var targetIndex=this.$binaryIndexOf_desc(array,v,begin_right,lastIndex);var startingIndex=begin_right;
for(;startingIndex<targetIndex;++startingIndex){array[startingIndex]=array[startingIndex+1]}array[targetIndex]=v}}}};Alloy.MergeSort.prototype.$comparer=function MergeSort_$comparer(a,b){if(a>b){return -1}else{if(a<b){return 1}}return 0};Alloy.MergeSort.prototype.$binaryIndexOf_asc=function MergeSort_$binaryIndexOf(array,element,minIndex,maxIndex){minIndex=minIndex||0;maxIndex=maxIndex||array.length-1;if(maxIndex-minIndex<10){for(;minIndex<=maxIndex;++minIndex){var cmp=this.$comparer(element,array[minIndex]);switch(cmp){case 0:return minIndex;case 1:return minIndex-1}}return maxIndex}var currentIndex;var currentElement;var resultIndex;while(minIndex<=maxIndex){resultIndex=currentIndex=(minIndex+maxIndex)/2|0;currentElement=array[currentIndex];var cmp=this.$comparer(element,currentElement);if(cmp==-1){minIndex=currentIndex+1}else{if(cmp==1){maxIndex=currentIndex-1}else{return currentIndex}}}return maxIndex};Alloy.MergeSort.prototype.$binaryIndexOf_desc=function MergeSort_$binaryIndexOf(array,element,minIndex,maxIndex){minIndex=minIndex||0;maxIndex=maxIndex||array.length-1;if(maxIndex-minIndex<10){for(;minIndex<=maxIndex;++minIndex){var cmp=this.$comparer(element,array[minIndex]);switch(cmp){case 0:return minIndex;case -1:return minIndex-1}}return maxIndex}var currentIndex;var currentElement;var resultIndex;while(minIndex<=maxIndex){resultIndex=currentIndex=(minIndex+maxIndex)/2|0;currentElement=array[currentIndex];var cmp=this.$comparer(element,currentElement);if(cmp==1){minIndex=currentIndex+1}else{if(cmp==-1){maxIndex=currentIndex-1}else{return currentIndex}}}return maxIndex};Alloy.MergeSort_String=Alloy.MergeSort.extend({name:"MergeSort_String"});Alloy.MergeSort_String.prototype.$comparer=function MergeSort_$comparer(a,b){return Alloy.MergeSort_String.strCmp(a,b)};Alloy.MergeSort_String.strCmp=function strCmp(a,b){var min=a.length<b.length?a.length:b.length;for(var i=0;i<min;++i){var c1=a.charCodeAt(i);var c2=b.charCodeAt(i);if(c1==c2){continue}if(c1>90){c1-=32}if(c2>90){c2-=32}if(c1>c2){return -1}else{if(c1<c2){return 1
}}}if(a.length==b.length){return 0}else{if(a.length>b.length){return -1}else{return 1}}};$internals.Com=Alloy.Com={SUCCESS:200,FAIL:400,TIMEOUT:500,enumMethod:{GET:"GET",POST:"POST"},cbId:new Date().getTime()%1000,prepareQueryStringParameters:function(params){var newParams={};for(var key in params){switch(Object.prototype.toString.call(params[key])){case"[object Function]":break;case"[object Date]":case"[object Array]":case"[object Object]":newParams[key]=JSON.stringify(params[key]);break;default:newParams[key]=params[key]}}return newParams}};Alloy.ajax=function(info){return new Promise(function(resolve,reject){var xmlhttp=null;if(typeof(XMLHttpRequest)==="function"||typeof(XMLHttpRequest)==="object"){xmlhttp=new XMLHttpRequest()}else{throw"Cannot create ajax object"}if(info.method==$internals.Com.enumMethod.GET&&info.data){info.url+="?"+info.data}xmlhttp.open(info.method,info.url,true);if(info.headers){for(var n in info.headers){xmlhttp.setRequestHeader(n,info.headers[n])}}if(info.withCredentials){xmlhttp.withCredentials=true}xmlhttp.onreadystatechange=function(){switch(this.readyState){case 4:ready($internals.Com.SUCCESS);break}};xmlhttp.onerror=function(){ready($internals.Com.FAIL)};xmlhttp.onload=function(){ready($internals.Com.SUCCESS)};var ready=function(status){if(!running){return}clearTimeout(timer);running=false;var tmpStatus=-1;try{tmpStatus=xmlhttp.status;if(!tmpStatus){tmpStatus=-1;timeout=true}}catch(e){if(timeout){tmpStatus=-1}else{tmpStatus=400}}var text=xmlhttp.responseText||"";switch(tmpStatus){case 200:status=$internals.Com.SUCCESS;break;case 400:case 403:case 404:status=$internals.Com.FAIL;break;default:if(timeout){status=$internals.Com.TIMEOUT}else{status=$internals.Com.FAIL}break}if(info.handler){info.handler(status,text,xmlhttp)}var response;var contentType=xmlhttp.getResponseHeader("Content-Type");if(contentType==="application/json"||contentType==="application/json;charset=utf-8"){try{response=JSON.parse(xmlhttp.responseText)}catch(e){setTimeout(function(){throw new Error("Incorrect JSON response")
});reject({status:status,text:text,xhr:xmlhttp})}}if(status===$internals.Com.SUCCESS){resolve({status:status,text:text,response:response,xhr:xmlhttp})}else{reject({status:status,text:text,response:response,xhr:xmlhttp})}};var timer=setTimeout(function(){if(!running){return}timeout=true;xmlhttp.abort();if(running){ready($internals.Com.TIMEOUT)}},(info.timeout||10000));var running=true;var timeout=false;if(info.method===$internals.Com.enumMethod.POST){xmlhttp.send(info.data)}else{xmlhttp.send(null)}})};var activeRequests={};Alloy.jsonp=function(obj){var functionName="_jspcb"+(Alloy.Com.cbId++);if(obj.cb){functionName=obj.cb}if(activeRequests[functionName]){var elem=activeRequests[functionName];var pn=elem.parentNode;if(pn){pn.removeChild(elem)}}window[functionName]=function(jsonResponse){clearTimeout(timer);if(Alloy.Base.isDerivedOf(obj.handler,Alloy.Handler)){obj.handler.handle($internals.Com.SUCCESS,jsonResponse,obj)}else{obj.handler($internals.Com.SUCCESS,jsonResponse,obj)}try{delete window[functionName]}catch(e){window[functionName]=undefined}var pn=elem.parentNode;if(pn){pn.removeChild(elem)}delete activeRequests[functionName];if(typeof(obj.repeat)==="number"&&obj.repeat){setTimeout(function(){obj.repeat=0;Alloy.jsonp(obj)},obj.repeat)}else{if(obj.handler.dispose){obj.handler.dispose()}}};var sb=[];sb.push(obj.url);if(obj.url.contains("?")){sb.push("&")}else{sb.push("?")}sb.push(obj.callback_arg||"cb");sb.push("=");sb.push(functionName);if(obj.params){for(var parm in obj.params){if(obj.params[parm]==null){continue}if(Object.prototype.toString.call(obj.params[parm])==="[object Object]"){for(var parm2 in obj.params[parm]){if(obj.params[parm][parm2]==null){continue}sb.push("&");sb.push(encodeURIComponent(parm));sb.push("[");sb.push(encodeURIComponent(parm2));sb.push("]=");sb.push(encodeURIComponent(obj.params[parm][parm2]))}}else{sb.push("&");sb.push(encodeURIComponent(parm));sb.push("=");sb.push(encodeURIComponent(obj.params[parm]))}}}var elem=document.createElement("script");elem.type="text/javascript";elem.async=true;
elem.defer=true;elem.src=sb.join("");elem.onload=function(){clearTimeout(timer)};elem.onreadystatechange=function(){if(this.readyState!=="complete"&&this.readyState!=="loaded"){return}clearTimeout(timer)};activeRequests[functionName]=elem;document.getElementsByTagName("head")[0].appendChild(elem);var timeout=function(){var pn=elem.parentNode;if(pn){pn.removeChild(elem)}delete activeRequests[functionName];window[functionName]=function(){};if(Alloy.Base.isDerivedOf(obj.handler,Alloy.Handler)){obj.handler.handle($internals.Com.TIMEOUT,null,obj)}else{obj.handler($internals.Com.TIMEOUT,null,obj)}if(typeof(obj.repeat)==="number"&&obj.repeat){setTimeout(function(){obj.repeat=0;Alloy.jsonp(obj)},obj.repeat)}else{if(obj.handler.dispose){obj.handler.dispose()}}};var timer=setTimeout(timeout,obj.timeout||10000)};Alloy.Plugins=(function(){var knownPlugins={};return{register:function(name,obj){var plugin=knownPlugins[name];if(plugin){throw name+" plugin was created already"}knownPlugins[name]=obj;obj.init()},get:function(name,argsString){var plugin=knownPlugins[name];if(!plugin){return}plugin.onCall()}}})();if(Alloy.runningMode===3){Alloy.$di(["/library/nanorep/alloy/alloy.unitest.js"],function(){if(arguments[0][0].status){Alloy.UnitTest.run()}})}if(Alloy.runningMode===3){Alloy.$di(["/library/nanorep/alloy/alloy.profiler.js"],function(){})}var objectPointers=[];for(var i in exports){var splt=i.split(".");var ndx=1;var obj=Alloy;while(ndx!==splt.length){var tmp=splt[ndx++];if(ndx===splt.length){obj[tmp]=exports[i];objectPointers[tmp]=exports[i]}else{obj=objectPointers[tmp]}}}return Alloy})();window.Alloy=Alloy}Alloy.runningMode=debugLevel;ISQ.Base=Alloy.Base;ISQ.Event=Alloy.Event;ISQ.Handler=Alloy.Handler;ISQ.Timer=Alloy.Timer;ISQ.Timer=Alloy.Timer;</script><style type="text/css">alloy-embedded-data {display:none}</style><style type="text/css">ALLOY-EMBEDDED-DATA {display:none}</style>
    <script type="text/javascript" mini="true">Date.prototype.ToString=function(d,m,n){d=String(d);n=n||false;var j=new Array();var k;for(var f=0;f<d.length;++f){var a=d.charAt(f);if(a==="%"&&f!==d.length-1){k=d.charAt(++f);switch(k){case"d":var b=n?this.getUTCDate():this.getDate();if(b<10){b="0"+b}j.push(b);break;case"m":var h="";if(d.charAt(f+1)==="m"){++f;h=n?this.getUTCMonth():this.getMonth()+1;switch(h){case 1:if(m){h=m.jan}else{h="Jan"}break;case 2:if(m){h=m.feb}else{h="Feb"}break;case 3:if(m){h=m.mar}else{h="Mar"}break;case 4:if(m){h=m.apr}else{h="Apr"}break;case 5:if(m){h=m.may}else{h="May"}break;case 6:if(m){h=m.jun}else{h="Jun"}break;case 7:if(m){h=m.jul}else{h="Jul"}break;case 8:if(m){h=m.aug}else{h="Aug"}break;case 9:if(m){h=m.sep}else{h="Sep"}break;case 10:if(m){h=m.oct}else{h="Oct"}break;case 11:if(m){h=m.nov}else{h="Nov"}break;case 12:if(m){h=m.dec}else{h="Dec"}break}}else{h=n?this.getUTCMonth():this.getMonth()+1;if(h<10){h="0"+h}}j.push(h);break;case"y":var o=this.getYear();if((ISQ.Http.browser.app!=="ie"||ISQ.Http.browser.isIE9||ISQ.Http.browser.isIE10||ISQ.Http.browser.isIE11)&&(!ISQ.Http.browser.isOpera||ISQ.Http.browser.full>="opera10.52")){o+=1900}j.push(o);break;case"Y":var o=this.getYear();if((ISQ.Http.browser.app!=="ie"||ISQ.Http.browser.isIE9||ISQ.Http.browser.isIE10||ISQ.Http.browser.isIE11)&&(!ISQ.Http.browser.isOpera||ISQ.Http.browser.full>="opera10.52")){o+=1900}if(o){j.push(o.toString().substr(2,2))}break;case"H":var e=n?this.getUTCHours():this.getHours();if(e<10){e="0"+e}j.push(e);break;case"M":var g=n?this.getUTCMinutes():this.getMinutes();if(g<10){g="0"+g}j.push(g);break;case"S":var l=n?this.getUTCSeconds():this.getSeconds();if(l<10){l="0"+l}j.push(l);break;case"t":var l=n?this.getUTCMilliseconds():this.getMilliseconds();if(l<10){l="0"+l}j.push(l);break;default:j.push(d.charAt(f-1));j.push(d.charAt(f));break}}else{j.push(a)}}return j.join("")};String.prototype.equals=function(h,g,d){if(!g){g=0}if(g+h.length>this.length){return false}var f=0;var e=g+h.length;for(var c=g;c<e;++c,++f){var a=this.charCodeAt(c);var b=h.charCodeAt(f);
if(a===b){continue}if(!d){return false}if(a>90){a-=32}if(b>90){b-=32}if(a!==b){return false}}return true};String.prototype.startsWith=function(b){if(this.length<b.length){return false}for(var a=0;a<b.length;++a){if(this.charAt(a)!==b.charAt(a)){return false}}return true};String.prototype.endsWith=function(b){if(this.length<b.length){return false}var c=b.length-1;for(var a=this.length-1;a>this.length-1-b.length;--a){if(b.charAt(c--)!==this.charAt(a)){return false}}return true};String.prototype.contains=function(a){return this.indexOf(a)!==-1};String.prototype.Trim=function(e){if(e){var d=this.startsWith_repeat(e);if(d<this.length){var a=this.endsWith_repeat(e);if(d!=0||a!=this.length-1){return this.substring(d,a+1)}else{return this.toString()}}else{return""}}else{var c=0;var b=this.length;for(;/\s/.test(this.charAt(c))&&c<b;++c){}if(c==b){return""}for(;/\s/.test(this.charAt(b-1));--b){}if(c==0&&b==this.length){return String(this)}return this.substring(c,b)}};String.prototype.startsWith_repeat=function(b){if(this.length<b.length){return 0}var c=0;var a=0;for(;a<this.length;a++){if(this.charAt(a)!=b.charAt(c)){a-=c;break}if(c==b.length-1){c=0}else{c++}}return a};String.prototype.endsWith_repeat=function(b){if(this.length<b.length){return this.length}var c=b.length-1;var a=this.length-1;for(;a>0;a--){if(this.charAt(a)!=b.charAt(c)){a+=c;break}if(c==0){c=b.length-1}else{c--}}return a};String.prototype.LastIndexOf=function(d,c){if(this.length===0||d===null){return -1}if(d.length>this.length){return -1}if(isNaN(c)){c=this.length-d.length}var a=false;for(var b=c;b>=0;--b){a=true;for(var e=0;e<d.length;++e){if(this.charAt(b+e)!==d.charAt(e)){a=false;break}}if(a){return b}}return -1};String.prototype.LastIndexOf_char=function(a,c){c=c||this.length-1;for(var b=c;b>=0;--b){if(this.charAt(b)===a){return b}}return -1};String.prototype.setCharAt=function(b,a){if(b>this.length-1){return this}return this.substr(0,b)+a+this.substr(b+1)};String.prototype.countCharAppearances=function(a){var b=0;for(var c=0;c<this.length;++c){if(this.charAt(c)==a){++b
}}return b};String.prototype.indexOfAny=function(e,d){var a=this.length;for(var b=0;b<e.length;++b){var c=this.indexOf(e[b],d);if(c!=-1&&c<a){a=c}}if(a==this.length){return -1}return a};String.prototype.replaceMultipleOccurancesWithOne=function(a,e){var d=this.indexOf(a);if(d===-1){return this.toString()}var f=[];var c=d;var g;for(var b=0;b<this.length;++b){g=this.charAt(b);if(g!==a){f.push(g)}else{if(c!=b-1){f.push(e)}c=b}}return f.join("")};String.prototype.replacer=function(a){var d=null;for(var b=0;b<this.length;++b){var c;for(c=0;c<a.length;++c){if(this.charAt(b)===a[c].from){if(!d){d=[];d.push(this.substring(0,b))}if(a[c].to){d.push(a[c].to)}break}}if(c===a.length&&d){d.push(this.charAt(b))}}if(d){return d.join("")}else{return this}};String.prototype.escaper=function(){return this.replacer(String.escapeData)};String.escapeData=[{from:"\r",to:"\\r"},{from:"\n",to:"\\n"},{from:"\t",to:"\\t"},{from:"'",to:"'"},{from:'"',to:'\\"'},{from:"\\",to:"\\\\"}];String.prototype.replaceAll=function(b,c,a){if(typeof(a)==="undefined"){a=true}return this.replace(new RegExp(b.replace(/([\/\,\!\\\^\$\{\}\[\]\(\)\.\*\+\?\|\<\>\-\&])/g,"\\$&"),(a?"gi":"g")),(typeof(c)=="string")?c.replace(/\$/g,"$$$$"):c)};String.prototype.firstLetterUpperCase=function(){return this.charAt(0).toUpperCase()+this.slice(1)};if(!document.querySelectorAll){document.querySelectorAll=function(c){var d=document.createElement("style"),b=[],a;document.documentElement.firstChild.appendChild(d);document._qsa=[];d.styleSheet.cssText=c+"{x-qsa:expression(document._qsa && document._qsa.push(this))}";window.scrollBy(0,0);d.parentNode.removeChild(d);while(document._qsa.length){a=document._qsa.shift();a.style.removeAttribute("x-qsa");b.push(a)}document._qsa=null;return b}}if(!document.querySelector){document.querySelector=function(b){var a=document.querySelectorAll(b);return(a.length)?a[0]:null}};</script>
    <script type="text/javascript" mini="true">ISQ.Tools=initializeNS("ISQ.Tools");ISQ.Tools.stateEnum={KEY:5,VALUE:6};ISQ.Tools.stringToPairArray=function(h,b,k,i,j){var c=h.length;if(c===0){return null}var f=new Array();i=i!==false;j=j!==false;var g=ISQ.Tools.stateEnum.KEY;var d="";var a=new Array();var e=0;while(e<c){switch(g){case ISQ.Tools.stateEnum.KEY:if(h.charAt(e)!==b){a.push(h.charAt(e))}else{g=ISQ.Tools.stateEnum.VALUE;d=ISQ.Tools.getStringValue(a,i);a=new Array()}break;case ISQ.Tools.stateEnum.VALUE:if(h.charAt(e)!==k){a.push(h.charAt(e))}else{g=ISQ.Tools.stateEnum.KEY;f[d]=ISQ.Tools.getStringValue(a,j);a=new Array()}break}++e}if(g===ISQ.Tools.stateEnum.VALUE){f[d]=ISQ.Tools.getStringValue(a)}return f};ISQ.Tools.getStringValue=function(a,b){b=b===true;var c=unescape(a.join("").toString()).Trim();if(b){c=c.toLowerCase()}return c};ISQ.Tools.getNumber=function(c,a){if(typeof(c)==="number"){return c}if(typeof(c)!=="string"){c=c.toString()}var b;if(c.contains(".")){b=parseFloat(c)}else{b=parseInt(c)}if(isNaN(b)){return typeof(a)==="number"?a:NaN}return b};ISQ.Tools.verifyNumber=function(b){var a=ISQ.Tools.getNumber(b);if(isNaN(a)){throw ("ISQ.Tools.verifyNumber: given value is not a number")}};ISQ.Tools.getEnumValue=function(a,c){if(typeof(a)!=="object"||c===null){return null}for(var b in a){if(a[b]==c){return b}}return null};ISQ.Tools.getOpacityFromRGBA=function(b){if(b==="transparent"){return 0}var a=b.LastIndexOf(",");if(a===-1){throw ("ISQ.Tools.getOpacityFromRGBA(): Invalid string")}if(b.countCharAppearances(",")===2){return 100}b=b.substring(a+1);return parseInt(b)};ISQ.Tools.RGBtoHex=function(c,b,a){return ISQ.Tools.toHex(c)+ISQ.Tools.toHex(b)+ISQ.Tools.toHex(a)};ISQ.Tools.RGBtoHex2=function(a){a=a.match(/^rgb\((\d+),\s*(\d+),\s*(\d+)\)$/);return"#"+ISQ.Tools.toHex(a[1])+ISQ.Tools.toHex(a[2])+ISQ.Tools.toHex(a[3])};ISQ.Tools.toHex=function(a){if(typeof(a)==="string"){a=parseInt(a)}if(typeof(a)!=="number"||a===0){return"00"}a=Math.max(0,a);a=Math.min(a,255);a=Math.round(a);return"0123456789ABCDEF".charAt((a-a%16)/16)+"0123456789ABCDEF".charAt(a%16)
};ISQ.Tools.hexToRGB=function(a){var b={r:-1,g:-1,b:-1};a=(a.charAt(0)=="#")?a.substring(1):a;b.r=parseInt(a.substring(0,2),16);b.g=parseInt(a.substring(2,4),16);b.b=parseInt(a.substring(4,6),16);return b};ISQ.Tools.getPrettyNumber=function(k,c,e,g){k=parseFloat(k);if(isNaN(k)){return k}var m="";if(e){if(k>=1073741824){k=k/1073741824;m="GB"}else{if(k>=1048576){k=k/1048576;m="MB"}else{if(k>=1024){k=k/1024;m="KB"}else{m="B"}}}}else{if(g&&k>=1000){k=k/1000;m="K"}}if(isNaN(c)&&c!==true&&c!==false){c=true}switch(c){case false:break;case 0:k=parseInt(k);break;case true:if(Math.abs(k)<10){c=2}else{if(Math.abs(k)<100){c=1}else{c=0}}k=k.toFixed(c);break;default:k=k.toFixed(c);break}if(k%1===0){k=parseInt(k)}var l=String(k);var d=null;var h=l.indexOf(".");if(h!==-1){d=l.substr(h);var n=-1;for(var f=0;f<d.length;++f){if(d.charAt(f)==="0"){if(n==-1){n=f}}else{n=-1}}if(n!=-1){d=d.substr(0,n)}if(d.length===1){d=null}l=l.substr(0,h)}k=parseInt(l);if((k/1000)>=1){var a=new Array(l.length+Math.floor((l.length-1)/3));var j=a.length;var b=0;for(var f=l.length-1;f>-1;--f){if(f<l.length-1&&b%3===0){a[j--]=","}a[j--]=l.charAt(f);++b}}else{a=[];a.push(k)}if(d!==""){a.push(d)}if(m){a.push(m)}return a.join("")};ISQ.Tools.formatPercentage=function(c){var b;var a=Math.abs(c);if(a>1000){b=(c/1000).toFixed(0)+"K "}else{if(a<1){b=c.toFixed(2)}else{if(a<10){b=c.toFixed(1)}else{b=c.toFixed(0)}}}return b+"%"};ISQ.Tools.toArray=function(d){if(d instanceof Array){return d}var b=new Array();if(typeof(d.length)!=="number"){b.push(d)}else{var c;if(d.length===0){for(c in d){b[c]=d[c]}}else{if(d.length>10000){_debug().insertText("Error converting object to an array. Object length: "+d.length);return new Array()}for(c=0;c<d.length;++c){b[c]=d[c]}}}return b};ISQ.Tools.getDateTicks=function(b,d,e,f,j){b=b.Trim();if(b===""){return -1}var c,g,k;var h=d.indexOf("dd");c=b.substr(h,2);if(isNaN(c)){return -1}h=d.indexOf("mm");g=b.substr(h,2);if(isNaN(g)){return -1}h=d.indexOf("yyyy");if(h===-1){h=d.indexOf("yy")}k=b.substr(h,4);if(isNaN(k)){return -1}var i=new Date();
e=typeof(e)=="undefined"?i.getHours():e;f=typeof(f)=="undefined"?i.getMinutes():f;j=typeof(j)=="undefined"?i.getSeconds():j;var a=new Date(k,g-1,c,e,f,j);return Date.UTC(a.getUTCFullYear(),a.getUTCMonth(),a.getUTCDate(),a.getUTCHours(),a.getUTCMinutes(),a.getUTCSeconds())};ISQ.Tools.getIPString=function(c){var b=false;if(c<0){c=-c;b=true}var d=new Array();if(b){d.push(256-(c%256))}else{d.push(c%256)}for(var a=2;a>=0;a--){c=Math.floor(c/256);d.push(".");if(b){d.push(255-(c%256))}else{d.push(c%256)}}return d.join("")};ISQ.Tools.getIPNum=function(c){var d=c.match(/^(\d{1,3})\.(\d{1,3})\.(\d{1,3})\.(\d{1,3})$/);if(d){var b=0,e;for(var a=1;a<=4;a++){e=parseInt(d[a]);if(e<0||e>255){return null}b=b*256+e}return b}return null};ISQ.Tools.isIPsValid=function(d){if(typeof d==="string"){if(d.length==0){return true}d=d.split(",")}for(var a=0;a<d.length;a++){var e=d[a].split("-");if(e.length==1){if(ISQ.Tools.getIPNum(e[0])==null){return false}}else{if(e.length==2){var b=ISQ.Tools.getIPNum(e[0]);if(b==null){return false}var c=ISQ.Tools.getIPNum(e[1]);if(c==null||b>c){return false}}else{return false}}}return true};ISQ.Tools.addRemoveClickOutsideElementsListener=function(c,d,a,b){if(!ISQ.Tools.clickOutsideListeners){ISQ.Tools.clickOutsideListeners=new Array()}if(d){ISQ.Tools.addRemoveClickOutsideElementsListener.count++;if(!c){c="clickOutsideElementsListener"+ISQ.Tools.addRemoveClickOutsideElementsListener.count}if(!ISQ.Base.isDerivedOf(b,ISQ.Handler)){b=new ISQ.Handler(b)}if(!ISQ.Tools.clickOutsideListeners[c]){ISQ.Tools.clickOutsideListeners[c]={}}if(ISQ.Tools.clickOutsideListeners[c].registered){if(document.removeEventListener){document.removeEventListener("click",ISQ.Tools.clickOutsideListeners[c].func,true);if(ISQ.Http.browser.isTablet){document.removeEventListener("touchstart",ISQ.Tools.clickOutsideListeners[c].func,true)}}else{if(document.detachEvent){document.detachEvent("onclick",ISQ.Tools.clickOutsideListeners[c].func)}}}ISQ.Tools.clickOutsideListeners[c].func=function(e){if(ISQ.Tools.clickOutsideListeners[c].ignoreNextClick){ISQ.Tools.clickOutsideListeners[c].ignoreNextClick=false;
return}if(ISQ.Tools.clickOutsideElements(e,a)){b.handle(e)}};ISQ.Tools.clickOutsideListeners[c].registered=true;if(document.addEventListener){document.addEventListener("click",ISQ.Tools.clickOutsideListeners[c].func,true);if(ISQ.Http.browser.isTablet){document.addEventListener("touchstart",ISQ.Tools.clickOutsideListeners[c].func,true)}}else{if(document.attachEvent){document.attachEvent("onclick",ISQ.Tools.clickOutsideListeners[c].func)}}}else{if(ISQ.Tools.clickOutsideListeners[c]&&ISQ.Tools.clickOutsideListeners[c].registered){ISQ.Tools.clickOutsideListeners[c].registered=false;if(document.removeEventListener){document.removeEventListener("click",ISQ.Tools.clickOutsideListeners[c].func,true);if(ISQ.Http.browser.isTablet){document.removeEventListener("touchstart",ISQ.Tools.clickOutsideListeners[c].func,true)}}else{if(document.detachEvent){document.detachEvent("onclick",ISQ.Tools.clickOutsideListeners[c].func)}}}}return c};ISQ.Tools.addRemoveClickOutsideElementsListener.count=0;ISQ.Tools.fireMouseEvents=function(c,b){if(document.createEvent){var a=document.createEvent("MouseEvents");a.initEvent(b,true,false);c.dispatchEvent(a)}else{if(document.createEventObject){c.fireEvent("on"+b)}}};ISQ.Tools.clickOutsideElements=function(c,b){if(!b||!(b instanceof Array)){return false}var a=ISQ.Html.getDomEvent(c);while(a.target!==document.body&&a.target!==null){for(var d in b){if(a.target==b[d]){return false}}a.target=a.target.parentNode}if(a.target!==document.body&&a.target!==null){return false}return true};ISQ.Tools.ignoreNextClickOutsideElementsEvent=function(a){if(!ISQ.Tools.clickOutsideListeners[a]){return}ISQ.Tools.clickOutsideListeners[a].ignoreNextClick=true};ISQ.Data=initializeNS("ISQ.Data");ISQ.Data.getEmailAddress=function(e){var a=/[\w-_\&.]+\@[\w-_]+\.+[\w-_.]+/g;var d=e.match(a);if(d===null||d.length===0){return null}var f=new RegExp();f.compile("[~!#$%^&*()=`'\"\\/><?[]{}|]","g");var b=new Array();for(var c=0;c<d.length;++c){if(d[c].search(f)===-1){b.push(d[c])}}return b};ISQ.Data.checkString=function(e,f){var d=true;
var c;switch(f){case"email":if(e.contains("..")){return false}if(e.contains(".@")||e.contains("@.")){return false}var a=/^[\w-_\&\+.]+\@([\w-_]+\.){1,}[\w-_]+$/;var g=new RegExp("[~!#$%^&*()=''\"\\/><?[]{}|]","g");return(e.search(g)===-1)&&(e.match(a))&&(e!=="");case"number":var b=/^[-]?[0-9]+\.?[0-9]?$/;return b.test(e);case"phone":var b=/^\+?[0-9\s(-)-\[\].\ ]*[#x]?[0-9\s]*?$/;return b.test(e);case"username":c=new RegExp(".+@[^.]+$");return(c.test(e));case"url":c=new RegExp("^https?://([a-zA-Z0-9]+.){1,}[a-zA-Z0-9]+");return(c.test(e))}return d};ISQ.Data.validateRangeInputs=function(d,g,f,a){var e=d.value.Trim();if(!e){return}var h=g.value.Trim();if(!h){return}var b=ISQ.Tools.getDateTicks(e,a);var c=ISQ.Tools.getDateTicks(h,a);if(b>c){if(f===d){d.value=h}else{g.value=e}}};ISQ.Tools.forceNumericValue=function(a,b){if(b){a.setAttribute("maxLength",b)}$(document).ready(function(){$(a).on("keydown",function(c){if(c.keyCode==46||c.keyCode==8||c.keyCode==9||c.keyCode==27||(c.keyCode==65&&c.ctrlKey===true)||(c.keyCode>=35&&c.keyCode<=39)){return}else{if(c.shiftKey||(c.keyCode<48||c.keyCode>57)&&(c.keyCode<96||c.keyCode>105)){c.preventDefault()}}})})};ISQ.Tools.extend=function(b,h){h=h||{};b=b===true;var d=arguments.length;var f=null;for(var c=2;c<d;c++){f=arguments[c];if(typeof(f)==="undefined"||f===null){continue}for(var e in f){var g=h[e],a=f[e];if(h===a){continue}if(typeof(a)==="undefined"){continue}if(b&&a!==null&&typeof(a)==="object"&&!a.nodeType){if(typeof(a.isDerivedOf)!=="function"||!a.isDerivedOf(ISQ.Base)){h[e]=ISQ.Tools.extend(true,g||(a.length!=null?[]:{}),a)}else{h[e]=a}}else{if(a!==undefined){h[e]=a}}}}return h};ISQ.Tools.addArrayToGC=function(b,a){b.add({dispose:function(){for(var c in a){a[c].dispose();a[c]=null}a=null}})};ISQ.Tools.blinkElement=function(a,d,c,b){if(c){ISQ.CSS.addClass(a,b);d--}else{ISQ.CSS.removeClass(a,b)}if(d){setTimeout(function(){ISQ.Tools.blinkElement(a,d,!c,b)},150)}};ISQ.Tools.toggleBlinkElement=function(a,b,c){if(a.blinkInterval){clearInterval(a.blinkInterval);ISQ.CSS.removeClass(a,b);
delete a.blinkInterval;return}a.blinkInterval=setInterval(function(){if(a.blinkOn){a.blinkOn=false;ISQ.CSS.removeClass(a,b)}else{a.blinkOn=true;ISQ.CSS.addClass(a,b)}},c||800)};ISQ.Data.autoEllipseText=function(n,p,b,e,c,a){var o;var d=false;a=a||null;if(e){o=e.offsetWidth}else{o=ISQ.Data.checkTextWidth(n,b);e=ISQ.Html._("ellipsisDiv")}var k=n;if(o>p){d=true;e.innerHTML="";var m=0,f=n.length,j;var l=f;do{j=m+Math.floor((f-m)/2);var h=false;var g;for(g=f;g>0&&(g>j||h);--g){if(n.charAt(g)===">"){h=true}else{if(n.charAt(g)==="<"){h=false}}}j=g;e.innerHTML=n.substr(0,j)+"...";if(e.offsetWidth<p){m=j}else{f=j}if(l===j){break}l=j}while((f-m)>1);if(e.offsetWidth>p||l==j){n=n.substr(0,j-1)+"..."}else{n=e.innerHTML}}else{if(c){return}}if(b){b.innerHTML=n;if(d){b.setAttribute("title",k)}}else{return n}};ISQ.Data.autoCssEllipseText=function(c,a,b){if(a){a.innerHTML=c;var d=ISQ.Data.checkTextWidth(c,a);if(d>b){ISQ.Console.Common.createTooltip(a,c,".plainTooltip");a.style.maxWidth=b+"px";a.style.whiteSpace="nowrap";a.style.overflow="hidden";a.style.textOverflow="ellipsis"}}return c};ISQ.Data.checkTextWidth=function(c,b){var a=ISQ.Html._("ellipsisDiv");if(!a){a=createDiv(null,"position:fixed;white-space:nowrap;top:0px;left:0px;z-index:-5;visibility:hidden");a.id="ellipsisDiv";document.body.insertBefore(a,document.body.firstChild)}else{clearNode(a)}ISQ.Data.copyElementFontStyle(b,a);a.innerHTML=c;return a.offsetWidth};ISQ.Data.copyElementFontStyle=function(b,c){if(!c||!b){return}var a=null;if(ISQ.Http.browser.isIE9&&document.body.style.overflow){a=document.body.style.overflow;document.body.style.overflow="hidden"}c.style.fontSize=ISQ.CSS.getElementStyle(b,"font-size");c.style.fontWeight=ISQ.CSS.getElementStyle(b,"font-weight");c.style.fontFamily=ISQ.CSS.getElementStyle(b,"font-family");c.style.fontStyle=ISQ.CSS.getElementStyle(b,"font-style");c.style.textDecoration=ISQ.CSS.getElementStyle(b,"text-decoration");if(a){document.body.style.overflow=a}};ISQ.Data=initializeNS("ISQ.Data");ISQ.Data.indexOfArray=function(a,c){var b=a.length;
while(b--){if(a[b]==c){return b}}return -1};ISQ.Data.inArray=function(a,b){return ISQ.Data.indexOfArray(a,b)!==-1};ISQ.Data.isObjectEmpty=function(b){for(var a in b){return false}return true};ISQ.Data.isObjectEmptyIE8=function(b){for(var a in b){if(b[a]===undefined){continue}return false}return true};ISQ.Data.parseJson=function(json){try{if(window.JSON&&JSON.parse){return JSON.parse(json)}var t=json.replace(/"(\\.|[^"\\])*"/g,"");if(!/[^,:{}\[\]0-9.\-+Eaeflnr-u \n\r\t]/.test(t)){return eval("("+json+")")}}catch(e){}};ISQ.Data.jsonToString=function(f,g,d){if(!d&&!window.Prototype){try{return JSON.stringify(f)}catch(a){}}if(!g){g=new Array()}if(f instanceof Array){g.push("[");for(var c=0;c<f.length;++c){if(c!==0){g.push(",")}ISQ.Data.jsonToString(f[c],g,true)}g.push("]")}else{if(f===null){g.push("null")}else{if(typeof(f)==="object"){g.push("{");var b=true;for(var c in f){if(!b){g.push(",")}b=false;g.push('"');g.push(c);g.push('"');g.push(":");ISQ.Data.jsonToString(f[c],g,true)}g.push("}")}else{if(typeof(f)==="string"){g.push('"');g.push(f.escaper());g.push('"')}else{g.push(f)}}}}if(!d){return g.join("")}};ISQ.Data.blockCreditCardNumbers=function(h,f){var e=/(?:4[0-9]{12}(?:[0-9]{3})?|5[1-5][0-9]{14}|6(?:011|5[0-9][0-9])[0-9]{12}|3[47][0-9]{13}|3(?:0[0-5]|[68][0-9])[0-9]{11}|(?:2131|1800|35\d{3})\d{11})/g;var k=h.replace(/ /g,"").replace(/-/g,"").replace(/\n/g,"").replace(/\r/g,"").replace(/\./g,"");var m=k;var d=k.match(e);if(!d||d.length==0){return h}for(var a=0;a<d.length;++a){var c=d[a];var g=new Array();for(var b=0;b<c.length;++b){g.push(f)}m=m.replace(c,g.join(""))}var l=0;for(var a=0;a<h.length;++a){if(h.charAt(a)==" "||h.charAt(a)=="-"){continue}if(k.charAt(l)!=m.charAt(l)){h=h.setCharAt(a,f)}l++}return h};ISQ.Data.htmlEncode=function(b){var a=createElement("div");a.innerHTML=b;if(typeof(a.innerText)!=="undefined"){return a.innerText.Trim()}else{if(typeof(a.textContent)!=="undefined"){return a.textContent.Trim()}}return a.innerHTML.Trim()};ISQ.Data.htmlDecode=function(b){var a=createElement("div");a.innerHTML=b;
return a.innerHTML.Trim()};ISQ.Data.getTextFromHtml=function(b){var a=createElement("div");a.innerHTML=b;return($(a).text()).Trim()};ISQ.Data.stripHtml=function(b,e,c){var h=0,g=-1,d=0;var a=new Array();var f;e=e||"";h=b.indexOf("<"+e,h);while(h>-1){a.push(b.substr(d,h-d));g=b.indexOf(">",h);d=h+1;if(g!=-1){f=b.substr(h+1,g-h-1).toLowerCase();if(f.startsWith("br")||f.startsWith("p")){if(c){a.push("<br/>")}else{a.push("\n ")}}d=g+1}else{a.push("<")}h=b.indexOf("<",d)}if(d!=b.length){a.push(b.substr(d,b.length-d))}return a.join("")};ISQ.Data.unHTML=function(a){if(!a){return""}a=a.replace(/\</g,"&lt;");a=a.replace(/\>/g,"&gt;");a=a.replace(/&lt;wbr\/&gt;/g,"<wbr/>");return a};ISQ.Data.toHTML=function(a){if(!a){return""}a=a.replace(/&lt;/g,"<");a=a.replace(/&gt;/g,">");return a};ISQ.Data.escapeJS=function(a){if(!a){return""}a=a.replace(/\'/g,"\\'");return a};ISQ.Data.processHTMLstring=function(H,s){s=s||{};var t={text:"",script:""};if(!H){return t}var y=H.indexOf("<");if(y===-1){if(s.decodeEntities){H=ISQ.Data.htmlEncode(H)}if(s.wordBreak){t.text=ISQ.Data.breakWords(H)}else{t.text=H}return t}var e=-1;var n=0;var o=-1;var v=new Array();var u=null;var F;do{if(n!==y){F=H.substring(n,y);if(s.decodeEntities){F=ISQ.Data.htmlEncode(F)}if(s.wordBreak){ISQ.Data.breakWords(F,v,true)}else{v.push(F)}}o=y;e=H.indexOf(">",y+1);if(e===-1){break}var l="";var A=H.charAt(y+1);var m=false;if(H.charAt(y+2)===" "&&(A==="A"||A==="a")){m=true;e=H.indexOf("</a>",y);if(e===-1){e=H.indexOf("</A>",y);if(e===-1){break}}e+=4;var z=H.substring(y,e);var C=createDiv(null);C.innerHTML=z;var j=C.firstChild;if(C.parentNode!=null){C.parentNode.removeChild(C)}C=null;if(j.nodeName!=="A"){break}var b=j.getAttribute("nanoreplinkid");if(b&&s.questionTagFunction){s.questionTagFunction(v,b,j.innerHTML,z,s.questionTagCustomParams||null)}else{var i=j.getAttribute("href");if(i&&i!="javascript:void(0)"&&i.charAt(0)!="#"&&s.allowLinksInSameWindow!==true){if(s.url&&!i.startsWith("\\")&&(i.indexOf(":/")===-1)&&(i.indexOf(":\\")===-1)&&!i.startsWith("mailto:")){if(i.startsWith("/")){var x=0;
if(s.url.startsWith("https://")){x+=8}else{if(s.url.startsWith("http://")){x+=7}}var d=s.url.substring(0,s.url.indexOf("/",x));i=d+i}else{var p=s.url.indexOf("?");var q=s.url.indexOf("#");var f;if(p===-1){if(q===-1){f=s.url.length-1}else{f=q}}else{if(q===-1){f=p}else{f=Math.min(p,q)}}var I=s.url.substring(0,s.url.LastIndexOf("/",f)+1);i=I+i}j.setAttribute("href",i)}var a=j.getAttribute("target");switch(a){case"blank":case"top":case"_blank":case"_top":case"_parent":case"parent":break;default:j.setAttribute("target","_blank");break}}else{if(i&&i.charAt(0)=="#"&&s.namedAnchorFunction){j.setAttribute("onclick","return "+s.namedAnchorFunction+"(this.hash)")}}l=elementToString(j,ISQ.Data.processHTMLstring(j.innerHTML,s).text)}}else{if(H.equals("table ",y+1)||H.equals("table>",y+1)){var E=H.indexOf("</table>",y);if(E===-1){E=H.indexOf("</TABLE>",y)}if(E!=-1){E+=8;var z=H.substring(y,E);var C=createDiv(null);C.innerHTML=z;var k=C.firstChild;if(C.parentNode!=null){C.parentNode.removeChild(C)}C=null;if(k.nodeName!=="TABLE"){break}m=true;e=E;for(var w in k.rows){var G=k.rows[w];for(var B in G.childNodes){var c=G.cells.length;if(G.childNodes[B].nodeName!="TD"){continue}G.childNodes[B].setAttribute("width",100/c+"%");G.childNodes[B].style.width=100/c+"%"}}k.setAttribute("width","100%");k.style.width="100%";k.style.tableLayout="fixed";l=elementToString(k,ISQ.Data.processHTMLstring(k.innerHTML,s).text)}}else{if(H.equals("script ",y+1)||H.equals("script>",y+1)&&s.doNotProcessScriptTag!==true){var h=H.indexOf(">",y+6);if(h===-1){break}var g=H.indexOf("</",h);if(g===-1){break}var r=H.substring(y,h);if(r==="<script"||/type=['"]text\/javascript['"]/.test(r)){if(u===null){u=new Array()}u.push(H.substring(h+1,g));u.push(";");var D=H.indexOf(">",g+2);if(D!==-1){e=++D;m=true}}}}}if(!m){l=H.substring(y,++e)}v.push(l);n=e;y=H.indexOf("<",n)}while(y!==-1);if(e===-1){F=H.substring(o);if(s.decodeEntities){F=ISQ.Data.htmlEncode(F)}if(s.wordBreak){ISQ.Data.breakWords(F,v,true)}else{v.push(F)}}else{F=H.substring(n);if(s.decodeEntities){F=ISQ.Data.htmlEncode(F)
}if(s.wordBreak){ISQ.Data.breakWords(F,v,true)}else{v.push(F)}}t.text=v.join("");if(u){t.script=u.join("")}return t};ISQ.Data.getDBAnswerAsHtml=function(h,g,d,c,b,f){try{return ISQ.Data.processHTMLstring(h,{wordBreak:g!==true,questionTagFunction:d,questionTagCustomParams:c,namedAnchorFunction:b,decodeEntities:false,url:f})}catch(a){if(typeof(_debug)==="function"){_debug().insertText("ISQ.Data.getDBAnswerAsHtml exception: "+h)}return{text:"",error:a}}};ISQ.Data.createLink=function(e,h,f,c,b,g,a){if(!e||!h){return""}if(b&&g){e=ISQ.Data.unHTML(ISQ.Data.breakWords(e))}else{if(b){e=ISQ.Data.breakWords(e)}else{if(g){e=ISQ.Data.unHTML(e)}}}if(a&&!h.startsWith("http://")&&!h.startsWith("https://")){h="http://"+h}var d=new Array();d.push('<a href="');d.push(h);if(f){d.push('" target="');d.push(f)}if(c){d.push('" class="');d.push(c)}d.push('">');d.push(e);d.push("</a>");return d.join("")};ISQ.Data.parseURL=function(a,b){if(!a){return""}return a.replace(/[A-Za-z]+:\/\/[A-Za-z0-9-_]+\.[A-Za-z0-9-_:%&\?\/.=]+/,function(c){return ISQ.Data.createLink(c,c,b)})};ISQ.Data.breakWords=function(e,d,f){if(!e){if(d){return}return""}var c=new ISQ.Data.EntityParser(e);var b={};var a;if(d){a=d}else{a=new Array()}while(c.getNextSegment(b)){ISQ.Data.breakWords_internal(b.segment,a,f);if(b.entity){a.push(b.entity)}}c.dispose();if(d){return}return a.join("")};ISQ.Data.breakWords_internal=function(e,d,f){if(!e||!d){return}var g="<wbr/>";if(ISQ.Http.browser.full.startsWith("safari3")||ISQ.Http.browser.isOpera||ISQ.Http.browser.isIE8||ISQ.Http.browser.isIE9||ISQ.Http.browser.isIE10){g="&#8203;"}if(f&&ISQ.Http.browser.isIE8){g="&shy;"}var b=e.length;var h=0;var c=-1;for(var a=0;a<b;++a){if(e.charAt(a)===" "){h=0}else{if(h>=20&&h%2===0){d.push(e.substring(c+1,a+1));c=a;d.push(g);++h}else{++h}}}d.push(e.substring(c+1))};ISQ.Data.EntityParser=ISQ.Base.extend({name:"ISQ.Data.EntityParser"});ISQ.Data.EntityParser.prototype.ctor=function(a){if(!a){throw ("ISQ.Data.EntityParser: no txt")}this.mOriginalText=a;this.mIndex=0};ISQ.Data.EntityParser.prototype.dtor=function(){};
ISQ.Data.EntityParser.prototype.getNextSegment=function(c){if(this.mIndex==this.mOriginalText.length){return false}if(typeof(this.mOriginalText)==="boolean"){this.mOriginalText=this.mOriginalText.toString()}var b=this.mOriginalText.indexOf("&",this.mIndex);var a=this.mOriginalText.indexOf(";",b);if(b===-1||a===-1||a-b>8){c.entity=null;c.segment=this.mOriginalText.substring(this.mIndex);this.mIndex=this.mOriginalText.length}else{if(b!==-1){c.entity=this.mOriginalText.substring(b,++a);var d=this.mOriginalText.substring(this.mIndex,b);c.segment=d;this.mIndex=a}}return true};ISQ.Data.escapeXml=function(a){return a.replace(/[<>&'"]/g,function(b){switch(b){case"<":return"&lt;";case">":return"&gt;";case"&":return"&amp;";case"'":return"&apos;";case'"':return"&quot;"}})};ISQ.Data.EntityParser.prototype.mOriginalText;ISQ.Data.EntityParser.prototype.mLastEntityFound=null;ISQ.Data.EntityParser.prototype.mAlteredText;ISQ.Data.EntityParser.prototype.mIndex=0;ISQ.Data.EntityParser.prototype.mNextIndex=-1;ISQ.Tools.FileLoader=initializeNS("ISQ.Tools.FileLoader");ISQ.Tools.FileLoader.ajaxPool=null;ISQ.Tools.FileLoader.getAjaxPool=function(){if(ISQ.Tools.FileLoader.ajaxPool===null){var a=(ISQ.Http.browser.isIE6||ISQ.Http.browser.isIE7)?1:2;ISQ.Tools.FileLoader.ajaxPool=new Ajax.Pool("/kb",a,Ajax.methodEnum.GET,Ajax.typeEnum.ASYNC,10000);ISQ.Tools.FileLoader.ajaxPool.incomingResponseEvent.addHandler(ISQ.Tools.FileLoader.loadResponse)}return ISQ.Tools.FileLoader.ajaxPool};ISQ.Tools.FileLoader.load=function(src,handler,tag,splitInHeader){if(handler&&!ISQ.Base.isDerivedOf(handler,ISQ.Handler)){handler=new ISQ.Handler(handler)}var responseHandler=function(text,path){try{var simpleUrl=src;var ndx=src.indexOf("?");if(ndx!=-1){simpleUrl=src.substring(0,ndx)}else{if((ndx=src.indexOf("#"))!=-1){simpleUrl=src.substring(0,ndx)}}if(simpleUrl.endsWith(".css")){ISQ.CSS.addNewStyle(text,"fileloaderStyleSheet",splitInHeader)}else{if(simpleUrl.endsWith(".js")||simpleUrl.endsWith(".repo")){text+="//# sourceURL=https://"+window.location.hostname+(path[0]!=="/"?"/":"")+path;
eval(text)}}}catch(ex){_debug().insertText("ISQ.Tools.FileLoader.loadResponse: Error loading file.\n"+ex)}if(handler){handler.handle(tag,text)}};if(typeof(ISQ.Com)!=="undefined"&&typeof(ISQ.Com.TinyAjax)!=="undefined"){ISQ.Com.TinyAjax.create({url:src,method:ISQ.Com.TinyAjax.enumMethod.GET,timeout:5000,handler:function(status,text){if(status!=ISQ.Com.TinyAjax.enumStatus.OK){return}responseHandler(text,src)}})}else{var request=new Ajax.Request(src,Ajax.methodEnum.GET,Ajax.typeEnum.ASYNC);request.disableProcessJson=true;request.incomingResponseEvent.addHandler(function(response){if(response.type!==Ajax.responseTypeEnum.OK){return}responseHandler(response.text,src);setTimeout(function(){request.dispose()},0)});request.send()}};ISQ.Tools.appendScript=function(d,a){var c=document.createElement("script");c.type="text/javascript";c.async=true;c.defer=true;if(d instanceof Array){d=d.join("")}if(a){var b=function(){if(ISQ.Base.isDerivedOf(a,ISQ.Handler)){a.handle()}else{a()}};if(ISQ.Http.browser.app!=="ie"||ISQ.Http.browser.isIE11){c.onload=b}else{c.onreadystatechange=function(){if(this.readyState!=="complete"&&this.readyState!=="loaded"){return}b()}}}c.src=d;document.getElementsByTagName("head")[0].appendChild(c);return c};ISQ.Tools.Base64={_keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",encode:function(j){var k="";var a,b,c,d,e,f,g;var h=0;while(h<j.length){a=j.charCodeAt(h++);b=j.charCodeAt(h++);c=j.charCodeAt(h++);d=a>>2;e=((a&3)<<4)|(b>>4);f=((b&15)<<2)|(c>>6);g=c&63;if(isNaN(b)){f=g=64}else{if(isNaN(c)){g=64}}k=k+this._keyStr.charAt(d)+this._keyStr.charAt(e)+this._keyStr.charAt(f)+this._keyStr.charAt(g)}return k},decode:function(j){var k="";var a,b,c;var d,e,f,g;var h=0;j=j.replace(/[^A-Za-z0-9\+\/\=]/g,"");while(h<j.length){d=this._keyStr.indexOf(j.charAt(h++));e=this._keyStr.indexOf(j.charAt(h++));f=this._keyStr.indexOf(j.charAt(h++));g=this._keyStr.indexOf(j.charAt(h++));a=(d<<2)|(e>>4);b=((e&15)<<4)|(f>>2);c=((f&3)<<6)|g;k=k+String.fromCharCode(a);if(f!=64){k=k+String.fromCharCode(b)}if(g!=64){k=k+String.fromCharCode(c)
}}return k},_utf8_encode:function(d){d=d.replace(/\r\n/g,"\n");var e="";for(var b=0;b<d.length;b++){var a=d.charCodeAt(b);if(a<128){e+=String.fromCharCode(a)}else{if((a>127)&&(a<2048)){e+=String.fromCharCode((a>>6)|192);e+=String.fromCharCode((a&63)|128)}else{e+=String.fromCharCode((a>>12)|224);e+=String.fromCharCode(((a>>6)&63)|128);e+=String.fromCharCode((a&63)|128)}}}return e},_utf8_decode:function(g){var f="";var e=0;var a=0;var b=0;var d=0;while(e<g.length){a=g.charCodeAt(e);if(a<128){f+=String.fromCharCode(a);e++}else{if((a>191)&&(a<224)){b=g.charCodeAt(e+1);f+=String.fromCharCode(((a&31)<<6)|(b&63));e+=2}else{b=g.charCodeAt(e+1);d=g.charCodeAt(e+2);f+=String.fromCharCode(((a&15)<<12)|((b&63)<<6)|(d&63));e+=3}}}return f},encodeString:function(c){if(!c){return""}var a=false;for(var b=0;b<c.length&&!a;++b){if(c.charCodeAt(b)>127){a=true}}if(a){c=ISQ.Tools.Base64._utf8_encode(c)}return ISQ.Tools.Base64.encode(c)},decodeString:function(a){var d=ISQ.Tools.Base64.decode(a);var b=false;for(var c=0;c<d.length&&!b;++c){if(d.charCodeAt(c)>127){b=true}}if(b){d=ISQ.Tools.Base64._utf8_decode(d)}return d}};ISQ.Data.getURLencodedString=function(a){if(!a){return""}return escape(ISQ.Tools.Base64._utf8_encode(a))};ISQ.Data.getURLdecodedString=function(a){if(!a){return""}return ISQ.Tools.Base64._utf8_decode(unescape(a))};ISQ.Tools.compareArrays_flat=function(a,b,d){if(a===b){return true}if(!a&&!b){return true}if(!a||!b){return false}if(a.length!==b.length){return false}for(var c=0;c<a.length;++c){if(a[c]!==b[c]){return false}}return true};ISQ.Tools.compareArrays=function(a,b,f){if(a===b){return true}if(!a&&!b){return true}if(!a||!b){return false}if(a.length!==b.length){return false}for(var d in a){var g=a[d];var c=false;for(var e in b){if(b[e]===g){c=true;break}}if(!c){return false}}if(f){return true}return ISQ.Tools.compareArrays(b,a,true)};ISQ.Tools.reverseArray=function(a){var d=a.length;for(var b=0;b<a.length;++b){var e=0;for(var c=1;c<d;++c){var f=a[e];a[e]=a[c];a[c]=f;++e}--d}};ISQ.Tools.disposeArray=function(a){if(!a){return
}for(var b=0;b<a.length;++b){if(!a[b]){continue}if(a[b] instanceof Array){ISQ.Tools.disposeArray(a[b]);continue}if(typeof(a[b].dispose)==="function"){a[b].dispose()}a[b]=null;delete a[b]}};ISQ.Tools.isInCSVList=function(c,b){if(typeof(c)!=="string"||typeof(b)!=="string"){return false}if(!c||!b){return false}b=b.Trim();c=c.Trim();var a=c.indexOf(b);if(a==-1){return false}if(a>0&&c[a-1]!=","){return false}if(a+b.length<c.length&&c[a+b.length]!=","){return false}return true};ISQ.Tools.getUniformLanguageCode=function(a){if(!a){return null}var b=ISQ.Tools.UniformLanguageCode[a];if(b){return b}return a};ISQ.Tools.UniformLanguageCode={he:"iw","zh-CHS":"zh","zh-CHT":"zh","zh-CN":"zh"};ISQ.Tools.isLanguageRTL=function(a){a=ISQ.Tools.getUniformLanguageCode(a);switch(a){case"iw":case"ar":case"yi":case"ur":return true}return false};ISQ.Tools.Languages={ar:"Arabic",bg:"Bulgarian",cs:"Czech",da:"Danish",de:"German",el:"Greek, Modern",en:"English",es:"Spanish",et:"Estonian",fi:"Finnish",fr:"French",hi:"Hindi",hu:"Hungarian",id:"Indonesian",it:"Italian",iw:"Hebrew",ja:"Japanese",ko:"Korean",lt:"Lithuanian",lv:"Latvian",nl:"Dutch",no:"Norwegian",pl:"Polish",pt:"Portuguese",ro:"Romanian, Moldavian, Moldovan",ru:"Russian",sk:"Slovak",sl:"Slovene",sv:"Swedish",th:"Thai",tr:"Turkish",uk:"Ukrainian",vi:"Vietnamese",yi:"Yiddish",zh:"Chinese"};ISQ.Tools.LanguageSynonym={"zh-CHS":"Chinese","zh-CHT":"Chinese","zh-CN":"Chinese",he:"Hebrew"};ISQ.Tools.getLanguageName=function(b){var a=ISQ.Tools.Languages[b];if(!a){a=ISQ.Tools.LanguageSynonym[b]}if(!a){return null}return a};ISQ.Tools.pagerSeperator="<page_separator/>";ISQ.Data.uniqueId=function(){return Math.floor(Math.random()*10000000)};ISQ.Data.nowMili=new Date().getTime();ISQ.Data.dayInMs=24*60*60*1000;ISQ.Tools.HTML=initializeNS("ISQ.Tools.HTML");ISQ.Tools.HTML.openPopup=function(g,c,h,a,e){var b=(screen.width/2)-(h/2);var f=(screen.height/2)-(a/2);var d=e||"no";return window.open(g,c,"toolbar=no, location=no, directories=no, status=no, menubar=no, scrollbars="+d+", resizable=no, copyhistory=no, width="+h+", height="+a+", top="+f+", left="+b)
};ISQ.Data.decodeEntities=function(b){try{if(typeof(jQuery)==="function"){return $("<div/>").html(b).text()}if(!ISQ.Data.entityDecoderElement){ISQ.Data.entityDecoderElement=createElement("textarea",document.body,"display:none;visibility:hidden;position:absolute;top:100px;left:13px;")}ISQ.Data.entityDecoderElement.innerHTML=ISQ.Data.unHTML(b);return ISQ.Data.entityDecoderElement.value}catch(a){return b}};ISQ.Data.parseArticleContext=function(g,f){var e=new Array();var d=0,b=false,c=0,a;while(d<g.length){d=g.indexOf(",",c);if(d===-1){d=g.length}b=!b;if(b){a=g.substring(c,d++)}else{if(!f){e[a]=g.substring(c,d++)}else{e.push(g.substring(c,d++))}}c=d}return e};ISQ.Tools=initializeNS("ISQ.Tools");ISQ.Tools.setSelectionRange=function(a,d,c){if(a.setSelectionRange){a.setSelectionRange(d,c);return}if(a.createTextRange){var b=a.createTextRange();b.collapse(true);b.moveEnd("character",c);b.moveStart("character",d);b.select()}};ISQ.Tools.createEditableDateInput=function(){var d=$('<div class="input-date-container">');d.on("click",function(i){if(i.target.nodeName!="INPUT"){$(a).trigger("focus")}});var a=createInput("text");ISQ.Tools.forceNumericValue(a,2);$(a).on("keydown",function(i){if(i.keyCode==39){return}var k=this.value;if(k.length==2&&this.cursor>2){if(k>31){this.cursor=0;ISQ.Tools.setSelectionRange(this,0,0);this.value="01"}else{try{$(f).trigger("focus")}catch(i){}}}if(i.keyCode==13){d.trigger("change",c());return}var k=this.value;if(e(i.keyCode)){var j=b(i.keyCode);if(this.cursor==0){this.value=j+this.value.substr(-1);this.cursor++;setTimeout(function(){ISQ.Tools.setSelectionRange(this,1,2)}.bind(this),20)}else{if(this.cursor==1){this.value=this.value.substr(0,1)+j;this.cursor++;ISQ.Tools.setSelectionRange(this,2,2);$(f).trigger("focus")}}}if(i.keyCode==39){if(this.cursor<=1){this.cursor++;ISQ.Tools.setSelectionRange(this,this.cursor,this.cursor)}else{$(f).trigger("focus");i.preventDefault()}i.preventDefault()}});$(a).on("click",function(){try{$(this).trigger("focus")}catch(i){}});$(a).on("focus",function(){try{ISQ.Tools.setSelectionRange(this,0,2);
this.cursor=0}catch(i){}});$(a).on("blur",function(){if(this.value>31){this.value="31"}if(this.value=="00"){this.value="01"}if(this.value.length==1){this.value="0"+this.value}d.trigger("change",c())});var f=createInput("text");ISQ.Tools.forceNumericValue(f,2);$(f).on("keydown",function(i){if(i.keyCode==39){return}var k=this.value;if(k.length==2&&this.cursor>2){if(k>12){this.cursor=0;ISQ.Tools.setSelectionRange(this,0,0);this.value="01"}else{try{$(h).trigger("focus")}catch(i){}}}if(i.keyCode==13){d.trigger("change",c());return}var k=this.value;if(e(i.keyCode)){var j=b(i.keyCode);if(this.cursor==0){this.value=j+this.value.substr(-1);this.cursor++;setTimeout(function(){ISQ.Tools.setSelectionRange(this,1,2)}.bind(this),20)}else{if(this.cursor==1){this.value=this.value.substr(0,1)+j;this.cursor++;ISQ.Tools.setSelectionRange(this,2,2);try{$(h).trigger("focus")}catch(i){}}}}if(i.keyCode==39){if(this.cursor<=1){this.cursor++;ISQ.Tools.setSelectionRange(this,this.cursor,this.cursor)}else{try{$(h).trigger("focus")}catch(i){}}i.preventDefault()}if(i.keyCode==37){if(this.cursor>0){this.cursor--;ISQ.Tools.setSelectionRange(this,this.cursor,this.cursor)}else{try{$(a).trigger("focus")}catch(i){}}i.preventDefault()}});$(f).on("click",function(){try{$(this).trigger("focus")}catch(i){}});$(f).on("focus",function(i){setTimeout(function(){try{ISQ.Tools.setSelectionRange(this,0,2);this.cursor=0}catch(j){}}.bind(this),0)});$(f).on("blur",function(){if(this.value>12){this.value="12"}if(this.value=="00"){this.value="01"}if(this.value.length==1){this.value="0"+this.value}d.trigger("change",c())});var h=createInput("text",null,null,null,null,".year");ISQ.Tools.forceNumericValue(h,4);$(h).on("keydown",function(i){if(i.keyCode==13){d.trigger("change",c());return}if(e(i.keyCode)){var j=b(i.keyCode);if(this.cursor==0){this.value=j+this.value.substr(1);this.cursor++;setTimeout(function(){ISQ.Tools.setSelectionRange(this,1,4)}.bind(this),20)}else{if(this.cursor<4){this.value=this.value.substr(0,this.cursor)+j+this.value.substr(this.cursor+1);this.cursor++;
if(this.cursor==4&&g){try{g.find("input:first").trigger("focus")}catch(i){}i.preventDefault()}else{setTimeout(function(){ISQ.Tools.setSelectionRange(this,this.cursor,4)}.bind(this),20)}if(this.value=="0000"){this.value=new Date().getFullYear()}}}}if(i.keyCode==37){if(this.cursor>0){this.cursor--;ISQ.Tools.setSelectionRange(this,this.cursor,this.cursor)}else{try{$(f).trigger("focus")}catch(i){}}i.preventDefault()}if(i.keyCode==39){if(this.cursor<=3){this.cursor++;ISQ.Tools.setSelectionRange(this,this.cursor,this.cursor)}else{if(g){try{g.find("input:first").trigger("focus")}catch(i){}i.preventDefault()}}i.preventDefault()}if(g&&i.keyCode==9){try{g.find("input:first").eq(0).trigger("focus")}catch(i){}i.preventDefault()}});$(h).on("blur",function(){var i=$(this).val();if(i.length<4){$(this).val(new Date().getFullYear());this.cursor=0;ISQ.Tools.setSelectionRange(this,0,0)}if(i=="0000"){this.value=new Date().getFullYear()}d.trigger("change",c())});$(h).on("click",function(){try{$(this).trigger("focus")}catch(i){}});$(h).on("focus",function(){setTimeout(function(){try{ISQ.Tools.setSelectionRange(this,0,4);this.cursor=0}catch(i){}}.bind(this),0)});function c(){return a.value+"/"+f.value+"/"+h.value}function e(i){return i>=48&&i<=57||i>=96&&i<=105}function b(i){return String.fromCharCode((i>=96&&i<=105)?i-48:i)}d.setValue=function(i){a.value=i.substr(0,2);f.value=i.substr(3,2);h.value=i.substr(6,4)};var g=null;d.linkToDate=function(i){g=i};d.append(a);d.append($("<span>/</span>"));d.append(f);d.append($("<span>/</span>"));d.append(h);return d};ISQ.Tools.HTML.getTotalHeight=function(a){var c=0;var b=window.getComputedStyle(a);c+=parseInt(b.marginTop);c+=parseInt(b.marginBottom);c+=a.offsetHeight;return c};ISQ.Tools.HTML.escapeHtml=function(b){var a=document.createElement("div");a.appendChild(document.createTextNode(b));return a.innerHTML};ISQ.Tools.HTML.unescapeHtml=function(c){var b=document.createElement("div");b.innerHTML=c;var a=b.childNodes[0];return a?a.nodeValue:""};ISQ.Tools=initializeNS("ISQ.Tools");ISQ.Tools.Storage=initializeNS("ISQ.Tools.Storage");
ISQ.Tools.Storage.HTML5=false;try{ISQ.Tools.Storage.HTML5=window.localStorage!==null&&typeof(window.localStorage)!=="undefined"}catch(ex){}ISQ.Tools.Storage.get=function(a,b){if(!ISQ.Tools.Storage.HTML5){return null}if(b){return window.sessionStorage.getItem(a)}else{return window.localStorage.getItem(a)}};ISQ.Tools.Storage.set=function(a,c,b){if(!ISQ.Tools.Storage.HTML5){return false}if(b){window.sessionStorage.setItem(a,c)}else{window.localStorage.setItem(a,c)}return true};ISQ.Tools.Storage.remove=function(a,b){if(!ISQ.Tools.Storage.HTML5){return}if(b){window.sessionStorage.removeItem(a)}else{window.localStorage.removeItem(a)}};ISQ.Tools.Storage.clear=function(a){if(!ISQ.Tools.Storage.HTML5){return}if(a){window.sessionStorage.clear()}else{window.localStorage.clear()}};ISQ.Tools=initializeNS("ISQ.Tools");ISQ.Tools.foreach=function(a,b){for(var c in a){var d=null;if(ISQ.Base.isDerivedOf(b,ISQ.Handler)){d=b.handle(a[c],c)}else{d=b(a[c],c)}if(d===false){break}}};window.foreach=ISQ.Tools.foreach;ISQ.Tools.iteration=function(a,c,b){if(!b){for(var d=0;d<a.length;++d){var e=null;if(ISQ.Base.isDerivedOf(c,ISQ.Handler)){e=c.handle(a[d],d)}else{e=c(a[d],d)}if(e===false){break}}}else{for(var d=a.length-1;d>=0;--d){var e=null;if(ISQ.Base.isDerivedOf(c,ISQ.Handler)){e=c.handle(a[d],d)}else{e=c(a[d],d)}if(e===false){break}}}};window.iteration=window._it=ISQ.Tools.iteration;</script>
    <script type="text/javascript" mini="true">if(typeof(ISQ.Infra)==="undefined"){ISQ.Infra={}}ISQ.Infra.Queue=ISQ.Base.extend({name:"ISQ.Infra.Queue"});ISQ.Infra.Queue.prototype.ctor=function(){};ISQ.Infra.Queue.prototype.dtor=function(){this.reset();delete this.mArray};ISQ.Infra.Queue.prototype.mArray=null;ISQ.Infra.Queue.prototype.mLength=0;ISQ.Infra.Queue.prototype.mDndx=0;ISQ.Infra.Queue.prototype.mEndx=0;ISQ.Infra.Queue.prototype.mCount=0;ISQ.Infra.Queue.prototype.count=function(){return this.mCount};ISQ.Infra.Queue.prototype.init=function(){this.mLength=5;this.mArray=new Array(this.mLength);for(var a=0;a<this.mLength;++a){this.mArray[a]=null}};ISQ.Infra.Queue.prototype.enqueue=function(a){if(a===null){return}if(this.mArray===null){this.init()}if(this.mArray[this.mEndx]!==null){this.enlarge()}this.mArray[this.mEndx++]=a;if(this.mEndx===this.mLength){this.mEndx=0}++this.mCount};ISQ.Infra.Queue.prototype.priorityEnqueue=function(c){if(c===null){return}if(this.mArray===null){this.init()}var a=new Array();a.push(c);var b=this.mCount+1;while(this.mCount>0){a.push(this.dequeue())}this.mDndx=0;this.mEndx=a.length;if(this.mLength<b){this.mLength*=2}this.mCount=b;this.mArray=a};ISQ.Infra.Queue.prototype.enlarge=function(){var a=new Array();var b=this.mCount;while(this.mCount>0){a.push(this.dequeue())}this.mDndx=0;this.mEndx=a.length;this.mLength*=2;this.mCount=b;this.mArray=a};ISQ.Infra.Queue.prototype.dequeue=function(){if(this.mCount===0){return null}if(this.mDndx===this.mLength){this.mDndx=0}var a=this.mArray[this.mDndx];this.mArray[this.mDndx++]=null;--this.mCount;return a};ISQ.Infra.Queue.prototype.reset=function(){this.mDndx=0;this.mEndx=0;this.mCount=0;if(this.mArray!==null){for(var a=0;a<this.mArray.length;++a){if(this.mArray[a]){if(typeof(this.mArray[a].dispose)==="function"){this.mArray[a].dispose()}delete this.mArray[a]}}}};</script>
    <script type="text/javascript" mini="true">if(typeof(ISQ.Infra)==="undefined"){ISQ.Infra={}}ISQ.Infra.LinkedList=ISQ.Base.extend({name:"ISQ.Infra.LinkedList"});ISQ.Infra.LinkedList.prototype.ctor=function(){};ISQ.Infra.LinkedList.prototype.dtor=function(){var b=this.mHead;while(b!==null){var a=b;b=b.mNext;a.dispose()}this.mHead=null;this.mTail=null;this.mCount=0};ISQ.Infra.LinkedList.prototype.mHead=null;ISQ.Infra.LinkedList.prototype.mTail=null;ISQ.Infra.LinkedList.prototype.mCount=0;ISQ.Infra.LinkedList.prototype.head=function(){return this.mHead};ISQ.Infra.LinkedList.prototype.tail=function(){return this.mTail};ISQ.Infra.LinkedList.prototype.count=function(){return this.mCount};ISQ.Infra.LinkedList.prototype.addFirst=function(b){var a=b;if(!ISQ.Base.isDerivedOf(a,ISQ.Infra.LinkedListNode)){a=new ISQ.Infra.LinkedListNode(b,this)}if(a.mList!==this){throw ("ISQ.Infra.LinkedList.addFirst() ")}if(this.mHead===null){this.mHead=a;this.mTail=a}else{this.mHead.mPrevious=a;a.mNext=this.mHead;this.mHead=a}++this.mCount;return a};ISQ.Infra.LinkedList.prototype.addLast=function(b){var a=b;if(!ISQ.Base.isDerivedOf(a,ISQ.Infra.LinkedListNode)){a=new ISQ.Infra.LinkedListNode(b,this)}if(a.mList!==this){throw ("ISQ.Infra.LinkedList.addLast() tried to remove non-existing value")}if(this.mTail===null){this.mHead=a;this.mTail=a}else{this.mTail.mNext=a;a.mPrevious=this.mTail;this.mTail=a}++this.mCount;return a};ISQ.Infra.LinkedList.prototype.setFirst=function(a){if(this.head()===a){return a}this.remove(a,false);this.addFirst(a);return a};ISQ.Infra.LinkedList.prototype.setLast=function(a){if(this.tail()===a){return a}this.remove(a,false);this.addLast(a);return a};ISQ.Infra.LinkedList.prototype.remove=function(a,b){if(!ISQ.Base.isDerivedOf(a,ISQ.Infra.LinkedListNode)){throw ("ISQ.Infra.LinkedList.remove() Unexpected node type")}if(a.mList!==this){throw ("ISQ.Infra.LinkedList.remove() tried to remove non-existing value")}if(this.mCount===1){this.mHead=null;this.mTail=null}else{if(this.mHead===a){this.mHead=a.mNext;this.mHead.mPrevious=null}else{if(this.mTail===a){this.mTail=a.mPrevious;
this.mTail.mNext=null}else{a.mPrevious.mNext=a.mNext;a.mNext.mPrevious=a.mPrevious}}}a.mNext=null;a.mPrevious=null;--this.mCount;if(b!==false){a.dispose()}};ISQ.Infra.LinkedList.prototype.contains=function(b){var a=this.mHead;while(a!==null){if(a===b){return true}a=a.mNext}return false};ISQ.Infra.LinkedListNode=ISQ.Base.extend({name:"ISQ.Infra.LinkedListNode"});ISQ.Infra.LinkedListNode.prototype.ctor=function(){this.mData=arguments[0];this.mList=arguments[1];this.mPrevious=null;this.mNext=null};ISQ.Infra.LinkedListNode.prototype.dtor=function(){this.mData=null;delete this.mData;delete this.mNext;delete this.mPrevious;delete this.mList};ISQ.Infra.LinkedListNode.prototype.mData=null;ISQ.Infra.LinkedListNode.prototype.mNext=null;ISQ.Infra.LinkedListNode.prototype.mPrevious=null;ISQ.Infra.LinkedListNode.prototype.mList=null;ISQ.Infra.LinkedListNode.prototype.data=function(){if(arguments.length===0){return this.mData}this.mData=arguments[0]};ISQ.Infra.LinkedListNode.prototype.next=function(){return this.mNext};ISQ.Infra.LinkedListNode.prototype.previous=function(){return this.mPrevious};</script>
    <script type="text/javascript" mini="true">if(typeof(ISQ.Infra)==="undefined"){ISQ.Infra={}}ISQ.Infra.Stack=ISQ.Base.extend({name:"ISQ.Infra.Stack"});ISQ.Infra.Stack.prototype.ctor=function(){};ISQ.Infra.Stack.prototype.dtor=function(){this.clear()};ISQ.Infra.Stack.prototype.mArr=null;ISQ.Infra.Stack.prototype.mIndex=-1;ISQ.Infra.Stack.prototype.pop=function(){var a=this.mArr[this.mIndex];this.mArr[this.mIndex--]=null;return a};ISQ.Infra.Stack.prototype.peek=function(){if(this.mIndex===-1){return null}return this.mArr[this.mIndex]};ISQ.Infra.Stack.prototype.count=function(){return this.mIndex};ISQ.Infra.Stack.prototype.push=function(a){if(!this.mArr){this.mArr=new Array();this.mIndex=-1}this.mArr[++this.mIndex]=a};ISQ.Infra.Stack.prototype.clear=function(){this.mArr=null};</script>
    
    <script type="text/javascript" mini="true">ISQ.Html=initializeNS("ISQ.Html");ISQ.Html=initializeNS("ISQ.Html");ISQ.Html._=function(d,a){if(!d){return null}var b=null;if(typeof(d)==="string"){if(ISQ.Http.browser.app==="ie"){if(!ISQ.Html.IE_idMap){ISQ.Html.IE_idMap=new Array();if(typeof(ISQ.Console)!=="undefined"&&typeof(sessionGC)==="function"){sessionGC().add(ISQ.Html.IE_idMap);ISQ.Html.IE_idMap.dispose=function(){ISQ.Html.IE_idMap=new Array()}}}if(!a){b=ISQ.Html.IE_idMap[d];if(ISQ.Http.browser.isIE&&b){var c=b;do{c=c.parentNode}while(c!==null&&c!==document);if(c===null){b=null}}}if(!b||a===true){b=document.getElementById(d);if(b){ISQ.Html.IE_idMap[d]=b}}}else{b=document.getElementById(d)}}else{if(typeof(d)==="object"&&typeof(d.parentNode)!=="undefined"&&typeof(d.nodeName)!=="undefined"){b=d}}return b};if(typeof(window._)!=="function"){window._=ISQ.Html._}ISQ.Html=initializeNS("ISQ.Html");ISQ.Html.pageDirection=function(){if(!ISQ.Html._pageDirection){ISQ.Html._pageDirection=document.body.getAttribute("dir");if(!ISQ.Html._pageDirection){ISQ.Html._pageDirection=ISQ.CSS.getValue(document.body,"direction")}if(!ISQ.Html._pageDirection){ISQ.Html._pageDirection="ltr"}}return ISQ.Html._pageDirection};ISQ.Html.setMinHeight=function(a,b){a=ISQ.Html._(a);if(a===null){return}if(a.offsetHeight<b){a.style.height=b+"px"}};ISQ.Html.actualHeight=function(d){var c=$(d);var e=c.height();var b=c.css("border-top");if(b){e+=parseInt(b)}var a=c.css("border-bottom");if(a){e+=parseInt(a)}var g=c.css("padding-top");if(g){e+=parseInt(g)}var f=c.css("padding-bottom");if(f){e+=parseInt(f)}return e};ISQ.Html.redraw=function(a){var b=ISQ.CSS.getElementStyle(a,"display");a.style.display="inline";var c=a.offsetHeight;a.style.display=b;return c};ISQ.Html=initializeNS("ISQ.Html");ISQ.Html.position_new=function(a,c){if(c){return ISQ.Html.position(a,c)}if(typeof(a.getBoundingClientRect)=="undefined"||!a.getBoundingClientRect){return ISQ.Html.position(a,c)}var b=a.getBoundingClientRect();b.x=b.left;b.y=b.top;return b};ISQ.Html.position=function(b,g,d){var f={x:-1,y:-1};b=ISQ.Html._(b);if(b===null){return f
}var e=ISQ.Html._(g)||document.body;f.x=0;f.y=0;var a=b;while(a!==null&&a!==e&&a!==document.body&&a.nodeName!=="HTML"){f.x+=a.offsetLeft;f.x-=a.scrollLeft;var c=parseInt(ISQ.CSS.getElementStyle(a,"margin-left"));f.x-=isNaN(c)?0:c;f.y+=a.offsetTop;f.y-=a.scrollTop;a=a.offsetParent}if(e!==document.body&&(a===document.body||a===null)){f.x=-1;f.y=-1}b=null;g=null;return f};ISQ.Html=initializeNS("ISQ.Html");ISQ.Html.screenSize=function(){return ISQ.Html.pageSize(true)};ISQ.Html.scrollBarWidth=function(){return 17};ISQ.Html.scrollBarWidth_afterCheck=function(){var a=ISQ.Html.screenSize();if(document.body.scrollHeight===a.h){return 0}return ISQ.Html.scrollBarWidth()};ISQ.Html.pageSize=function(b,a){var c={w:0,h:0};var d={};if(self&&self.innerHeight){d.w=self.innerWidth;d.h=self.innerHeight}else{if(document.documentElement&&document.documentElement.clientHeight){d.w=document.documentElement.clientWidth;d.h=document.documentElement.clientHeight}else{if(document.body){d.w=document.body.clientWidth;d.h=document.body.clientHeight}}}var f=ISQ.Html.getScroll("width");var e=ISQ.Html.getScroll("height");if(b||d.w>f){c.w=d.w}else{c.w=f}if((b&&(!ISQ.Http.browser.isIPad||window.top!==window))||d.h>e){c.h=d.h}else{c.h=e}if(e>d.h){if(ISQ.CSS.getElementStyle(document.body,"overflow")==="hidden"){return c}if(ISQ.CSS.getElementStyle(document.body,"overflow-y")==="hidden"){return c}if(ISQ.Http.browser.app!=="ie"||ISQ.Http.browser.isIE10||ISQ.Http.browser.isIE9||ISQ.Http.browser.isIE11){if(!a){c.w-=ISQ.Html.scrollBarWidth()}}else{if(a){c.w+=ISQ.Html.scrollBarWidth()}}}return c};ISQ.Html.getScroll=function(b){b=b||"top";var a=0;if(b==="top"){if(ISQ.Http.browser.app!=="ie"||ISQ.Http.browser.isIE10||ISQ.Http.browser.isIE11){a=window.pageYOffset}if(ISQ.Http.browser.app!=="ie"){a=ISQ.Html.returnMaxScroll(a,window.scrollY)}a=ISQ.Html.returnMaxScroll(a,document.body.scrollTop);a=ISQ.Html.returnMaxScroll(a,document.documentElement.scrollTop);a=ISQ.Html.returnMaxScroll(a,document.body.parentNode.scrollTop)}else{if(b==="left"){if(ISQ.Http.browser.app!=="ie"||ISQ.Http.browser.isIE10||ISQ.Http.browser.isIE11){a=window.pageXOffset
}if(ISQ.Http.browser.app!=="ie"){a=ISQ.Html.returnMaxScroll(a,window.scrollX)}a=ISQ.Html.returnMaxScroll(a,document.body.scrollLeft);a=ISQ.Html.returnMaxScroll(a,document.documentElement.scrollLeft);a=ISQ.Html.returnMaxScroll(a,document.body.parentNode.scrollLeft)}else{if(b==="height"){switch(ISQ.Http.browser.app){case"chrome":case"ff":case"opera":case"safari":if(window.top===window){a=document.documentElement.scrollHeight}else{a=document.body.scrollHeight}break;default:a=ISQ.Html.returnMaxScroll(a,document.body.scrollHeight);a=ISQ.Html.returnMaxScroll(a,document.documentElement.scrollHeight);a=ISQ.Html.returnMaxScroll(a,document.body.parentNode.scrollHeight);break}}else{if(b==="width"){a=ISQ.Html.returnMaxScroll(a,document.body.scrollWidth);a=ISQ.Html.returnMaxScroll(a,document.documentElement.scrollWidth);a=ISQ.Html.returnMaxScroll(a,document.body.parentNode.scrollWidth)}}}}return a};ISQ.Html.returnMaxScroll=function(a,b){if(a>b){return a}return b};ISQ.Html=initializeNS("ISQ.Html");ISQ.Html.getEventTarget=function(a){return window.event?window.event.srcElement:a?a.target:null};ISQ.Html.getDomEvent=function(a){if(ISQ.Base.isDerivedOf(a,ISQ.Html.DomEvent)){return a}return new ISQ.Html.DomEvent(a)};ISQ.Html.DomEvent=ISQ.Base.extend({name:"ISQ.Html.DomEvent"});ISQ.Html.DomEvent.prototype.ctor=function(a){this.domEvent=window.event||a;this.target=ISQ.Html.getEventTarget(a)};ISQ.Html.DomEvent.prototype.cancel=function(){if(!this.domEvent){return}if(this.domEvent.stopPropagation){this.domEvent.stopPropagation()}if(this.domEvent.cancelBubble!=null){this.domEvent.cancelBubble=true}};ISQ.Html.DomEvent.prototype.target=null;ISQ.Html.DomEvent.prototype.domEvent=null;window.addEvents=function(a,b,c){if(a.addEventListener){if(b.indexOf("on")==0){b=b.charAt(2).toLowerCase()+b.slice(3)}a.addEventListener(b,c)}else{if(a.attachEvent){if(b.indexOf("on")!=0){b="on"+b}a.attachEvent(b,c)}}};window.removeEvents=function(a,b,c){if(a.removeEventListener){if(b.indexOf("on")==0){b=b.charAt(2).toLowerCase()+b.slice(3)}a.removeEventListener(b,c)
}else{if(a.detachEvent){if(b.indexOf("on")!=0){b="on"+b}a.detachEvent(b,c)}}};ISQ.Html=initializeNS("ISQ.Html");ISQ.Html.Scroll=initializeNS("ISQ.Html.Scroll");ISQ.Html.Scroll.init=function(){if(ISQ.Html.Scroll._wasInit){return}ISQ.Html.Scroll._wasInit=true;ISQ.Html.Scroll._running=true;if(typeof(ISQ.Console)!=="undefined"&&typeof(sessionGC)==="function"){sessionGC().add(ISQ.Html.Scroll)}ISQ.Html.Scroll.event=new ISQ.Event();if(window.addEventListener){window.addEventListener("scroll",ISQ.Html.Scroll.scrollHandler,true)}else{if(window.attachEvent){window.attachEvent("onscroll",ISQ.Html.Scroll.scrollHandler)}}if(ISQ.Http.browser.isIE8||ISQ.Http.browser.isIE7||ISQ.Http.browser.isIE6){ISQ.Html.Scroll.interval=30;ISQ.Html.Scroll.diff=65}};ISQ.Html.Scroll.scrollHandler=function(a){if(!ISQ.Html.Scroll._running){return}var c=ISQ.Html.getEventTarget(a);if(c!==null&&c!==document){return}var b={left:ISQ.Html.getScroll("left"),top:ISQ.Html.getScroll("top")};if(ISQ.Html.Scroll.mLastScroll&&ISQ.Html.Scroll.mLastScroll.left===b.left&&ISQ.Html.Scroll.mLastScroll.top===b.top){return}ISQ.Html.Scroll.mLastScroll=b;ISQ.Html.Scroll.timeStamp=new Date().getTime();if(ISQ.Html.Scroll.timer!==null){return}ISQ.Html.Scroll.timer=setInterval(function(){if(ISQ.Html.Scroll._running){var d=new Date().getTime();if(d-ISQ.Html.Scroll.timeStamp<ISQ.Html.Scroll.diff){return}ISQ.Html.Scroll.event.dispatch(ISQ.Html.Scroll.mLastScroll,ISQ.Html.pageSize(),ISQ.Html.screenSize())}clearInterval(ISQ.Html.Scroll.timer);ISQ.Html.Scroll.timer=null},ISQ.Html.Scroll.interval)};ISQ.Html.Scroll.dispose=function(){ISQ.Html.Scroll._running=false;if(window.removeEventListener){window.removeEventListener("scroll",ISQ.Html.Scroll.scrollHandler,true)}else{if(window.detachEvent){window.detachEvent("onscroll",ISQ.Html.Scroll.scrollHandler)}}ISQ.Html.Scroll.event.dispose();ISQ.Html.Scroll.event=null};ISQ.Html.Scroll.interval=5;ISQ.Html.Scroll.diff=11;ISQ.Html.Scroll.timer=null;ISQ.Html=initializeNS("ISQ.Html");ISQ.Html.ReSize=initializeNS("ISQ.Html.ReSize");ISQ.Html.ReSize.enumListenTo={width:1,height:2,both:3};
ISQ.Html.ReSize.init=function(a,b){if(!this.mListenTo){this.mListenTo=0}this.mListenTo|=a;ISQ.Html.ReSize.mSkipTimer|=b===true;if(ISQ.Html.ReSize.wasInit()){return}ISQ.Html.ReSize._wasInit=true;ISQ.Html.ReSize._running=true;if(typeof(ISQ.Console)!=="undefined"&&typeof(sessionGC)=="function"){sessionGC().add(ISQ.Html.ReSize)}ISQ.Html.ReSize.Event=new ISQ.Event();ISQ.Html.ReSize.mWindowSize_thisEvent=ISQ.Html.screenSize();ISQ.Html.ReSize.mWindowSize_browserEvent=ISQ.Html.screenSize();if(window.addEventListener){window.addEventListener("resize",ISQ.Html.ReSize.resizeHandler,true);if(ISQ.Http.browser.isMobile){window.addEventListener("zoom",ISQ.Html.ReSize.resizeHandler,true)}}else{if(window.attachEvent){window.attachEvent("onresize",ISQ.Html.ReSize.resizeHandler)}}};ISQ.Html.ReSize.resizeHandler=function(){if(!ISQ.Html.ReSize._running){return}var a=ISQ.Html.screenSize();if(!ISQ.Html.ReSize.mWindowSize_thisEvent||!ISQ.Html.ReSize.mWindowSize_browserEvent){return}if((a.w===ISQ.Html.ReSize.mWindowSize_thisEvent.w||(ISQ.Html.ReSize.mListenTo&ISQ.Html.ReSize.enumListenTo.width)===0)&&(a.h===ISQ.Html.ReSize.mWindowSize_thisEvent.h||(ISQ.Html.ReSize.mListenTo&ISQ.Html.ReSize.enumListenTo.height)===0)){if(ISQ.Html.ReSize.timer){clearInterval(ISQ.Html.ReSize.timer);ISQ.Html.ReSize.timer=null}return}if((a.w===ISQ.Html.ReSize.mWindowSize_browserEvent.w||(ISQ.Html.ReSize.mListenTo&ISQ.Html.ReSize.enumListenTo.width)===0)&&(a.h===ISQ.Html.ReSize.mWindowSize_browserEvent.h||(ISQ.Html.ReSize.mListenTo&ISQ.Html.ReSize.enumListenTo.height)===0)){return}ISQ.Html.ReSize.mWindowSize_browserEvent=a;ISQ.Html.ReSize.timeStamp=new Date().getTime();if(ISQ.Html.ReSize.timer!=null&&typeof(ISQ.Html.ReSize.timer)!=="undefined"){return}if(ISQ.Html.ReSize.mSkipTimer){ISQ.Html.ReSize.Event.dispatch();ISQ.Html.ReSize.mWindowSize_thisEvent=ISQ.Html.ReSize.mWindowSize_browserEvent;return}ISQ.Html.ReSize.timer=setInterval(function(){if(ISQ.Html.ReSize._running){var b=new Date().getTime();if(b-ISQ.Html.ReSize.timeStamp<ISQ.Html.ReSize.diff){return}ISQ.Html.ReSize.Event.dispatch();
ISQ.Html.ReSize.mWindowSize_thisEvent=ISQ.Html.ReSize.mWindowSize_browserEvent}clearInterval(ISQ.Html.ReSize.timer);ISQ.Html.ReSize.timer=null},ISQ.Html.ReSize.interval)};ISQ.Html.ReSize.wasInit=function(){if(typeof(this._wasInit)==="undefined"){return false}return this._wasInit};ISQ.Html.ReSize.suspend=function(){if(!ISQ.Html.ReSize.wasInit()){return}ISQ.Html.ReSize._running=false};ISQ.Html.ReSize.resume=function(){if(!ISQ.Html.ReSize.wasInit()){return}ISQ.Html.ReSize._running=true};ISQ.Html.ReSize.dispose=function(){if(!ISQ.Html.ReSize.wasInit()){return}ISQ.Html.ReSize._running=false;if(window.removeEventListener){window.removeEventListener("resize",ISQ.Html.ReSize.resizeHandler,true);if(ISQ.Http.browser.isMobile){window.removeEventListener("zoom",ISQ.Html.ReSize.resizeHandler,true)}}else{if(window.detachEvent){window.detachEvent("onresize",ISQ.Html.ReSize.resizeHandler)}}ISQ.Html.ReSize.Event.dispose();ISQ.Html.ReSize.Event=null};ISQ.Html.ReSize.interval=100;ISQ.Html.ReSize.diff=199;ISQ.Html=initializeNS("ISQ.Html");ISQ.Html.WindowActive=initializeNS("ISQ.Html.WindowActive");ISQ.Html.WindowActive.isInit=false;ISQ.Html.WindowActive.hidden=null;ISQ.Html.WindowActive.event=null;ISQ.Html.WindowActive.init=function(){if(ISQ.Html.WindowActive.isInit){return}ISQ.Html.WindowActive.isInit=true;ISQ.Html.WindowActive.event=new ISQ.Event();ISQ.Html.WindowActive.hidden="hidden";if(ISQ.Html.WindowActive.hidden in document){document.addEventListener("visibilitychange",ISQ.Html.WindowActive.onchange)}else{if((ISQ.Html.WindowActive.hidden="mozHidden") in document){document.addEventListener("mozvisibilitychange",ISQ.Html.WindowActive.onchange)}else{if((ISQ.Html.WindowActive.hidden="webkitHidden") in document){document.addEventListener("webkitvisibilitychange",ISQ.Html.WindowActive.onchange)}else{if((ISQ.Html.WindowActive.hidden="msHidden") in document){document.addEventListener("msvisibilitychange",ISQ.Html.WindowActive.onchange)}else{if("onfocusin" in document){document.onfocusin=document.onfocusout=ISQ.Html.WindowActive.onchange
}else{window.onpageshow=window.onpagehide=window.onfocus=window.onblur=ISQ.Html.WindowActive.onchange}}}}}};ISQ.Html.WindowActive.onchange=function(b){var a=true,d=false;var c={focus:a,focusin:a,pageshow:a,blur:d,focusout:d,pagehide:d};b=b||window.event;var e;if(b.type in c){e=c[b.type]}else{e=this[ISQ.Html.WindowActive.hidden]?d:a}ISQ.Html.WindowActive.event.dispatch(e)};ISQ.Html.WindowActive.dispose=function(){if(!ISQ.Html.WindowActive.isInit){return}if("hidden" in document){document.removeEventListener("visibilitychange",ISQ.Html.WindowActive.onchange)}else{if("mozHidden" in document){document.removeEventListener("mozvisibilitychange",ISQ.Html.WindowActive.onchange)}else{if("webkitHidden" in document){document.removeEventListener("webkitvisibilitychange",ISQ.Html.WindowActive.onchange)}else{if("msHidden" in document){document.removeEventListener("msvisibilitychange",ISQ.Html.WindowActive.onchange)}else{if("onfocusin" in document){document.onfocusin=document.onfocusout=null}else{window.onpageshow=window.onpagehide=window.onfocus=window.onblur=null}}}}}ISQ.Html.WindowActive.event.dispose();ISQ.Html.WindowActive.event=null};ISQ.Html=initializeNS("ISQ.Html");ISQ.Html._doc=document;ISQ.Html.createElement=function(e,c,d){var b=ISQ.Html._doc.createElement(e);var a=ISQ.Html._(c);if(a!==null){a.appendChild(b)}if(typeof(d)==="string"){ISQ.CSS.setStyle(b,d)}return b};var createElement=ISQ.Html.createElement;ISQ.Html.createDiv=function(d,f,e){var c=ISQ.Html._doc.createElement("div");var a=ISQ.Html._(d);var b=a&&e?a.firstChild:null;if(a!==null){if(e){a.insertBefore(c,b)}else{a.appendChild(c)}}if(typeof(f)==="string"){ISQ.CSS.setStyle(c,f)}return c};var createDiv=ISQ.Html.createDiv;ISQ.Html.createTable=function(c,f,b,d,a){var e=createElement("table",c);e.setAttribute("cellPadding",0);e.setAttribute("cellSpacing",0);e.setAttribute("border",0);if(typeof(a)==="string"){e.setAttribute("align",a)}if(typeof(f)==="number"||typeof(f)==="string"){e.setAttribute("width",f)}if(typeof(b)==="string"){e.setAttribute("dir",b);e.style.direction=b
}if(typeof(d)==="string"){ISQ.CSS.setStyle(e,d)}return createElement("tbody",e)};var createTable=ISQ.Html.createTable;ISQ.Html.createRow=function(b,a,d){var c=createElement("tr",b);if(typeof(a)==="string"){ISQ.CSS.setStyle(c,a)}if(typeof(d)==="string"){c.setAttribute("valign",d)}return c};var createRow=ISQ.Html.createRow;ISQ.Html.addSpaceRow=function(d,b,a,c){var f=createRow(d);var e=createElement("td",f);e.style.height=b;if(typeof(c)==="string"){ISQ.CSS.setStyle(f,c)}if(a){e.setAttribute("colSpan",a)}return f};var addSpaceRow=ISQ.Html.addSpaceRow;ISQ.Html.addSpaceTd=function(d,e,b){var c=createElement("td",d);if(typeof(b)==="number"){c.setAttribute("rowSpan",b)}if(!e){return}c.style.width=e;var a=createDiv(c,"width:"+e);a.innerHTML="&nbsp;";return c};var addSpaceTd=ISQ.Html.addSpaceTd;ISQ.Html.createTd=function(e,a,f,c,b){var d=createElement("td",e);if(f){d.setAttribute("vAlign",f)}if(a){d.setAttribute("align",a)}if(typeof(c)==="string"){ISQ.CSS.setStyle(d,c)}if(b){d.setAttribute("colSpan",b)}return d};var createTd=ISQ.Html.createTd;ISQ.Html.clearNode=function(a,c){if(typeof(a)==="undefined"||a===null){return null}if(a.nodeType!==1){return a}c=c!==false;if(c){var b=a.nodeName;switch(b){case"TR":case"TBODY":case"TABLE":break;default:a.innerHTML="";return a}}while(a.firstChild!==null){if(c){ISQ.Html.clearNode(a.firstChild,true)}a.removeChild(a.firstChild)}return a};var clearNode=ISQ.Html.clearNode;ISQ.Html.createInput=function(l,f,i,m,b,h,j){if(typeof(arguments[0])=="object"){var g=arguments[0];return createInput(g.type,g.name,g.parent,g.value||null,g.errorStyle||null,g.style||null,g.placeholder||null)}var c;f=f||"";var d=false;if(ISQ.Http.browser.app==="ie"&&!ISQ.Http.browser.isIE11){try{var k=new Array();k.push("<input type='");k.push(l);k.push("' name='");k.push(f);k.push("' id='");k.push(f);k.push("' />");c=ISQ.Html._doc.createElement(k.join(""));if(i){i.appendChild(c)}d=true}catch(a){d=false}}if(!d){c=createElement("input",i);c.type=l;c.name=c.id=f}if(typeof(m)!=="undefined"&&m!==null){c.value=m}if(typeof(j)!=="undefined"&&j!==null){c.placeholder=j
}if(typeof(b)==="string"){c.errorStyle=b;c.error=function(){ISQ.CSS.setStyle(this,this.errorStyle);c.hasError=true}}c.okStyle=typeof(h)==="string"?h:"";ISQ.CSS.setStyle(c,c.okStyle);c.ok=function(){ISQ.CSS.setStyle(this,this.okStyle);c.hasError=false};return c};var createInput=ISQ.Html.createInput;ISQ.Html.createCheckbox=function(f,d,i,l,a,c,h){if(typeof(arguments[0])=="object"&&arguments[0]!=null){var g=arguments[0];return createCheckbox(g.name,g.id,g.parent,g.text,g.style,g.checked,g.onclick)}var j=createTable(i);var d=d||f||"cb_"+Math.floor(Math.random()*1000000);if(a){ISQ.CSS.setStyle(j.parentNode,a)}var m=createRow(j);var k=createTd(m);var b=createInput("checkbox",d,k);b.style.margin="2px 3px 0";b.id=d;b.checked=b.defaultChecked=c===true;if(typeof(h)!="undefined"){b.onclick=h}if(l){k=createTd(m);var e=createElement("label",k);e.setAttribute("for",b.id);e.innerHTML=l;b.label=e}return b};var createCheckbox=ISQ.Html.createCheckbox;ISQ.Html.createRadio=function(h,f,k,o,q,b,c,a,j,e){if(typeof(arguments[0])=="object"){var i=arguments[0];return ISQ.Html.createRadio(i.name,i.id,i.parent,i.text,i.value,i.style,i.checked,i.floatStyle,i.onclick,i.holderStyle)}var m=createTable(k);if(a){m.parentNode.setAttribute("align",a);var d=(a.toLowerCase()==="left"?"right":"left");ISQ.CSS.setStyle(m.parentNode,"margin-"+d+": 5px")}var p=createRow(m);var n=createTd(p,"","",e);var l=createInput("radio",h,n,q,b,b);l.style.margin="0 3px 0";l.id=f||"radio_"+Math.floor(Math.random()*1000000);if(typeof(c)!="undefined"){l.checked=c}if(typeof(j)!="undefined"){l.onclick=j}n=createTd(p);var g=createElement("label",n);g.setAttribute("for",l.id);g.innerHTML=o;return l};var createRadio=ISQ.Html.createRadio;ISQ.Html.createSelect=function(b){var d=createElement("select",b.parent,b.style||"");if(b.defaultValue){var c=createElement("option",d);c.selected=true;if(typeof(b.defaultValue)==="object"){c.value=b.defaultValue.value;c.innerHTML=ISQ.Data.unHTML(b.defaultValue.html.toString())}else{c.value=c.innerHTML=b.defaultValue}if(b.defaultValue.title){c.title=b.defaultValue.title
}}for(var a=0;a<b.values.length;++a){var c=createElement("option",d);if(typeof(b.values[a])==="object"){c.innerHTML=ISQ.Data.unHTML(b.values[a].html.toString());c.value=b.values[a].value}else{c.value=b.values[a];c.innerHTML=ISQ.Data.unHTML(b.values[a].toString())}if(b.selected&&c.value==b.selected){c.selected=true}if(b.values[a].title){c.title=b.values[a].title}}return d};var createSelect=ISQ.Html.createSelect;ISQ.Html.updateSelectOptions=function(b){clearNode(b.select);for(var a=0;a<b.values.length;++a){var c=createElement("option",b.select);if(typeof(b.values[a])==="object"){c.innerHTML=b.values[a].html;c.value=b.values[a].value}else{c.value=c.innerHTML=b.values[a]}if(b.selected&&c.value==b.selected){c.selected=true}}return b.select};var updateSelectOptions=ISQ.Html.updateSelectOptions;ISQ.Html.select_selectedOption=function(a){return a[a.selectedIndex]};ISQ.Html.createForm=function(d){var a=createElement("form",d.parent);if(typeof(d.action)==="string"){a.action=d.action}if(typeof(d.method)==="string"){a.method=d.method}if(typeof(d.id)==="string"){a.id=d.id}if(typeof(d.name)==="string"){if(typeof(d.id)!=="string"){a.id=d.name}}var b=typeof(d.onsubmit)!=="undefined"&&d.onsubmit!==null?d.onsubmit:null;if(b!==null){b.executed=false}a.onsubmit=function(e){if(b!==null){if(!b.executed){b.handle(ISQ.Html.getDomEvent(e));b.executed=true}else{b.executed=false}}return false};function c(f){var e=ISQ.Html.getDomEvent(f);if(e.domEvent.keyCode!==13){return false}if(b!==null){if(!b.executed){b.handle(e);b.executed=true}else{b.executed=false}}e.cancel();return false}if(ISQ.Html._doc.addEventListener){if(ISQ.Http.browser.app!=="chrome"&&ISQ.Http.browser.app!=="opera"){a.addEventListener("keypress",c,true)}else{a.addEventListener("keyup",c,true)}}else{if(ISQ.Html._doc.attachEvent){a.attachEvent("onkeyup",c)}}return a};var createForm=ISQ.Html.createForm;ISQ.Html.createIframe=function(b,d,a,e){e=e||"about:blank";var c=createElement("iframe");c.setAttribute("name",d);c.setAttribute("id",b);c.setAttribute("src",e);if(a){ISQ.CSS.setStyle(c,a)
}return c};ISQ.Html.createImage=function(b){if(!b.src){throw ("createImage: invalid src")}var a=new Image();a.src=b.src;if(b.onload){a.onload=b.onload}if(b.id){a.id=b.id}if(b.align){a.setAttribute("align",b.align)}if(b.style){ISQ.CSS.setStyle(a,b.style)}if(b.parent){b.parent.appendChild(a)}if(b.altText){a.setAttribute("title",b.altText)}if(b.overSrc){ISQ.Html.setImageMouseOverAndOut(a,b.overSrc)}return a};var createImage=ISQ.Html.createImage;ISQ.Html.createLink=function(c){var b=createElement("a",c.parent,c.style);if(c.text){b.innerHTML=c.text}return ISQ.Html.createLinkAttributes(c,b)};ISQ.Html.createPlainTextLink=function(c){var b=createElement("a",c.parent,c.style);if(c.text){b.textContent=c.text}return ISQ.Html.createLinkAttributes(c,b)};ISQ.Html.createLinkAttributes=function(c,b){if(typeof(c.href)==="string"){b.href=c.href}else{b.href="javascript:void(0)"}if(typeof(c.title)==="string"){b.title=c.title}if(typeof(c.target)==="string"){b.target=c.target}if(typeof(c.id)==="string"){b.id=c.id}ISQ.Html.setOnclick(b,c.onclick);return b};var createLink=ISQ.Html.createLink;var createPlainTextLink=ISQ.Html.createPlainTextLink;window.setOnclick=ISQ.Html.setOnclick=function(a,b){if(a.nodeName!=="A"){if(b){a.onclick=b}return}a.onclick=function(c){if(typeof(ISQ.Console)!=="undefined"&&typeof(ISQ.Console.SessionManager)!=="undefined"){ISQ.Console.SessionManager.lastClickedLinkHref=this.href?this.href:null;setTimeout(function(){delete ISQ.Console.SessionManager.lastClickedLinkHref},10)}if(typeof(b)!=="undefined"){b.apply(this,new Array(c))}}};ISQ.Html.createHR=function(d,c,a,b){var f=createRow(d);var e=createElement("td",f);e.style.height=c;e.style.background=a;if(typeof(b)==="number"){e.setAttribute("colSpan",b)}return f};var createHR=ISQ.Html.createHR;ISQ.Html.createTextNode=function(d,c){var b=ISQ.Html._doc.createTextNode(d);var a=ISQ.Html._(c);if(a!==null){a.appendChild(b)}return b};var createTextNode=ISQ.Html.createTextNode;ISQ.Html=initializeNS("ISQ.Html");ISQ.Html.moveChildNodesToElement=function(c,b){clearNode(b);var a=c.childNodes;
while(a.length>0){b.appendChild(a[0])}};ISQ.Html.domRecursion=function(a,b){if(!a){return}b(a);for(var c=0;c<a.childNodes.length;++c){domRecursion(a.childNodes[c],b)}};window.domRecursion=ISQ.Html.domRecursion;ISQ.Html.setImageMouseOverAndOut=function(a,c){var b=a.src;a.onmouseover=function(){this.src=c};a.onmouseout=function(){this.src=b}};ISQ.Html.elementToString=function(c,e){var g=new Array();g.push("<");g.push(c.nodeName);g.push(" ");for(var d=0;d<c.attributes.length;++d){var a=c.attributes[d];var b=a.value||a.nodeValue;if(!b){continue}var f=null;if(typeof(b)==="string"){f=b.indexOf("'")>-1?'"':"'"}g.push(a.nodeName);g.push("=");if(f){g.push(f)}g.push(b);if(f){g.push(f)}g.push(" ")}g.push(">");if(e){g.push(e)}else{g.push(c.innerHTML)}g.push("</");g.push(c.nodeName);g.push(">");return g.join("")};var elementToString=ISQ.Html.elementToString;ISQ.Html.getElementsByClassName=function(b,a){if(typeof(document.getElementsByClassName)==="function"){return b.getElementsByClassName(a)}else{return b.querySelectorAll("."+a)}};ISQ.Html.closestElement=function(b,a){return a(b)?b:(b.parentNode?ISQ.Html.closestElement(b.parentNode,a):null)};ISQ.Html=initializeNS("ISQ.Html");ISQ.Html.setPlaceHolder=function(d,g,a,f){var e=d.parentNode||f;if(!e){return}var h=createDiv(e);h.className=a;h.innerHTML=g;h.onclick=function(){d.focus()};var b=function(){if(d.value==""){h.style.display="block"}else{h.style.display="none"}};var c=function(){if(d.value==""){h.style.display="block"}};window.addEvents(d,"onkeyup",b);window.addEvents(d,"onblur",c);d.autoCheck=b};ISQ.Html=initializeNS("ISQ.Html");ISQ.Html.createInvisibleIframe=function(a){var b=createElement("iframe",document.body,"visible:hidden;position:absolute;top:0px;left:0px;width:1px;height:1px");b.setAttribute("frameBorder",0);setTimeout(function(){if(a.isDisposed()){if(b.parentNode){document.body.removeChild(b)}return}ISQ.Html.waitUntilAvailable(b,a)},0);return b};createInvisibleIframe=ISQ.Html.createInvisibleIframe;ISQ.Html.waitUntilAvailable=function(d,b){var c=null;var e=null;try{c=d.contentDocument||d.contentWindow.document||null;
e=d.contentWindow||d.contentDocument.defaultView||null}catch(a){}if(!c||!e||(!c.body&&!e.document.body)){setTimeout(function(){if(b.isDisposed()){document.body.removeChild(d);return}ISQ.Html.waitUntilAvailable(d,b)},10);return}if(c.body){ISQ.Html.iframeReady(c,b)}else{ISQ.Html.iframeReady(e.document,b)}};ISQ.Html.iframeReady=function(b,a){b.open();b.writeln("<html><body></body></html>");b.close();a.handle(b);a.dispose()};ISQ.Html=initializeNS("ISQ.Html");ISQ.Html.detectDoctype=function(){var a="loose";try{var b=null;if(window.document.doctype){b=window.document.doctype.systemId;if(!b){b=window.document.doctype.publicId}if(!b&&window.document.doctype.name.toLowerCase()==="html"){b="doctype html"}}else{b=window.document.firstChild;if(b.innerHTML.length!==0){b=null}else{b=b.nodeValue}}if(b===null){a="nodoctype"}else{b=b.toLowerCase();if(b==="doctype html"||b==="ctype ht"){a="html5"}else{if(b.indexOf("xhtml")!==-1||b.indexOf("rdfa 1.1")!==-1){a="xhtml"}else{if(b.indexOf("strict")!==-1){a="strict"}else{if(b.indexOf("loose")!==-1){a="loose"}else{if(b.indexOf("transitional")!==-1){if(b.indexOf("4.01")!==-1){a="transitional401"}else{if(b.indexOf("4.0")!==-1){a="transitional4"}else{a="transitional"}}}else{if(b.indexOf("frameset")!==-1){a="frameset"}else{a="nodoctype"}}}}}}}}catch(c){a="nodoctype"}return a};</script>
    <script type="text/javascript" mini="true">ISQ.Http=initializeNS("ISQ.Http");ISQ.Http.MAX_URL_SIZE=2047;ISQ.Http.getNoHashUrl=function(){var b=window.location.hash;var a=window.location.href;if(b!==""){var c;do{c=a.indexOf(b);if(c!==-1){a=a.substring(0,c)}}while(c!==-1)}return a};ISQ.Http.detectBroswer=function(){var b=navigator.appVersion;var f=navigator.userAgent;var a=0;ISQ.Http.browser={};if(b.indexOf("Android")!==-1||f.indexOf("Android")!==-1){ISQ.Http.browser.app="android";var c=b.indexOf("Android ")+8;var g=b.substring(c,b.indexOf(";",c));ISQ.Http.browser.version=g;ISQ.Http.browser.isMobile=b.indexOf("Mobile")>-1||f.indexOf("Mobile")!==-1;ISQ.Http.browser.isTablet=!ISQ.Http.browser.isMobile;ISQ.Http.browser.usesViewport=true;ISQ.Http.browser.isAndroid=true;if(parseInt(ISQ.Http.browser.version)<4){ISQ.Http.browser.oldAndroid=true}}else{if(navigator.appVersion.indexOf("iPhone")!==-1){var g=navigator.appVersion.substring(0,navigator.appVersion.indexOf(" "));ISQ.Http.browser.app="safari";ISQ.Http.browser.version="iphone "+parseInt(g);ISQ.Http.browser.isMobile=true;ISQ.Http.browser.usesViewport=true;ISQ.Http.browser.isIPhone=true;if(b.indexOf("OS 6_")!==-1){ISQ.Http.browser.isIOS6=true}else{if(b.indexOf("OS 7_")!==-1){ISQ.Http.browser.isIOS7=true}}ISQ.Http.browser.isIOS=true}else{if(navigator.appVersion.indexOf("iPad")!==-1){var g=navigator.appVersion.substring(0,navigator.appVersion.indexOf(" "));ISQ.Http.browser.app="safari";ISQ.Http.browser.version="ipad "+parseInt(g);ISQ.Http.browser.isTablet=true;ISQ.Http.browser.usesViewport=true;ISQ.Http.browser.isIPad=true;if(b.indexOf("OS 6_")!==-1){ISQ.Http.browser.isIOS6=true}else{if(b.indexOf("OS 7_")!==-1){ISQ.Http.browser.isIOS7=true}}ISQ.Http.browser.isIOS=ISQ.Http.browser.isIOS6||ISQ.Http.browser.isIOS7}}}if((a=b.indexOf("MSIE "))!==-1){ISQ.Http.browser.app="ie";a+=5;var e=b.indexOf(" ",a);if(e===-1){ISQ.Http.browser.version=b.substring(a)}else{ISQ.Http.browser.version=b.substring(a,e)}if(ISQ.Http.browser.version.startsWith("10")){ISQ.Http.browser.isIE10=true}if(ISQ.Http.browser.version.startsWith("9")){ISQ.Http.browser.isIE9=true
}if(ISQ.Http.browser.version.startsWith("8")){ISQ.Http.browser.isIE8=true}if(ISQ.Http.browser.version.startsWith("7")){ISQ.Http.browser.isIE7=true}if(ISQ.Http.browser.version.startsWith("6")){ISQ.Http.browser.isIE6=true}ISQ.Http.browser.isIE=true}else{if(b.indexOf("Chrome")!==-1){ISQ.Http.browser.app="chrome";ISQ.Http.browser.version="0"}else{if((a=b.indexOf("Safari"))!==-1&&ISQ.Http.browser.app!="android"){var g=b.substring(a+7);ISQ.Http.browser.app="safari";if(g<="530.17"){ISQ.Http.browser.version="3"}else{ISQ.Http.browser.version="4"}}else{if((a=f.indexOf("Firefox/"))!==-1){ISQ.Http.browser.app="ff";var e=f.indexOf(" ",a);if(e===-1){ISQ.Http.browser.version=f.substring(a+8)}else{ISQ.Http.browser.version=f.substring(a+8,e)}if(ISQ.Http.browser.version.startsWith("3")){ISQ.Http.browser.isFF3=true}if(ISQ.Http.browser.version.startsWith("3.0")){ISQ.Http.browser.isFF3_0=true}if(ISQ.Http.browser.version.startsWith("3.6")){ISQ.Http.browser.isFF3_6=true}}else{if(f.indexOf("Opera/")!==-1){ISQ.Http.browser.app="opera";var c=f.indexOf("Version/");if(c===-1){var d=f.indexOf(" ",6);ISQ.Http.browser.version=f.substring(6,d)}else{var d=f.indexOf(" ",c);if(d===-1){ISQ.Http.browser.version=f.substring(c+8)}else{ISQ.Http.browser.version=f.substring(c+8,d)}}ISQ.Http.browser.isOpera=true}else{if(f.indexOf("Symbian")!=-1){ISQ.Http.browser.app="symbian";ISQ.Http.browser.version=1;ISQ.Http.browser.full=ISQ.Http.browser.app+ISQ.Http.browser.version}}}}}}if(!ISQ.Http.browser.app){if(f.indexOf("AppleWebKit")!==-1){ISQ.Http.browser.app="safari";ISQ.Http.browser.version="5"}else{if(b.indexOf("Trident/7")!==-1){ISQ.Http.browser.app="ie";ISQ.Http.browser.isIE=true;var c=b.indexOf("rv:");if(c!==-1){c+=3;if(b.equals("11",c)){ISQ.Http.browser.version="11";ISQ.Http.browser.isIE11=true}}}else{ISQ.Http.browser.app="default";ISQ.Http.browser.version="--"}}}ISQ.Http.browser.full=ISQ.Http.browser.app+ISQ.Http.browser.version;f=null;b=null};if(typeof(ISQ.Http.browser)==="undefined"||!ISQ.Http.browser){ISQ.Http.detectBroswer()}ISQ.Http.isIEQuirksMode=function(){return(ISQ.Http.browser.isIE&&document.compatMode!=="CSS1Compat")
};ISQ.Http.isChrome=function(){var a=navigator.appVersion;if(a.indexOf("Chrome")!==-1){return true}return false};ISQ.Http.Cookies=initializeNS("ISQ.Http.Cookies");ISQ.Http.Cookies._read=function(d){if(!d){return null}var i=document.cookie;var f=0;var a;var e;var g=0;var c={KEY:1,VALUE:2};var h=c.KEY;while(g<i.length){a=i.charAt(g++);if(a===" "){continue}if(h===c.KEY){if(a==="="){h=c.VALUE;f=0;continue}e=d.charAt(f);if(a===e||a.toLowerCase()===e.toLowerCase()){if(++f===d.length){if(i.charAt(g)==="="){var b=i.indexOf(";",++g);if(b===-1){b=i.length}return i.substring(g,b)}else{f=0}}}else{f=0}}else{if(a===";"){h=c.KEY}}}return null};ISQ.Http.Cookies._readCaseSensitive=function(b){if(!b){return null}var d=document.cookie;var c=d.indexOf(b);while(c!==-1){c+=b.length;if(d.charAt(c)==="="){var a=d.indexOf(";",++c);if(a===-1){a=d.length}return d.substring(c,a)}else{c=d.indexOf(b)}}return null};ISQ.Http.Cookies._write=function(e,i,g,b,h,d,f){e=e||null;i=!isNaN(i)?i:i||null;g=g||"/";b=b||null;h=h===true;d=d||null;if(e===null||i===null){return}var c=new Date();if(d!==null){c.setSeconds(c.getSeconds()+d);c=c.toGMTString()}var a=[];if(e.indexOf("%20")!==-1||e.toLowerCase().indexOf("%3a")!==-1){a.push(e)}else{a.push(escape(e))}a.push("=");if(i.toString().indexOf("%20")!==-1||i.toString().toLowerCase().indexOf("%3a")!==-1||f){a.push(i)}else{a.push(escape(i))}a.push("; path=");a.push(g);if(b!==null){a.push("; domain=");a.push(b)}if(h&&window.location.protocol==="https:"){a.push("; secure=");a.push(h)}if(d!==null){a.push("; expires=");a.push(c)}document.cookie=a.join("")};ISQ.Http.Cookies._delete=function(d,e,b,f){d=d||null;e=e||null;b=b||null;f=f||null;if(d===null){return}var g=ISQ.Http.Cookies._read(d);if(g===null){return}var c=new Date();c.setMonth(c.getMonth()-1);c=c.toGMTString();var a=[];a.push(escape(d));a.push("=1");a.push("; expires=");a.push(c);e=e||"/";a.push("; path=");a.push(e);b=b||ISQ.Http.domain(false);a.push("; domain=");a.push(b);if(f!==null&&window.location.protocol==="https:"){a.push("; secure=");a.push(f)}document.cookie=a.join("")
};ISQ.Http.Cookies.encode64=function(b){b=String(b);if(b.length===0){return b}var a=ISQ.Tools.Base64.encodeString(b);return a.replace(/\=/g,"_").replace(/\+/g,"|")};ISQ.Http.Cookies.decode64=function(b){b=String(b);if(b.length===0){return b}var a=b.replace(/\_/g,"=").replace(/\|/g,"+");return ISQ.Tools.Base64.decodeString(a)};ISQ.Http.domain=function(d,g){d=d===true;var b;var c;if(typeof(ISQ.Http.mDomain)==="undefined"||!ISQ.Http.mDomain||g){g=g||window.location.href;var e=g.indexOf("//")+2;b=g.substring(e);var f=b.indexOf("/");if(f>-1){c=b.substring(0,f)}else{c=b}var a=b.indexOf(":");if(a>-1){b=c.substring(0,a)}else{b=c}}if(!g){ISQ.Http.mIncludePort=c;ISQ.Http.mDomain=b}if(d){return c}else{return b}};ISQ.Http.topDomain=function(c){c=c||window.location.href;var a=ISQ.Http.domain(false,c);var b=a.indexOf(".");return a.substring(b)};ISQ.Http.relativePath=function(e){e=e||window.location.href;var d={path:"",filename:""};var a=e.indexOf("//")+2;a=e.indexOf("/",a);if(a==e.length-1){return d}var c=e.indexOf("?");var b=e.LastIndexOf_char("/",c===-1?0:c);d.path=e.substring(a,b++);d.filename=e.substring(b);a=d.filename.indexOf("#");if(a!==-1){d.filename=d.filename.substring(0,a)}return d};if(typeof(ISQ.Http.urlArguments)==="undefined"||!ISQ.Http.urlArguments){if(window.location.search.length!==0){ISQ.Http.urlArguments=ISQ.Tools.stringToPairArray(window.location.search.substring(1),"=","&",true,false)}else{ISQ.Http.urlArguments=[]}}if(typeof(ISQ.Http.hashArguments)==="undefined"||!ISQ.Http.hashArguments){if(window.location.hash.length!==0){ISQ.Http.hashArguments=ISQ.Tools.stringToPairArray(window.location.hash.substring(1),"=","&",true,false)}else{ISQ.Http.hashArguments=[]}}ISQ.Http.getUrlParam=function(a,e){a=a.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var c="[\\?&]"+a+"=([^&#]*)";var b=new RegExp(c);e=e||window;var d=b.exec(e.location.href);if(d==null){return""}else{return d[1]}};ISQ.Http.getUrlFakePart=function(){var b=window.location.href.indexOf("/~");if(b===-1){return""}b+=2;if(window.location.search&&b>window.location.href.indexOf("?")){return""
}if(window.location.hash&&b>window.location.href.indexOf("#")){return""}var a=window.location.href.indexOf("/",b);if(a===-1){return""}return window.location.href.substring(b,a)};ISQ.Http.isValidUrl=function(a){return(/^((?:https?\:\/\/|www\.)(?:[-a-z0-9]+\.)*[-a-z0-9]+.*)$/gi).test(a)};</script>
    <script type="text/javascript" mini="true">ISQ.Com=initializeNS("ISQ.Com");ISQ.Com.JsonP={};ISQ.Com.JsonP.Request=ISQ.Base.extend({name:"ISQ.Com.JsonP.Request",cbId:new Date().getTime()%1000,enumResponseType:{OK:200,ERROR:400,TIMEOUT:500},_prototype:{send:function(c){var a;var b="_jspcb"+(ISQ.Com.JsonP.Request.cbId++);window[b]=function(i){clearTimeout(g);c.handler(ISQ.Com.JsonP.Request.enumResponseType.OK,i,c);try{delete window[b]}catch(h){window[b]=undefined}var j=a.parentNode;if(j){j.removeChild(a)}};var e=[];e.push(c.url);e.push("?cb=");e.push(b);if(c.params){for(var d in c.params){if(c.params[d]==null){continue}e.push("&");e.push(d);e.push("=");e.push(c.params[d])}}a=document.createElement("script");a.type="text/javascript";a.async=true;a.defer=true;a.src=e.join("");a.onload=function(){clearTimeout(g)};a.onreadystatechange=function(){if(this.readyState!=="complete"&&this.readyState!=="loaded"){return}clearTimeout(g)};document.getElementsByTagName("head")[0].appendChild(a);var f=function(){var h=a.parentNode;if(h){h.removeChild(a)}c.handler(ISQ.Com.JsonP.Request.enumResponseType.TIMEOUT,null,c)};var g=setTimeout(f,c.timeout||10000)}}});ISQ.Com.JsonP.Client=ISQ.Base.extend({name:"ISQ.Com.JsonP.Client",enumState:{DISCONNECTED:0,CONNECTING:1,CONNECTED:2,FAILED:3},SESSION_ID_KEY:"sid",REQUEST_ID:0,_prototype:{ctor:function(b){this.mState=ISQ.Com.JsonP.Client.enumState.DISCONNECTED;this.mAccount=b.account;this.mHost=b.host||"";this.mUrlPrefix=this.mHost+b.urlPrefix;this.mRequest=new ISQ.Com.JsonP.Request();this.mLoginParams=b.loginParams||null;this.mDefaultTimeout=b.defaultTimeout||10000;this.fStateChanged=b.fStateChanged;if(!this.mLoginParams.url){var a=window.location.href.indexOf("#");if(a==-1){this.mLoginParams.url=escape(window.location.href)}else{this.mLoginParams.url=escape(window.location.href.substring(0,a))}}},setHost:function(a){if(a===this.mHost){return}this.mUrlPrefix=this.mUrlPrefix.replace(this.mHost,a);this.mHost=a},retry:function(a){if(this.mState!==ISQ.Com.JsonP.Client.enumState.CONNECTING&&(this.mState!==ISQ.Com.JsonP.Client.enumState.CONNECTED||a.params.sid===this.mSessionId)){this.changeState(ISQ.Com.JsonP.Client.enumState.DISCONNECTED)
}this.request(a)},request:function(a){var b=typeof a.urlPrefix==="string"?a.urlPrefix:this.mUrlPrefix;if(!a.url.startsWith(b)){a.url=b+a.url}a.timeout=a.timeout||this.mDefaultTimeout;if(this.mState!=ISQ.Com.JsonP.Client.enumState.CONNECTED){if(!this.mQueue){this.mQueue=new ISQ.Infra.Queue()}this.mQueue.enqueue(a);if(this.mState!=ISQ.Com.JsonP.Client.enumState.CONNECTING){this.hello()}}else{this.request_internal(a)}},keepAlive:function(b){var a=this;this.request({url:"keepAlive.js",params:null,handler:function(c){clearTimeout(a.mKeepAliveTimer);if(a.mState!=ISQ.Com.JsonP.Client.enumState.CONNECTED){return}if(b){return}if(c==ISQ.Com.JsonP.Request.enumResponseType.OK){a.mKeepAliveTimer=setTimeout(function(){a.keepAlive()},a.mKeepAliveInterval)}else{a.mKeepAliveTimer=setTimeout(function(){a.keepAlive()},a.mKeepAliveInterval*2)}}})},stopKeepAlive:function(){clearTimeout(this.mKeepAliveTimer)},persistentSession:function(a){a.widgetSessionId=this.id();a.now=new Date().getTime();a.logoutTimeout=this.mLogoutInterval-(2*this.mKeepAliveInterval);a.account=this.mAccount;var b=ISQ.Data.jsonToString(a);ISQ.Http.Cookies._write(ISQ.Com.JsonP.Client.SESSION_ID_KEY,b,"/widget",ISQ.Http.domain())},deleteSession:function(){ISQ.Http.Cookies._delete(ISQ.Com.JsonP.Client.SESSION_ID_KEY,"/widget",ISQ.Http.domain())},loadSessionFromId:function(a){this.mSessionId=a;this.keepAlive(true)},loadSession:function(){var obj={result:false};if(this.mState!==ISQ.Com.JsonP.Client.enumState.DISCONNECTED){return obj}var data=ISQ.Tools.Storage.get(ISQ.Com.JsonP.Client.SESSION_ID_KEY,true);if(!data){data=ISQ.Http.Cookies._read(ISQ.Com.JsonP.Client.SESSION_ID_KEY);if(data){data=unescape(data)}}if(!data){return obj}if(data.length<3){return obj}var json=null;try{json=eval("("+data+")")}catch(e){}if(!json){return obj}if(json.account!=this.mAccount){return obj}this.deleteSession();if(!json.now){return obj}var now=new Date().getTime();this.mLogoutInterval=parseInt(json.logoutTimeout);if(now-json.now>this.mLogoutInterval){return obj}this.loadSessionFromId(json.widgetSessionId);
json.result=true;return json},die:function(){if(this.mState!=ISQ.Com.JsonP.Client.enumState.CONNECTED){return}this.changeState(ISQ.Com.JsonP.Client.enumState.DISCONNECTED);this.request_internal({url:this.mUrlPrefix+"die.js",params:null,handler:function(){}})},setContext:function(a,b,c){for(var d in a){var e=d.toLowerCase();a[e]=a[d].Trim();if(e!==d){delete a[d]}}this.mContexts=a;var f=[];for(var d in a){if(f.length!=0){f.push(",")}f.push(d);f.push(":");f.push(a[d].replace(/,/g," "))}this.mLoginParams.ctx=encodeURIComponent(f.join(""));if(c||this.mState===ISQ.Com.JsonP.Client.enumState.CONNECTED||this.mState===ISQ.Com.JsonP.Client.enumState.CONNECTING){this.request({url:"set.js",params:{ctx:this.mLoginParams.ctx},handler:function(i,g,h){if(i!=ISQ.Com.JsonP.Request.enumResponseType.OK){_session().retry(h);return}if(b){b()}}})}},setValues:function(c){var b=[];for(var a in c){if(b.length!=0){b.push(",")}b.push(a);b.push(":");b.push(c[a])}this.mLoginParams.values=ISQ.Http.Cookies.encode64(b.join(""));if(this.mState===ISQ.Com.JsonP.Client.enumState.CONNECTED||this.mState===ISQ.Com.JsonP.Client.enumState.CONNECTING){this.request({url:"set.js",params:{values:this.mLoginParams.values},handler:function(){}})}},getUploadParams:function(a,b){this.request({url:"getUploadParams.js",params:{data:a},handler:function(d,c){b.handle(c)}})},deleteFile:function(a){this.request({url:"deleteTempFile.js",params:{data:a},handler:function(c,b){}})},state:function(){return this.mState},id:function(){return this.mSessionId},contexts:function(){return this.mContexts},hasContext:function(){if(this.mContexts){for(var a in this.mContexts){return true}}return false},hello:function(){if(this.mState!=ISQ.Com.JsonP.Client.enumState.DISCONNECTED){return}this.mState=ISQ.Com.JsonP.Client.enumState.CONNECTING;var a=this;this.request_internal({url:this.mUrlPrefix+"hello.js",params:this.mLoginParams,handler:function(c,b){clearTimeout(a.mLoginTimer);if(c==ISQ.Com.JsonP.Request.enumResponseType.OK){a.mSessionId=b.sessionId;a.mLogoutInterval=b.timeout*1000;clearTimeout(a.mDisconnectedTimer);
a.mDisconnectedTimer=setTimeout(function(){a.changeState(ISQ.Com.JsonP.Client.enumState.DISCONNECTED)},a.mLogoutInterval);if(a.mQueue){while(a.mQueue.count()!=0){a.request_internal(a.mQueue.dequeue())}}a.changeState(ISQ.Com.JsonP.Client.enumState.CONNECTED)}else{a.mLoginTimer=setTimeout(function(){a.changeState(ISQ.Com.JsonP.Client.enumState.DISCONNECTED)},a.mLoginTimerInterval);if(a.mLoginTimerInterval<30000){a.mLoginTimerInterval+=1000}}}})},request_internal:function(a){if(!a.params){a.params={}}a.params.sid=this.mSessionId;this.mRequest.send(a)},changeState:function(a){var b=this.mState;this.mState=a;if(this.fStateChanged){this.fStateChanged(b,a)}},mContexts:null,mUrlPrefix:"",mHost:null,mState:null,mRequest:null,mDefaultTimeout:null,mLoginParams:null,mQueue:null,mSessionId:0,mDisconnectedTimer:null,mLoginTimer:null,mLoginTimerInterval:2000,fStateChanged:null,mKeepAliveInterval:3000,mKeepAliveTimer:null,mLogoutInterval:null,mAccount:null}});</script>
    <script type="text/javascript" mini="true">ISQ.Com=initializeNS("ISQ.Com");ISQ.Com.TinyAjax={enumMethod:{GET:"GET",POST:"POST"},enumStatus:{OK:200,FAIL:400,TIMEOUT:500},create:function(a){var g=null;if(typeof(XMLHttpRequest)==="function"||typeof(XMLHttpRequest)==="object"){g=new XMLHttpRequest()}else{throw"Cannot create ajax object"}if(a.method==this.enumMethod.GET&&a.data){a.url+="?"+a.data}g.open(a.method,a.url,true);if(a.headers){for(var b in a.headers){g.setRequestHeader(b,a.headers[b])}}g.onreadystatechange=function(){switch(this.readyState){case 4:c(ISQ.Com.TinyAjax.enumStatus.OK);break}};g.onerror=function(){c(ISQ.Com.TinyAjax.enumStatus.FAIL)};g.onload=function(){c(ISQ.Com.TinyAjax.enumStatus.OK)};var c=function(i){if(!d){return}clearTimeout(f);d=false;var k=-1;try{var k=g.status;if(!k){k=400}}catch(h){if(e){k=-1}else{k=400}}var j="";switch(k){case 200:i=ISQ.Com.TinyAjax.enumStatus.OK;j=g.responseText||"";break;case 400:case 403:case 404:i=ISQ.Com.TinyAjax.enumStatus.FAIL;break;default:if(e){i=ISQ.Com.TinyAjax.enumStatus.TIMEOUT}else{i=ISQ.Com.TinyAjax.enumStatus.FAIL}break}a.handler(i,j,g)};var f=setTimeout(function(){if(!d){return}e=true;g.abort();if(d){c(ISQ.Com.TinyAjax.enumStatus.TIMEOUT)}},(a.timeout||10000));var d=true;var e=false;if(a.method===this.enumMethod.POST){g.send(a.data)}else{g.send(null)}}};</script>
    <script type="text/javascript" mini="true">ISQ.CSS=initializeNS("ISQ.CSS");ISQ.CSS.getVerticalMargin=function(b){var d=0;var c=ISQ.CSS.getElementStyle(b,"margin-top");c=parseInt(c);if(!isNaN(c)){d+=c}var a=ISQ.CSS.getElementStyle(b,"margin-bottom");a=parseInt(a);if(!isNaN(a)){d+=a}return d};ISQ.CSS.getHorizonalMargin=function(a){var d=0;var b=ISQ.CSS.getElementStyle(a,"margin-left");b=parseInt(b);if(!isNaN(b)){d+=b}var c=ISQ.CSS.getElementStyle(a,"margin-right");c=parseInt(c);if(!isNaN(c)){d+=c}return d};ISQ.CSS.setStyle=function(c,e,a){c=ISQ.Html._(c);if(c===null){return}if(typeof(e)!=="string"){return}if(typeof(a)==="undefined"){a=true}if(a){c.className="";c.style.cssText=""}var d=e.split("&");for(var b=0;b<d.length;++b){if(d[b].charAt(0)==="."){c.className+=" "+d[b].substring(1)}else{c.style.cssText+=";"+d[b]}}};ISQ.CSS.setOpacity=function(b,c){b=ISQ.Html._(b);if(b===null){return}if(typeof(c)!=="number"||(c<0||c>100)){return}if(ISQ.Http.browser.isIE6||ISQ.Http.browser.isIE7){if(c===100){b.style.removeAttribute("filter");if(b.nodeName==="TR"){for(var a=0;a<b.childNodes.length;++a){ISQ.CSS.setOpacity(b.childNodes[a],c)}}}else{b.style.filter="alpha(opacity="+c+")";if(b.nodeName==="TR"){for(var a=0;a<b.childNodes.length;++a){ISQ.CSS.setOpacity(b.childNodes[a],c)}}}}else{if(ISQ.Http.browser.isIE8||ISQ.Http.browser.isIE9){if(c===100){b.style.removeAttribute("filter");if(b.nodeName==="TR"){for(var a=0;a<b.childNodes.length;++a){b.childNodes[a].style.removeAttribute("filter")}}}else{b.style.filter="progid:DXImageTransform.Microsoft.Alpha(Opacity="+c+")";if(b.nodeName==="TR"){for(var a=0;a<b.childNodes.length;++a){b.childNodes[a].style.filter="inherit"}}}}else{if(c===100){b.style.removeProperty("opacity");if(ISQ.Http.browser.app==="opera"&&b.nodeName==="TR"){for(var a=0;a<b.childNodes.length;++a){b.childNodes[a].style.removeProperty("opacity")}}}else{b.style.opacity=(c/100);if(ISQ.Http.browser.app==="opera"&&b.nodeName==="TR"){for(var a=0;a<b.childNodes.length;++a){b.childNodes[a].style.opacity="inherit"}}}}}};ISQ.CSS.toggleCss=function(a,c){var d=false;var h="cssRules";
if(ISQ.Http.browser.app==="ie"&&!ISQ.Http.browser.isIE11){h="rules"}var g=document.styleSheets.length;for(var f=g-1;f>=0;--f){var k=document.styleSheets[f];try{if(k.href||k[h].length==0){continue}var j=k[h][0].selectorText;if(!j&&k[h].length>1){j=k[h][1].selectorText}if(!j){continue}if(j.toLowerCase()!==a.toLowerCase()){continue}k.disabled=!c;d=true}catch(b){}}return d};ISQ.CSS.bringToFront=function(a){var c=false;var h="cssRules";if(ISQ.Http.browser.app==="ie"&&!ISQ.Http.browser.isIE11){h="rules"}var g=document.styleSheets.length;for(var f=g-1;f>=0;--f){var m=document.styleSheets[f];try{if(m.href||m[h].length==0){continue}var j=m[h][0].selectorText;if(!j&&m[h].length>1){j=m[h][1].selectorText}if(!j){continue}if(j.toLowerCase()!==a.toLowerCase()){continue}var k;if(m.ownerNode){k=m.ownerNode}else{k=m.owningElement}var d=k.parentNode;if(d){d.appendChild(k)}c=true}catch(b){}}return c};ISQ.CSS.getElementWidth=function(a,b){var c=a.offsetWidth;c-=ISQ.Tools.getNumber(ISQ.CSS.getElementStyle(a,"padding-left"),0);c-=ISQ.Tools.getNumber(ISQ.CSS.getElementStyle(a,"padding-right"),0);if(b){c-=ISQ.CSS.getHorizonalMargin(a)}return c};ISQ.CSS.getElementHeight=function(a,c,b){var d=a.offsetHeight;if(d===0){if(b){return 0}d=ISQ.Tools.getNumber(ISQ.CSS.getElementStyle(a,"height"),0)}d-=ISQ.Tools.getNumber(ISQ.CSS.getElementStyle(a,"padding-top"),0);d-=ISQ.Tools.getNumber(ISQ.CSS.getElementStyle(a,"padding-bottom"),0);if(c){d-=ISQ.CSS.getVerticalMargin(a)}return d};ISQ.CSS.getPaddingWidth=function(a){var b=ISQ.Tools.getNumber(ISQ.CSS.getElementStyle(a,"padding-left"),0);b+=ISQ.Tools.getNumber(ISQ.CSS.getElementStyle(a,"padding-right"),0);return b};ISQ.CSS.setWidthIncludingPadding=function(a,b){b-=ISQ.Tools.getNumber(ISQ.CSS.getElementStyle(a,"padding-left"),0);b-=ISQ.Tools.getNumber(ISQ.CSS.getElementStyle(a,"padding-right"),0);a.style.width=b+"px"};ISQ.CSS.addClass=function(b,a){if(b.className){var d=b.className.split(" ");for(var c in d){if(d[c]==a){return}}}b.className+=" "+a};ISQ.CSS.removeClass=function(c,b){if(!c.className){return
}var a=new Array();var e=c.className.split(" ");for(var d in e){if(e[d]&&e[d]!=b){a.push(e[d])}}c.className=a.join(" ")};ISQ.CSS.addNewStyleToHead=function(b,a){var c=document.createElement("style");c.type="text/css";if(a){c.id=a}document.getElementsByTagName("head")[0].appendChild(c);if(ISQ.Http.browser.app==="ie"&&!ISQ.Http.browser.isIE11&&c.styleSheet){c.styleSheet.cssText=b}else{var d=document.createTextNode(b);c.appendChild(d)}return c};ISQ.CSS.addNewStyle=function(g,b,e){if(e){if(typeof ISQ.CSS.dynamicLoadedCssUniqueId=="undefined"){ISQ.CSS.dynamicLoadedCssUniqueId=0}var d="splitInHeaderStart{direction:rtl}\r\n";var c="splitInHeaderEnd{direction:rtl}\r\n";var f=function(){while(a!=-1){ISQ.CSS.dynamicLoadedCssUniqueId++;var h=g.indexOf(c);var i=g.substring(a+d.length,h-a);var j=[];j.push(g.substring(0,a));j.push(g.substring(h+c.length));g=j.join("");ISQ.CSS.addNewStyleToHead(i,b+ISQ.CSS.dynamicLoadedCssUniqueId);a=g.indexOf(d)}if(g.length>0){ISQ.CSS.addNewStyleToHead(g,b+ISQ.CSS.dynamicLoadedCssUniqueId)}};var a=-1;a=g.indexOf(d);if(a!=-1){f()}else{d="splitInHeaderStart{direction:rtl}";c="splitInHeaderEnd{direction:rtl}";a=g.indexOf(d);f()}}else{return ISQ.CSS.addNewStyleToHead(g,b)}};ISQ.CSS=initializeNS("ISQ.CSS");ISQ.CSS.getElementStyle=function(c,f){c=ISQ.Html._(c);var g=null;if(window.getComputedStyle){g=document.defaultView.getComputedStyle(c,null).getPropertyValue(f)}if(!g&&c.runtimeStyle){if(f.indexOf("-")!==-1){var a=[];for(var d=0;d<f.length;d++){if(f.charAt(d)==="-"){a.push(f.charAt(++d).toUpperCase())}else{a.push(f.charAt(d))}}f=a.join("")}if(typeof(document.defaultView)!=="undefined"){try{g=document.defaultView.getComputedStyle(c,null)[f]}catch(b){g=null}}if(!g){try{g=c.runtimeStyle[f]}catch(b){g=null}}if(!g){if((ISQ.Http.browser.isIE7||ISQ.Http.browser.isIE6)&&f.contains("border")){g=null}else{if(c.currentStyle){g=c.currentStyle[f]}}}}return g};</script>
    <script type="text/javascript" mini="true">ISQ.CSS=initializeNS("ISQ.CSS");ISQ.CSS.setNodeStyleText=function(a,b){a.setAttribute("style",b);a.style.cssText=b};ISQ.CSS.removeStyle=function(d){if(!d){return}var a=document.getElementsByTagName("head")[0];for(var c=0;c<a.childNodes.length;c++){var b=a.childNodes[c];if(b.id==d){a.removeChild(b);--c}}};ISQ.CSS.generateCSSstring=function(d,c){if(d===null||c===null){return""}var a=[];a.push(c);a.push("{"+d+"}");var b=a.join("");return b};ISQ.CSS.getAttributeValueFromStyleString=function(d,a){var e=0;var c=d.indexOf(a);if(c>-1){c=d.indexOf(":",c);var b=d.indexOf(";",c);if(b>-1){e=d.substring(c+1,b)}else{e=d.substring(c+1)}}return e};ISQ.CSS.getBackgroundImage=function(d){var e="";var a=ISQ.CSS.getAttributeValueFromStyleString(d,"background-image");if(a===0){a=ISQ.CSS.getAttributeValueFromStyleString(d,"background")}var c=a.indexOf("url(");if(c>-1){c+=4;var b=a.indexOf(")",c);b-=1;e=a.substring(c,b);e=e.replace('"',"")}return e};ISQ.CSS.getSelectorStyle=function(q,r){if(typeof(q)!=="string"){return}q=q.toLowerCase();if(typeof(r)!=="string"){r=null}else{r=r.toLowerCase()}var p="cssRules";if(ISQ.Http.browser.app==="ie"&&!ISQ.Http.browser.isIE11){p="rules"}try{var g=document.styleSheets.length;var u=new Array();for(var e=g-1;e>=0;--e){var v=document.styleSheets[e];try{if(v.disabled){continue}var o=v[p].length;for(var f=o-1;f>=0;--f){var t=v[p][f].selectorText;if(!t){continue}var s=t.toLowerCase().split(",");var k=s.length;for(var d=k-1;d>=0;--d){var b=s[d].Trim();if(q===b||(r!==null&&r===b)){var w;for(var a in v[p][f].style){if(u[a]){continue}w=v[p][f].style[a];if(!w){continue}u[a]=w}}}}}catch(c){}}return u}catch(c){}return null};ISQ.CSS.getValueBySelectors=function(a,c,d){if(typeof(a)!=="string"){return}if(typeof(c)!=="string"){return}if(typeof(d)!=="string"){d=null}var b=ISQ.CSS.getSelectorStyle(c,d);if(b===null){return null}var f=b[a];if(typeof(f)!=="string"){return null}var e=f.Trim();if(e===""){return null}return e};ISQ.CSS.changeValueBySelector=function(d,a,c){if(typeof(a)!=="string"){return}if(typeof(d)!=="string"){return
}if(typeof(c)!=="string"){return}var b=ISQ.CSS.getSelectorStyle(d);if(!b){return null}b[a]=c};ISQ.CSS.getValue=function(e,d){var b=ISQ.Html._(e);if(b===null){return null}var c="#"+b.id;var a="."+b.className;var f=b.nodeName.toLowerCase();d=d.toLowerCase();var h=null;h=b.style[d];if(h){return h.Trim()}var g=ISQ.CSS.getValueBySelectors(d,a,c);if(g===null){return ISQ.CSS.getValueBySelectors(d,f+a,f+c)}};</script>
    <script type="text/javascript" mini="true">ISQ.CDC=initializeNS("ISQ.CDC");if(typeof(nanoRep)==="undefined"){window.nanoRep={}}if(typeof(nanoRep.CDC)==="undefined"){nanoRep.CDC={}}nanoRep.CDC.Helper={splitURLArguments:function(e){var g=new Array();var i=e;var c=i.length;if(c===0){return g}var b=function(j){return unescape(j.join("").toString()).replace(/^\s+|\s+$/g,"")};var h=1;var d="";var f=0;var a=new Array();while(f<c){switch(h){case 1:if(i.charAt(f)!=="="){a.push(i.charAt(f))}else{h=2;d=b(a).toLowerCase();a=new Array()}break;case 2:if(i.charAt(f)!=="&"){a.push(i.charAt(f))}else{h=1;g[d]=b(a);a=new Array()}break}++f}if(h===2){g[d]=b(a)}return g},getTargetWindow:function(a,c){if(!a){return window.top}var g=window;if(c){g=window.parent}if(a==="parent"){return g.parent}var f=false;var d;do{try{if(g===window.top){f=true}d=g.frames[a];if(d){return d}}catch(b){}g=g.parent}while(!f);return window.top},parseMessage:function(a){if(!a){return""}var b=nanoRep.CDC.Helper.splitURLArguments(a);b.s=unescape(b.s);b.t=unescape(b.t);return b}};ISQ.CDC.User=ISQ.Base.extend({name:"ISQ.CDC.User"});ISQ.CDC.User.prototype.ctor=function(b){this.mTargetWindowName=b.targetWindowName||"";this.mProxyIFrameUrl=b.proxyIFrameUrl||null;this.mAllowMessagesFrom=b.allowMessagesFrom||null;this.incomingMessageEvent=new ISQ.Event();this.mWidget=b.widget||null;this.eFilterMessages=new ISQ.Event();if(typeof(ISQ.CDC.users)==="undefined"){ISQ.CDC.users=new Array()}ISQ.CDC.users.push(this);if(typeof(window.postMessage)!="function"&&typeof(window.postMessage)!="object"){this.mLegacyMode=true;this.mHost_l=window.location.protocol+"//"+window.location.host;if(this.mProxyIFrameUrl){if(this.mProxyIFrameUrl.contains("?")){this.mProxyIFrameUrl+="&srv="+b.server}else{this.mProxyIFrameUrl+="?srv="+b.server}}}else{var a=this;this.mPostMessageEventListener=function(d){if(d.origin!==a.mAllowMessagesFrom){return}var c=ISQ.CDC.Helper.splitURLArguments(d.data);c.s=unescape(d.origin);c.t="*";a.dispatchMessage(c)};if(window.addEventListener){window.addEventListener("message",this.mPostMessageEventListener,false)
}else{if(window.attachEvent){window.attachEvent("onmessage",this.mPostMessageEventListener)}}}};ISQ.CDC.User.prototype.dtor=function(){if(this.mProxyIFrame_l&&this.mProxyIFrame_l.parentNode!==null){document.body.removeChild(this.mProxyIFrame_l)}if(!this.mLegacyMode){if(window.removeEventListener){window.removeEventListener("message",this.mPostMessageEventListener,false)}else{if(window.detachEvent){window.detachEvent("onmessage",this.mPostMessageEventListener)}}}};ISQ.CDC.User.prototype.sendMessage=function(b,e){e=e||"*";if(!this.mLegacyMode){var f=ISQ.CDC.Helper.getTargetWindow(this.mTargetWindowName);b+="&ord="+(++this.mMessageOrdinal);f.postMessage(b,e)}else{if(!this.mMessagesOnSent){this.mMessagesOnSent=new Array()}if(!this.mProxyIFrameBaseUrl_l){var a=new Array();a.push(this.mProxyIFrameUrl);a.push("#");a.push("s=");a.push(escape(this.mHost_l));a.push("&t=");a.push(escape(e));a.push("&twnd=");a.push(this.mTargetWindowName);this.mProxyIFrameBaseUrl_l=a.join("")}var c=function(g,l,h){var n=new Array();n.push(g.mProxyIFrameBaseUrl_l);n.push("&");n.push(h);n.push("&ord=");n.push(l);var m="position: absolute; left: 0px; top:-1100px;height:70px;width:70px;";var i=document.createElement("iframe");var j=ISQ.CDC.User.getIframeId();i.setAttribute("id",j);i.setAttribute("name",j);i.setAttribute("src",n.join(""));i.setAttribute("frameBorder","1");i.setAttribute("scrolling","auto");i.setAttribute("width","70px");i.setAttribute("height","70px");i.setAttribute("style",m);if(i.style.setAttribute){i.style.setAttribute("cssText",m)}document.body.appendChild(i);var k=function(){setTimeout(function(){g.mMessagesOnSent[l]=null},100)};if(ISQ.Http.browser.app==="opera"){i.onload=k}else{if(document.addEventListener){i.addEventListener("load",k,true)}else{if(document.attachEvent){i.attachEvent("onload",k)}}}};var d=++this.mMessageOrdinal;this.mMessagesOnSent[d]=new c(this,d,b)}};ISQ.CDC.User.prototype.dispatchMessage=function(d){if(d.widget&&this.mWidget!==d.widget){return}var h={message:d,filter:false};this.eFilterMessages.dispatch(h);
if(h.filter){return}if(d.subject&&d.subject=="reset"){this.mLastHandledMessageOrdinal=0;this.mMessageOrdinal=0;this.mReceivedMessages=null;this.mWasReset_debug=true}var j=parseInt(d.ord);var a=j-this.mLastHandledMessageOrdinal;if(a<=0){return}if(a>1){if(this.mReceivedMessages===null){this.mReceivedMessages=new Array();this.mReceivedMessagesCount=0}this.mReceivedMessages[j]=d;++this.mReceivedMessagesCount}else{try{this.incomingMessageEvent.dispatch(d)}catch(b){}if(this.mReceivedMessages!==null){var g=this.mReceivedMessagesCount;var f=j+1;for(var c=0;c<g;++c,++f){if(!this.mReceivedMessages[f]){break}this.incomingMessageEvent.dispatch(this.mReceivedMessages[f]);j=f;--this.mReceivedMessagesCount}if(this.mReceivedMessagesCount===0){this.mReceivedMessages=null}}this.mLastHandledMessageOrdinal=j}};ISQ.CDC.User.prototype.targetWindowName=function(){return this.mTargetWindowName};ISQ.CDC.User.prototype.allowMessagesFrom=function(){return this.mAllowMessagesFrom};ISQ.CDC.User.prototype.mTargetWindowName=null;ISQ.CDC.User.prototype.mLegacyMode=false;ISQ.CDC.User.prototype.mHost_l="";ISQ.CDC.User.prototype.mProxyIFrameUrl=null;ISQ.CDC.User.prototype.mProxyIFrameBaseUrl_l=null;ISQ.CDC.User.prototype.mCurrentHeight=70;ISQ.CDC.User.prototype.incomingMessageEvent=null;ISQ.CDC.User.prototype.eFilterMessages=null;ISQ.CDC.User.prototype.mPostMessageEventListener=null;ISQ.CDC.User.prototype.mIsCDCStation=true;ISQ.CDC.User.prototype.mMessageOrdinal=0;ISQ.CDC.User.prototype.mAllowMessagesFrom=null;ISQ.CDC.User.prototype.mMessagesOnSent=null;ISQ.CDC.User.prototype.mReceivedMessages=null;ISQ.CDC.User.prototype.mLastHandledMessageOrdinal=0;ISQ.CDC.User.prototype.mReceivedMessagesCount=0;ISQ.CDC.User.prototype.mWasReset_debug=false;ISQ.CDC.User.getIframeId=function(){return"nR_CDC"+ISQ.CDC.User.iframeIdCounter++};ISQ.CDC.User.iframeIdCounter=new Date().getTime();</script>
    <script type="text/javascript" mini="true">var VisualEffects={};VisualEffects.FadeEnum={IN:5,OUT:6};VisualEffects.Fade=function(a){this.mElement=_(a);if(this.mElement===null){throw ("VisualEffects.Fade Ctor: No valid element")}this.fadeInEvent=new ISQ.Event();this.fadeOutEvent=new ISQ.Event();return this};VisualEffects.Fade.prototype.mElement=null;VisualEffects.Fade.prototype.fadeInEvent=null;VisualEffects.Fade.prototype.fadeOutEvent=null;VisualEffects.Fade.prototype.mIsRunning=false;VisualEffects.Fade.prototype.mTimer=null;VisualEffects.Fade.prototype.mInterval=null;VisualEffects.Fade.prototype.mAmount=null;VisualEffects.Fade.prototype.mLeftAmount=null;VisualEffects.Fade.prototype.mTime=null;VisualEffects.Fade.prototype.mLastExecutionTime=null;VisualEffects.Fade.prototype.mAvailableToRun=true;VisualEffects.Fade.prototype.mCurrentDirection=null;VisualEffects.Fade.prototype.mCurrentOpacity=-1;VisualEffects.Fade.prototype.mRemoveFilterStyle=false;VisualEffects.Fade.prototype.mCancelInIe6=false;VisualEffects.Fade.prototype.stop=function(){if(this.mIsRunning){clearTimeout(this.mTimer);this.mIsRunning=false}};VisualEffects.Fade.prototype.fadeOut=function(d,b){try{this.stop();this.mCancelInIe6=b===true?true:false;this.mCurrentOpacity=this.getOpacity();if(this.mCurrentOpacity===0){this.fadeOutEvent.dispatch();return false}this.mCurrentDirection=VisualEffects.FadeEnum.OUT;this.mTime=d;this.mInterval=10;this.mLeftAmount=this.mCurrentOpacity;this.mAmount=this.mLeftAmount/(this.mTime/this.mInterval);if(ISQ.Http.browser.isIE6&&this.mCancelInIe6){this.mAmount=this.mLeftAmount}this.updateOpacity(-this.mAmount);this.mIsRunning=true;var a=this;this.mLastExecutionTime=new Date();this.mTimer=setTimeout(function(){a.fader()},this.mInterval)}catch(c){return false}return true};VisualEffects.Fade.prototype.fadeIn=function(e,d,b){try{this.stop();this.mRemoveFilterStyle=d===true?true:false;this.mCancelInIe6=b===true?true:false;this.mCurrentOpacity=this.getOpacity();if(this.mCurrentOpacity===100){this.fadeInEvent.dispatch();return false}this.mCurrentDirection=VisualEffects.FadeEnum.IN;
this.mTime=e;this.mInterval=10;this.mLeftAmount=(100-this.mCurrentOpacity);this.mAmount=this.mLeftAmount/(this.mTime/this.mInterval);if(ISQ.Http.browser.isIE6&&this.mCancelInIe6){this.mAmount=this.mLeftAmount}this.updateOpacity(this.mAmount);this.mIsRunning=true;var a=this;this.mLastExecutionTime=new Date();this.mTimer=setTimeout(function(){a.fader()},this.mInterval)}catch(c){return false}return true};VisualEffects.Fade.prototype.fader=function(){try{clearTimeout(this.mTimer);if(!this.mIsRunning){return}var b=new Date()-this.mLastExecutionTime;this.mInterval=b;this.mTime-=b;if(this.mTime<=0){this.mTime=0}switch(this.mCurrentDirection){case VisualEffects.FadeEnum.OUT:this.mLeftAmount=this.mCurrentOpacity;if(this.mTime===0){this.mTime=this.mInterval}this.mAmount=this.mLeftAmount/(this.mTime/this.mInterval);this.mAmount=this.mAmount>this.mLeftAmount?this.mLeftAmount:this.mAmount;this.updateOpacity(-this.mAmount);if(this.mCurrentOpacity===0){this.mIsRunning=false;this.fadeOutEvent.dispatch();return}break;case VisualEffects.FadeEnum.IN:this.mLeftAmount=this.mCurrentOpacity>=100?100:(100-this.mCurrentOpacity);if(this.mTime===0){this.mTime=this.mInterval}this.mAmount=this.mLeftAmount/(this.mTime/this.mInterval);this.mAmount=this.mAmount>this.mLeftAmount?this.mLeftAmount:this.mAmount;this.updateOpacity(this.mAmount);if(this.mCurrentOpacity===100){this.mIsRunning=false;if(this.mRemoveFilterStyle&&ISQ.Http.browser.app==="ie"&&!ISQ.Http.browser.isIE11){this.mElement.style.filter="";this.mElement.style.removeAttribute("filter")}this.fadeInEvent.dispatch();return}break}if(!this.mIsRunning){return}var a=this;this.mLastExecutionTime=new Date();this.mTimer=setTimeout(function(){a.fader()},this.mInterval)}catch(c){}};VisualEffects.Fade.prototype.getOpacity=function(){var b=100;if(ISQ.Http.browser.app==="ie"&&!ISQ.Http.browser.isIE11){var c=ISQ.CSS.getValue(this.mElement,"filter");if(typeof(c)!=="undefined"&&c!==null){var e=c.indexOf("alpha(opacity=");if(e!==-1){var a=c.indexOf(",");if(a===-1){a=c.indexOf(")")}var d=parseInt(c.substring(e+14,a));
if(!isNaN(d)){b=d}}if(b<0){b=0}else{if(b>100){b=100}}}}else{var c=ISQ.CSS.getValue(this.mElement,"opacity");if(typeof(c)!=="undefined"&&c!==null){var d=Number(c);if(!isNaN(d)){b=d;b*=100;if(b<0){b=0}else{if(b>100){b=100}}}}}return b};VisualEffects.Fade.prototype.setOpacity=function(a){this.updateOpacity(-this.mCurrentOpacity+a)};VisualEffects.Fade.prototype.updateOpacity=function(c){this.mCurrentOpacity+=c;if(this.mCurrentOpacity<0){this.mCurrentOpacity=0}else{if(this.mCurrentOpacity>100){this.mCurrentOpacity=100}}if(ISQ.Http.browser.app==="ie"&&!ISQ.Http.browser.isIE11){var a=new Array();a.push("alpha(opacity=");a.push(this.mCurrentOpacity);a.push(")");this.mElement.style.filter=a.join("")}else{var b=parseInt(this.mCurrentOpacity)/100;this.mElement.style.opacity=b}};</script>
    <script type="text/javascript" mini="true">ISQ.GUI=initializeNS("ISQ.GUI");ISQ.GUI.ProgressAnimation=ISQ.Base.extend({name:"ISQ.GUI.ProgressAnimation"});ISQ.GUI.ProgressAnimation.prototype.ctor=function(a){this.mDiv=a.container;this.mOnShow=a.onShow||null;this.mOnHide=a.onHide||null;this.mDivCounter=a.numofboxes||3;this.mOpacityMinValue=a.opacityMin||20;this.mOpacityMaxValue=a.opacityMax||60;this.mArray=new Array();var d=this.mOpacityMaxValue;for(var c=0;c<this.mDivCounter;++c){d-=this.mOpacityDiff;var b=createDiv(this.mDiv,a.boxStyle);if(ISQ.Http.browser.isIE6||ISQ.Http.browser.isIE7){b.innerHTML="&nbsp;"}this.mArray[c]={div:b,opacity:d,increment:this.mIncrementValue}}};ISQ.GUI.ProgressAnimation.prototype.dtor=function(){this.hide();try{clearNode(this.mDiv);if(this.mDiv.parentNode){this.mDiv.parentNode.removeChild(this.mDiv)}}catch(a){}};ISQ.GUI.ProgressAnimation.prototype.show=function(a){if(a){if(!this.mOriginalClassName){this.mOriginalClassName=this.mDiv.className}this.mDiv.className=a}this.mDiv.style.display="block";this.start();if(typeof(this.mOnShow)==="function"){this.mOnShow()}};ISQ.GUI.ProgressAnimation.prototype.start=function(){if(this.mTimer){return}this.timerFunc()};ISQ.GUI.ProgressAnimation.prototype.timerFunc=function(){if(this.mIsDisposed){return}for(var a=0;a<this.mArray.length;++a){ISQ.CSS.setOpacity(this.mArray[a].div,this.mArray[a].opacity);var b=this.mArray[a].opacity+this.mArray[a].increment;if(b>this.mOpacityMaxValue||b<this.mOpacityMinValue){this.mArray[a].increment*=-1;b=this.mArray[a].opacity+(this.mArray[a].increment*this.mOpacityEdgeSkip)}this.mArray[a].opacity=b}var c=this;this.mTimer=setTimeout(function(){c.timerFunc()},this.mTimerInterval)};ISQ.GUI.ProgressAnimation.prototype.stop=function(){clearTimeout(this.mTimer);this.mTimer=null};ISQ.GUI.ProgressAnimation.prototype.hide=function(){if(this.mOriginalClassName){this.mDiv.className=this.mOriginalClassName}this.mDiv.style.display="none";this.stop();if(typeof(this.mOnHide)==="function"){this.mOnHide()}};ISQ.GUI.ProgressAnimation.prototype.container=function(){return this.mDiv
};ISQ.GUI.ProgressAnimation.prototype.mDiv=null;ISQ.GUI.ProgressAnimation.prototype.mOriginalClassName=null;ISQ.GUI.ProgressAnimation.prototype.mDivCounter=3;ISQ.GUI.ProgressAnimation.prototype.mOpacityDiff=12;ISQ.GUI.ProgressAnimation.prototype.mTimer=null;ISQ.GUI.ProgressAnimation.prototype.mTimerInterval=50;ISQ.GUI.ProgressAnimation.prototype.mIncrementValue=3;ISQ.GUI.ProgressAnimation.prototype.mOpacityEdgeSkip=5;ISQ.GUI.ProgressAnimation.prototype.mOpacityMaxValue=60;ISQ.GUI.ProgressAnimation.prototype.mOpacityMinValue=20;ISQ.GUI.ProgressAnimation.prototype.mOnShow=null;ISQ.GUI.ProgressAnimation.prototype.mOnHide=null;</script>
    <script type="text/javascript" mini="true">ISQ.GUI=initializeNS("ISQ.GUI");ISQ.GUI.IntuitiveInput=ISQ.Base.extend({name:"ISQ.GUI.IntuitiveInput"});ISQ.GUI.IntuitiveInput.prototype.ctor=function(a){this.mInput=a.input;this.mInput.intuitive=this;this.mOnTimeElapsedHandler=a.onTimeElapsedHandler||null;if(!this.mOnTimeElapsedHandler){throw ("Intuitive search ctor: invalid onTimeElapsedHandler")}this.mOnBeginWritingHandler=a.onBeginWritingHandler||null;this.mEnterKeyHandler=a.enterKeyHandler||null;this.mLastValue=this.mInitialValue=a.initialValue||this.mInput.value.Trim();this.mInterval=a.interval||this.mInterval;this.mOriginalKeyUpHandler=a.keyUpHandler||null;this.mRange=a.range||null;if(this.mInput.onkeyup){var b=this.mInput.onkeyup;this.mInput.onkeyup=function(c){b(c);this.intuitive.inputKeyUpHandler.apply(this.intuitive,new Array(c,this.value))}}else{this.mInput.onkeyup=this.inputKeyUpHandler}this.mInput.onpaste=function(c){var d=this;setTimeout(function(){d.intuitive.inputKeyUpHandler.apply(d.intuitive,new Array(c,d.value))},0)};if(a.processAfterConstructor===true){this.mInput.onkeyup()}else{this.mFirstRun=false}};ISQ.GUI.IntuitiveInput.prototype.dtor=function(){this.mInput.intuitive=null;this.mInput=null;this.mOnTimeElapsedHandler.dispose();this.mOnTimeElapsedHandler=null;if(this.mOnBeginWritingHandler!==null){this.mOnBeginWritingHandler.dispose();this.mOnBeginWritingHandler=null}};ISQ.GUI.IntuitiveInput.prototype.inputKeyUpHandler=function(c,f){if(typeof(this.intuitive)!=="undefined"){arguments.callee.apply(this.intuitive,new Array(c,this.value));return}if(this.mEnterKeyHandler){var a=ISQ.Html.getDomEvent(c);if(a&&a.domEvent&&a.domEvent.keyCode===13){this.mEnterKeyHandler.handle(a);return}}if(this.mRange){var d=this.mRange[0];var e=this.mRange[1];if(f>e){this.mInput.value=e;f=String(e)}else{if(f<d){this.mInput.value=d;f=String(d)}}}if(this.mFirstRun){this.mFirstRun=false;if(this.mLastValue.length===0){return}this.mOnTimeElapsedHandler.handle(this.mLastValue,true);return}if(f===this.mLastValue){return}f=f.Trim();if(this.mKeyUpTimer===null&&this.mOnBeginWritingHandler&&f!==this.mLastValue){this.mOnBeginWritingHandler.handle()
}this.mLastValue=f;clearTimeout(this.mKeyUpTimer);if(f===this.mLastQuery){return}if(f.length===0){this.mOnTimeElapsedHandler.handle(f,this.mLastQuery!==f);this.mLastQuery="";this.mKeyUpTimer=null;return}var b=this;this.mKeyUpTimer=setTimeout(function(){if(b.mLastQuery===f){b.mOnTimeElapsedHandler.handle(f,false);return}b.mLastQuery=f;b.mOnTimeElapsedHandler.handle(f,true);b.mKeyUpTimer=null},this.mInterval)};ISQ.GUI.IntuitiveInput.prototype.resetValue=function(a,b){if(!a){this.mInput.value=""}if(typeof(b)!=="undefined"){this.mInitialValue=b}this.mLastValue=this.mInitialValue;this.mLastQuery=null;clearTimeout(this.mKeyUpTimer);this.mKeyUpTimer=null};ISQ.GUI.IntuitiveInput.prototype.input=function(){return this.mInput};ISQ.GUI.IntuitiveInput.prototype.value=function(){return this.mInput.value};ISQ.GUI.IntuitiveInput.prototype.enable=function(){this.mInput.disabled=false};ISQ.GUI.IntuitiveInput.prototype.disable=function(){this.mInput.disabled=true};ISQ.GUI.IntuitiveInput.prototype.mInput=null;ISQ.GUI.IntuitiveInput.prototype.mLastValue="";ISQ.GUI.IntuitiveInput.prototype.mInitialValue="";ISQ.GUI.IntuitiveInput.prototype.mLastQuery=null;ISQ.GUI.IntuitiveInput.prototype.mOnTimeElapsedHandler=null;ISQ.GUI.IntuitiveInput.prototype.mOriginalKeyUpHandler=null;ISQ.GUI.IntuitiveInput.prototype.mKeyUpTimer=null;ISQ.GUI.IntuitiveInput.prototype.mInterval=500;ISQ.GUI.IntuitiveInput.prototype.mOnBeginWritingHandler=null;ISQ.GUI.IntuitiveInput.prototype.mFirstRun=true;ISQ.GUI.IntuitiveInput.prototype.mEnterKeyHandler=null;</script>
    <script type="text/javascript" mini="true">ISQ.Debug=initializeNS("ISQ.Debug");var _debug=function(){if(arguments.length===0){return ISQ.Debug}if(typeof(arguments[0])==="object"){ISQ.Debug.insertHTML(arguments[0])}else{ISQ.Debug.insertText(arguments[0])}};ISQ.Debug.init=function(){if(!debugLevel){return}if(document.addEventListener){document.addEventListener("keydown",ISQ.Debug.documentKeyDown,true)}else{if(document.attachEvent){document.attachEvent("onkeydown",ISQ.Debug.documentKeyDown)}}};ISQ.Debug.insertText=function(b){if(!debugLevel){return}this.show();var a=createDiv(this.mPopup.contentNode);a.innerHTML=b};ISQ.Debug.insertTimeDiff=function(d,a){var c=new Date();var b=(c-a);if(b>10){ISQ.Debug.insertText("<b>"+d+"</b> @ <b>"+b+" ms</b>")}return c};ISQ.Debug.insertTime=function(b){var a=new Date();ISQ.Debug.insertText("<b>"+b+"</b> @ "+a.ToString("%M:%S")+":"+a.getMilliseconds())};ISQ.Debug.insertHTML=function(a){if(!debugLevel){return}this.show();this.mPopup.contentNode.appendChild(a)};ISQ.Debug.insertObject=function(d,a,b){b=b||0;if(b===4){ISQ.Debug.insertText("DEPTH TOO DEEP");return}if(!a){ISQ.Debug.insertText("START depicting object:")}for(var c in d){ISQ.Debug.insertText("KEY:"+c);if(d[c]===null){ISQ.Debug.insertText("NULL")}else{if(typeof(d[c])==="undefined"){ISQ.Debug.insertText("Undefined")}else{if(typeof(d[c])==="object"){var e=false;if(ISQ.Base.isDerivedOf(d[c],ISQ.Base)){if(d[c].isDerivedOf(ISQ.Policies.Policy)){e=true;ISQ.Debug.insertText("Policy Id:"+d[c].id())}else{if(d[c].isDerivedOf(ISQ.Event)){e=true;ISQ.Debug.insertText("Event")}else{if(d[c].isDerivedOf(ISQ.Handler)){e=true;ISQ.Debug.insertText("Handler")}}}}else{if(d[c].nodeName){e=true;ISQ.Debug.insertText("HTML node. Name:"+d[c].nodeName+", id: "+d[c].id)}}if(!e){ISQ.Debug.insertText("{");ISQ.Debug.insertObject(d[c],true,b+1);ISQ.Debug.insertText("}")}}else{if(typeof(d[c])==="function"){ISQ.Debug.insertText("function()")}else{ISQ.Debug.insertText("VALUE: "+d[c])}}}}}if(!a){ISQ.Debug.insertText("STOP depicting object:")}};ISQ.Debug.insertStackCallback=function(){var f=30;var a=new Array();
var b=arguments.callee.caller;b=b.caller;for(var d=0;d<f&&b!==null;++d){var c=false;for(var e=0;e<a.Length&&!c;++e){if(a[e]===b){c=true}}if(c){break}a.push(b);b=b.caller}this.insertText("Printing callstack");this.insertArray(a)};ISQ.Debug.insertArray=function(a){for(var b=0;b<a.length;++b){this.insertText(b+": "+a[b])}};ISQ.Debug.createPopup=function(){var d=createDiv(document.body,"border:2px solid #aaa;background:#212620;width:300px;");var e=createDiv(d,"padding:5px");var f=createElement("h2",e,"color:#e5e5e5");f.innerHTML="Debug";var b=createLink({text:"X",onclick:function(){this.debugConsole.hide()},style:"color: #E5E5E5;margin-left: 5px;position: absolute;right: 8px;top: 5px;text-decoration:none",parent:e});b.debugConsole=this;b=createLink({text:"Clear All",onclick:function(){this.debugConsole.mPopup.contentNode.innerHTML=""},style:"color: #E5E5E5;float: left;margin: 5px 0 0;text-decoration: none;",parent:e});b.debugConsole=this;var c=createDiv(d,"background:#efefef;padding:5px;width:290px;height:300px;overflow-y:auto;resize:both;margin-top:20px;border-top:1px solid #666;font-size:14px;font-family:verdana");c.id="nanoRepDebugDiv";this.mPopup=new ISQ.GUI.Popup({position:{type:ISQ.GUI.Popup.PositionType.SCREEN_LEFT_TOP,adjust:false,fixed:true},element:d,drag:f,blockerOptions:{show:false}});this.mPopup.contentNode=c};ISQ.Debug.show=function(){if(!this.mPopup){this.createPopup()}this.mPopup.show()};ISQ.Debug.hide=function(){this.mPopup.hide()};ISQ.Debug.documentKeyDown=function(b){var a=window.event||b;if(a.shiftKey){return true}if(a.keyCode!==192){return true}ISQ.Debug.toggleConsole();return false};ISQ.Debug.toggleConsole=function(){if(!ISQ.Debug.mConsolePopup){ISQ.Debug.mConsolePopup=createDiv(document.body,"position:fixed;bottom:1px;padding:4px 7px;width:80%;background:#fff;z-index:20;border:1px solid #cdcdcd;right:0");ISQ.Debug.mConsoleInput=createInput({parent:ISQ.Debug.mConsolePopup,type:"text",style:"width:90%;border:0;font-size:16px;"});setTimeout(function(){ISQ.Debug.mConsoleInput.focus()},0);ISQ.Debug.mConsoleInput.onkeyup=ISQ.Debug.parseConsoleInput
}else{setTimeout(function(){ISQ.Debug.mConsoleInput.value=""},0);if(ISQ.Debug.mConsolePopup.style.display==="none"){ISQ.Debug.mConsolePopup.style.display="block";try{ISQ.Debug.mConsoleInput.focus()}catch(a){}}else{ISQ.Debug.mConsolePopup.style.display="none"}}};ISQ.Debug.parseConsoleInput=function(b){var a=window.event||b;if(a.keyCode!=13){return}var e=ISQ.Debug.mConsoleInput.value.Trim();if(!e){return}switch(e){case"open()":ISQ.Debug.show();break;case"refreshCharts()":var c=pageGC().array();for(var d=0;d<c.length;++d){if(!ISQ.Base.isDerivedOf(c[d],ISQ.Statistics.Charts.IChart)){continue}if(c[d].isDisposed()){continue}c[d].process()}break}};ISQ.Debug.mPopup=null;ISQ.Debug.mConsolePopup=null;ISQ.Debug.mConsoleInput=null;</script>
    <script type="text/javascript" mini="true">ISQ.WhiteLabels=(function(){var e={};var f={};e["nanorep.com"]={isNanoRepDomain:true,name:"Bold360ai",accountName:"Nanorep",logo:"nrLogo",consoleLogo:"nanoRepLogo",consoleLogoClasses:"",logoLink:"/console/login.html",pageTitle:"My Nanorep Secure Login",favicon:"/favicon-bold-ai.png",privacyLink:"http://www.nanorep.com/Privacy",termsLink:"http://www.nanorep.com/Terms",supportLink:"http://nanorep.com/support",voicesLink:"http://support.nanorep.com/Analytics/General-Analytics/41989494/Voices-overview.htm",dashboardOverviewLink:"http://support.nanorep.com/Analytics/General-Analytics/41926066/Dashboard-overview.htm",voicesOverviewLink:"http://support.nanorep.com/Analytics/General-Analytics/41989494/Voices-overview.htm",contactUsLink:"http://www.nanorep.com/Contact",pricingLink:"http://www.nanorep.com/product/pricing",chatPluginLink:"http://www.nanorep.com/Support/Liveperson-Chat-Integration/Agent-client-integration",guidanceIcon:"guidance_nanorep_icon",widgetConfigId:76830400};f["nanorep.com"]={};e[".nanorep.info"]=e["nanorep.com"];f[".nanorep.info"]=f["nanorep.com"];e[".nanorep.co"]=e["nanorep.com"];f[".nanorep.co"]=f["nanorep.com"];e["cartassist.co.uk"]={name:"CartAssist",accountName:"goresponse",logo:"caLogo",consoleLogo:"cartAssistLogo",consoleLogoClasses:"cart-assist-logo",logoLink:"http://www.cartassist.co.uk",pageTitle:"My CartAssist Secure Login",favicon:"/console/images/ca_favicon.ico",privacyLink:"http://www.cartassist.co.uk/privacy",termsLink:"http://www.cartassist.co.uk/terms",supportLink:"http://support.cartassist.co.uk",voicesLink:"http://support.cartassist.co.uk",dashboardOverviewLink:"http://support.cartassist.co.uk",voicesOverviewLink:"http://support.cartassist.co.uk",contactUsLink:"http://www.cartassist.co.uk/contact-us/",pricingLink:"http://www.cartassist.co.uk/contact-us/",chatPluginLink:"http://support.cartassist.co.uk",guidanceIcon:"guidance_cartassist_icon",widgetConfigId:76831702};f["cartassist.co.uk"]={leafNanoAnswer:"CartAssist answer:",smartSearch:"CartAssist Search",searchResult:"CartAssist search result",mergeUpdate:"By selecting this answer, CartAssist will learn to answer %title% for:<br/>%phrasings%<br/> Continue?",chatSuggestion:"User received CartAssist answer:",accountExpiredMessage:"Your trial period has expired.",chart_answeredSessions:"This chart shows how many sessions have been answered through CartAssist, including automatic-answers, emails, and chats.",addArticleTooltipBody:"As support agents answer tickets, CartAssist learns new answers that can be published to the knowledge base. <br/>For best results, provide an answer that will be relevant to as many visitors as possible, not personal answers or details."};
var a=e[window.location.hostname];var b=f[window.location.hostname];if(!a){for(var d in e){if(window.location.hostname.endsWith(d)){a=e[d];b=f[d];break}}}ISQ.Http.isNanoRepDomain=a&&a.isNanoRepDomain;var c=function(g){var h=a[g];if(!h){h=e["nanorep.com"][g]}if(!h){return null}return h};return{isAlllowedDomain:function(g){var h=true;for(var j in e){if(g.contains(j)){h=true;break}}return h},getValue:c,changeLink:function(j,i){var h=document.createElement("div");h.innerHTML=i;var g=h.querySelector("a");g.href=this.getValue(j);return h.innerHTML},changeName:function(h,g,i){return g.replace(i,this.getValue(h))},changeFavicon:function(){var g=document.createElement("link");g.type="image/x-icon";g.rel="shortcut icon";g.href=this.getValue("favicon");document.getElementsByTagName("head")[0].appendChild(g)},mergeDictionary:function(g){for(var h in b){if(b.hasOwnProperty(h)){g[h]=b[h]}}return g},compileLabels:function(k){if(typeof k=="undefined"){k=document}var q=k.querySelectorAll(".WhiteLabelPlaceHolder");if(q.length>0){for(var l=0;l<q.length;l++){var o=q[l];var n=o.getAttribute("wl-key");var p=o.getAttribute("wl-type");if(!n){continue}if(!p){p=n}switch(p){case"name":o.innerHTML=this.getValue(n);break;case"href":o.href=this.getValue(n);break;case"svg":var h=_(this.getValue(n));for(var m=0;m<h.childNodes.length;++m){var g=h.childNodes[m];if(!g.nodeName||(g.nodeName!=="SVG"&&g.nodeName!=="svg")){continue}g=g.cloneNode(true);o.innerHTML="";o.appendChild(g);break}break}}}return k},resetLoginPage:function(){}}})();ISQ.Widget=initializeNS("ISQ.Widget");ISQ.API=initializeNS("ISQ.API");ISQ.Widget.supportsPostMessage=(typeof(window.postMessage)==="function"||typeof(window.postMessage)==="object");ISQ.Widget.doctype=typeof(ISQ.Html)!=="undefined"?ISQ.Html.detectDoctype():null;ISQ.Widget.customHostName=null;ISQ.Widget.setCustomHost=function(a){ISQ.Widget.customHostName=a};ISQ.Widget.getCustomHost=function(){return ISQ.Widget.customHostName};ISQ.Widget.getDynamicHost=function(a){if(a){return ISQ.Widget.customHostName||"my.nanorep.com"
}else{return ISQ.Widget.customHostName||"//my.nanorep.com"}};ISQ.Widget.validateAccountName=function(a){var b=/^[a-z0-9_-]+$/i;return b.test(a)};ISQ.Widget.getAccountURL=function(a,c){a=a.toLowerCase();c=ISQ.Widget.customHostName||c||ISQ.Widget.getDynamicHost(true);var b="{0}.nanorep.co";if(ISQ.Widget.validateAccountName(a)){if(!b||ISQ.Widget.customHostName){return"//"+c+"/~"+a}else{return"//"+b.replace("{0}",a.toLowerCase())}}else{throw new Error("Invalid account name: '"+a+"'")}};ISQ.Widget.getAccountDomain=function(a,c){a=a.toLowerCase();c=ISQ.Widget.customHostName||c||ISQ.Widget.getDynamicHost(false);if(!c.startsWith("//")){c="//"+c}var b="{0}.nanorep.co";if(!b||ISQ.Widget.customHostName){return c}else{return"//"+b.replace("{0}",a.toLowerCase())}};</script>
    <script type="text/javascript" mini="true">ISQ.Widget=ISQ.Widget||{};ISQ.Widget.parseCustomParams=function(f){var e={},d,b,c;f=f.split(",");function a(g){return g.replace(/(\\\\|\\colon|\\comma)/g,function(h){switch(h){case"\\\\":return"\\";case"\\colon":return":";case"\\comma":return","}})}for(d=0,b=f.length;d<b;++d){c=f[d].split(":",2);if(c.length===2){e[a(c[0])]=a(c[1])}}return e};ISQ.Widget.getInnerFrameUrl=function(g,l,d){g=g||"CDCframe.html";var a=l.indexOf("://")+3;var f;var b;var e="";if(a!==2){f=l.indexOf("/",a);e=l.substring(0,a);b=l.substring(a,f)}else{f=l.indexOf("/");b=l.substring(0,f)}var h=g.indexOf("://")+3;var k;var i;var j="";if(h!==2){k=g.indexOf("/",h);j=g.substring(0,h);i=g.substring(h,k)}else{k=g.indexOf("/");i=g.substring(0,k)}if(e&&i===b){if(j!==e){return g.replace(j,e)}return g}else{if(d){if(i===ISQ.Http.domain()){return g}return""}}var c="";if(g.charAt(0)==="/"){c=e+b+g}else{if(h!==2){c=e+b+g.substring(k)}else{c=e+b+"/"+g}}return c};ISQ.Widget.APIKeyEndDelimiter="<";ISQ.Widget.APIValueEndDelimiter="(";ISQ.Widget.buildNRLinkUrl=function(a,d,g){var f=new Array();f.push("https://www.nanorep.com/?source=poweredBy&aid=");f.push(a);if(d){f.push("&utm_source=");var e=ISQ.Http.domain(false,d).split(".");var c=f.length;for(var b=e.length-1;b>=0;b--){f.splice(c,0,e[b]);if(e[b].length>3){break}if(b>0){f.splice(c,0,".")}}}f.push("&utm_medium=widget&utm_content=");f.push(g);return f.join("")};ISQ.Widget.addCssStyles=function(b,a){if(typeof(b)==="string"&&b){if(b.contains(" ")){ISQ.CSS.addNewStyle(b,a)}else{ISQ.CSS.addNewStyle(ISQ.Tools.Base64.decode(b),a)}}};</script>
    <script type="text/javascript" mini="true">ISQ.Widget.replacePlaceholders=function(n,l,p,d,e){var m={};m.success=false;m.text=n;if(!n){m.success=true;return m}var a=new Array();var o=0;var f=0;var g=["|",":"];while(o<n.length){o=n.indexOf(p,f);if(o===-1){a.push(n.substring(f));break}a.push(n.substring(f,o));f=n.indexOf(d,o);if(f==-1){a.push(n.substring(o));break}var j=n.substring(o+2,f);f+=2;var k=j.split("|");var c;for(var i=0;i<k.length;++i){j=k[i];if(i==k.length-1){var b=j.indexOf(":");if(b!==-1){c=j.substring(b+1);j=j.substring(0,b)}}if(!l){if(i==k.length-1){h=c}continue}else{var h=l[j];if(h){break}h=c}}if(!h){if(!e){return m}h=""}a.push(h)}m.text=a.join("");m.success=true;return m};ISQ.Widget.buildAttachmentUrls_forEvent=function(a){return a?a.join(","):null};</script> 
    <script type="text/javascript" mini="true">ISQ.Widget.buildCNFSource=function(a,b,c,f,e,g){var d=[];d.push(ISQ.Widget.getAccountURL(a));d.push("/widget/scripts/cnf.js?account=");d.push(a);d.push("&key=");d.push(ISQ.Http.Cookies.encode64(ISQ.Http.domain(true,f?f:null)));if(g){d.push("&splittestgroup=");d.push(g)}if(f){refererStart=f.indexOf("//");if(refererStart>0&&refererStart<8){refererStart+=2}else{refererStart=0}f=f.substring(refererStart);if(f.indexOf("www.")==0){f=f.replace("www.","")}d.push("&referer=");d.push(f)}if(b){d.push("&isFloat=true")}if(c){d.push("&kb=");d.push(c)}if(e){d.push("&preview=true")}if(ISQ.Http.browser.isIPhone){d.push("&d=1")}return d.join("")};</script>
    <script type="text/javascript" mini="true">ISQ.Widget=initializeNS("ISQ.Widget");ISQ.API=initializeNS("ISQ.API");ISQ.Widget.Proxy=initializeNS("ISQ.Widget.Proxy");ISQ.Widget.Proxy.Chat={sendMessage:function(b,a){_it(b,function(c){c.cdcUser.sendMessage("subject=chat&"+a)})}};ISQ.Widget.Proxy.Chat.LiveChatInc={enumStates:{none:0,loaded:1,availabilityReceived:2},mState:0,mAvailable:false,mPendingWidgets:[],start:function(a,b,c){if(a=="loadChat"){this.load(b,c)}else{LC_API.open_chat_window()}},load:function(c,d){if(this.mState>=this.enumStates.loaded){if(this.mState>=this.enumStates.availabilityReceived){if(d.cdcUser){ISQ.Widget.Proxy.Chat.sendMessage([d],"type=available&data="+this.mAvailable)}else{if(this.mAvailable==="true"){d.mState|=ISQ.Widget.iChat.enumState.available}else{d.mState&=~ISQ.Widget.iChat.enumState.available}}}else{this.mPendingWidgets.push(d)}return}else{this.mPendingWidgets.push(d)}this.mState=this.enumStates.loaded;var f=document.head.getElementsByTagName("script");for(var a=0;a<f.length;a++){if(f[a].src.indexOf("livechatinc")!=-1){this.mAvailable=LC_API.agents_are_available();if(d.cdcUser){ISQ.Widget.Proxy.Chat.sendMessage([d],"type=available&data="+this.mAvailable)}else{if(this.mAvailable==="true"){d.mState|=ISQ.Widget.iChat.enumState.available}else{d.mState&=~ISQ.Widget.iChat.enumState.available}}this.mState=this.enumStates.availabilityReceived;return}}window.__lc={};window.LC_API={};window.__lc.license=c.LiveChatInc.id;window.LC_API.on_chat_ended=function(){window.LC_API.hide_chat_window()};if(!c.popup.enabled){window.LC_API.on_chat_started=function(g){window.LC_API.open_chat_window()}}var b=this;window.LC_API.on_before_load=function(){window.LC_API.hide_chat_window()};window.LC_API.on_after_load=function(){if(!window.LC_API.chat_running()||c.popup.enabled){window.LC_API.hide_chat_window()}b.mAvailable=LC_API.agents_are_available();if(d.cdcUser){ISQ.Widget.Proxy.Chat.sendMessage(b.mPendingWidgets,"type=available&data="+b.mAvailable)}else{if(b.mAvailable==true){d.mState|=ISQ.Widget.iChat.enumState.available}else{d.mState&=~ISQ.Widget.iChat.enumState.available
}}b.mState=b.enumStates.availabilityReceived};url="//"+c.LiveChatInc.server+"/tracking.js";ISQ.Tools.appendScript(url)}};ISQ.Widget.Proxy.Chat.Zopim={enumStates:{none:0,loaded:1,availabilityReceived:2},mState:0,mAvailable:false,mPendingWidgets:[],start:function(a,b,c){if(a=="loadChat"){this.load(b,c)}else{if(b.popup.enabled){$zopim.livechat.window.openPopout()}else{$zopim.livechat.window.show()}}},load:function(c,d){if(this.mState>=this.enumStates.loaded){if(this.mState>=this.enumStates.availabilityReceived){if(d.cdcUser){ISQ.Widget.Proxy.Chat.sendMessage([d],"type=available&data="+this.mAvailable)}else{if(this.mAvailable==true){d.mState|=ISQ.Widget.iChat.enumState.available}else{d.mState&=~ISQ.Widget.iChat.enumState.available}}}else{this.mPendingWidgets.push(d)}return}else{this.mPendingWidgets.push(d)}this.mState=this.enumStates.loaded;var b=this;var g=function(){if(!$zopim.livechat){return}if(!$zopim.livechat.isChatting()||c.popup.enabled){$zopim.livechat.hideAll()}$zopim.livechat.setOnChatEnd(function(){$zopim.livechat.hideAll()});$zopim.livechat.window.onHide(function(){if(!$zopim.livechat.isChatting()||c.popup.enabled){$zopim.livechat.hideAll()}});var h=function(i){if(i=="online"){b.mAvailable=true}else{b.mAvailable=false}if(d.cdcUser){ISQ.Widget.Proxy.Chat.sendMessage(b.mPendingWidgets,"type=available&data="+b.mAvailable)}else{if(b.mAvailable==true){d.mState|=ISQ.Widget.iChat.enumState.available}else{d.mState&=~ISQ.Widget.iChat.enumState.available}}b.mState=b.enumStates.availabilityReceived};$zopim.livechat.setOnStatus(h)};var f=document.head.getElementsByTagName("script");for(var a=0;a<f.length;a++){if(f[a].src.indexOf("zopim")!=-1){g();return}}window.$zopim||(function(i,k){var l=$zopim=function(m){l._.push(m)},h=l.s=i.createElement(k),j=i.getElementsByTagName(k)[0];l.set=function(m){l.set._.push(m)};l._=[];l.set._=[];h.async=!0;h.setAttribute("charset","utf-8");h.src=(window.location.protocol==="https:"?"https:":"http:")+c.Zopim.server+"?"+c.Zopim.id;l.t=+new Date;h.type="text/javascript";if(g){if(ISQ.Http.browser.app!=="ie"||ISQ.Http.browser.isIE11){h.onload=g
}else{h.onreadystatechange=function(){if(this.readyState!=="complete"&&this.readyState!=="loaded"){return}g()}}}j.parentNode.insertBefore(h,j)})(document,"script")}};ISQ.Widget.Proxy.Chat.SnapEngage={enumStates:{none:0,loaded:1,availabilityReceived:2},mState:0,mAvailable:false,mPendingWidgets:[],start:function(a,b,c){if(a=="loadChat"){this.load(b,c)}else{SnapEngage.startLink()}},load:function(c,g){var b=this;if(this.mState>=this.enumStates.loaded){if(this.mState>=this.enumStates.availabilityReceived){if(g.cdcUser){ISQ.Widget.Proxy.Chat.sendMessage(b.mPendingWidgets,"type=available&data="+b.mAvailable)}}else{this.mPendingWidgets.push(g)}return}else{this.mPendingWidgets.push(g)}this.mState=this.enumStates.loaded;var d=function(){if(typeof SnapEngage=="undefined"){return}SnapEngage.hideButton();SnapEngage.getAgentStatusAsync(function(i){if(i){b.mAvailable=true}else{b.mAvailable=false}if(g.cdcUser){ISQ.Widget.Proxy.Chat.sendMessage(b.mPendingWidgets,"type=available&data="+b.mAvailable)}b.mState=b.enumStates.availabilityReceived});SnapEngage.setCallback("Close",function(j,i){SnapEngage.hideButton()})};var h=document.head.getElementsByTagName("script");for(var a=0;a<h.length;a++){if(h[a].src.indexOf("snapengage")!=-1){d();return}}var f=(window.location.protocol==="https:"?"https:":"http:")+c.SnapEngage.server+c.SnapEngage.id+".js";ISQ.Tools.appendScript(f,d)}};ISQ.Widget.Proxy.Chat.Olark={enumStates:{none:0,loaded:1,availabilityReceived:2},mState:0,mAvailable:false,mPendingWidgets:[],start:function(a,b,c){if(a=="loadChat"){this.load(b,c)}else{olark("api.box.expand")}},load:function(d,f){if(this.mState>=this.enumStates.loaded){if(this.mState>=this.enumStates.availabilityReceived){if(f.cdcUser){ISQ.Widget.Proxy.Chat.sendMessage([f],"type=available&data="+this.mAvailable)}}else{this.mPendingWidgets.push(f)}return}else{this.mPendingWidgets.push(f)}this.mState=this.enumStates.loaded;var b=this;var c=function(){var h=function(i){b.mAvailable=i;if(f.cdcUser){ISQ.Widget.Proxy.Chat.sendMessage(b.mPendingWidgets,"type=available&data="+b.mAvailable)
}b.mState=b.enumStates.availabilityReceived};olark.configure("box.start_hidden",true);olark("api.chat.onOperatorsAvailable",function(){h(true)});olark("api.chat.onOperatorsAway",function(){h(false)})};var g=document.head.getElementsByTagName("script");for(var a=0;a<g.length;a++){if(g[a].src.indexOf("olark")!=-1){c();return}}window.olark||(function(h){var j=window,i=document,k=j.location.protocol=="https:"?"https:":"http:",o=h.name,n="load";var m=function(){j[o]=function(){(l.s=l.s||[]).push(arguments)};var l=j[o]._={},r=h.methods.length;while(r--){(function(q){j[o][q]=function(){j[o]("call",q,arguments)}})(h.methods[r])}l.l=h.loader;l.i=m;l.p={0:+new Date};l.P=function(q){l.p[q]=new Date-l.p[0]};function t(){l.P(n);j[o](n)}j.addEventListener?j.addEventListener(n,t,false):j.attachEvent("on"+n,t);var p=function(){function F(v){v="head";return["<",v,"></",v,"><",z,' onload="var d=',u,";d.getElementsByTagName('head')[0].",A,"(d.",y,"('script')).",B,"='",k,"//",l.l,"'",'"',"></",z,">"].join("")}var z="body",C=i[z];if(!C){return setTimeout(p,100)}l.P(1);var A="appendChild",y="createElement",B="src",D=i[y]("div"),H=D[A](i[y](o)),q=i[y]("iframe"),u="document",s="domain",E;D.style.display="none";C.insertBefore(D,C.firstChild).id=o;q.frameBorder="0";q.id=o+"-loader";if(/MSIE[ ]+6/.test(navigator.userAgent)){q.src="javascript:false"}q.allowTransparency="true";H[A](q);try{q.contentWindow[u].open()}catch(I){h[s]=i[s];E="javascript:var d="+u+".open();d.domain='"+i.domain+"';";q[B]=E+"void(0);"}try{var G=q.contentWindow[u];G.write(F());G.close()}catch(J){q[B]=E+'d.write("'+F().replace(/"/g,String.fromCharCode(92)+'"')+'");d.close();'}l.P(2)};p()};m()})({loader:"static.olark.com/jsclient/loader0.js",name:"olark",methods:["configure","extend","declare","identify"]});olark.identify(d.Olark.id);c()}};ISQ.Widget.Proxy.Chat.LiveEngage={enumStates:{none:0,loaded:1,availabilityReceived:2},mState:0,mAvailable:false,mPendingWidgets:[],log:function(a){var b=null;_it(this.mPendingWidgets,function(c){if(b===c){return}else{b=c}if(c.cdcUser){c.cdcUser.sendMessage("subject=widgetLog&entry="+a)
}})},start:function(a,b,c){if(a=="loadChat"){this.load(b,c)}else{this.log("LivePerson LE2: opening chat window");if(window.lpTag.taglets.rendererStub.click(b.LiveEngage.engagementId)){this.log("LivePerson LE2: chat window opened");if(c.cdcUser){ISQ.Widget.Proxy.Chat.sendMessage(this.mPendingWidgets,"type=vendorwindowopened")}}}},load:function(h,i){var f=this;if(this.mState>=this.enumStates.loaded){if(this.mState>=this.enumStates.availabilityReceived){if(i.cdcUser){ISQ.Widget.Proxy.Chat.sendMessage(f.mPendingWidgets,"type=available&data="+f.mAvailable)}}else{this.mPendingWidgets.push(i)}return}else{this.mPendingWidgets.push(i)}this.mState=this.enumStates.loaded;ISQ.Widget.leEngagementsMap=ISQ.Widget.leEngagementsMap||{};if(!ISQ.Widget.leEngagementsMap[h.LiveEngage.engagementId]){ISQ.Widget.leEngagementsMap[h.LiveEngage.engagementId]={}}var c=function(){if(ISQ.Widget.leTagLoadCallbackFired){return}else{ISQ.Widget.leTagLoadCallbackFired=true}f.log("LivePerson LE2: add listener for availability");var k=function(l,m){f.log("LivePerson LE2: availability ("+l+":"+m+")");f.mAvailable=m;if(i.cdcUser){ISQ.Widget.Proxy.Chat.sendMessage(f.mPendingWidgets,"type=available&data="+f.mAvailable)}f.mState=f.enumStates.availabilityReceived};var j=ISQ.Widget.leEngagementsMap;j[h.LiveEngage.engagementId]={};setInterval(function(){var m,l;for(var n in j){if(j.hasOwnProperty(n)){m=j[n];l=window.lpTag.taglets.rendererStub.getEngagementState(n).state;if(m.state!==l){m.state=l;k(n,m.state===1)}}}},500)};if(h.LiveEngage.engagementDivId&&!document.getElementById(h.LiveEngage.engagementDivId)){f.log('LivePerson LE2: creating element with id="'+h.LiveEngage.engagementDivId+'"');var a=document.createElement("div");a.id=h.LiveEngage.engagementDivId;a.style.display="none";document.body.appendChild(a);var g=window.lpTag&&window.lpTag.sdes&&typeof window.lpTag.sdes.send==="function";if(g){f.log("LivePerson LE2: notifying existing lpTag about new DIV");lpTag.sdes.send([{type:"pagediv",divId:h.LiveEngage.engagementDivId}])}else{f.log("LivePerson LE2: lpTag notify method does not exist -> lpTag should detect DIV automatically")
}}if(!window.lpTag){f.log("LivePerson LE2: injecting lpTag");window.lpTag=window.lpTag||{};if(typeof window.lpTag._tagCount==="undefined"){window.lpTag={site:h.LiveEngage.id||"",section:lpTag.section||"",autoStart:lpTag.autoStart===false?false:true,ovr:lpTag.ovr||{},_v:"1.6.0",_tagCount:1,protocol:"https:",events:{bind:function(j,k,l){lpTag.defer(function(){lpTag.events.bind(j,k,l)},0)},trigger:function(j,k,l){lpTag.defer(function(){lpTag.events.trigger(j,k,l)},1)}},defer:function(j,k){if(k==0){this._defB=this._defB||[];this._defB.push(j)}else{if(k==1){this._defT=this._defT||[];this._defT.push(j)}else{this._defL=this._defL||[];this._defL.push(j)}}},load:function(l,j,k){var m=this;setTimeout(function(){m._load(l,j,k)},0)},_load:function(m,j,k){var n=m;if(!m){n=this.protocol+"//"+((this.ovr&&this.ovr.domain)?this.ovr.domain:"lptag.liveperson.net")+"/tag/tag.js?site="+this.site}var l=document.createElement("script");l.setAttribute("charset",j?j:"UTF-8");if(k){l.setAttribute("id",k)}l.setAttribute("src",n);document.getElementsByTagName("head").item(0).appendChild(l)},init:function(){this._timing=this._timing||{};this._timing.start=(new Date()).getTime();var j=this;if(window.attachEvent){window.attachEvent("onload",function(){j._domReady("domReady")})}else{window.addEventListener("DOMContentLoaded",function(){j._domReady("contReady")},false);window.addEventListener("load",function(){j._domReady("domReady")},false)}if(typeof(window._lptStop)=="undefined"){this.load()}},start:function(){this.autoStart=true},_domReady:function(j){if(!this.isDom){this.isDom=true;this.events.trigger("LPT","DOM_READY",{t:j})}this._timing[j]=(new Date()).getTime()},vars:lpTag.vars||[],dbs:lpTag.dbs||[],ctn:lpTag.ctn||[],sdes:lpTag.sdes||[],ev:lpTag.ev||[]};lpTag.init()}else{window.lpTag._tagCount+=1}}else{f.log("LivePerson LE2: using existing lpTag")}var d=false;try{d=typeof window.lpTag.taglets.rendererStub.getEngagementState==="function"}catch(b){}if(d){f.log("LivePerson LE2: lpTag is fully loaded -> we can use its API");if(i.cdcUser&&ISQ.Widget.leEngagementsMap&&ISQ.Widget.leEngagementsMap[h.LiveEngage.engagementId]){ISQ.Widget.Proxy.Chat.sendMessage(f.mPendingWidgets,"type=available&data="+(ISQ.Widget.leEngagementsMap[h.LiveEngage.engagementId].state===1))
}c()}else{f.log("LivePerson LE2: lpTag is not fully loaded -> waiting for button");window.lpTag.events.bind("LE_ENGAGER","SHOW",function(){c()})}window.lpTag.events.bind("lpUnifiedWindow","windowClosed",function(){f.log("LivePerson LE2: chat window closed");if(i.cdcUser){ISQ.Widget.Proxy.Chat.sendMessage(f.mPendingWidgets,"type=vendorwindowclosed")}})}};ISQ.Widget.Proxy.Chat.SalesForce={enumStates:{none:0,loaded:1,availabilityReceived:2},mState:0,mAvailable:false,mPendingWidgets:[],log:function(a){_it(this.mPendingWidgets,function(b){if(b.cdcUser){b.cdcUser.sendMessage("subject=widgetLog&entry="+a)}})},start:function(a,b,c){if(a=="loadChat"){this.load(b,c)}else{this.log("SalesForce: opening chat window");if(b.popup&&b.popup.size&&b.popup.size.length===2){window.liveagent.setChatWindowWidth(+b.popup.size[0]);window.liveagent.setChatWindowHeight(+b.popup.size[1])}window.liveagent.startChat(b.SalesForce.buttonId)}},load:function(options,widget){var mthis=this;if(this.mState>=this.enumStates.loaded){if(this.mState>=this.enumStates.availabilityReceived){if(widget.cdcUser){ISQ.Widget.Proxy.Chat.sendMessage(mthis.mPendingWidgets,"type=available&data="+mthis.mAvailable)}}else{this.mPendingWidgets.push(widget)}return}else{this.mPendingWidgets.push(widget)}this.mState=this.enumStates.loaded;var apiScriptURL="https://"+options.SalesForce.deploymentDomain+"/content/g/js/38.0/deployment.js";if(!window._laq){window._laq=[]}window._laq.push(function(){window.liveagent.showWhenOnline(options.SalesForce.buttonId,document.createElement("div"));window.liveagent.showWhenOffline(options.SalesForce.buttonId,document.createElement("div"))});var SalesForce_Loaded=function(){mthis.log("SalesForce: API Loaded");window.liveagent.addButtonEventHandler(options.SalesForce.buttonId,function(eventType){switch(eventType){case window.liveagent.BUTTON_EVENT.BUTTON_AVAILABLE:updateAvailability(options.SalesForce.buttonId,true);break;case window.liveagent.BUTTON_EVENT.BUTTON_UNAVAILABLE:updateAvailability(options.SalesForce.buttonId,false);break;case window.liveagent.BUTTON_EVENT.BUTTON_ACCEPTED:mthis.log("SalesForce: chat window opened");
break;case window.liveagent.BUTTON_EVENT.BUTTON_REJECTED:mthis.log("SalesForce: chat window closed");break}});if(options.SalesForce.initCode){try{eval(options.SalesForce.initCode)}catch(e){if(window.console&&typeof window.console.error==="function"){console.error(e)}}}window.liveagent.init("https://"+options.SalesForce.apiDomain+"/chat",options.SalesForce.deploymentId,options.SalesForce.organizationId);var updateAvailability=function(buttonId,isOnline){mthis.log("SalesForce: Availability ("+buttonId+":"+isOnline+")");mthis.mAvailable=isOnline;if(widget.cdcUser){ISQ.Widget.Proxy.Chat.sendMessage(mthis.mPendingWidgets,"type=available&data="+mthis.mAvailable)}mthis.mState=mthis.enumStates.availabilityReceived}};mthis.log("SalesForce: injecting API");var se=document.createElement("script");se.type="text/javascript";se.async=true;se.src=apiScriptURL;var done=false;se.onload=se.onreadystatechange=function(){if(!done&&(!this.readyState||this.readyState==="loaded"||this.readyState==="complete")){SalesForce_Loaded()}};var s=document.getElementsByTagName("script")[0];s.parentNode.insertBefore(se,s)}};(function(){var d=document.head||document.getElementsByTagName("head")[0];var b={};var g={findObject:c,Modular:f};var a=c("nanoRep.BundleManager",true);function c(l,i,h){var m=0,j,k;l=l.split(".");h=h||window;j=l.length;while((m<j)&&(typeof h==="object"||typeof h==="function")){k=h[l[m]];if(!(typeof k==="object"||typeof k==="function")){break}h=k;++m}if(i){while(m<j){k={};h[l[m]]=k;h=k;++m}}return((m<j)?null:h)}function f(h){this.bundleInstance=h;this.defined={};this.exportMode=false}f.prototype.declare=function(k,i){var l,j,h;this.name=k;this.deps=[];for(l=0,j=i?i.length:0;l<j;++l){h=i[l];if(typeof h==="string"){h=this.defined[h]}this.deps.push(h)}};f.prototype.define=function(h){var i=h.apply(null,this.deps);if(i){this.defined[this.name]=i;if(this.exportMode){this.bundleInstance[this.name]=i}}};f.prototype.startExport=function(){this.exportMode=true};f.prototype.endExport=function(){this.exportMode=false};f.prototype.byName=function(h){return this.defined[h]
};g.objectFinder=function(i,h){return function(){return c(i,false,h)}};(function(){var i="";var h=null;var j=4000*45;g.addStyle=function(){var l=Array.prototype.join.call(arguments,"\n");if(h&&h.styleSheet&&(i.length+2+l.length)<j){i+="\n"+l;h.styleSheet.cssText=i;return}var k=document.createElement("style"),m;h=k;i=l;k.setAttribute("type","text/css");if(k.styleSheet){k.styleSheet.cssText=l;if(document.body){d.appendChild(k)}else{if(document.addEventListener){m=function(){document.removeEventListener("DOMContentLoaded",m,false);d.appendChild(k)};document.addEventListener("DOMContentLoaded",m,false)}else{if(window.attachEvent){m=function(){window.detachEvent("onload",m);d.appendChild(k)};window.attachEvent("onload",m)}}}}else{k.appendChild(document.createTextNode(l));d.appendChild(k)}return k}})();a.updateIndex=function(){return this};a.define=function(h){var j=h.name,i,k;if(b.hasOwnProperty(j)){k=["Redefinition of '",j,"' bundle!"].join("");throw (new Error(k))}i=(h.hasOwnProperty("ns")?c(h.ns,true):{});b[j]=i;h.init.call(i,b,h.data,g);return this};a.findObject=c;window.ISQ=nanoRep})();nanoRep.BundleManager.define({name:"EventEmitter",require:[],data:{},init:function(a,b,d){var c=new d.Modular();c.declare("EventEmitter",[window.Alloy?Alloy.Base:ISQ.Base]);c.define(function(f){var h=function(j,k){for(var l=0;l<j.length;l++){if(j[l]===k){return l}}return -1};var g=f.extend({name:"EventEmitter",_prototype:{on:function(j,l,i){if(typeof j==="string"){this._events=this._events||{};this._events[j]=this._events[j]||[];if(i){l._eventEmitterContext=i}this._events[j].push(l)}else{for(var k in j){if(j.hasOwnProperty(k)){this.on(k,j[k],l)}}}},off:function(i,k){if(typeof i==="string"){this._events=this._events||{};if(i in this._events===false){return}delete k._eventEmitterContext;this._events[i].splice(h(this._events[i],k),1)}else{for(var j in i){if(i.hasOwnProperty(j)){this.off(j,i[j],k)}}}},emit:function(j){this._events=this._events||{};if(j in this._events===false){return}for(var k=0;this._events&&this._events[j]&&k<this._events[j].length;
k++){this._events[j][k].apply(this._events[j][k]._eventEmitterContext||this,Array.prototype.slice.call(arguments,1))}}}});return g});this.EventEmitter=c.byName("EventEmitter")}});nanoRep.BundleManager.define({name:"Chat",require:["EventEmitter"],data:{},ns:"nanoRep.SDK.Channeling",init:function(container,data,utils){var modular=new utils.Modular();var EventEmitter=container.EventEmitter.EventEmitter;var Helper=(function(){function openPopup(url,name,width,height,scrolling){var left=(screen.width/2)-(width/2);var top=(screen.height/2)-(height/2);var scrollbars=scrolling||"no";return window.open(url,name,"toolbar=no, location=no, directories=no, status=no, menubar=no, scrollbars="+scrollbars+", resizable=no, copyhistory=no, width="+width+", height="+height+", top="+top+", left="+left)}return{openPopup:openPopup}}());var DOM=(function(){return{appendJavaScriptElement:function(url,async,defer){var script=document.createElement("script"),head=document.querySelector("head");if(async){script.setAttribute("async","")}if(defer){script.setAttribute("defer","")}script.setAttribute("src",url);head.appendChild(script);return script}}}());var Alloy=(function(){var cbId=0;return{jsonp:function(obj){var cbName="jspwcb"+cbId++,reqURL=obj.url+(obj.url.indexOf("?")?"&":"?")+"cb="+cbName,script;window[cbName]=function(args){var args=Array.prototype.slice.call(arguments);delete window[cbName];args.unshift(false);obj.handler.apply(this,args);script.parentNode.removeChild(script)};script=DOM.appendJavaScriptElement(reqURL)}}}());modular.declare("Chat",[EventEmitter]);modular.define(function(EventEmitter){var providerClasses={};var Chat={Providers:providerClasses,addProvider:function(providerName,providerProto){providerProto.ctor=providerProto.initialize;providerClasses[providerName]=AbstractChatProvider.extend({name:providerName,_prototype:providerProto});providerClasses[providerName].Name=providerName;return providerClasses[providerName]},getProvider:function(channel){var providerInstances=window.nanoRep.SDK._chatProviderInstances=window.nanoRep.SDK._chatProviderInstances||{};
var channelInstanceId=providerClasses[channel.chatProvider].prototype.getChannelId(channel);if(!providerInstances[channelInstanceId]){providerInstances[channelInstanceId]=new providerClasses[channel.chatProvider](channel.chatOptions)}return providerInstances[channelInstanceId]}};var AbstractChatProvider=EventEmitter.extend({name:"AbstractChatProvider",abstractClass:true,_prototype:{capabilities:{customUI:false,vendorUI:false,vendorPopup:false},ctor:function(chatOptions){this.chatOptions=chatOptions},getChannelId:function(channel){return channel.chatProvider},isAgentAvailable:function(){},isSessionActive:function(){},isSessionResumed:function(){},showVendorUI:function(){},showVendorPopup:function(){},getChatState:function(){},getChatLog:function(){},getStatusMessage:function(){},getAgentName:function(){},requestChat:function(){},setUserTyping:function(){},setCustomParams:function(){},sendMessage:function(){},endChat:function(){}}});return Chat});modular.declare("Chat.LiveChatInc",["Chat",Helper]);modular.define(function(Chat,Helper){Chat.addProvider("LiveChatInc",{capabilities:{customUI:false,vendorUI:true,vendorPopup:true},initialize:function(chatOptions){this.chatOptions=chatOptions;injectLiveChatAPI(this.chatOptions.accountNum);getLiveChatAPI(function(LC_API){LC_API.hide_chat_window();LC_API.on_chat_ended=function(){LC_API.hide_chat_window()}})},isAgentAvailable:function(callback){getLiveChatAPI(function(LC_API){callback(LC_API.agents_are_available())})},showVendorUI:function(){getLiveChatAPI(function(LC_API){LC_API.open_chat_window()})},showVendorPopup:function(popupWidth,popupHeight){var popupUrl="https://secure.livechatinc.com/licence/"+this.chatOptions.accountNum+"/open_chat.cgi?";Helper.openPopup(popupUrl,"nrLiveChatIncWindow",popupWidth,popupHeight)}});function injectLiveChatAPI(accountId){window.__lc=window.__lc||{};window.__lc.license=accountId|0;window.LC_API=window.LC_API||{};window.LC_API.on_before_load=function(){if(getLiveChatAPI.callbackQueue){for(var i=0;i<getLiveChatAPI.callbackQueue.length;i++){getLiveChatAPI.callbackQueue[i](window.LC_API)
}delete getLiveChatAPI.callbackQueue}};(function(){var lc=document.createElement("script");lc.type="text/javascript";lc.async=true;lc.src=(document.location.protocol==="https:"?"https://":"http://")+"cdn.livechatinc.com/tracking.js";var s=document.getElementsByTagName("script")[0];s.parentNode.insertBefore(lc,s)})()}function getLiveChatAPI(callback){if(window.LC_API.open_chat_window){callback(window.LC_API)}else{if(!getLiveChatAPI.callbackQueue){getLiveChatAPI.callbackQueue=[]}getLiveChatAPI.callbackQueue.push(callback)}}});modular.declare("Chat.Olark",["Chat",EventEmitter]);modular.define(function(Chat,EventEmitter){Chat.addProvider("Olark",{capabilities:{customUI:false,vendorUI:true,vendorPopup:false},initialize:function(chatOptions){var self=this;OlarkAPI.injectOlarkApi(chatOptions.accountNum);olark.configure("box.start_hidden",true);olark("api.box.hide");OlarkAPI.on("agentAvailabilityChanged",function(isAvailable){self.emit("agentAvailabilityChanged",isAvailable)})},isAgentAvailable:function(callback){OlarkAPI.isAgentAvailable(callback)},showVendorUI:function(){olark("api.box.expand")}});var OlarkAPI={on:EventEmitter.prototype.on,off:EventEmitter.prototype.off,emit:EventEmitter.prototype.emit,currentAgentStatus:null,injectOlarkApi:function(accountId){if(!window.olark){window.olark||(function(c){var f=window,d=document,l=f.location.protocol=="https:"?"https:":"http:",z=c.name,r="load";var nt=function(){f[z]=function(){(a.s=a.s||[]).push(arguments)};var a=f[z]._={},q=c.methods.length;while(q--){(function(n){f[z][n]=function(){f[z]("call",n,arguments)}})(c.methods[q])}a.l=c.loader;a.i=nt;a.p={0:+new Date};a.P=function(u){a.p[u]=new Date-a.p[0]};function s(){a.P(r);f[z](r)}f.addEventListener?f.addEventListener(r,s,false):f.attachEvent("on"+r,s);var ld=function(){function p(hd){hd="head";return["<",hd,"></",hd,"><",i,' onload="var d=',g,";d.getElementsByTagName('head')[0].",j,"(d.",h,"('script')).",k,"='",l,"//",a.l,"'",'"',"></",i,">"].join("")}var i="body",m=d[i];if(!m){return setTimeout(ld,100)}a.P(1);var j="appendChild",h="createElement",k="src",n=d[h]("div"),v=n[j](d[h](z)),b=d[h]("iframe"),g="document",e="domain",o;
n.style.display="none";m.insertBefore(n,m.firstChild).id=z;b.frameBorder="0";b.id=z+"-loader";if(/MSIE[ ]+6/.test(navigator.userAgent)){b.src="javascript:false"}b.allowTransparency="true";v[j](b);try{b.contentWindow[g].open()}catch(w){c[e]=d[e];o="javascript:var d="+g+".open();d.domain='"+d.domain+"';";b[k]=o+"void(0);"}try{var t=b.contentWindow[g];t.write(p());t.close()}catch(x){b[k]=o+'d.write("'+p().replace(/"/g,String.fromCharCode(92)+'"')+'");d.close();'}a.P(2)};ld()};nt()})({loader:"static.olark.com/jsclient/loader0.js",name:"olark",methods:["configure","extend","declare","identify"]})}olark.identify(accountId);this.addEventListeners()},addEventListeners:function(){var self=this;olark("api.chat.onOperatorsAvailable",function(){self.currentAgentStatus=true;self.emit("agentAvailabilityChanged",self.currentAgentStatus)});olark("api.chat.onOperatorsAway",function(){self.currentAgentStatus=false;self.emit("agentAvailabilityChanged",self.currentAgentStatus)})},isAgentAvailable:function(callback){var tmpHandler;if(!callback){return}if(this.currentAgentStatus!==null){callback(this.currentAgentStatus)}else{tmpHandler=function(isAvailable){this.off("agentAvailabilityChanged",tmpHandler);callback(isAvailable)};this.on("agentAvailabilityChanged",tmpHandler)}}}});modular.declare("Chat.Zopim",["Chat"]);modular.define(function(Chat){Chat.addProvider("Zopim",{capabilities:{customUI:false,vendorUI:true,vendorPopup:true},initialize:function(chatOptions){injectZopimAPI(chatOptions.accountNum);getZopimAPI(function($zopim){if(!$zopim.livechat.isChatting()){$zopim.livechat.hideAll()}$zopim.livechat.setOnChatEnd(function(){$zopim.livechat.hideAll()});$zopim.livechat.window.onHide(function(){if(!$zopim.livechat.isChatting()){$zopim.livechat.hideAll()}})})},isAgentAvailable:function(callback){getZopimAPI(function($zopim){$zopim.livechat.setOnStatus(function(agentStatus){if(agentStatus==="online"){callback(true)}else{callback(false)}})})},showVendorUI:function(){getZopimAPI(function($zopim){$zopim.livechat.window.show()})},showVendorPopup:function(){getZopimAPI(function($zopim){$zopim.livechat.window.openPopout()
})}});function injectZopimAPI(accountId){window.$zopim||(function(d,s){var z=window.$zopim=function(c){z._.push(c)},$=z.s=d.createElement(s),e=d.getElementsByTagName(s)[0];z.set=function(o){z.set._.push(o)};z._=[];z.set._=[];$.async=!0;$.setAttribute("charset","utf-8");$.src="//v2.zopim.com/?"+accountId;z.t=Number(new Date());$.type="text/javascript";var done=false;$.onload=$.onreadystatechange=function(){if(!done&&(!this.readyState||this.readyState==="loaded"||this.readyState==="complete")){done=true;if(getZopimAPI.callbackQueue){for(var i=0;i<getZopimAPI.callbackQueue.length;i++){getZopimAPI.callbackQueue[i](window.$zopim)}delete getZopimAPI.callbackQueue}}};e.parentNode.insertBefore($,e)})(document,"script")}function getZopimAPI(callback){if(window.$zopim.livechat){callback(window.$zopim)}else{if(!getZopimAPI.callbackQueue){getZopimAPI.callbackQueue=[]}getZopimAPI.callbackQueue.push(callback)}}});modular.declare("Chat.SalesForce",["Chat",EventEmitter]);modular.define(function(Chat,EventEmitter){Chat.addProvider("SalesForce",{capabilities:{customUI:false,vendorUI:false,vendorPopup:true},initialize:function(chatOptions){this.chatOptions=chatOptions;SF.init(chatOptions).on({agentAvailabilityChanged:function(info){this.emit("agentAvailabilityChanged",info.available)}},this)},isAgentAvailable:function(callback){SF.isAgentAvailable(this.chatOptions,callback)},showVendorPopup:function(popupWidth,popupHeight){SF.showVendorPopup(this.chatOptions,popupWidth,popupHeight)}});var SF={state:{},on:EventEmitter.prototype.on,off:EventEmitter.prototype.off,emit:EventEmitter.prototype.emit,init:function(chatOptions){var apiScriptURL="https://"+chatOptions.deploymentDomain+"/content/g/js/38.0/deployment.js";var self=this;self.state[chatOptions.buttonId]={available:false};if(!window._laq){window._laq=[]}window._laq.push(function(){window.liveagent.showWhenOnline(chatOptions.buttonId,document.createElement("div"));window.liveagent.showWhenOffline(chatOptions.buttonId,document.createElement("div"))});var se=document.createElement("script");
se.type="text/javascript";se.async=true;se.src=apiScriptURL;var done=false;se.onload=se.onreadystatechange=function(){if(!done&&(!this.readyState||this.readyState==="loaded"||this.readyState==="complete")){window.liveagent.addButtonEventHandler(chatOptions.buttonId,function(eventType){switch(eventType){case window.liveagent.BUTTON_EVENT.BUTTON_AVAILABLE:self.state[chatOptions.buttonId].available=true;self.emit("agentAvailabilityChanged",{buttonId:chatOptions.buttonId,available:true});break;case window.liveagent.BUTTON_EVENT.BUTTON_UNAVAILABLE:self.state[chatOptions.buttonId].available=false;self.emit("agentAvailabilityChanged",{buttonId:chatOptions.buttonId,available:false});break;case window.liveagent.BUTTON_EVENT.BUTTON_ACCEPTED:self.emit("windowOpened",chatOptions.buttonId);break;case window.liveagent.BUTTON_EVENT.BUTTON_REJECTED:self.emit("windowClosed",chatOptions.buttonId);break}});if(chatOptions.initCode){try{eval(chatOptions.initCode)}catch(e){if(window.console&&typeof window.console.error==="function"){console.error(e)}}}window.liveagent.init("https://"+chatOptions.apiDomain+"/chat",chatOptions.deploymentId,chatOptions.organizationId);self.emit("apiLoaded",window.liveagent)}};var s=document.getElementsByTagName("script")[0];s.parentNode.insertBefore(se,s);return this},getAPI:function(callback){if(typeof window.liveagent==="object"){callback.call(this,window.liveagent)}else{var loadHandler=function(){this.off("apiLoaded",loadHandler);callback.call(this,window.liveagent)};this.on("apiLoaded",loadHandler,this)}},isAgentAvailable:function(chatOptions,callback){this.getAPI(function(){callback(this.state[chatOptions.buttonId].available)})},showVendorPopup:function(chatOptions,popupWidth,popupHeight){this.getAPI(function(liveagent){liveagent.setChatWindowWidth(popupWidth);liveagent.setChatWindowHeight(popupHeight);liveagent.startChat(chatOptions.buttonId)})}}});modular.declare("Chat.SnapEngage",["Chat",Helper]);modular.define(function(Chat,Helper){Chat.addProvider("SnapEngage",{capabilities:{customUI:false,vendorUI:true,vendorPopup:true},initialize:function(chatOptions){this.chatOptions=chatOptions;
injectSnapEngageAPI(this.chatOptions.accountNum);getSnapEngageAPI(function(SnapEngage){SnapEngage.hideButton();SnapEngage.setCallback("Close",function(){SnapEngage.hideButton()})})},isAgentAvailable:function(callback){getSnapEngageAPI(function(SnapEngage){SnapEngage.getAgentStatusAsync(function(online){callback(online)})})},showVendorUI:function(){getSnapEngageAPI(function(SnapEngage){SnapEngage.startLink()})},showVendorPopup:function(){var popupUrl="http://www.snapengage.com/chat?t=out&w="+this.chatOptions.accountNum;Helper.openPopup(popupUrl,"nrSnapEngageChatWindow",346,365)}});function injectSnapEngageAPI(accountId){if(window.SnapEngage){return}var se=document.createElement("script");se.type="text/javascript";se.async=true;se.src="//storage.googleapis.com/code.snapengage.com/js/"+accountId+".js";var done=false;se.onload=se.onreadystatechange=function(){if(!done&&(!this.readyState||this.readyState==="loaded"||this.readyState==="complete")){done=true;if(getSnapEngageAPI.callbackQueue){for(var i=0;i<getSnapEngageAPI.callbackQueue.length;i++){getSnapEngageAPI.callbackQueue[i](window.SnapEngage)}delete getSnapEngageAPI.callbackQueue}}};var s=document.getElementsByTagName("script")[0];s.parentNode.insertBefore(se,s)}function getSnapEngageAPI(callback){if(window.SnapEngage){callback(window.SnapEngage)}else{if(!getSnapEngageAPI.callbackQueue){getSnapEngageAPI.callbackQueue=[]}getSnapEngageAPI.callbackQueue.push(callback)}}});modular.declare("Chat.LiveEngage",["Chat",EventEmitter]);modular.define(function(Chat,EventEmitter){Chat.addProvider("LiveEngage",{capabilities:{customUI:false,vendorUI:true,vendorPopup:false},getChannelId:function(channel){var id=channel.chatProvider+"_"+channel.chatOptions.accountNum+"_"+channel.chatOptions.engagementId;return id},initialize:function(chatOptions){if(chatOptions.engagementDivId&&!document.getElementById(chatOptions.engagementDivId)){var container=document.createElement("div");container.style.display="none";container.id=chatOptions.engagementDivId;document.body.appendChild(container);
var notifyMethodAvailable=window.lpTag&&window.lpTag.sdes&&typeof window.lpTag.sdes.send==="function";if(notifyMethodAvailable){lpTag.sdes.send([{type:"pagediv",divId:chatOptions.engagementDivId}])}}LE.injectAPI(chatOptions.accountNum,chatOptions.engagementId,chatOptions.initCode).on({agentAvailabilityChanged:function(engagement){if(engagement.id===chatOptions.engagementId){this.emit("agentAvailabilityChanged",engagement.available)}},windowOpened:function(engagementId){},windowClosed:function(engagementId){}},this)},isAgentAvailable:function(callback){LE.isAgentAvailable(this.chatOptions.engagementId,function(isAvailable){callback(isAvailable)})},showVendorUI:function(){LE.showVendorUI(this.chatOptions.engagementId)}});function initChatHooks(chatInitHook){if(chatInitHook){try{eval(chatInitHook)}catch(e){if(window.console&&typeof window.console.error==="function"){console.error(e)}}}}var LE={activeEngagementId:null,engagements:{},on:EventEmitter.prototype.on,off:EventEmitter.prototype.off,emit:EventEmitter.prototype.emit,injectAPI:function(accountId,engagementId,chatInitHook){var self=this;this.engagements[engagementId]=this.engagements[engagementId]||{state:0};if(this.apiInjected){initChatHooks(chatInitHook);return this}else{this.apiInjected=true}if(!window.lpTag){window.lpTag=window.lpTag||{};if(typeof window.lpTag._tagCount==="undefined"){window.lpTag={site:accountId||"",section:lpTag.section||"",autoStart:lpTag.autoStart===false?false:true,ovr:lpTag.ovr||{},_v:"1.6.0",_tagCount:1,protocol:"https:",events:{bind:function(app,ev,fn){lpTag.defer(function(){lpTag.events.bind(app,ev,fn)},0)},trigger:function(app,ev,json){lpTag.defer(function(){lpTag.events.trigger(app,ev,json)},1)}},defer:function(fn,fnType){if(fnType==0){this._defB=this._defB||[];this._defB.push(fn)}else{if(fnType==1){this._defT=this._defT||[];this._defT.push(fn)}else{this._defL=this._defL||[];this._defL.push(fn)}}},load:function(src,chr,id){var t=this;setTimeout(function(){t._load(src,chr,id)},0)},_load:function(src,chr,id){var url=src;if(!src){url=this.protocol+"//"+((this.ovr&&this.ovr.domain)?this.ovr.domain:"lptag.liveperson.net")+"/tag/tag.js?site="+this.site
}var s=document.createElement("script");s.setAttribute("charset",chr?chr:"UTF-8");if(id){s.setAttribute("id",id)}s.setAttribute("src",url);document.getElementsByTagName("head").item(0).appendChild(s)},init:function(){this._timing=this._timing||{};this._timing.start=(new Date()).getTime();var that=this;if(window.attachEvent){window.attachEvent("onload",function(){that._domReady("domReady")})}else{window.addEventListener("DOMContentLoaded",function(){that._domReady("contReady")},false);window.addEventListener("load",function(){that._domReady("domReady")},false)}if(typeof(window._lptStop)=="undefined"){this.load()}},start:function(){this.autoStart=true},_domReady:function(n){if(!this.isDom){this.isDom=true;this.events.trigger("LPT","DOM_READY",{t:n})}this._timing[n]=(new Date()).getTime()},vars:lpTag.vars||[],dbs:lpTag.dbs||[],ctn:lpTag.ctn||[],sdes:lpTag.sdes||[],ev:lpTag.ev||[]};lpTag.init()}else{window.lpTag._tagCount+=1}}this.getAPI(function(){initChatHooks(chatInitHook);setInterval(function(){var engagement,activeEngagementState;for(var engagementId in self.engagements){if(self.engagements.hasOwnProperty(engagementId)){engagement=self.engagements[engagementId];activeEngagementState=window.lpTag.taglets.rendererStub.getEngagementState(engagementId).state;if(engagement.state!==activeEngagementState){engagement.state=activeEngagementState;self.emit("agentAvailabilityChanged",{id:engagementId,state:engagement.state,available:engagement.state===1})}}}},500);window.lpTag.events.bind("lpUnifiedWindow","windowClosed",function(){self.emit("windowClosed",self.activeEngagementId);self.activeEngagementId=null})});return this},isFullyLoadedAPI:function(){try{return typeof window.lpTag.taglets.rendererStub.getEngagementState==="function"}catch(e){return false}},getAPI:function(callback){var self=this;this.useCallbackQueue(this.getAPI,callback,function(callback){if(self.isFullyLoadedAPI()){callback.call(self)}else{window.lpTag.events.bind("LE_ENGAGER","SHOW",function(){callback.call(self)})}})},isAgentAvailable:function(engagementId,callback){this.getAPI(function(){callback(this.engagements[engagementId].state===1)
})},showVendorUI:function(engagementId){if(window.lpTag.taglets.rendererStub.click(engagementId)&&!this.activeEngagementId){this.activeEngagementId=engagementId;this.emit("windowOpened",engagementId)}},useCallbackQueue:function(func,callback,funcBody){var self=this;if(func._resolvedArgs){if(callback){callback.apply(self,func._resolvedArgs)}}else{if(func._callbackQueue){if(callback){func._callbackQueue.push(callback)}}else{func._callbackQueue=func._callbackQueue||[];if(callback){func._callbackQueue.push(callback)}funcBody.call(self,function(){func._resolvedArgs=Array.prototype.slice.call(arguments);for(var i=0;i<func._callbackQueue.length;i++){func._callbackQueue[i].apply(self,arguments)}delete func._callbackQueue})}}}}});if(container.Common){modular.declare("Chat.LivePerson",["Chat",container.Alloy,container.Common.DOM,container.Common.Helper,container.Legacy.Misc.checkString,EventEmitter,container.Localization])}else{modular.declare("Chat.LivePerson",["Chat",Alloy,DOM,Helper,null,EventEmitter,null])}modular.define(function(Chat,Alloy,DOM,Helper,checkString,EventEmitter,Localization){var Provider=Chat.addProvider("LP",{capabilities:{customUI:true,vendorUI:false,vendorPopup:true,pendingMessages:true},initialize:function(chatOptions){this.chatOptions=chatOptions;this.agentFilter={};if(this.chatOptions){this.agentFilter.skill=this.chatOptions.agentSkill}if(!isNaN(parseFloat(this.chatOptions.waitTime))){this.agentFilter.maxWaitTime=parseFloat(this.chatOptions.waitTime)}LP.initAPI(this.chatOptions,this)},isAgentAvailable:function(callback){var self=this;LP.getAgentStatus(function(isAvailable){callback(isAvailable);if(isAvailable&&self.chatOptions.preChat){LP.loadPreChatSurvey()}})},isSessionActive:function(callback){LP.isSessionActive(callback)},isSessionResumed:function(callback){LP.isSessionResumed(callback)},showVendorPopup:function(popupWidth,popupHeight){var self=this;LP.detectAccountServer(self.chatOptions.accountNum,function(serverApiDomain){var popupUrl="https://"+serverApiDomain+"/hc/"+self.chatOptions.accountNum+"/?cmd=file&file=visitorWantsToChat&site="+self.chatOptions.accountNum+"&byhref=1";
if(self.chatOptions.agentSkill){popupUrl+="&SV!skill="+encodeURIComponent(self.chatOptions.agentSkill)}Helper.openPopup(popupUrl,"nrLPChatWindow",popupWidth,popupHeight)})},getChatState:function(callback){LP.getAPI(function(chatInstance){callback(chatInstance.getState()||null)})},getChatLog:function(callback){callback(LP.getCurrentChatLog())},getStatusMessage:function(callback){callback(LP.getLastSystemMessage())},getAgentName:function(callback){LP.getAgentName(callback)},requestChat:function(){var self=this;LP.getAPI(function(chatInstance){if(self.chatOptions.preChat){LP.loadPreChatSurvey(function(error,surveyConfig){if(!error&&(chatInstance.getState()!=="waiting"&&chatInstance.getState()!=="chatting")){self.emit("providerShowBlock",{"class":"nanoRep.SDK.Channeling.Chat.Providers."+Provider.Name+".ChatSurvey",config:surveyConfig,area:"overlay"})}else{chatInstance.requestChat(self.agentFilter)}})}else{chatInstance.requestChat(self.agentFilter)}if(!self.chatOptions.hideSendToEmail){self.emit("providerShowBlock",{"class":"nanoRep.SDK.Channeling.Chat.Providers."+Provider.Name+".ChatTranscript",area:"toolbar"})}})},setUserTyping:function(isTyping){LP.getAPI(function(chatInstance){chatInstance.setVisitorTyping({typing:isTyping})})},sendMessage:function(messageText,callback){LP.getAPI(function(chatInstance){if(chatInstance.getState()==="chatting"){LP.nrSendChatMessage(messageText,callback)}else{LP.nrSendPendingChatMessage(messageText,callback)}})},setCustomParams:function(paramsObject){LP.setPendingCustomVariable({customVariable:paramsObject})},endChat:function(){LP.endChat()},_submitPreSurvey:function(surveyData){var self=this;if(surveyData){self.agentFilter.survey=surveyData}LP.getAPI(function(chatInstance){chatInstance.requestChat(self.agentFilter)})},_submitPostSurvey:function(surveyData){if(surveyData){LP.getAPI(function(chatInstance){chatInstance.submitExitSurvey({survey:surveyData})})}this.emit("chatStateChanged","close")},_emailTranscript:function(email){LP.getAPI(function(chatInstance){chatInstance.requestTranscript({email:email})
})}});Provider.ChatSurvey=EventEmitter.extend({name:"ChatSurvey",_prototype:{ctor:function(obj){this.surveyType=obj.surveyType;this.chatUI=obj.chatUI;this.chatProvider=obj.chatProvider;this.build(obj,obj.container)},build:function(survey,parentNode){var self=this;this.container=DOM.createElement("div",{parent:parentNode,className:"surveyContainer nr-lp-survey"});this.survey=survey;this.questions=[];this.logicQuestions=[];DOM.createElement("div",{parent:this.container,className:"surveyHeading",innerHTML:survey.header});for(var i=0;i<survey.questions.question.length;i++){var question=survey.questions.question[i];this.appendQuestion(question,this.container)}this.submitHandler=function(){self.submit()};this.btnSubmit=DOM.createElement("button",{textContent:"Submit!",className:"nr-lp-btn-submit",parent:this.container});this.btnSubmit.onclick=this.submitHandler},appendQuestion:function(question,container){var table=DOM.createElement("table",{parent:container,cellPadding:"3"});var tbody=DOM.createElement("tbody",{parent:table});var td,tr;var logic=this.logicQuestions[question.logicId.toString()];var questionObj={question:question,visible:true};questionObj.row=table;if(logic){var type=logic.type;var element=logic.element;table.style.display="none";questionObj.visible=false;var mthis=this;switch(type){case"Dropdown Box":element.parentNode.onchange=function(){var selected=element.parentNode.value===element.value;mthis.toggleLogicQuestion(table,selected,questionObj)};break;default:element.onclick=function(){mthis.toggleLogicQuestion(table,this.checked,questionObj)};break}}tr=DOM.createElement("tr",{parent:tbody,valign:"top"});td=DOM.createElement("td",{parent:tr,className:"question"});td.innerHTML=question.label+(question.mandatory?'<span class="mandatory"> *</span>':"");td=DOM.createElement("tr",{parent:tr});this.buildInput(question,td,questionObj);if(question.label.toLowerCase().indexOf("name")>-1){questionObj.labelHasName=true}this.questions.push(questionObj)},buildInput:function(question,td,questionObj){var options=question.entry;
var input,i,op;var tmpWrapper,tmpHolder,tmpLabel;switch(question.type){case"Text Field":input=DOM.createElement("input",{type:"text",parent:td,value:question.lastKnownValue,maxLength:40});questionObj.input=input;break;case"Text Area":input=DOM.createElement("textarea",{parent:td,className:"inputTxt",value:question.lastKnownValue});questionObj.input=input;break;case"Dropdown Box":input=DOM.createElement("select",{parent:td,className:"surveySelect"});if(!options){break}for(i=0;i<options.length;i++){op=DOM.createElement("option",{parent:input,value:options[i].value,textContent:options[i].value});op.selected=options[i].checked;this.addLogicQuestion(options[i],op,question.type)}questionObj.input=input;break;case"Checkbox":if(!options){break}questionObj.inputs=[];for(i=0;i<options.length;i++){tmpWrapper=DOM.createElement("table",{parent:td});tmpHolder=DOM.createElement("td",{parent:tmpWrapper});tmpLabel=DOM.createElement("label",{parent:tmpHolder});op=DOM.createElement("input",{type:"checkbox",parent:tmpLabel,value:options[i].value,checked:options[i].checked});DOM.createElement("span",{parent:tmpLabel,textContent:options[i].displayValue});questionObj.inputs.push(op);this.addLogicQuestion(options[i],op,question.type)}break;case"Radio Button (side by side)":case"Radio Button":if(!options){break}questionObj.inputs=[];td.className+=(question.type==="Radio Button (side by side)"?" radio-layout-sidebyside":" radio-layout-default");for(i=0;i<options.length;i++){tmpWrapper=DOM.createElement("table",{parent:td});tmpHolder=DOM.createElement("td",{parent:tmpWrapper});tmpLabel=DOM.createElement("label",{parent:tmpHolder});op=DOM.createElement("input",{type:"radio",parent:tmpLabel,name:"q_"+question.id,value:options[i].value,checked:options[i].checked});DOM.createElement("span",{parent:tmpLabel,textContent:options[i].displayValue});questionObj.inputs.push(op);this.addLogicQuestion(options[i],op,question.type)}break}},addLogicQuestion:function(option,element,type){if(option.logic&&option.logic.showLogicId){var showLogicId=option.logic.showLogicId;
var obj={element:element,type:type};this.logicQuestions[showLogicId]=obj}},toggleLogicQuestion:function(table,visible,questionObj){table.style.display=visible?"":"none";questionObj.visible=visible;this.chatUI.emit("resize")},validateSurvey:function(){var questions=this.questions;var errors=false;var nameValidated=false;var inputValue;for(var i=0;i<questions.length;i++){if(!questions[i].visible){continue}var question=questions[i].question;var input=questions[i].input;var inputs=questions[i].inputs;var row=questions[i].row;var labelHasName=questions[i].labelHasName;var error=false;if(input){inputValue=input.value.replace(/^\s+|\s+$/g,"")}else{inputValue=null}if(question.mandatory){if(inputValue===""){error=true}else{if(inputs){var filled=false;for(var j=0;j<inputs.length;j++){if(inputs[j].checked){filled=true;break}}error=!filled}}}if((question.type==="Text Field"||question.type==="Text Area")&&inputValue){switch(question.validationType){case"alpha_numeric":if(labelHasName&&!nameValidated){error|=inputValue.indexOf('"')>-1|inputValue.indexOf("'")>-1|inputValue.indexOf("<")>-1|inputValue.indexOf(">")>-1|inputValue.indexOf(";")>-1;nameValidated=true}break;case"numeric":error|=!checkString(inputValue,"number");break;case"email":error|=!checkString(inputValue,"email");break}}if(error){row.className="validationError";errors=true}else{row.className=""}}return !errors},submit:function(){if(!this.validateSurvey()){return}var surveyObj={survey:{id:this.survey.id,question:[]}};var emptySurvey=true;for(var i in this.questions){if(!this.questions[i].visible){continue}var question=this.questions[i].question;var input=this.questions[i].input;var inputs=this.questions[i].inputs;var questionObj={id:question.id};if(input&&input.value){questionObj.answer=input.value.replace(/^\s+|\s+$/g,"").replace(/\"/g,'\\"')}else{if(inputs){var answers=[];for(var j in inputs){if(inputs[j].checked){answers.push(inputs[j].value)}}if(answers.length){questionObj.answer=answers}}}if(questionObj.answer){if(emptySurvey){emptySurvey=false}surveyObj.survey.question.push(questionObj)
}}this.chatProvider[this.surveyType==="pre"?"_submitPreSurvey":"_submitPostSurvey"](emptySurvey?null:surveyObj.survey);this.dispose()},dtor:function(){DOM.removeNode(this.container);this.emit("dispose");this.chatProvider=null;this.chatUI=null}}});Provider.ChatTranscript=EventEmitter.extend({name:"ChatTranscript",_prototype:{ctor:function(obj){this.chatProvider=obj.chatProvider;this.chatUI=obj.chatUI;this.container=obj.container;this.initStructure()},initStructure:function(){var self=this;this.block=DOM.createElement("div",{parent:this.container,className:"nr-lp-transcript"});this.btnShowForm=DOM.createElement("div",{parent:this.block,className:"nr-lp-transcript-btn","nr-tooltip":Localization.getText("Channeling.emailChat"),"nr-tooltip-position-y":"bottom"});this.form=DOM.createElement("form",{parent:this.block,className:"nr-lp-transcript-form"});this.emailInput=DOM.createElement("input",{parent:this.form,className:"nr-lp-transcript-input",placeholder:Localization.getText("Channeling.enterEmail")});this.btnCancel=DOM.createElement("span",{parent:this.form,className:"nr-lp-transcript-action",textContent:Localization.getText("Channeling.cancel")});this.btnSendEmail=DOM.createElement("span",{parent:this.form,className:"nr-lp-transcript-action nr-lp-transcript-action-highlight",textContent:Localization.getText("Channeling.sendChat")});this.hideForm();this.btnShowForm.onclick=function(){self.showForm();self.emailInput.focus()};this.btnSendEmail.onclick=function(){if(self.validate()){self.chatProvider._emailTranscript(self.emailInput.value);self.dispose()}};this.form.onsubmit=function(){self.btnSendEmail.onclick();return false};this.btnCancel.onclick=function(){self.emailInput.value="";self.hideForm()}},validate:function(){if(!checkString(this.emailInput.value,"email")){alert(Localization.getText("Channeling.emailValidation"));return false}return true},showForm:function(){DOM.addClass(this.container,"nr-lp-transcript-form-active");this.btnShowForm.style.display="none";this.form.style.display=""},hideForm:function(){DOM.removeClass(this.container,"nr-lp-transcript-form-active");
this.btnShowForm.style.display="";this.form.style.display="none"},dtor:function(){this.hideForm();DOM.removeNode(this.block);this.emit("dispose");this.chatProvider=null;this.chatUI=null}}});var LP={state:null,chatOptions:null,chatInstance:null,chatProvider:null,initAPI:function(chatOptions,chatProvider){this.resetState();this.chatOptions=chatOptions;this.chatProvider=chatProvider;this.detectAccountServer(this.chatOptions.accountNum)},detectAccountServer:function(accountId,callback){this.useCallbackQueue(this.detectAccountServer,callback,function(callback){Alloy.jsonp({url:"//api.liveperson.net/csdr/account/"+accountId+"/service/adminArea/baseURI.lpCsds?version=1.0",handler:function(error,data){callback(data.ResultSet.lpData[0].lpServer)}})})},isSessionActive:function(callback){var self=this;if(typeof callback!=="function"){return}LP.getAPI(function(chatInstance){var chatState=chatInstance.getState();if(chatState!=="chatting"&&chatState!=="ended"&&chatState!=="waiting"){self.state.pendingSessionRequests.push(callback)}else{callback(true)}})},isSessionResumed:function(callback){if(typeof callback!=="function"){return}callback(LP.state.chatWasResumed)},pollAgentStatus:function(){LP.getAPI(function(chatInstance){var pollInterval=3000;var requestUpdate=function(){chatInstance.getAvailabilty({skill:LP.chatOptions.agentSkill,success:function(data){if(LP.agentIsAvailable!==data.availability){LP.agentIsAvailable=data.availability;LP.chatProvider.emit("agentAvailabilityChanged",LP.agentIsAvailable)}setTimeout(requestUpdate,pollInterval)}})};requestUpdate()})},getAgentStatus:function(callback){var self=this;this.useCallbackQueue(this.getAgentStatus,callback,function(callback){this.detectAccountServer(this.chatOptions.accountNum,function(serverApiDomain){window.lpServerName=serverApiDomain;window.lpNumber=this.chatOptions.accountNum;window.lpSkill=this.chatOptions.agentSkill;window.repStateNotifyFunction=function(agentStatus){var isAvailable=(agentStatus==="online");callback(isAvailable);LP.agentIsAvailable=isAvailable;self.pollAgentStatus()
};DOM.appendJavaScriptElement("//"+serverApiDomain+"/hcp/html/lpCheckRepState.js")})})},getAPI:function(callback){this.useCallbackQueue(this.getAPI,callback,function(callback){var self=this;var apiLoadedHandler=function(){var chatInstance=new window.lpTag.taglets.ChatOverRestAPI({transportOrder:["rest2jsonp"],appKey:self.chatOptions.apiKey,lpNumber:self.chatOptions.accountNum,skill:self.chatOptions.agentSkill||null,onInit:function(){callback(chatInstance)},onLoad:function(){},onLine:function(data){for(var i=0,line;i<data.lines.length;i++){line=data.lines[i];line.text=line.text.toString();if(line.source==="system"){self.state.lastSystemMessage={text:line.text,textType:line.textType,type:line.source};self.chatProvider.emit("systemMessage",self.state.lastSystemMessage)}else{if(line.source==="visitor"){line.source="client"}if(line.source==="client"&&self.state.pendingMessages.length){var thisWasPendingMessage=false;for(var j=0;j<self.state.pendingMessages.length;j++){if(self.state.pendingMessages[j].text===line.text){thisWasPendingMessage=true;self.state.pendingMessages.splice(j,1);break}}if(!self.state.pendingMessages.length){localStorage.removeItem("nr_lp_pending"+chatInstance.getSessionKey())}if(thisWasPendingMessage){continue}}self.state.currentChatLog.push({text:line.text,textType:line.textType,type:line.source,id:self.getUniqueId(),status:"sent"});if(line.source==="agent"&&chatInstance.getState()!=="resume"){self.chatProvider.emit("newMessage",self.state.currentChatLog[self.state.currentChatLog.length-1])}}}},onState:function(data){self.chatProvider.emit("_chatStateChanged",data.state);var knownState=true;switch(data.state){case"initialised":setTimeout(function(){if(self.state.pendingSessionRequests.length&&chatInstance.getState()==="initialised"){for(var i=0;i<self.state.pendingSessionRequests.length;i++){self.state.pendingSessionRequests[i](false)}self.state.pendingSessionRequests=[]}},500);knownState=false;break;case"resume":self.state.chatWasResumed=true;knownState=false;break;case"chatting":if(self.state.pendingMessages.length){for(var i=0;
i<self.state.pendingMessages.length;i++){self.nrSendChatMessage(self.state.pendingMessages[i])}}if(self.state.pendingSessionRequests.length){for(var i=0;i<self.state.pendingSessionRequests.length;i++){self.state.pendingSessionRequests[i](true)}self.state.pendingSessionRequests=[]}self.state.userWasChatting=true;if(!self.state.initStateCalled){self.state.initStateCalled=true;self.chatProvider.emit("chatStateChanged","init")}break;case"waiting":try{var pendingMessagesStrings=JSON.parse(localStorage.getItem("nr_lp_pending"+chatInstance.getSessionKey()));for(var k=0;k<pendingMessagesStrings.length;k++){self.state.pendingMessages.push({id:self.getUniqueId(),text:pendingMessagesStrings[k],textType:"plain",type:"client",status:"sending"})}}catch(e){}if(self.state.pendingMessages.length){for(var j=0;j<self.state.pendingMessages.length;j++){self.state.currentChatLog.push(self.state.pendingMessages[j])}}if(self.state.pendingCustomVariables){chatInstance.setCustomVariable(self.state.pendingCustomVariables)}if(!self.state.initStateCalled){self.state.initStateCalled=true;self.chatProvider.emit("chatStateChanged","init")}break;case"ended":self.state.chatWasResumed=false;if(self.state.pendingSessionRequests.length){for(var i=0;i<self.state.pendingSessionRequests.length;i++){self.state.pendingSessionRequests[i](false)}self.state.pendingSessionRequests=[]}if(!self.state.userWasChatting&&!self.state.userEndedChat){self.resetState();chatInstance.requestChat(self.chatProvider.agentFilter);return}if(self.state.userEndedChat){if(self.chatOptions.postChat){self.loadPostChatSurvey(function(error,surveyConfig){if(!error){self.chatProvider.emit("providerShowBlock",{"class":"nanoRep.SDK.Channeling.Chat.Providers."+Provider.Name+".ChatSurvey",config:surveyConfig,area:"overlay"})}})}else{self.chatProvider.emit("chatStateChanged","close")}}self.resetState();break;default:knownState=false}if(knownState){self.chatProvider.emit("chatStateChanged",data.state)}},onStart:function(){self.chatProvider.emit("chatStarted")},onAgentTyping:function(data){self.chatProvider.emit("agentTyping",data.agentTyping)
},onAvailability:function(data){self.chatProvider.emit("agentAvailable",data)},onInfo:function(data){if(data.agentName&&self.getAgentName._callbackQueue){for(var i=0;i<self.getAgentName._callbackQueue.length;i++){self.getAgentName._callbackQueue[i](data.agentName)}delete self.getAgentName._callbackQueue}}})};var done=false;var se=document.createElement("script");se.type="text/javascript";se.async=true;se.src="//server.iad.liveperson.net/hcp/html/lpChatV3.min.js?site="+self.chatOptions.accountNum;se.onload=se.onreadystatechange=function(){if(!done&&(!this.readyState||this.readyState==="loaded"||this.readyState==="complete")){done=true;apiLoadedHandler()}};var s=document.getElementsByTagName("script")[0];s.parentNode.insertBefore(se,s)})},endChat:function(){this.getAPI(function(chatInstance){if(chatInstance.getState()==="ended"){this.chatProvider.emit("chatStateChanged","close")}else{this.state.userEndedChat=true;chatInstance.endChat()}})},resetState:function(){this.state={userEndedChat:false,userWasChatting:false,chatWasResumed:false,initStateCalled:false,lastSystemMessage:null,currentChatLog:[],pendingMessages:[],pendingSessionRequests:[],pendingCustomVariables:null}},getLastSystemMessage:function(){var systemMessage=this.state.lastSystemMessage;return systemMessage},getCurrentChatLog:function(){return this.state.currentChatLog},getAgentName:function(callback){this.getAPI(function(chatInstance){if(chatInstance.getState()==="waiting"){callback(null)}else{if(chatInstance.getAgentLoginName()){callback(chatInstance.getAgentLoginName())}else{this.getAgentName._callbackQueue=this.getAgentName._callbackQueue||[];this.getAgentName._callbackQueue.push(callback)}}})},setPendingCustomVariable:function(paramsObject){this.state.pendingCustomVariables=paramsObject},nrSendChatMessage:function(messageText,callback){var self=this;var message=(typeof messageText==="object"?messageText:{id:this.getUniqueId(),text:messageText,textType:"plain",type:"client",status:"sending"});if(callback){callback(message)}this.getAPI(function(chatInstance){chatInstance.addLine({text:message.text,success:function(){message.status="sent";
self.chatProvider.emit("updateMessage",message)},error:function(){message.status="failed";self.chatProvider.emit("updateMessage",message)}})})},nrSendPendingChatMessage:function(messageText,callback){var message={id:this.getUniqueId(),text:messageText,textType:"plain",type:"client",status:"sending"};if(callback){callback(message)}this.state.currentChatLog.push(message);this.state.pendingMessages.push(message);this.getAPI(function(chatInstance){var pendingMessagesStrings=[];for(var i=0;i<this.state.pendingMessages.length;i++){pendingMessagesStrings.push(this.state.pendingMessages[i].text)}localStorage.setItem("nr_lp_pending"+chatInstance.getSessionKey(),JSON.stringify(pendingMessagesStrings))})},loadPreChatSurvey:function(callback){var self=this;var patchedCallback=callback?function(){var args=Array.prototype.slice.call(arguments);LP.getAPI(function(chatInstance){if(chatInstance.getState()==="resume"){var tmpHandler=function(){self.chatProvider.off("_chatStateChanged",tmpHandler);callback.apply(self,args)};self.chatProvider.on("_chatStateChanged",tmpHandler)}else{callback.apply(self,args)}})}:null;this.useCallbackQueue(this.loadPreChatSurvey,patchedCallback,function(callback){var surveyOptions={success:function(data){data.survey.surveyType="pre";callback(false,data.survey)},error:function(error){callback(error)}};if(this.chatOptions.agentSkill){surveyOptions.skill=this.chatOptions.agentSkill}this.getAPI(function(chatInstance){chatInstance.getPreChatSurvey(surveyOptions)})})},loadPostChatSurvey:function(callback){this.useCallbackQueue(this.loadPostChatSurvey,callback,function(callback){this.getAPI(function(chatInstance){chatInstance.getExitSurvey({success:function(data){data.survey.surveyType="post";callback(false,data.survey)},error:function(error){callback(error)}})})})},useCallbackQueue:function(func,callback,funcBody){var self=this;if(func._resolvedArgs){if(callback){callback.apply(self,func._resolvedArgs)}}else{if(func._callbackQueue){if(callback){func._callbackQueue.push(callback)}}else{func._callbackQueue=func._callbackQueue||[];
if(callback){func._callbackQueue.push(callback)}funcBody.call(self,function(){func._resolvedArgs=Array.prototype.slice.call(arguments);for(var i=0;i<func._callbackQueue.length;i++){func._callbackQueue[i].apply(self,arguments)}delete func._callbackQueue})}}},getUniqueId:function(){this.getUniqueId._uid=this.getUniqueId._uid||1;return this.getUniqueId._uid++}}});this.Chat=modular.byName("Chat")}});ISQ.Widget.preventOuterScroll=function(d){var a=function(f){if(!window.nanorepScrollLocked){return true}f.preventDefault();f.stopPropagation();return false};var c=function(){window.nanorepScrollLocked=true};var b=function(){window.nanorepScrollLocked=false};window.nanorepScrollLocked=false;if(ISQ.Http.browser.app!="ff"){window.addEvents(window,"onmousewheel",a)}window.addEvents(d,"onmouseenter",c);window.addEvents(d,"onmouseleave",b)};ISQ.Widget.appendConfigurationsToIframeSource=function(a,b){a.push("#account=");a.push(b.account);if(b.kb){a.push("&kb=");a.push(b.kb)}if(b.splitTestGroup){a.push("&splittestgroup=");a.push(b.splitTestGroup)}if(b.preview){a.push("&preview=true")}a.push("&doctype=");a.push(ISQ.Widget.doctype);a.push("&refencoded=true&referer=");a.push(ISQ.Http.Cookies.encode64(b.referer));if(!ISQ.Widget.supportsPostMessage&&b.cdcFrame){a.push("&cdcFrame=");a.push(ISQ.Widget.getInnerFrameUrl(b.cdcFrame,window.location.href));a.push("&cdcversion=");a.push(b.cdcVersion)}if(ISQ.Widget.supportsPostMessage){a.push("&cnf=true")}if(b.pageId){a.push("&pageId=");a.push(b.pageId)}if(b.searchDelay){a.push("&searchDelay=");a.push(b.searchDelay)}if(b.naive){a.push("&naive=");a.push(b.naive)}a.push("&reportEvents=true");if(b.debug){a.push("&debug=isq")}ISQ.Widget.appendCustomValuesToStringBuilder(a,b.customValues)};ISQ.Widget.appendCustomValuesToStringBuilder=function(c,a){if(!a){return}var d;for(var b in a){d=typeof(a[b]);if(d==="function"||d==="object"){continue}c.push("&");c.push(b);c.push("=");if(d==="string"){if(b==="onloadQuestionId"||b==="languageCode"||b=="configId"){c.push(a[b])}else{c.push(ISQ.Http.Cookies.encode64(a[b]))
}}else{c.push(a[b])}}};ISQ.Widget.downloadAndSendCNF=function(b){if(!ISQ.Widget.CNFStatus){ISQ.Widget.CNFStatus=[]}var a=ISQ.Widget.CNFStatus[b.id]={downloaded:false,waitingForDownload:false};if(!window._nRepData.eCNFLoaded){window._nRepData.eCNFLoaded=new ISQ.Event()}if(b.useExistingCNF&&((b.id==="float"&&typeof(ISQ.Cnf_Float)==="object")||(b.id==="embed"&&typeof(ISQ.Cnf_Embed)==="object"))){if(!ISQ.Widget.supportsPostMessage){return false}ISQ.Widget.cnfLoaded(b);b.useExistingCNF=false;a.downloaded=true;return true}ISQ.Widget.downloadCnf(b,function(){var c=null;if(b.type==="float"){c=ISQ.Cnf_Float}else{if(b.type==="embed"){c=ISQ.Cnf_Embed}}if(c.controlGroup){ISQ.Widget.handleEventMessage({type:"notLoad",reason:"conversion control group"},b);return}if(ISQ.Widget.getCustomHost()){c.customServerHost=ISQ.Widget.getCustomHost()}else{b.dynamicHost="//"+c.serverUrl}ISQ.Widget.cnfLoaded(b);if(!ISQ.Widget.supportsPostMessage){return}a.downloaded=true;if(!a.waitingForDownload){return}if(b.type==="float"){ISQ.Widget.sendCNFData(ISQ.Cnf_Float,b)}else{ISQ.Widget.sendCNFData(ISQ.Cnf_Embed,b)}});return ISQ.Widget.supportsPostMessage};ISQ.Widget.cnfLoaded=function(widgetData){var cnf=null;if(widgetData.type==="float"){cnf=ISQ.Cnf_Float}else{cnf=ISQ.Cnf_Embed}if(!cnf){return}var chatConfig=eval("("+cnf.chatConfiguration+")");if(chatConfig.active==="LP"){if(typeof(lpMTagConfig)!="undefined"&&typeof(lpMTagConfig.LPSID_VAR)!="undefined"){chatConfig.LP.visitorId=lpMTagConfig.LPSID_VAR;cnf.chatConfiguration=ISQ.Data.jsonToString(chatConfig)}else{var lptagInterval=setInterval(function(){if(typeof(lpMTagConfig)!="undefined"&&typeof(lpMTagConfig.LPSID_VAR)!="undefined"){stringBuilder=[];stringBuilder.push("subject=visitorId&data=");stringBuilder.push(lpMTagConfig.LPSID_VAR);widgetData.cdcUser.sendMessage(stringBuilder.join(""));clearInterval(lptagInterval)}},500)}}window._nRepData.eCNFLoaded.dispatch(widgetData.id);if(widgetData.eCnfLoaded){widgetData.eCnfLoaded()}ISQ.Widget.loadGuidance(widgetData,cnf)};ISQ.Widget.loadGuidance=function(d,a){if(!a.hasGuides){return
}window.guidanceAccount=d.account;window.serverUrl=ISQ.Widget.getAccountURL(d.account);(function(){var f=document.createElement("script");f.type="text/javascript";f.src=(d.dynamicHost.indexOf("//")===0?"":"//")+d.dynamicHost+"/guidanceEditor/viewer.js?cv=8D6C6243253F830";document.getElementsByTagName("head")[0].appendChild(f)})();if(!window.GuidanceAPI){window.GuidanceAPI={}}window.GuidanceAPI.allGuidesWithoutSteps=a.guides;var b=function(g){if(!d.cnfDataSent){setTimeout(function(){b(g)},100);return}var f=[];f.push("subject=guidesOptions&data=");var j=[];for(var h=0;h<g.length;h++){if(g[h].options.triggerAt.search&&!g[h].isStopped){j.push(g[h].id+":true")}else{j.push(g[h].id+":false")}}f.push(j.join("|"));d.cdcUser.sendMessage(f.join(""))};if(GuidanceAPI.loadedGuides){b(GuidanceAPI.loadedGuides);return}var c=GuidanceAPI.onload;GuidanceAPI.onload=function(f){b(f);if(c){c(f)}}};ISQ.Widget.downloadCnf=function(g,a){var f=null;if(g.preview){f=escape(g.referer)}else{if(g.customValues&&g.customValues.configId){f="!"+g.customValues.configId}}var c=document.getElementsByTagName("head")[0];var b=createElement("script");b.setAttribute("type","text/javascript");b.setAttribute("src",ISQ.Widget.buildCNFSource(g.account,g.type==="float",g.kb,f,g.preview,g.splitTestGroup));b.async=true;b.defer=true;var d=function(){if(ISQ.Referer.handlerObjects[b.src].pendingLoad===true){return}a()};ISQ.Referer=initializeNS("ISQ.Referer");ISQ.Referer.handlerObjects=ISQ.Referer.handlerObjects||[];ISQ.Referer.handlerObjects[b.src]={callback:a};if(ISQ.Http.browser.app!=="ie"||ISQ.Http.browser.isIE11){b.onload=d}else{b.onreadystatechange=function(){if(this.readyState!=="complete"&&this.readyState!=="loaded"){return}d();d=null}}c.appendChild(b);return true};ISQ.Widget.sendCNFData=function(cnfObject,widgetData){var cnfStatusObject=ISQ.Widget.CNFStatus[widgetData.id];cnfStatusObject.waitingForDownload=true;if(!cnfStatusObject.downloaded){return}if(typeof(cnfObject.chatProviders)!="undefined"){eval(cnfObject.chatProviders)}var amount=1800;var internalSend=function(substring_,finished){stringBuilder=[];
stringBuilder.push("subject=cnf&data=");stringBuilder.push(substring_);if(finished){stringBuilder.push("&finished=true")}widgetData.cdcUser.sendMessage(stringBuilder.join(""))};var str=ISQ.Data.jsonToString(cnfObject);str=ISQ.Http.Cookies.encode64(str);var ndxStart=0;if(amount<str.length){while(ndxStart<str.length){if(ndxStart+amount>str.length){amount=str.length-ndxStart}internalSend(str.substr(ndxStart,amount));ndxStart+=amount}internalSend("",true)}else{internalSend(str,true)}if(widgetData.eAfterCnfSent){widgetData.eAfterCnfSent()}widgetData.cnfDataSent=true};ISQ.Widget.sendingMessagesToWidget=function(a){return ISQ.Widget.supportsPostMessage||a.formValues instanceof Array||typeof(a.context)==="object"||typeof(a.customParams)==="object"};ISQ.Widget.initCDC=function(g,c,a){a=a||{};var f=ISQ.Widget.getAccountDomain(g.account,a.serverUrl);if(ISQ.Widget.supportsPostMessage){g.cdcVersion=3}else{if(!g.cdcVersion){g.cdcVersion=0}}var d=ISQ.Widget.sendingMessagesToWidget(g);g.cdcUser=null;switch(g.cdcVersion){case 0:case 1:case 2:if(g.cdcVersion!==0){ISQ.Widget.cdcMessageEvent.addHandler(c,g)}if(d){g.cdcUser=new ISQ.CDC.User({targetWindowName:g.iframe.id,proxyIFrameUrl:f+"/common/cdc/cdc.html",server:f})}break;case 3:var b={allowMessagesFrom:g.staticHost.indexOf("//cdn-")>-1?g.staticHost:window.location.protocol+f,widget:g.type};if(d){b.server=f;b.targetWindowName=g.iframe.id;b.proxyIFrameUrl=f+"/common/cdc/cdc.html"}g.cdcUser=new ISQ.CDC.User(b);g.cdcUser.incomingMessageEvent.addHandler(c,g);break}};ISQ.Widget.APIKeyEndDelimiter="<";ISQ.Widget.APIValueEndDelimiter="(";ISQ.Widget.sendAPItoWidget=function(n){var j=ISQ.Widget.sendingMessagesToWidget(n);if(!n.cdcUser||!j){return}var k=[];k.push("subject=api");var d=n.formValues;if((d instanceof Array)&&d.length!==0){k.push("&form=");var g,m,l;for(var f=0;f<d.length;++f){var c=d[f];if(!(c instanceof Array)||c.length<2){continue}if(c.length===2){g=c[0];m=c[1];l=null}else{g=c[1];l=c[0];m=c[2]}if(f!==0){k.push(ISQ.Widget.APIKeyEndDelimiter)}k.push(ISQ.Http.Cookies.encode64(g));
k.push(ISQ.Widget.APIValueEndDelimiter);k.push(ISQ.Http.Cookies.encode64(m));if(l){k.push(ISQ.Widget.APIValueEndDelimiter);k.push(ISQ.Http.Cookies.encode64(l))}}}var a=n.context;if(typeof(a)==="object"){k.push("&context=");ISQ.Widget.CDC_appendKeyValueToMessage(a,k)}var b=n.customParams;if(typeof(b)==="object"){k.push("&customparams=");ISQ.Widget.CDC_appendKeyValueToMessage(b,k)}var h=n.searchByLabels;if(h instanceof Array){k.push("&searchbylabels=");k.push(ISQ.Http.Cookies.encode64(h.join(",")))}n.cdcUser.sendMessage(k.join(""))};ISQ.Widget.fixStealFocus=function(c){if(!c.iframe){return}var b=c.setFocus;if(!b){return}b=ISQ.Html._(b);if(!b){return}var a=function(){try{b.focus()}catch(d){}};if(window.attachEvent){c.iframe.attachEvent("onload",a)}else{if(window.addEventListener){c.iframe.addEventListener("load",a,true)}}};ISQ.Widget.resizeIframeOnLoad_IE=function(c,d,a,b){if(ISQ.Http.browser.app!=="ie"||ISQ.Http.browser.isIE11){return false}if(ISQ.Http.browser.isIE6||ISQ.Http.browser.isIE7){if(document.readyState==="complete"){return false}if(!c.registeredOnload){c.registeredOnload=true;window.attachEvent("onload",function(){b(c,parseInt(d),parseInt(a)+1)})}return true}else{if(document.readyState!=="complete"||window!=window.top){b(c,parseInt(d),parseInt(a)+1);c.cdcUser.sendMessage("subject=refreshSize");return true}else{return false}}};ISQ.Widget.incomingCDCMessageOrginizer=null;ISQ.Widget.incomingCDCMessage=function(f){if(f.charAt(0)==="?"){f=f.substr(1)}var g=ISQ.Tools.stringToPairArray(f,"=","&",true,false);if(!ISQ.Widget.incomingCDCMessageOrginizer){ISQ.Widget.incomingCDCMessageOrginizer=[]}var a=ISQ.Widget.incomingCDCMessageOrginizer[g.widget];if(!a){a=ISQ.Widget.incomingCDCMessageOrginizer[g.widget]={};a.lastHandledOrdinal=0;a.pendingMessages=null}if(g.subject&&g.subject=="reset"){a.lastHandledOrdinal=0;a.pendingMessages=null}var k=parseInt(g.ord);var b=k-a.lastHandledOrdinal;if(b<=0){return}if(b>1){if(a.pendingMessages===null){a.pendingMessages=[];a.pendingMessagesCount=0}a.pendingMessages[k]=g;++a.pendingMessagesCount
}else{try{ISQ.Widget.cdcMessageEvent.dispatch(g)}catch(c){}if(a.pendingMessages!==null){var j=a.pendingMessagesCount;var h=k+1;for(var d=0;d<j;++d,++h){if(!a.pendingMessages[h]){break}ISQ.Widget.cdcMessageEvent.dispatch(a.pendingMessages[h]);k=h;--a.pendingMessagesCount}if(a.pendingMessagesCount===0){a.pendingMessages=null}}a.lastHandledOrdinal=k}};if(!ISQ.Widget.cdcMessageEvent){ISQ.Widget.cdcMessageEvent=new ISQ.Event()}if(!ISQ.Widget.incomingCustomCDCMessage){ISQ.Widget.incomingCustomCDCMessage=new ISQ.Event()}ISQ.Widget.APIProxyHandler=(function(){var a=function(c,b,j){var f=c.split("."),g=window,h=null;for(var d=0;d<f.length;d++){h=f[d];if(d===0&&f[d]==="window"){continue}if(d<f.length-1){g=g[h]}}var k=function(i){return function(){var l=[];for(var m=0;m<arguments.length;m++){l[m]=JSON.parse(JSON.stringify(arguments[m]))}var n={type:"APIProxy",funcId:i,args:l};j.cdcUser.sendMessage("subject=apiproxy&data="+ISQ.Tools.Base64.encodeString(ISQ.Data.jsonToString(n)))}};for(var d=0;d<b.length;d++){if(typeof b[d]==="string"&&b[d].indexOf("_funcId")===0){b[d]=k(b[d])}}g[h].apply(g,b)};return function(b,c){a(b.func,b.args,c)}}());if(window._nRepData&&window._nRepData.onApiProxyReady){try{window._nRepData.onApiProxyReady()}catch(e){if(window.console&&window.console.log){window.console.log("API Proxy error:",e)}}}ISQ.Widget.handleCommonCDCMessage=function(messageArgs,widgetData){switch(messageArgs.subject){case"cnf":if(widgetData.id==="float"){ISQ.Widget.sendCNFData(ISQ.Cnf_Float,widgetData)}else{ISQ.Widget.sendCNFData(ISQ.Cnf_Embed,widgetData)}break;case"apiproxy":ISQ.Widget.APIProxyHandler(ISQ.Data.parseJson(ISQ.Tools.Base64.decodeString(messageArgs.data)),widgetData);break;case"event":ISQ.Widget.handleEventMessage(messageArgs,widgetData);break;case"pagescript":ISQ.API.runPageScript(messageArgs.data,true);break;case"chatResumeRequest":if(_nRepData.chatInResume){ISQ.Widget.preventChatResuming(widgetData);break}if(!_nRepData.chatInResume){_nRepData.chatInResume=true}ISQ.Widget.aboutToResumeChat(widgetData);break;case"chatEnded":_nRepData.chatInResume=false;
break;case"loadChat":case"startCustomChat":var loadCustomChat=function(){var config=eval("("+messageArgs.config+")");switch(config.active){case"LiveChatInc":ISQ.Widget.Proxy.Chat.LiveChatInc.start(messageArgs.subject,config,widgetData);break;case"Zopim":ISQ.Widget.Proxy.Chat.Zopim.start(messageArgs.subject,config,widgetData);break;case"Olark":ISQ.Widget.Proxy.Chat.Olark.start(messageArgs.subject,config,widgetData);break;case"SalesForce":ISQ.Widget.Proxy.Chat.SalesForce.start(messageArgs.subject,config,widgetData);break;case"SnapEngage":ISQ.Widget.Proxy.Chat.SnapEngage.start(messageArgs.subject,config,widgetData);break;case"LiveEngage":ISQ.Widget.Proxy.Chat.LiveEngage.start(messageArgs.subject,config,widgetData);break}};if(!isNSexists("ISQ.Widget.Proxy.Chat")){ISQ.Tools.appendScript("/widget/scripts/chatProviders.js",new ISQ.Handler(loadCustomChat))}else{loadCustomChat()}break;case"hideWidget":(_nRepData["float"]||_nRepData.embed).container.style.margin="-9999px";break;case"showWidget":(_nRepData["float"]||_nRepData.embed).container.style.margin="";break;default:ISQ.Widget.incomingCustomCDCMessage.dispatch(messageArgs,widgetData);break}};ISQ.Widget.aboutToResumeChat=function(a){a.cdcUser.sendMessage("subject=chatResumeApproved")};ISQ.Widget.preventChatResuming=function(a){a.cdcUser.sendMessage("subject=preventChatResuming")};ISQ.Widget.createMobileBlockerLink=function(g,c,h,d){if(!ISQ.Http.browser.isMobile){return}var b=g.mobileBlockerLink=document.createElement("a");b.className="nR_noRemove";b.style.cssText="display:block;width: "+h+";height:"+g.height+"px;position:relative;left:0px;top:-"+g.height+"px;z-index:1001;background:transparent;";c.appendChild(b);b.href=g.iframe.src;b.target="_blank";b.onclick=function(a){if(g.backImgDiv&&ISQ.Cnf_Float.floatBackImageAsk){this.style.display="none";var i=document.elementFromPoint(a.clientX,a.clientY);while(i!=null&&i!==g.backImgDiv&&i!==document.body){i=i.parentNode}this.style.display="block";if(i==g.backImgDiv&&ISQ.Cnf_Float.floatBackImageAsk&&ISQ.Cnf_Float.floatBackImageAsk>0){var j=this.href;
if(!this.hrefLength){this.hrefLength=j.length}if(j.contains("#")){j+="&onloadquestionid="+ISQ.Cnf_Float.floatBackImageAsk}else{j+="#onloadquestionid="+ISQ.Cnf_Float.floatBackImageAsk}this.href=j}else{if(this.hrefLength&&this.href.length!=this.hrefLength){this.href=this.href.substring(0,this.hrefLength)}}}g.cdcUser.sendMessage("subject=mobileOpenNewWindow")};var f=_("ozen");if(g.id==="float"&&f&&f.nodeName==="A"){f.href=g.iframe.src;f.target="_blank";f.onclick=function(a){if(g.backImgDiv&&ISQ.Cnf_Float.floatBackImageAsk){this.style.display="none";var i=document.elementFromPoint(a.clientX,a.clientY);while(i!=null&&i!==g.backImgDiv&&i!==document.body){i=i.parentNode}this.style.display="block";if(i==g.backImgDiv&&ISQ.Cnf_Float.floatBackImageAsk&&ISQ.Cnf_Float.floatBackImageAsk>0){var j=this.href;if(!this.hrefLength){this.hrefLength=j.length}if(j.contains("#")){j+="&onloadquestionid="+ISQ.Cnf_Float.floatBackImageAsk}else{j+="#onloadquestionid="+ISQ.Cnf_Float.floatBackImageAsk}this.href=j}else{if(this.hrefLength&&this.href.length!=this.hrefLength){this.href=this.href.substring(0,this.hrefLength)}}}g.cdcUser.sendMessage("subject=mobileOpenNewWindow")}}};ISQ.Widget.Mobile={};ISQ.Widget.Mobile.resizeStart=function(){if(!ISQ.Http.browser.isMobile||ISQ.Http.browser.oldAndroid){return}if(!ISQ.Widget.Mobile.resizeInterval){ISQ.Widget.Mobile.resizeInterval=setInterval(ISQ.Widget.Mobile.resizeTimerElapsed,200)}window.addEventListener("orientationchange",ISQ.Widget.Mobile.orientationChanged)};ISQ.Widget.Mobile.resizeStop=function(){if(ISQ.Widget.Mobile.resizeInterval){clearInterval(ISQ.Widget.Mobile.resizeInterval)}ISQ.Widget.Mobile.resizeInterval=null;window.removeEventListener("orientationchange",ISQ.Widget.Mobile.orientationChanged)};ISQ.Widget.Mobile.resizeTimerElapsed=function(){if(!ISQ.Cnf_Float){return}var b=ISQ.Widget.Mobile.sizerDiv;if(!b){b=createDiv(document.body);b.style.cssText="width:0; height:0; position:fixed; bottom:0;right:0;";ISQ.Widget.Mobile.sizerDiv=b}if(b.offsetLeft!=ISQ.Widget.Mobile.oldViewportWidth||ISQ.Widget.Mobile.forceNextAction){if(ISQ.Cnf_Embed){ISQ.Widget.Mobile.forceNextAction=ISQ.Embed.Mobile.resizeAction(b.offsetLeft,b.offsetTop)
}ISQ.Widget.Mobile.oldViewportWidth=b.offsetLeft;var a=ISQ.Cnf_Float||ISQ.Cnf_Embed;if(!a.mobileWidgetEnabled){return}if(ISQ.Cnf_Float&&ISQ.Cnf_Float.mobileResponsive){return}if(ISQ.Cnf_Embed&&ISQ.Cnf_Embed.mobileResponsive&&ISQ.Embed.Mobile.isMobileOptimized()){return}ISQ.Widget.Mobile.forceNextAction|=ISQ.Widget.Mobile.resizeAction(b.offsetLeft,b.offsetTop)}};ISQ.Widget.Mobile.orientationChanged=function(){ISQ.Widget.Mobile.oldViewportWidth=null};ISQ.Widget.Mobile.resizeAction=function(b,a){if(_nRepData["float"]&&!_nRepData["float"].widgetLoaded){return true}if(!ISQ.Widget.Mobile.teaser){if(ISQ.Widget.Mobile.buildTeaserElement(b,a)){ISQ.Widget.Mobile.teaser.scale(b,a)}return false}if(ISQ.Widget.Mobile.timer){clearTimeout(ISQ.Widget.Mobile.timer)}ISQ.Widget.Mobile.teaser.style.display="none";ISQ.Widget.Mobile.timer=setTimeout(function(){ISQ.Widget.Mobile.teaser.scale(b,a)},200);return false};ISQ.Widget.Mobile.buildTeaserElement=function(j,i){if(ISQ.Widget.isMobileWidget){return}var k=_nRepData["float"]||_nRepData.embed;var a=ISQ.Cnf_Float||ISQ.Cnf_Embed;var b=_nRepData["float"]&&_nRepData["float"].dockMethod==nanoRep.Float.enumDockMethod.RIGHT;var h=ISQ.Widget.Mobile.teaser=createDiv(document.body);h.style.cssText="visibility:hidden; text-align:center; width:100%; bottom:0; z-index:1000; font-family:Arial;";h.style.color=a.titleColor||"#FFF";h.style.backgroundColor=a.titleBGColor||"#009FD4";h.style.position="fixed";if(ISQ.Tools.isLanguageRTL(a.kbLanguageCode)){h.style.direction="rtl"}h.heightRatio_portrait=1/18;h.heightRatio_landscape=1/9;h.fontRatio=0.8;var f=i>j?h.heightRatio_portrait:h.heightRatio_landscape;var d=i*f;var c=Math.floor(d*h.fontRatio)+"px";h.style.height=Math.ceil(d)+"px";h.style.lineHeight=Math.ceil(d)+"px";h.style.fontSize=c;h.style.bottom=-1*Math.ceil(d/3)+"px";var g=createElement("span",h);g.style.cssText="text-overflow:nowrap; font-size: inherit; color: inherit;";g.innerHTML=a.titleTeaserText;h.textSpan=g;h.onclick=function(){ISQ.Widget.Mobile.openWidgetInNewWindow(k)};h.widthRatio=d/(g.offsetWidth*1.15);
h.leftRatio=1/5;h.paddingRatio=1/9;h.borderRatio=1/5;h.scale=function(q,p){var n=p>q?this.heightRatio_portrait:this.heightRatio_landscape;var m=p*n;var r=m/this.widthRatio;this.style.width=Math.ceil(r)+"px";this.style.height=this.style.lineHeight=Math.ceil(m)+"px";var o=Math.ceil(m*this.leftRatio)+"px";if(!b){this.style.left=o}else{this.style.right=o}this.style.letterSpacing=r>350?"-2px":r>150?"-1px":"";this.style.fontSize=Math.floor(m*this.fontRatio)+"px";var l=Math.ceil(m*this.borderRatio);this.style.borderRadius=l+"px "+l+"px 0 0";this.style.visibility="visible";this.style.display="block"};nanoRep.Widget.PositionAnimator.setBottom(h,0);nanoRep.Widget.PositionAnimator.start();return h};ISQ.Widget.Mobile.openWidgetInNewWindow=function(a){a.cdcUser.sendMessage("subject=mobileOpenNewWindow");window.open(a.iframe.src)};ISQ.Widget.Mobile.forceNextAction=false;ISQ.Widget.applyContextFromCookie=function(d){var a=ISQ.Http.Cookies._read("nrContext2");if(!a){return}var b=a.split(",");if(!d.context){d.context={}}for(var c=0;c<b.length;c+=2){if(d.context[b[c]]){continue}d.context[b[c]]=b[c+1]}};ISQ.Widget.applyContextToCookie=function(a){var b=[];for(key in a){b.push(key);b.push(",");b.push(a[key]);b.push(",")}b.splice(b.length-1,1);var c=b.join("");ISQ.Http.Cookies._write("nrContext2",c,"/",ISQ.Http.domain(),false,(24*60*60*30),true)};ISQ.API.init=function(a){ISQ.API.defaultWidgetData=a};ISQ.API.getWidgetData=function(a){var b=null;if(a){b=_nRepData[a]}return b||ISQ.API.defaultWidgetData};ISQ.API.openContactForm=function(a){var b=ISQ.API.getWidgetData(a);if(!b||!b.cdcUser){return}if(b.id=="float"){if(ISQ.Http.browser.isMobile){return}}else{if(ISQ.Http.browser.oldAndroid){return}}b.cdcUser.sendMessage("subject=openContactForm")};ISQ.API.startChat=function(a,b){var d=ISQ.API.getWidgetData(b);if(!d||!d.cdcUser){return}if(d.id=="float"){if(ISQ.Http.browser.isMobile){return}nanoRep.Float.changeState(nanoRep.Float.enumStates.expand)}else{if(ISQ.Http.browser.oldAndroid){return}}if(d.autoMinimizeTimer){clearTimeout(d.autoMinimizeTimer)
}var c="subject=startChat";if(a){c+="&countStatsOnly=true"}d.cdcUser.sendMessage(c)};ISQ.API.customizeWidget=function(a,b){if(typeof(a)!="object"){return}var d=ISQ.API.getWidgetData(b);if(!d||!d.cdcUser){return}var c="subject=customize";if(a.bgcolor){c+="&bgcolor="+a.bgcolor}if(a.title){c+="&title="+a.title}d.cdcUser.sendMessage(c)};ISQ.API.ask=function(b,a){if(!b){b=""}var c=ISQ.API.getWidgetData(a);if(!c||!c.cdcUser){return}c.cdcUser.sendMessage("subject=ask&question="+b)};ISQ.API.askById=function(c,a,d){if(!c){return}var f=ISQ.API.getWidgetData(a);if(!f||!f.cdcUser){return}var b="subject=askById&questionid="+c;if(d){b+="&sender="+d}f.cdcUser.sendMessage(b)};ISQ.API.importCustomParams=function(b){if(b.table){b.customParams=ISQ.API.getCustomParamsFromTable(b)}else{if(b.ul){b.customParams=ISQ.API.getCustomParamsFromUl(b)}}if(!b.customParams){return}var a=function(f){var c=f?window._nRepData[f]:_nRepData;if(!c){return}if(!c.customParams){c.customParams=b.customParams}else{for(var d in b.customParams){if(c.customParams[d]){continue}c.customParams[d]=b.customParams[d]}}};a("");if(b.widget){a(b.widget)}else{a("float");a("embed")}};ISQ.API.getCustomParamsFromTable=function(g){if(!g.table){return}var l=window._(g.table);if(!l){return}var b=[];var q=l.getElementsByTagName("TR");var n,o,c=false,h,j,f;var a=-1;var k="";for(var p=0;p<q.length;++p){k="noText";h=j="";n=[];o=q[p].getElementsByTagName("TH");for(var d=0;d<o.length;++d){n.push(o[d])}o=q[p].getElementsByTagName("TD");for(var d=0;d<o.length;++d){n.push(o[d])}a++;for(var m=0;m<n.length;++m){f=n[m].innerText||n[m].textContent;if(!f){continue}f=f.Trim();k="hasText";if(g.skipRows&&ISQ.Data.indexOfArray(g.skipRows,a)!==-1){k="skip";break}else{if(!h){h=f}else{if(!j){j=f;break}}}}if(k==="noText"){--a;continue}if(k==="skip"){continue}if(!h||!j){continue}b[h]=j}return b};ISQ.API.getCustomParamsFromUl=function(g){if(!g.ul){return}var l=window._(g.ul);if(!l){return}var f=l.getElementsByTagName("LI");var a=[];var c,h,k="";for(var b=0;b<f.length;++b){h=k="";for(var d=0;d<f[b].children.length;
++d){if(f[b].children[d].localName=="small"){h=f[b].children[d].innerHTML.replace(/:/g,"").Trim()}else{if(f[b].children[d].localName=="b"){k=f[b].children[d].innerHTML.Trim()}}}if(!h||!k){return}a[h]=k}return a};ISQ.API.runPageScript=function(script,encoded){if(!script){return}try{if(encoded){eval(ISQ.Tools.Base64.decodeString(script))}else{eval(script)}}catch(e){}};</script>
    <script type="text/javascript" mini="true">ISQ.Widget.CDC_getKeyValueArrayFromMessage=function(d,c){var b;if(c){b={}}else{b=[]}var h=d.split(ISQ.Widget.APIKeyEndDelimiter);var g,a,f;for(var e=0;e<h.length;++e){g=h[e].split(ISQ.Widget.APIValueEndDelimiter);a=ISQ.Http.Cookies.decode64(g[0]);f=ISQ.Http.Cookies.decode64(g[1]);b[a]=f}return b};ISQ.Widget.CDC_appendKeyValueToMessage=function(a,d){var b=true;for(var c in a){if(!b){d.push(ISQ.Widget.APIKeyEndDelimiter)}b=false;d.push(ISQ.Http.Cookies.encode64(c));d.push(ISQ.Widget.APIValueEndDelimiter);d.push(ISQ.Http.Cookies.encode64(a[c]))}};</script>
    <script type="text/javascript" mini="true">ISQ.Export={};ISQ.enumContentProviders={worldManuals:"-1000",uploader:"-999"};ISQ.Export.parseExternalSourceSummary=function(c,b,a){switch(b){case ISQ.enumContentProviders.worldManuals:return ISQ.Export.wmParser(c,ISQ.Widget.HTML.widgetContainer,a);break;default:return null;break}};ISQ.Export.popupTimer=null;ISQ.Export.currentHeight=500;ISQ.Export.currentWidth=800;ISQ.Export.currentMaxHeight=0;ISQ.Export.currentMaxWidth=0;ISQ.Export.scaled=false;ISQ.Export.Blocker=false;ISQ.Export.AddBlocker=function(c,a){if(c&&c>=850||ISQ.Widget.isFloat){return}if(a&&a.wmElement&&a.wmElement.visible&&!ISQ.Export.Blocker){ISQ.Export.Blocker=createDiv(document.body,"width:100%;top:0px;bottom:0px;left:0px;right:0px;position:fixed;z-index:99996;background-color: black;opacity:0.6");ISQ.Export.Blocker.CloseButton=createDiv(document.body,"cursor:pointer;font-size:28px;width:40px;height:40px;line-height:40px;border-radius:20px 20px 20px 20px;background-color:#e00000;font-weight:bold;color:white;right:10px;top:10px;text-align:center;z-index:999999;position:fixed;");ISQ.Export.Blocker.CloseButton.innerHTML="X";var b=document.querySelectorAll(".widgetSearchBox");if(b.length>0){b[0].style.display="none"}ISQ.Export.Blocker.CloseButton.onclick=function(){if(b.length>0){b[0].style.display="block"}a.wmElement.imgDiv.style.display="none";a.wmElement.imgDiv.isClosed=true;a.wmElement.visible=false;ISQ.Export.removeBlocker()}}};ISQ.Export.removeBlocker=function(){if(!ISQ.Export.Blocker){return}ISQ.Export.Blocker.CloseButton.parentNode.removeChild(ISQ.Export.Blocker.CloseButton);ISQ.Export.Blocker.parentNode.removeChild(ISQ.Export.Blocker);ISQ.Export.Blocker=false};ISQ.Export.wmWidgetSize=function(a,c){ISQ.Export.currentMaxHeight=0;ISQ.Export.currentMaxWidth=0;var m=40;var d=a.querySelectorAll(".pointer[data-image-url]");var t=window.innerWidth||document.documentElement.clientWidth;var s=window.innerHeight||document.documentElement.clientHeight;if(t<850&&!ISQ.Widget.isFloat){for(var h=0;h<d.length;h++){var b=d[h];var k=parseInt(d[h].getAttribute("data-width"));
var j=parseInt(d[h].getAttribute("data-height"));var q=t-40;var g=1;if(k>q){ISQ.Export.scaled=true;g=q/k;newImgHeight=parseInt(j*g);b.imgDiv.style.width=q+"px";b.imgDiv.style.height=parseInt(j*g)+"px"}else{q=parseInt(k);newImgHeight=parseInt(j)}b.imgDiv.style.backgroundSize="100%";b.imgDiv.style.left=(t-q)/2+"px";b.imgDiv.style.zIndex=999998;if(!ISQ.Export.embedWidget){b.imgDiv.style.position="fixed";b.imgDiv.style.top=(s-newImgHeight)/2+m+"px"}else{b.imgDiv.style.position="absolute";if(b.imgDiv.pointer){b.imgDiv.pointer.style.position="absolute";b.imgDiv.pointer.style.top=parseInt(b.getAttribute("data-position-top"))-20+"px";b.imgDiv.pointer.style.left=parseInt(b.getAttribute("data-position-left"))-20+"px";b.imgDiv.pointer.style.width="auto"}}if(b.imgDiv.pointer){var n=-40;b.imgDiv.pointer.style.position="absolute";b.imgDiv.pointer.style.top=parseInt(((j*g)-newImgHeight)/2)-20+(g*parseInt(b.getAttribute("data-position-top")))+"px";b.imgDiv.pointer.style.left=parseInt(((k*g)-q)/2)-20+(g*parseInt(b.getAttribute("data-position-left")))+"px";if(!b.imgDiv.pointer.originalOffset){var l=b.imgDiv.style.display;b.imgDiv.style.display="block";b.imgDiv.firstChild.style.display="block";b.imgDiv.pointer.originalOffset=b.imgDiv.pointer.offsetWidth||60;b.imgDiv.style.display=l}b.imgDiv.pointer.style.width=parseInt(b.imgDiv.pointer.originalOffset)*g+"px"}}a.style.width="100%";ISQ.Export.AddBlocker(null,ISQ.Export.currentAnswerElement)}else{ISQ.Export.removeBlocker();if(d.length>0){var f=100;var e=80;var p=0;var o=0;for(var h=0;h<d.length;h++){var b=d[h];var k=b.getAttribute("data-width");if(p<parseInt(k)){p=parseInt(k)}var j=parseInt(b.getAttribute("data-height"));if(o<j){o=parseInt(j)}if(!b.imgDiv){return false}b.imgDiv.style.width=k+"px";b.imgDiv.style.height=j+"px";b.imgDiv.style.position="absolute";if(b.imgDiv.pointer){b.imgDiv.pointer.style.position="absolute";b.imgDiv.pointer.style.top=parseInt(b.getAttribute("data-position-top"))-20+"px";b.imgDiv.pointer.style.left=parseInt(b.getAttribute("data-position-left"))-20+"px";b.imgDiv.pointer.style.width="auto"
}}if(parseInt(o)>parseInt(ISQ.Export.currentMaxHeight)&&parseInt(o)<3000){ISQ.Export.currentMaxHeight=o}if(parseInt(p)>parseInt(ISQ.Export.currentMaxWidth)&&parseInt(p)<3000){ISQ.Export.currentMaxWidth=p}var r=c.offsetWidth;a.style.width=r-50-ISQ.Export.currentMaxWidth+"px";a.style.minHeight=(parseInt(ISQ.Export.currentMaxHeight)+50)+"px";ISQ.Export.currentHeight=(f+parseInt(ISQ.Export.currentMaxHeight))+100;ISQ.Export.currentWidth=600+parseInt(ISQ.Export.currentMaxWidth)}if(ISQ.Export.scaled){ISQ.Export.scaled=false}}var d=ISQ.Html.getElementsByClassName(c,"hoverImagesClass");if(!ISQ.Export.isSupportPage){ISQ.Widget.HTML.dynamicSize_sendMessage()}if(d.length>0&&!ISQ.Export.isSupportPage&&ISQ.Widget.isFloat){ISQ.Widget.CDC.sendMessage("subject=setSize&height="+ISQ.Export.currentHeight+"&width="+ISQ.Export.currentWidth)}else{return false}};ISQ.Export.embedWidget=false;ISQ.Export.wmElement=null;ISQ.Export.isSupportPage=false;ISQ.Export.registeredEvents=[];ISQ.Export.questionCounter=0;ISQ.Export.currentAnswerElement=null;ISQ.Export.wmParser=function(a,g,e,x){ISQ.Export.currentAnswerElement=a;var B=0;for(var n=0;n<ISQ.Export.registeredEvents.length;n++){window.removeEvents(ISQ.Export.registeredEvents[n],"onscroll",K);window.removeEvents(ISQ.Export.registeredEvents[n],"onresize",K)}ISQ.Export.registeredEvents=[];if(!a){return}a.style.overflow="hidden";var c=a.offsetTop;var G;var b;var H;var I=null;var F;if(x||!ISQ.Widget.isContained){ISQ.Export.isSupportPage=true;H=window;if(!ISQ.Widget.isContained&&ISQ.Widget.HTML){I=ISQ.Widget.HTML.contentWrapper}if(a.style.display=="none"){a.style.display="block"}G=a.offsetWidth;F=a;b=createDiv(null,"float:left;")}else{if(!ISQ.Widget.isFloat){ISQ.Export.embedWidget=true;H=null;if(ISQ.Widget.sendingCDCMessages){ISQ.Widget.CDC.sendMessage("subject=enableScrollingEvent")}G=ISQ.Widget.HTML.contentWrapper.offsetWidth;b=createDiv(null,"float:left;position:relative");F=ISQ.Widget.HTML.widgetContainer}else{F=ISQ.Widget.HTML.widgetContainer;H=ISQ.Widget.HTML.contentWrapper;G=ISQ.Widget.HTML.contentWrapper.offsetWidth;
b=createDiv(null,"float:left;position:relative")}}b.innerHTML=a.innerHTML;b.style.minHeight="290px";a.innerHTML="";a.appendChild(b);a.answerDiv=b;var d=createDiv(a,"width:"+(G-b.offsetWidth)+"px;position:relative;float:right;");var D=window.innerWidth||document.documentElement.clientWidth;var E=function(N,T){if(N.imgDiv.style.position=="fixed"){return}if(T){for(key in T){try{if(!isNaN(T[key])&&T[key]){T[key]=parseInt(T[key])}}catch(O){}}}if(!x&&!ISQ.Widget.isFloat&&!T&&ISQ.Widget.isContained){N.imgDiv.style.display="none";ISQ.Widget.CDC.sendMessage("subject=getWindowAttributes");return}else{if(!N.imgDiv.isClosed){N.imgDiv.style.display="block"}}var P=function(Y){var Z=parseInt(Y.offsetTop);if(typeof Z!="number"||isNaN(Z)){Z=0}if(Y.parentNode){var aa=P(Y.parentNode);return(Z>aa)?Z:aa}else{return Z}};var L=N.container.offsetTop;var i=N.container.offsetTop+N.container.offsetHeight;var S=400;var M=parseInt(N.imgDiv.style.width.replace("px",""));var V=window.innerHeight||document.documentElement.clientHeight;if(x){var R=40;L+=R;var W=window.pageYOffset||(document.documentElement||document.body.parentNode||document.body).scrollTop;var X=(W+R-P(N.container))+(V-N.imgDiv.offsetHeight)/2;var Q=document.body.scrollLeft+(N.container.offsetWidth-N.imgDiv.offsetWidth)+N.container.offsetLeft-20}else{if(!ISQ.Widget.isContained){var X=I.scrollTop+(V-N.imgDiv.offsetHeight)/2;var Q=I.scrollLeft+(N.container.offsetWidth-N.imgDiv.offsetWidth)+N.container.offsetLeft}else{if(ISQ.Widget.isFloat){var X=ISQ.Widget.HTML.contentWrapper.offsetTop+ISQ.Widget.HTML.contentWrapper.scrollTop+(ISQ.Widget.HTML.contentWrapper.offsetHeight-N.imgDiv.offsetHeight)/2}else{if(T){var U=(e.offsetHeight>T.height)?parseInt(T.height):parseInt(e.offsetHeight);var X=parseInt(T.scrollTop)-parseInt(ISQ.Widget.HTML.contentWrapper.offsetTop)+((U-parseInt(N.imgDiv.offsetHeight))/2)-parseInt(T.offsetTop)}}var Q=N.container.scrollLeft+(N.container.offsetWidth-N.imgDiv.offsetWidth)+N.container.offsetLeft-20}}if(X<L){X=L}if(!x&&!ISQ.Widget.isFloat&&T){if(X+N.imgDiv.offsetHeight>i){X=i-N.imgDiv.offsetHeight
}}else{if(X+N.imgDiv.offsetHeight>i){X=i-N.imgDiv.offsetHeight}}if(!x){X-=L}if(isNaN(X)){X=0}N.imgDiv.style.top=X+"px";N.imgDiv.style.left=Q+"px";if(ISQ.Widget.isFloat){N.imgDiv.style.left="auto";N.imgDiv.style.right="15px"}};var K=function(i){if(ISQ.Export.currentAnswerElement.wmElement&&ISQ.Export.currentAnswerElement.wmElement.imgDiv.style.display=="none"&&!i){return}if(ISQ.Export.currentAnswerElement.wmElement!=null){E(ISQ.Export.currentAnswerElement.wmElement,i)}};var J=function(i){if(ISQ.Export.currentAnswerElement.wmElement&&ISQ.Export.currentAnswerElement.wmElement.imgDiv.style.display=="none"){return}ISQ.Export.wmWidgetSize(b,F);if(ISQ.Export.currentAnswerElement.wmElement!=null){E(ISQ.Export.currentAnswerElement.wmElement,i)}};if(H){window.addEvents(I||H,"onscroll",K);window.addEvents(H,"onresize",J)}else{ISQ.Widget.embedCallback=K}var k=b.querySelectorAll(".pointer[data-image-url]");if(k.length>0){a.className+=" wmCss"}if(k.length>0){var m=100;var l=80;var z=0;var y=0;for(var n=0;n<k.length;n++){var w=k[n].getAttribute("data-width")-0;if(z<w&&w<1000){z=w}var q=k[n].getAttribute("data-height")-0;if(y<q&&q<1000){y=q}}if(parseInt(y)>parseInt(ISQ.Export.currentMaxHeight)){ISQ.Export.currentMaxHeight=y}if(parseInt(z)>parseInt(ISQ.Export.currentMaxWidth)){ISQ.Export.currentMaxWidth=z}if(x){b.style.width=a.offsetWidth-(30+parseInt(ISQ.Export.currentMaxWidth))+"px"}else{if(ISQ.Widget.HTML.contentWrapper){b.style.width=(550>D)?"100%":"550px"}else{b.style.width="550px"}}ISQ.Export.currentHeight=(m+parseInt(ISQ.Export.currentMaxHeight))+100;ISQ.Export.currentWidth=550+parseInt(ISQ.Export.currentMaxWidth)}else{d.style.width="auto"}for(var n=0;n<k.length;n++){var h=k[n];h.answerElement=a;h.container=e||a;var v=h.getAttribute("data-image-url");var w=h.getAttribute("data-width");var q=h.getAttribute("data-height");var t=h.getAttribute("data-position-top");var s=h.getAttribute("data-position-left");var A=h.getAttribute("data-pointer-url");var u=(360-w)/2;if(u<0){u=30}var C=1;var p;p=createDiv(a,".hoverImagesClass&width:"+w+"px;height:"+q+"px;background-size:100%;");
var o=document.createElement("img");o.src=v;o.style.cssText="width:100%";o.style.display="none";p.appendChild(o);if(w>350){C=350/w;w=350;q=(q*C)+"px";h.setAttribute("data-width",w);h.setAttribute("data-height",q);h.setAttribute("data-position-top",t*C);h.setAttribute("data-position-left",s*C);t=h.getAttribute("data-position-top");s=h.getAttribute("data-position-left")}var r=createElement("img");r.style.cssText="position:absolute;left:"+(s-20)+"px;top:"+(t-20)+"px;";r.src=A;p.appendChild(r);p.pointer=r;h.imgDiv=p;h.style.color="#E60000";h.style.cursor="pointer";var f=function(){var i=ISQ.Html.getElementsByClassName(a,"hoverImagesClass");for(var L=0;L<i.length;L++){i[L].style.opacity=0}};h.linkAction=function(L,M){ISQ.Export.currentAnswerElement=this.answerElement;var i=(window.innerWidth||document.documentElement.clientWidth)<850&&!ISQ.Widget.isFloat;if(!M&&i){return}if(this.answerElement.wmElement&&this.answerElement.wmElement!=this){this.answerElement.wmElement.imgDiv.style.display="none"}this.answerElement.wmElement=this;this.answerElement.wmElement.visible=true;if(ISQ.Export.popupTimer){clearInterval(ISQ.Export.popupTimer)}f();this["imgDiv"].style.opacity=1;this["imgDiv"].isClosed=false;this["imgDiv"].style.cursor="pointer";this["imgDiv"].style.display="block";this["imgDiv"].firstChild.style.display="block";ISQ.Export.wmWidgetSize(this.answerElement.answerDiv,F);E(this);ISQ.Export.AddBlocker(window.innerWidth||document.documentElement.clientWidth)};h.onmouseover=h.linkAction;h.onclick=function(i){this.linkAction(i,true)};if(n==0&&(ISQ.Export.questionCounter==0||x)){ISQ.Export.questionCounter++;E(h);if(D>849||ISQ.Widget.isFloat){a.wmElement=h;h.imgDiv.style.opacity=1}}h.imgDiv.style.display="none"}if(x){var j=window.document.body.scrollHeight;checkScrollChanged=function(){if(window.document.body.scrollHeight!=j){j=window.document.body.scrollHeight;K()}};setInterval(checkScrollChanged,200)}if(a.addEventListener){a.addEventListener("mouseenter",function(){ISQ.Export.currentAnswerElement=this})}else{a.attachEvent("onmouseenter",function(){ISQ.Export.currentAnswerElement=this
})}if(a.wmElement!=null){ISQ.Widget.elementsArr.push(a.wmElement)}ISQ.Widget.wmElements.push({c:b,w:F});if(ISQ.Widget.isFloat||!x){if(ISQ.Widget.wmElements.length==1){setTimeout(function(){ISQ.Export.wmWidgetSize(ISQ.Widget.wmElements[0].c,ISQ.Widget.wmElements[0].w);ISQ.Export.questionCounter=0;for(var L=ISQ.Widget.elementsArr.length-1;L>=0;L--){a.wmElement=ISQ.Widget.elementsArr[L];a.wmElement.linkAction(null,false)}ISQ.Widget.wmElements=[];ISQ.Widget.elementsArr=[];ISQ.Widget.HTML.dynamicSize_sendMessage()},500)}}else{ISQ.Export.wmWidgetSize(b,F);if(a.wmElement!=null&&B==0){setTimeout(function(){a.wmElement.linkAction(null,false)},500)}}if(!x){return d}};if(!ISQ.Widget){ISQ.Widget={}}ISQ.Widget.wmElements=[];ISQ.Widget.elementsArr=[];</script>
    <script type="text/javascript" mini="true">ISQ.Widget=initializeNS("ISQ.Widget");ISQ.Widget.enumState={questions:1,autoQuestions:2,allQuestions:3,chat:4,chatSurvey:8,chatEnded:20,allChat:28,contactForm:32,customLink:64,nonChatEscalations:96,allEscalations:124};ISQ.Widget.enumMobileHandlingMode={none:0,inactive:1,normalWidget:2};initializeNS("ISQ.Widget.Texts");ISQ.Widget.Texts.available=["en","de","ar","zh","ru","ja","ko","fr","iw","it","nl","pt","es","sv"];ISQ.Widget.account="";ISQ.Widget.dynamicHost="";ISQ.Widget.configId="";ISQ.Widget.cdcFrame="";ISQ.Widget.sendingCDCMessages=false;ISQ.Widget.cdcVersion="1";ISQ.Widget.onloadQuestion="";ISQ.Widget.onloadQuestionId="";ISQ.Widget.onloadQuestionIdFromURL=false;ISQ.Widget.lastQuestionId="";ISQ.Widget.isFloat=false;ISQ.Widget.isFullScreen=false;ISQ.Widget.isContained=false;ISQ.Widget.spriteLoaded=false;ISQ.Widget.skinName=null;ISQ.Widget.referer={normal:"",escaped:"",encoded:false};ISQ.Widget.state=ISQ.Widget.enumState.questions;ISQ.Widget.userActive=false;ISQ.Widget.lastQueryKeyTime=0;ISQ.Widget.updateQueryDiff_ms=2000;ISQ.Widget.customTitle="";ISQ.Widget.customTeaserText="";ISQ.Widget.dynamicSize=false;ISQ.Widget.dynamicMaxSize=0;ISQ.Widget.mobileHandlingMode=ISQ.Widget.enumMobileHandlingMode.none;ISQ.Widget.isPreview=ISQ.Http.hashArguments.preview==="true"||ISQ.Http.urlArguments.preview==="true";ISQ.Widget.reportEvents=ISQ.Http.hashArguments.reportevents==="true";ISQ.Widget.rtlCssLoaded=false;ISQ.Widget.TranslationHelper={};ISQ.Widget.TranslationHelper.languageEnabled=false;ISQ.Widget.TranslationHelper.detectedLanguage=null;ISQ.Widget=initializeNS("ISQ.Widget");ISQ.Widget.iChat=ISQ.Base.extend({name:"ISQ.Widget.iChat",abstractClass:true});ISQ.Widget.iChat=ISQ.Widget.iChat;ISQ.Widget.iChat.END_SENTENCE_MARKS=[".","!","?","\n"," "];ISQ.Widget.iChat.LINE_MAX_LENGTH=600;ISQ.Widget.iChat.instance=null;ISQ.Widget.iChat.defaultInstance=null;ISQ.Widget.iChat.chatCookieName="chatForResume";ISQ.Widget.iChat.enumState={preinit:0,initiated:1,available:2,requestingChat:4,preChat:8,resumeChat:16,chat:32,userActive:1024};
ISQ.Widget.iChat.enumMessageType={visitor_text:0,agent_text:1,system:2,visitor_id:3,agent_id:4,requestChat:5,chatStarted_agent:6,chatStarted_visitor:7,chatEnded:8};ISQ.Widget.iChat.enumRequestChatStatus={inChat:0,requestingChat:1,newChat:2,resumingChat:3,preChat:4,popup:5};ISQ.Widget.iChat.closeSurvey=function(){if(!ISQ.Widget.iChat.instance){return}ISQ.Widget.iChat.instance.mChatSurvey.closeSurvey()};ISQ.Widget.iChat.submitSurvey=function(){if(!ISQ.Widget.iChat.instance){return}ISQ.Widget.iChat.instance.mChatSurvey.submitSurvey()};ISQ.Widget.iChat.abstractClass.onRequestChat;ISQ.Widget.iChat.abstractClass.onEndChat;ISQ.Widget.iChat.abstractClass.onChatStopped;ISQ.Widget.iChat.abstractClass.onChatError;ISQ.Widget.iChat.abstractClass.onChatStarted;ISQ.Widget.iChat.abstractClass.onSendMessage;ISQ.Widget.iChat.abstractClass.onSendAnswerId;ISQ.Widget.iChat.abstractClass.onUserTyping;ISQ.Widget.iChat.abstractClass.supportingEmailChat;ISQ.Widget.iChat.abstractClass.emailChat;ISQ.Widget.iChat.abstractClass.agentName;ISQ.Widget.iChat.abstractClass.getDataToSave;ISQ.Widget.iChat.abstractClass.showPostChat;ISQ.Widget.iChat.prototype.ctor=function(a){if(ISQ.Widget.iChat.instance&&ISQ.Widget.iChat.instance!==ISQ.Widget.iChat.defaultInstance){ISQ.Widget.iChat.instance.dispose()}ISQ.Widget.iChat.instance=this;if(a.isDefault){ISQ.Widget.iChat.defaultInstance=this}this.mConfig=a.config;this.hAgentTyping=a.hAgentTyping;this.hIncomingMessage=a.hIncomingMessage;this.hChatEnded=a.hChatEnded;this.hChatStarted=a.hChatStarted;this.hResumingChat=a.hResumingChat;this.hChatRequested=a.hChatRequested;this.hChatAvailableChanged=a.hChatAvailableChanged;this.hConnectionError=a.hConnectionError;this.hShowActionBar=a.hShowActionBar};ISQ.Widget.iChat.prototype.dtor=function(){};ISQ.Widget.iChat.prototype.sendMessage_internal=function(k,o){if(!this.inChat()){if(!this.requestingChat()){return}if(!this.mPendingMessages){this.mPendingMessages=[]}this.mPendingMessages.push(k);this.saveChatForResume()}else{this.userTyping(false);var j=k.text;var c=ISQ.Data.getURLencodedString(ISQ.Data.unHTML(j));
if(!this.mMessagesQueue){this.mMessagesQueue=[];var l=this;var e=function(q){setTimeout(function(){var r=l.mMessagesQueue[q++];r.sendFunction(r.message);ISQ.Widget.Log.add("chat message sent");if(q!==l.mMessagesQueue.length){e(q)}else{l.mMessagesQueue=null}},20)};e(0)}if(c.length<=ISQ.Widget.iChat.LINE_MAX_LENGTH){this.mMessagesQueue.push({message:j,sendFunction:o})}else{var p=0,d=ISQ.Widget.iChat.LINE_MAX_LENGTH;var g=-1;while(d<c.length){d=Math.min(c.length,p+ISQ.Widget.iChat.LINE_MAX_LENGTH);if(d!==c.length){var h=-1;var b=0;for(var f=0;f<ISQ.Widget.iChat.END_SENTENCE_MARKS.length;f++){var a=ISQ.Data.getURLencodedString(ISQ.Widget.iChat.END_SENTENCE_MARKS[f]);g=c.LastIndexOf(a,d);if(g<p){continue}if(g>h){h=g;b=a.length}}d=h+b}var n=c.substring(p,d);if(n.length>0){var m=ISQ.Data.getURLdecodedString(n);this.mMessagesQueue.push({message:m,sendFunction:o})}p=d}}}};ISQ.Widget.iChat.prototype.sendMessage=function(a){if(!a){return}this.onSendMessage.apply(this,arguments)};ISQ.Widget.iChat.prototype.sendAnswerId=function(a){if(!a.id){return}a.type=ISQ.Widget.iChat.enumMessageType.visitor_id;this.onSendAnswerId.apply(this,arguments)};ISQ.Widget.iChat.prototype.userTyping=function(a){if(!this.inChat()){return}if(a===this.mUserTyping){return}this.mUserTyping=a;this.onUserTyping(a)};ISQ.Widget.iChat.prototype.requestChat=function(a){if(!a&&this.resumingChat()){this.mState|=ISQ.Widget.iChat.enumState.requestingChat;this.hChatRequested.handle(ISQ.Widget.iChat.enumRequestChatStatus.requestingChat);this.hChatRequested.handle(ISQ.Widget.iChat.enumRequestChatStatus.resumingChat);return true}else{if(!a&&this.inChat()){this.hChatRequested.handle(ISQ.Widget.iChat.enumRequestChatStatus.inChat);return true}else{if(!this.available()){this.hChatAvailableChanged.handle(false);return true}ISQ.Widget.CDC.sendMessage("subject=event&type=channelActivated&data="+ISQ.Tools.Base64.encodeString(ISQ.Data.jsonToString({type:"chat",query:_query(),channel:this.mConfig[this.mConfig.active],answer:ISQ.Widget.Query.currentAnswers&&ISQ.Widget.Query.currentAnswers[0]})));
this.mState|=ISQ.Widget.iChat.enumState.userActive;this.mState|=ISQ.Widget.iChat.enumState.requestingChat;if(this.mChatSurvey){this.mChatSurvey.dispose()}return this.onRequestChat(a)}}};ISQ.Widget.iChat.prototype.getAvailabilityPerAnswer=function(a){return false};ISQ.Widget.iChat.prototype.setChatNotActive=function(){this.mActive=false};ISQ.Widget.iChat.prototype.endChat=function(){this.deleteChatFromResume();if((this.mState&~ISQ.Widget.iChat.enumState.userActive)<ISQ.Widget.iChat.enumState.requestingChat){return}if(this.inChat()&&this.mConfig.postChat){this.showPostChat()}this.mState&=~ISQ.Widget.iChat.enumState.chat;this.mState&=~ISQ.Widget.iChat.enumState.resumeChat;this.mState&=~ISQ.Widget.iChat.enumState.requestingChat;this.mPendingMessages=null;this.onEndChat()};ISQ.Widget.iChat.prototype.aboutToResumeChat=function(){this.mState|=ISQ.Widget.iChat.enumState.resumeChat;this.mState|=ISQ.Widget.iChat.enumState.available;this.hResumingChat.handle()};ISQ.Widget.iChat.prototype.chatStarted=function(){if(!this.mActive){return}this.mState|=ISQ.Widget.iChat.enumState.chat;this.mState&=~ISQ.Widget.iChat.enumState.requestingChat;this.onChatStarted.apply(this,arguments);this.hChatStarted.handle();if(this.mPendingMessages){for(var a=0;a<this.mPendingMessages.length;++a){if(this.mPendingMessages[a].type===ISQ.Widget.iChat.enumMessageType.visitor_id){this.sendAnswerId(this.mPendingMessages[a])}else{this.sendMessage(this.mPendingMessages[a].text)}}this.mPendingMessages=null}this.saveChatForResume()};ISQ.Widget.iChat.prototype.connectionError=function(){this.mState&=~ISQ.Widget.iChat.enumState.chat;this.mState&=~ISQ.Widget.iChat.enumState.requestingChat;this.mState&=~ISQ.Widget.iChat.enumState.resumeChat;this.mState&=~ISQ.Widget.iChat.enumState.preChat;this.onChatStopped.apply(this,arguments);this.deleteChatFromResume();this.hConnectionError.handle()};ISQ.Widget.iChat.prototype.chatStopped=function(b){var a=(this.mState&ISQ.Widget.iChat.enumState.chat)>0;if(!a){return}this.mState&=~ISQ.Widget.iChat.enumState.requestingChat;this.mPendingSessionKey=null;
this.onChatStopped.apply(this,arguments);this.deleteChatFromResume();if(this.resumingChat()){this.mState&=~ISQ.Widget.iChat.enumState.available;this.mState&=~ISQ.Widget.iChat.enumState.resumeChat}this.hChatEnded.handle.apply(this.hChatEnded,arguments)};ISQ.Widget.iChat.prototype.chatError=function(){if(!this.inChat()){return}this.mState|=~ISQ.Widget.iChat.enumState.chat;this.mState&=~ISQ.Widget.iChat.enumState.requestingChat;this.onChatError.apply(this,arguments);if(this.resumingChat()){this.mState&=~ISQ.Widget.iChat.enumState.available;this.mState&=~ISQ.Widget.iChat.enumState.resumeChat}this.hChatEnded.handle.apply(this.hChatEnded,arguments)};ISQ.Widget.iChat.prototype.agentTyping=function(a){this.hAgentTyping.handle(a)};ISQ.Widget.iChat.prototype.saveChatForResume=function(){var a=this.getDataToSave();if(!a){return}_session().persistentSession(a);clearTimeout(this.mCookieTimer);var b=this;this.mCookieTimer=setTimeout(function(){_session().persistentSession(a);b.mCookieTimer=setTimeout(arguments.callee,10*1000)},10*1000)};ISQ.Widget.iChat.prototype.deleteChatFromResume=function(){clearTimeout(this.mCookieTimer);_session().deleteSession();ISQ.Widget.CDC.sendMessage("subject=chatEnded")};ISQ.Widget.iChat.prototype.getChatToResume=function(){var b=_session().loadSession();if(!b.result){return null}return b;var a=ISQ.Tools.Storage.get(ISQ.Widget.iChat.chatCookieName,true);if(!a){a=ISQ.Http.Cookies._read(ISQ.Widget.iChat.chatCookieName);if(a){a=unescape(a)}}if(!a){return null}ISQ.Tools.Storage.remove(ISQ.Widget.iChat.chatCookieName,true);ISQ.Http.Cookies._delete(ISQ.Widget.iChat.chatCookieName,"/widget",ISQ.Http.domain())};ISQ.Widget.iChat.prototype.available=function(){return(this.mState&ISQ.Widget.iChat.enumState.available)==ISQ.Widget.iChat.enumState.available};ISQ.Widget.iChat.prototype.beforeChatAvailableChanged=function(a){a=a===true;if(this.available()===a){return}if(this.hChatAvailableChanged){this.hChatAvailableChanged.handle(a)}};ISQ.Widget.iChat.prototype.inPreChat=function(){return(this.mState&ISQ.Widget.iChat.enumState.preChat)==ISQ.Widget.iChat.enumState.preChat
};ISQ.Widget.iChat.prototype.resumingChat=function(){return(this.mState&ISQ.Widget.iChat.enumState.resumeChat)==ISQ.Widget.iChat.enumState.resumeChat};ISQ.Widget.iChat.prototype.inChat=function(){return(this.mState&ISQ.Widget.iChat.enumState.chat)==ISQ.Widget.iChat.enumState.chat};ISQ.Widget.iChat.prototype.requestingChat=function(){return(this.mState&ISQ.Widget.iChat.enumState.requestingChat)==ISQ.Widget.iChat.enumState.requestingChat};ISQ.Widget.iChat.prototype.userActive=function(){return(this.mState&ISQ.Widget.iChat.enumState.userActive)==ISQ.Widget.iChat.enumState.userActive};ISQ.Widget.iChat.prototype.pendingMessages=function(){return this.mPendingMessages};ISQ.Widget.iChat.prototype.setVisitorId=function(){};ISQ.Widget.iChat.prototype.mActive=true;ISQ.Widget.iChat.prototype.hChatStarted=null;ISQ.Widget.iChat.prototype.hChatEnded=null;ISQ.Widget.iChat.prototype.hIncomingMessage=null;ISQ.Widget.iChat.prototype.hAgentTyping=null;ISQ.Widget.iChat.prototype.hResumingChat=null;ISQ.Widget.iChat.prototype.hChatRequested=null;ISQ.Widget.iChat.prototype.hChatAvailableChanged=null;ISQ.Widget.iChat.prototype.hConnectionError=null;ISQ.Widget.iChat.prototype.handleCDCMessage=function(a){};ISQ.Widget.iChat.prototype.mConfig=null;ISQ.Widget.iChat.prototype.mState=ISQ.Widget.iChat.enumState.init;ISQ.Widget.iChat.prototype.mPendingMessages=null;ISQ.Widget.iChat.prototype.mMessagesQueue=null;ISQ.Widget.iChat.prototype.mChatSurvey=null;ISQ.Widget.iChat.prototype.mUserTyping=false;ISQ.Widget.iChat.prototype.mCookieTimer=null;ISQ.Widget.iChat.ChatSurvey=ISQ.Base.extend({name:"ISQ.Widget.iChat.ChatSurvey",abstractClass:true});ISQ.Widget.iChat.ChatSurvey.abstractClass.onSubmit;ISQ.Widget.iChat.ChatSurvey.abstractClass.onBuild;ISQ.Widget.iChat.ChatSurvey.abstractClass.init;ISQ.Widget.iChat.ChatSurvey.abstractClass.onSurveyFinished;ISQ.Widget.iChat.ChatSurvey.prototype.ctor=function(){ISQ.Widget.Suggestions.hide(_("chatSuggestions"));ISQ.Widget.Suggestions.hide(_("searchSuggestions"))};ISQ.Widget.iChat.ChatSurvey.prototype.dtor=function(){_("actionBarChatSurvey").style.display="none"
};ISQ.Widget.iChat.ChatSurvey.prototype.setChatState=function(a){switch(a){case"pre":ISQ.Widget.iChat.instance.mState|=ISQ.Widget.iChat.enumState.preChat;break}};ISQ.Widget.iChat.ChatSurvey.prototype.build=function(a){ISQ.Widget.Chat.prepereSurveyPane();this.showLoadingAnim(ISQ.Widget.HTML.chatPane);this.onBuild(a,ISQ.Widget.HTML.chatPane)};ISQ.Widget.iChat.ChatSurvey.prototype.showSurvey=function(a){this.mLoadingAnimation.animDiv.parentNode.removeChild(this.mLoadingAnimation.animDiv);this.mLoadingAnimation.dispose();this.mSurveyContainer=a;a.style.direction=ISQ.Widget.Texts[ISQ.Cnf.initialUiLanguage]["dir"];_("chatSurveySubmitButton").innerHTML=ISQ.Widget.Texts[ISQ.Cnf.initialUiLanguage]["sendBtn"];_("chatSurveyCloseButton").innerHTML=ISQ.Widget.Texts[ISQ.Cnf.initialUiLanguage]["cancel"];ISQ.Widget.HTML.fixContentWidths();var b=function(){_("actionBarChatSurvey").style.display="block";_("actionBarQuery").style.display="none";ISQ.Widget.HTML.dynamicSize_sendMessage()};if(ISQ.Widget.HTML.canPerformFade(this.mSurveyContainer)){if(this.mFader===null){this.mFader=new VisualEffects.Fade(this.mSurveyContainer);this.mFader.fadeInEvent.addHandler(b)}this.mFader.setOpacity(0);this.mFader.fadeIn(200,true)}else{b()}};ISQ.Widget.iChat.ChatSurvey.prototype.surveyCanceled=function(){ISQ.Widget.Chat.endChat(this.mState,true);this.dispose()};ISQ.Widget.iChat.ChatSurvey.prototype.surveyFinished=function(){this.onSurveyFinished();_("widgetBlocker").style.display="none";if(this.mLoadingAnimation&&this.mLoadingAnimation.animDiv){this.mLoadingAnimation.animDiv.parentNode.removeChild(this.mLoadingAnimation.animDiv);this.mLoadingAnimation.dispose()}this.dispose()};ISQ.Widget.iChat.ChatSurvey.prototype.submitSurvey=function(){this.showLoadingAnim(clearNode(_("blockerContent")));_("widgetBlocker").style.display="block";if(ISQ.Http.browser.isIE7||ISQ.Http.browser.isIE6){_("widgetBlocker").style.height=ISQ.Widget.HTML.contentWrapper.offsetHeight}if(!this.onSubmit()){_("widgetBlocker").style.display="none";this.mLoadingAnimation.animDiv.parentNode.removeChild(this.mLoadingAnimation.animDiv);
this.mLoadingAnimation.dispose()}};ISQ.Widget.iChat.ChatSurvey.prototype.submitSurveySuccess=function(c,a,b){_("widgetBlocker").style.display="none";if(this.mLoadingAnimation.animDiv){this.mLoadingAnimation.animDiv.parentNode.removeChild(this.mLoadingAnimation.animDiv);this.mLoadingAnimation.dispose()}this.closeSurvey(c,b)};ISQ.Widget.iChat.ChatSurvey.prototype.submitSurveyError=function(a){_("widgetBlocker").style.display="none";if(this.mLoadingAnimation.animDiv){this.mLoadingAnimation.animDiv.parentNode.removeChild(this.mLoadingAnimation.animDiv);this.mLoadingAnimation.dispose()}this.surveyCanceled()};ISQ.Widget.iChat.ChatSurvey.prototype.closeSurvey=function(b,d){var a=null;var c=this;if((ISQ.Widget.iChat.instance.mState&ISQ.Widget.iChat.enumState.preChat)==ISQ.Widget.iChat.enumState.preChat){a=function(){if(b){c.surveyFinished()}else{c.surveyCanceled()}ISQ.Widget.iChat.instance.mState&=~ISQ.Widget.iChat.enumState.preChat}}else{a=function(){c.surveyFinished()}}if(!d&&ISQ.Widget.HTML.canPerformFade(this.mSurveyContainer)){this.mFader.fadeOutEvent.clear();this.mFader.fadeOutEvent.addHandler(a);this.mFader.fadeOut(100)}else{a()}};ISQ.Widget.iChat.ChatSurvey.prototype.showLoadingAnim=function(c){var a=createDiv(c,".surveyLoading");var b=createDiv(a,"float:left;").innerHTML="Please wait...";this.mLoadingAnimation=new ISQ.GUI.ProgressAnimation({container:createDiv(a,".searchAnim &float:left;")});this.mLoadingAnimation.show();this.mLoadingAnimation.animDiv=a};ISQ.Widget.iChat.ChatSurvey.prototype.mLoadingAnimation=null;ISQ.Widget.iChat.ChatSurvey.prototype.mSurveyContainer=null;ISQ.Widget.iChat.ChatSurvey.prototype.mFader=null;ISQ.Widget.Proxy=initializeNS("ISQ.Widget.Proxy");ISQ.Widget.Proxy.Chat={sendMessage:function(b,a){_it(b,function(c){c.cdcUser.sendMessage("subject=chat&"+a)})}};ISQ.Widget.Proxy.Chat.LiveChatInc={enumStates:{none:0,loaded:1,availabilityReceived:2},mState:0,mAvailable:false,mPendingWidgets:[],start:function(a,b,c){if(a=="loadChat"){this.load(b,c)}else{LC_API.open_chat_window()}},load:function(c,d){if(this.mState>=this.enumStates.loaded){if(this.mState>=this.enumStates.availabilityReceived){if(d.cdcUser){ISQ.Widget.Proxy.Chat.sendMessage([d],"type=available&data="+this.mAvailable)
}else{if(this.mAvailable==="true"){d.mState|=ISQ.Widget.iChat.enumState.available}else{d.mState&=~ISQ.Widget.iChat.enumState.available}}}else{this.mPendingWidgets.push(d)}return}else{this.mPendingWidgets.push(d)}this.mState=this.enumStates.loaded;var e=document.head.getElementsByTagName("script");for(var a=0;a<e.length;a++){if(e[a].src.indexOf("livechatinc")!=-1){this.mAvailable=LC_API.agents_are_available();if(d.cdcUser){ISQ.Widget.Proxy.Chat.sendMessage([d],"type=available&data="+this.mAvailable)}else{if(this.mAvailable==="true"){d.mState|=ISQ.Widget.iChat.enumState.available}else{d.mState&=~ISQ.Widget.iChat.enumState.available}}this.mState=this.enumStates.availabilityReceived;return}}window.__lc={};window.LC_API={};window.__lc.license=c.LiveChatInc.id;window.LC_API.on_chat_ended=function(){window.LC_API.hide_chat_window()};if(!c.popup.enabled){window.LC_API.on_chat_started=function(f){window.LC_API.open_chat_window()}}var b=this;window.LC_API.on_before_load=function(){window.LC_API.hide_chat_window()};window.LC_API.on_after_load=function(){if(!window.LC_API.chat_running()||c.popup.enabled){window.LC_API.hide_chat_window()}b.mAvailable=LC_API.agents_are_available();if(d.cdcUser){ISQ.Widget.Proxy.Chat.sendMessage(b.mPendingWidgets,"type=available&data="+b.mAvailable)}else{if(b.mAvailable==true){d.mState|=ISQ.Widget.iChat.enumState.available}else{d.mState&=~ISQ.Widget.iChat.enumState.available}}b.mState=b.enumStates.availabilityReceived};url="//"+c.LiveChatInc.server+"/tracking.js";ISQ.Tools.appendScript(url)}};ISQ.Widget.Proxy.Chat.Zopim={enumStates:{none:0,loaded:1,availabilityReceived:2},mState:0,mAvailable:false,mPendingWidgets:[],start:function(a,b,c){if(a=="loadChat"){this.load(b,c)}else{if(b.popup.enabled){$zopim.livechat.window.openPopout()}else{$zopim.livechat.window.show()}}},load:function(c,d){if(this.mState>=this.enumStates.loaded){if(this.mState>=this.enumStates.availabilityReceived){if(d.cdcUser){ISQ.Widget.Proxy.Chat.sendMessage([d],"type=available&data="+this.mAvailable)}else{if(this.mAvailable==true){d.mState|=ISQ.Widget.iChat.enumState.available
}else{d.mState&=~ISQ.Widget.iChat.enumState.available}}}else{this.mPendingWidgets.push(d)}return}else{this.mPendingWidgets.push(d)}this.mState=this.enumStates.loaded;var b=this;var f=function(){if(!$zopim.livechat){return}if(!$zopim.livechat.isChatting()||c.popup.enabled){$zopim.livechat.hideAll()}$zopim.livechat.setOnChatEnd(function(){$zopim.livechat.hideAll()});$zopim.livechat.window.onHide(function(){if(!$zopim.livechat.isChatting()||c.popup.enabled){$zopim.livechat.hideAll()}});var g=function(h){if(h=="online"){b.mAvailable=true}else{b.mAvailable=false}if(d.cdcUser){ISQ.Widget.Proxy.Chat.sendMessage(b.mPendingWidgets,"type=available&data="+b.mAvailable)}else{if(b.mAvailable==true){d.mState|=ISQ.Widget.iChat.enumState.available}else{d.mState&=~ISQ.Widget.iChat.enumState.available}}b.mState=b.enumStates.availabilityReceived};$zopim.livechat.setOnStatus(g)};var e=document.head.getElementsByTagName("script");for(var a=0;a<e.length;a++){if(e[a].src.indexOf("zopim")!=-1){f();return}}window.$zopim||(function(h,k){var l=$zopim=function(m){l._.push(m)},g=l.s=h.createElement(k),j=h.getElementsByTagName(k)[0];l.set=function(m){l.set._.push(m)};l._=[];l.set._=[];g.async=!0;g.setAttribute("charset","utf-8");g.src=(window.location.protocol==="https:"?"https:":"http:")+c.Zopim.server+"?"+c.Zopim.id;l.t=+new Date;g.type="text/javascript";if(f){if(ISQ.Http.browser.app!=="ie"||ISQ.Http.browser.isIE11){g.onload=f}else{g.onreadystatechange=function(){if(this.readyState!=="complete"&&this.readyState!=="loaded"){return}f()}}}j.parentNode.insertBefore(g,j)})(document,"script")}};ISQ.Widget.Proxy.Chat.SnapEngage={enumStates:{none:0,loaded:1,availabilityReceived:2},mState:0,mAvailable:false,mPendingWidgets:[],start:function(a,b,c){if(a=="loadChat"){this.load(b,c)}else{SnapEngage.startLink()}},load:function(c,f){var b=this;if(this.mState>=this.enumStates.loaded){if(this.mState>=this.enumStates.availabilityReceived){if(f.cdcUser){ISQ.Widget.Proxy.Chat.sendMessage(b.mPendingWidgets,"type=available&data="+b.mAvailable)}}else{this.mPendingWidgets.push(f)
}return}else{this.mPendingWidgets.push(f)}this.mState=this.enumStates.loaded;var d=function(){if(typeof SnapEngage=="undefined"){return}SnapEngage.hideButton();SnapEngage.getAgentStatusAsync(function(h){if(h){b.mAvailable=true}else{b.mAvailable=false}if(f.cdcUser){ISQ.Widget.Proxy.Chat.sendMessage(b.mPendingWidgets,"type=available&data="+b.mAvailable)}b.mState=b.enumStates.availabilityReceived});SnapEngage.setCallback("Close",function(j,h){SnapEngage.hideButton()})};var g=document.head.getElementsByTagName("script");for(var a=0;a<g.length;a++){if(g[a].src.indexOf("snapengage")!=-1){d();return}}var e=(window.location.protocol==="https:"?"https:":"http:")+c.SnapEngage.server+c.SnapEngage.id+".js";ISQ.Tools.appendScript(e,d)}};ISQ.Widget.Proxy.Chat.Olark={enumStates:{none:0,loaded:1,availabilityReceived:2},mState:0,mAvailable:false,mPendingWidgets:[],start:function(a,b,c){if(a=="loadChat"){this.load(b,c)}else{olark("api.box.expand")}},load:function(d,e){if(this.mState>=this.enumStates.loaded){if(this.mState>=this.enumStates.availabilityReceived){if(e.cdcUser){ISQ.Widget.Proxy.Chat.sendMessage([e],"type=available&data="+this.mAvailable)}}else{this.mPendingWidgets.push(e)}return}else{this.mPendingWidgets.push(e)}this.mState=this.enumStates.loaded;var b=this;var c=function(){var g=function(h){b.mAvailable=h;if(e.cdcUser){ISQ.Widget.Proxy.Chat.sendMessage(b.mPendingWidgets,"type=available&data="+b.mAvailable)}b.mState=b.enumStates.availabilityReceived};olark.configure("box.start_hidden",true);olark("api.chat.onOperatorsAvailable",function(){g(true)});olark("api.chat.onOperatorsAway",function(){g(false)})};var f=document.head.getElementsByTagName("script");for(var a=0;a<f.length;a++){if(f[a].src.indexOf("olark")!=-1){c();return}}window.olark||(function(g){var j=window,h=document,k=j.location.protocol=="https:"?"https:":"http:",o=g.name,n="load";var m=function(){j[o]=function(){(l.s=l.s||[]).push(arguments)};var l=j[o]._={},r=g.methods.length;while(r--){(function(q){j[o][q]=function(){j[o]("call",q,arguments)}})(g.methods[r])
}l.l=g.loader;l.i=m;l.p={0:+new Date};l.P=function(q){l.p[q]=new Date-l.p[0]};function t(){l.P(n);j[o](n)}j.addEventListener?j.addEventListener(n,t,false):j.attachEvent("on"+n,t);var p=function(){function F(v){v="head";return["<",v,"></",v,"><",z,' onload="var d=',u,";d.getElementsByTagName('head')[0].",A,"(d.",y,"('script')).",B,"='",k,"//",l.l,"'",'"',"></",z,">"].join("")}var z="body",C=h[z];if(!C){return setTimeout(p,100)}l.P(1);var A="appendChild",y="createElement",B="src",D=h[y]("div"),H=D[A](h[y](o)),q=h[y]("iframe"),u="document",s="domain",E;D.style.display="none";C.insertBefore(D,C.firstChild).id=o;q.frameBorder="0";q.id=o+"-loader";if(/MSIE[ ]+6/.test(navigator.userAgent)){q.src="javascript:false"}q.allowTransparency="true";H[A](q);try{q.contentWindow[u].open()}catch(I){g[s]=h[s];E="javascript:var d="+u+".open();d.domain='"+h.domain+"';";q[B]=E+"void(0);"}try{var G=q.contentWindow[u];G.write(F());G.close()}catch(J){q[B]=E+'d.write("'+F().replace(/"/g,String.fromCharCode(92)+'"')+'");d.close();'}l.P(2)};p()};m()})({loader:"static.olark.com/jsclient/loader0.js",name:"olark",methods:["configure","extend","declare","identify"]});olark.identify(d.Olark.id);c()}};ISQ.Widget.Proxy.Chat.LiveEngage={enumStates:{none:0,loaded:1,availabilityReceived:2},mState:0,mAvailable:false,mPendingWidgets:[],log:function(a){var b=null;_it(this.mPendingWidgets,function(c){if(b===c){return}else{b=c}if(c.cdcUser){c.cdcUser.sendMessage("subject=widgetLog&entry="+a)}})},start:function(a,b,c){if(a=="loadChat"){this.load(b,c)}else{this.log("LivePerson LE2: opening chat window");if(window.lpTag.taglets.rendererStub.click(b.LiveEngage.engagementId)){this.log("LivePerson LE2: chat window opened");if(c.cdcUser){ISQ.Widget.Proxy.Chat.sendMessage(this.mPendingWidgets,"type=vendorwindowopened")}}}},load:function(h,j){var f=this;if(this.mState>=this.enumStates.loaded){if(this.mState>=this.enumStates.availabilityReceived){if(j.cdcUser){ISQ.Widget.Proxy.Chat.sendMessage(f.mPendingWidgets,"type=available&data="+f.mAvailable)}}else{this.mPendingWidgets.push(j)
}return}else{this.mPendingWidgets.push(j)}this.mState=this.enumStates.loaded;ISQ.Widget.leEngagementsMap=ISQ.Widget.leEngagementsMap||{};if(!ISQ.Widget.leEngagementsMap[h.LiveEngage.engagementId]){ISQ.Widget.leEngagementsMap[h.LiveEngage.engagementId]={}}var c=function(){if(ISQ.Widget.leTagLoadCallbackFired){return}else{ISQ.Widget.leTagLoadCallbackFired=true}f.log("LivePerson LE2: add listener for availability");var k=function(l,m){f.log("LivePerson LE2: availability ("+l+":"+m+")");f.mAvailable=m;if(j.cdcUser){ISQ.Widget.Proxy.Chat.sendMessage(f.mPendingWidgets,"type=available&data="+f.mAvailable)}f.mState=f.enumStates.availabilityReceived};var e=ISQ.Widget.leEngagementsMap;e[h.LiveEngage.engagementId]={};setInterval(function(){var m,l;for(var n in e){if(e.hasOwnProperty(n)){m=e[n];l=window.lpTag.taglets.rendererStub.getEngagementState(n).state;if(m.state!==l){m.state=l;k(n,m.state===1)}}}},500)};if(h.LiveEngage.engagementDivId&&!document.getElementById(h.LiveEngage.engagementDivId)){f.log('LivePerson LE2: creating element with id="'+h.LiveEngage.engagementDivId+'"');var a=document.createElement("div");a.id=h.LiveEngage.engagementDivId;a.style.display="none";document.body.appendChild(a);var g=window.lpTag&&window.lpTag.sdes&&typeof window.lpTag.sdes.send==="function";if(g){f.log("LivePerson LE2: notifying existing lpTag about new DIV");lpTag.sdes.send([{type:"pagediv",divId:h.LiveEngage.engagementDivId}])}else{f.log("LivePerson LE2: lpTag notify method does not exist -> lpTag should detect DIV automatically")}}if(!window.lpTag){f.log("LivePerson LE2: injecting lpTag");window.lpTag=window.lpTag||{};if(typeof window.lpTag._tagCount==="undefined"){window.lpTag={site:h.LiveEngage.id||"",section:lpTag.section||"",autoStart:lpTag.autoStart===false?false:true,ovr:lpTag.ovr||{},_v:"1.6.0",_tagCount:1,protocol:"https:",events:{bind:function(e,k,l){lpTag.defer(function(){lpTag.events.bind(e,k,l)},0)},trigger:function(e,k,l){lpTag.defer(function(){lpTag.events.trigger(e,k,l)},1)}},defer:function(e,k){if(k==0){this._defB=this._defB||[];
this._defB.push(e)}else{if(k==1){this._defT=this._defT||[];this._defT.push(e)}else{this._defL=this._defL||[];this._defL.push(e)}}},load:function(l,e,k){var m=this;setTimeout(function(){m._load(l,e,k)},0)},_load:function(m,e,k){var n=m;if(!m){n=this.protocol+"//"+((this.ovr&&this.ovr.domain)?this.ovr.domain:"lptag.liveperson.net")+"/tag/tag.js?site="+this.site}var l=document.createElement("script");l.setAttribute("charset",e?e:"UTF-8");if(k){l.setAttribute("id",k)}l.setAttribute("src",n);document.getElementsByTagName("head").item(0).appendChild(l)},init:function(){this._timing=this._timing||{};this._timing.start=(new Date()).getTime();var e=this;if(window.attachEvent){window.attachEvent("onload",function(){e._domReady("domReady")})}else{window.addEventListener("DOMContentLoaded",function(){e._domReady("contReady")},false);window.addEventListener("load",function(){e._domReady("domReady")},false)}if(typeof(window._lptStop)=="undefined"){this.load()}},start:function(){this.autoStart=true},_domReady:function(e){if(!this.isDom){this.isDom=true;this.events.trigger("LPT","DOM_READY",{t:e})}this._timing[e]=(new Date()).getTime()},vars:lpTag.vars||[],dbs:lpTag.dbs||[],ctn:lpTag.ctn||[],sdes:lpTag.sdes||[],ev:lpTag.ev||[]};lpTag.init()}else{window.lpTag._tagCount+=1}}else{f.log("LivePerson LE2: using existing lpTag")}var d=false;try{d=typeof window.lpTag.taglets.rendererStub.getEngagementState==="function"}catch(b){}if(d){f.log("LivePerson LE2: lpTag is fully loaded -> we can use its API");if(j.cdcUser&&ISQ.Widget.leEngagementsMap&&ISQ.Widget.leEngagementsMap[h.LiveEngage.engagementId]){ISQ.Widget.Proxy.Chat.sendMessage(f.mPendingWidgets,"type=available&data="+(ISQ.Widget.leEngagementsMap[h.LiveEngage.engagementId].state===1))}c()}else{f.log("LivePerson LE2: lpTag is not fully loaded -> waiting for button");window.lpTag.events.bind("LE_ENGAGER","SHOW",function(){c()})}window.lpTag.events.bind("lpUnifiedWindow","windowClosed",function(){f.log("LivePerson LE2: chat window closed");if(j.cdcUser){ISQ.Widget.Proxy.Chat.sendMessage(f.mPendingWidgets,"type=vendorwindowclosed")
}})}};ISQ.Widget.Proxy.Chat.SalesForce={enumStates:{none:0,loaded:1,availabilityReceived:2},mState:0,mAvailable:false,mPendingWidgets:[],log:function(a){_it(this.mPendingWidgets,function(b){if(b.cdcUser){b.cdcUser.sendMessage("subject=widgetLog&entry="+a)}})},start:function(a,b,c){if(a=="loadChat"){this.load(b,c)}else{this.log("SalesForce: opening chat window");if(b.popup&&b.popup.size&&b.popup.size.length===2){window.liveagent.setChatWindowWidth(+b.popup.size[0]);window.liveagent.setChatWindowHeight(+b.popup.size[1])}window.liveagent.startChat(b.SalesForce.buttonId)}},load:function(options,widget){var mthis=this;if(this.mState>=this.enumStates.loaded){if(this.mState>=this.enumStates.availabilityReceived){if(widget.cdcUser){ISQ.Widget.Proxy.Chat.sendMessage(mthis.mPendingWidgets,"type=available&data="+mthis.mAvailable)}}else{this.mPendingWidgets.push(widget)}return}else{this.mPendingWidgets.push(widget)}this.mState=this.enumStates.loaded;var apiScriptURL="https://"+options.SalesForce.deploymentDomain+"/content/g/js/38.0/deployment.js";if(!window._laq){window._laq=[]}window._laq.push(function(){window.liveagent.showWhenOnline(options.SalesForce.buttonId,document.createElement("div"));window.liveagent.showWhenOffline(options.SalesForce.buttonId,document.createElement("div"))});var SalesForce_Loaded=function(){mthis.log("SalesForce: API Loaded");window.liveagent.addButtonEventHandler(options.SalesForce.buttonId,function(eventType){switch(eventType){case window.liveagent.BUTTON_EVENT.BUTTON_AVAILABLE:updateAvailability(options.SalesForce.buttonId,true);break;case window.liveagent.BUTTON_EVENT.BUTTON_UNAVAILABLE:updateAvailability(options.SalesForce.buttonId,false);break;case window.liveagent.BUTTON_EVENT.BUTTON_ACCEPTED:mthis.log("SalesForce: chat window opened");break;case window.liveagent.BUTTON_EVENT.BUTTON_REJECTED:mthis.log("SalesForce: chat window closed");break}});if(options.SalesForce.initCode){try{eval(options.SalesForce.initCode)}catch(e){if(window.console&&typeof window.console.error==="function"){console.error(e)
}}}window.liveagent.init("https://"+options.SalesForce.apiDomain+"/chat",options.SalesForce.deploymentId,options.SalesForce.organizationId);var updateAvailability=function(buttonId,isOnline){mthis.log("SalesForce: Availability ("+buttonId+":"+isOnline+")");mthis.mAvailable=isOnline;if(widget.cdcUser){ISQ.Widget.Proxy.Chat.sendMessage(mthis.mPendingWidgets,"type=available&data="+mthis.mAvailable)}mthis.mState=mthis.enumStates.availabilityReceived}};mthis.log("SalesForce: injecting API");var se=document.createElement("script");se.type="text/javascript";se.async=true;se.src=apiScriptURL;var done=false;se.onload=se.onreadystatechange=function(){if(!done&&(!this.readyState||this.readyState==="loaded"||this.readyState==="complete")){SalesForce_Loaded()}};var s=document.getElementsByTagName("script")[0];s.parentNode.insertBefore(se,s)}};ISQ.Translation={};ISQ.Translation.Infra={};ISQ.Translation.Infra.rtlLanguages={iw:true,ar:true,ur:true,yi:true,he:true};ISQ.Translation.Infra.getLanguageDirection=function(a){return ISQ.Translation.Infra.rtlLanguages[a]==null?"ltr":"rtl"};ISQ.Widget.Log=initializeNS("ISQ.Widget.Log");ISQ.Widget.Log.statusEnum={RED:1,GREEN:2};ISQ.Widget.Log.openPopup=function(){if(!ISQ.Widget.Debug.enabled){return}if(ISQ.Widget.Log.window&&!ISQ.Widget.Log.window.closed){ISQ.Widget.Log.window.focus()}else{ISQ.Widget.Log.on()}};ISQ.Widget.Log.on=function(){var c=560;var b=screen.width-c-20;ISQ.Widget.Debug.enabled=false;var d=window.open("","nanoRepLog","width="+c+",height=330,left="+b+",top=0,scrollbars=yes");if(!d){return}if(!d.document){return}try{d.document.open();d.document.write("<html><title>widget log</title>");d.document.write("<body style='margin:10px; font-size:12px; font-family:arial;'>");d.document.write("<div id='logComments' style='width:95%; height:100%;'>");if(ISQ.Widget.Log.messages){d.document.write(ISQ.Widget.Log.messages.join(""));ISQ.Widget.Log.messages=null}d.document.write("</div></body></html>");d.document.close();ISQ.Widget.Log.window=d;ISQ.Widget.Log.element=d.document.getElementById("logComments");
ISQ.Widget.Debug.enabled=true;ISQ.Widget.Log.autoScroll()}catch(a){ISQ.Widget.Debug.enabled=false}};ISQ.Widget.Log.add=function(k,j){try{if(!ISQ.Widget.Debug.enabled){return}j=j||ISQ.Widget.Log.statusEnum.GREEN;var b="";if(j===ISQ.Widget.Log.statusEnum.GREEN){b="#006600"}else{if(j===ISQ.Widget.Log.statusEnum.RED){b="#BB0000";ISQ.Widget.Log.openPopup()}}var c=new Date();var h=[];h.push(c.ToString("%d/%m/%y %H:%M:%S"));h.push("  -  ");h.push(k);if(ISQ.Widget.Log.element){var g=ISQ.Widget.Log.window.document.createElement("span");g.style.color=b;g.innerHTML=h.join("");ISQ.Widget.Log.element.appendChild(g);var a=ISQ.Widget.Log.window.document.createElement("br",ISQ.Widget.Log.element);ISQ.Widget.Log.element.appendChild(a);ISQ.Widget.Log.autoScroll()}else{if(!ISQ.Widget.Log.messages){ISQ.Widget.Log.messages=[]}ISQ.Widget.Log.messages.push('<span style="color:');ISQ.Widget.Log.messages.push(b);ISQ.Widget.Log.messages.push('">');ISQ.Widget.Log.messages.push(h.join(""));ISQ.Widget.Log.messages.push("</span>");ISQ.Widget.Log.messages.push("<br/>")}}catch(f){}};ISQ.Widget.Log.autoScroll=function(){var a=ISQ.Widget.Log.window.document.body.scrollHeight;var b=ISQ.Widget.Log.window.document.body.offsetHeight;if(a>b){ISQ.Widget.Log.window.document.body.scrollTop=a-b}};ISQ.Widget.Log.element=null;ISQ.Widget.Log.window=null;ISQ.Widget.Log.alwaysOn=false;ISQ.Widget.Log.messages=null;ISQ.Widget.Debug=initializeNS("ISQ.Widget.Debug");ISQ.Widget.Debug.enabled=false;ISQ.Widget.Debug.register=function(){if(document.addEventListener){document.addEventListener("keyup",ISQ.Widget.Debug.keyUpEvent,true)}else{if(document.attachEvent){document.attachEvent("onkeyup",ISQ.Widget.Debug.keyUpEvent)}}};ISQ.Widget.Debug.keyUpEvent=function(b){var a=b||window.event;if(a.shiftKey&&a.ctrlKey){if(a.keyCode==81||a.keyCode==87){ISQ.Widget.Log.openPopup()}else{if(a.keyCode===90){ISQ.Widget.Debug.togglePopup()}}}};ISQ.Widget.Debug.togglePopup=function(){var a=_("debugPopup").style.display;if(a==="block"){_("debugPopup").style.display="none"}else{_("debugPopup").style.display="block"
}};ISQ.Widget.Debug.closeSession=function(){_session().die();ISQ.Widget.Debug.togglePopup()};ISQ.Debug.insertText=function(a,b){if(!debugLevel){return}b=b||ISQ.Widget.Log.statusEnum.RED;ISQ.Widget.Log.add(a,b)};ISQ.Widget.init=function(){var customParams;var debug=ISQ.Http.hashArguments.debug;if(debugLevel||(typeof(debug)!=="undefined"&&(debug==="true"||debug==="isq"))){ISQ.Widget.Debug.register();ISQ.Widget.Debug.enabled=true;if(ISQ.Widget.Log.alwaysOn){ISQ.Widget.Log.on()}}if(ISQ.Http.browser.isFF3){eval("[0,1]")}customParams=ISQ.Http.hashArguments.params||ISQ.Http.urlArguments.params;if(customParams){ISQ.Widget.API.customParams=ISQ.Widget.parseCustomParams(customParams)}var refencoded=false;if(ISQ.Http.hashArguments.referer){ISQ.Widget.referer.normal=ISQ.Http.hashArguments.referer;ISQ.Widget.referer.encoded=ISQ.Http.hashArguments.refencoded=="true"}else{if(ISQ.Http.urlArguments.referer){ISQ.Widget.referer.normal=ISQ.Http.urlArguments.referer;ISQ.Widget.referer.encoded=ISQ.Http.urlArguments.refencoded=="true"}else{ISQ.Widget.referer.normal=""}}if(ISQ.Widget.referer.normal&&ISQ.Widget.referer.encoded){ISQ.Widget.referer.normal=ISQ.Http.Cookies.decode64(ISQ.Widget.referer.normal)}var ndx=ISQ.Widget.referer.normal.toLowerCase().indexOf("%3a");if(ndx>6||ndx===-1){ISQ.Widget.referer.escaped=escape(ISQ.Widget.referer.normal)}else{ISQ.Widget.referer.escaped=ISQ.Widget.referer.normal;ISQ.Widget.referer.normal=unescape(ISQ.Widget.referer.normal)}ISQ.Widget.account=ISQ.Http.hashArguments.account||ISQ.Http.urlArguments.account;ISQ.Widget.configId=ISQ.Http.hashArguments.configid||ISQ.Http.urlArguments.configid;ISQ.Widget.Log.add("Initiating a widget for <u>"+ISQ.Widget.account+"</u> account");ISQ.Widget.Log.add("Server URL <u>"+ISQ.Http.domain(true)+"</u>");ISQ.Widget.Log.add("Widget Referer <u>"+ISQ.Widget.referer.normal+"</u>");if(window.parent===window){var domain=ISQ.Widget.getAccountURL(ISQ.Widget.account);var ndx=window.location.href.indexOf(domain);if(ndx===-1||ndx>8){var currentDomain=ISQ.Http.domain();window.location.href=window.location.href.replace(currentDomain,domain);
return}}ISQ.Widget.cdcFrame=ISQ.Widget.getInnerFrameUrl(ISQ.Http.hashArguments.cdcframe,ISQ.Widget.referer.normal,true);if(ISQ.Widget.cdcFrame){ISQ.Widget.cdcVersion=ISQ.Http.hashArguments.cdcversion||"1"}ISQ.Widget.splitTestGroup=ISQ.Http.hashArguments.splittestgroup;ISQ.Widget.isFloat=ISQ.Http.hashArguments.isfloat==="true";ISQ.Widget.isFullScreen=ISQ.Http.hashArguments.fullscreenmode==="true";ISQ.Widget.dynamicSize=!ISQ.Widget.isFloat&&ISQ.Http.hashArguments.dynamicsize==="true";ISQ.Widget.dynamicMaxSize=parseInt(ISQ.Http.hashArguments.dynamicmaxsize)||0;if(isNaN(ISQ.Widget.dynamicMaxSize)){ISQ.Widget.dynamicMaxSize=0}ISQ.Widget.HTML.Mobile.adjustableEmbedWidth=ISQ.Http.browser.isMobile&&!ISQ.Http.browser.oldAndroid&&!ISQ.Widget.isFloat&&window.top!==window;ISQ.Widget.sendingCDCMessages=window.top!==window&&(ISQ.Widget.supportsPostMessage||(ISQ.Widget.cdcFrame&&(ISQ.Widget.dynamicSize||ISQ.Widget.isFloat)));ISQ.Widget.CDC.init();var resetCDC=ISQ.Http.Cookies._read("resetcdc");if(resetCDC==="1"){ISQ.Http.Cookies._delete("resetcdc","/widget",ISQ.Http.domain());ISQ.Widget.CDC.sendMessage("subject=reset")}ISQ.Widget.Cnf.load();var htmlCollapseHeight=ISQ.Http.hashArguments.htmlcollapseheight;if(typeof(htmlCollapseHeight)!=="undefined"){ISQ.Widget.HTML.htmlCollapseHeight=parseInt(htmlCollapseHeight)}ISQ.Widget.initContext()};ISQ.Widget.initContext=function(){var contextFromStorage=null;if(window.localStorage&&!ISQ.Http.browser.isIOS7){contextFromStorage=window.localStorage.getItem("nanorep.wContext"+ISQ.Http.Cookies.encode64(ISQ.Widget.account))}if(!contextFromStorage){contextFromStorage=ISQ.Http.Cookies._readCaseSensitive("nanorep.wContext"+ISQ.Http.Cookies.encode64(ISQ.Widget.account))}if(contextFromStorage&&!ISQ.Widget.contextSetAlready){var currentContext=eval("("+contextFromStorage+")");_session().setContext(currentContext,null,false);ISQ.Widget.CDC.sendMessage("subject=updateContext&context="+ISQ.Data.jsonToString(currentContext))}};ISQ.Widget.embedCallback=null;ISQ.Widget.pageUnload=function(){ISQ.Widget.Chat.pageUnload();
if(ISQ.Widget.Log.element){ISQ.Widget.Log.element.innerHTML=""}};ISQ.Widget.Cnf=initializeNS("ISQ.Widget.Cnf");ISQ.Widget.Cnf.load=function(){if(ISQ.Widget.supportsPostMessage&&(window.top!==window&&self!==self.top)&&ISQ.Http.hashArguments.cnf=="true"){ISQ.Widget.isContained=true;ISQ.Cnf=null;ISQ.Widget.CDC.sendMessage("subject=cnf");setTimeout(function(){if(!ISQ.Cnf){ISQ.Widget.CDC.user.mMessageOrdinal=0;ISQ.Widget.Cnf.load()}},1000)}else{var kb=ISQ.Http.hashArguments.kb||ISQ.Http.urlArguments.kb;var cnfDownloadedSecondTime=!ISQ.Widget.supportsPostMessage&&window.top!==window;var referer=ISQ.Widget.referer.escaped;if(ISQ.Widget.configId){referer="!"+ISQ.Widget.configId}ISQ.Tools.appendScript(ISQ.Widget.buildCNFSource(ISQ.Widget.account,ISQ.Widget.isFloat,kb,referer,cnfDownloadedSecondTime,ISQ.Widget.splitTestGroup),function(){setTimeout(function(){if(ISQ.Widget.isFloat){ISQ.Cnf=ISQ.Cnf_Float}else{ISQ.Cnf=ISQ.Cnf_Embed}if(ISQ.Cnf.controlGroup){return}var customScript=ISQ.Cnf.customScript;delete ISQ.Cnf.customScript;if(customScript){try{eval(customScript)}catch(e){}}ISQ.Widget.Cnf.postDownload()},0)})}};ISQ.Widget.Cnf.postDownload=function(){ISQ.Widget.loadHandler()};ISQ.Widget.Cnf.SpeechRecognition={};ISQ.Widget.Cnf.SpeechRecognition.active=false;ISQ.Widget.Cnf.SpeechRecognition.showClearQueryOnStop=false;ISQ.Widget.Cnf.SpeechRecognition.listenCommand=false;ISQ.Widget.Cnf.SpeechRecognition.actions=[];ISQ.Widget.Cnf.SpeechRecognition.autoStopTimeout=null;ISQ.Widget.Cnf.SpeechRecognition.idleTime=2000;ISQ.Widget.Cnf.SpeechRecognition.waitForCommandTime=3000;ISQ.Widget.Cnf.SpeechRecognition.init=function(){var b=window.SpeechRecognition||window.webkitSpeechRecognition||null;if(b===null||!ISQ.Widget.isFullScreen){ISQ.Widget.HTML.speechButton.parentNode.removeChild(ISQ.Widget.HTML.speechButton);delete ISQ.Widget.HTML.speechButton;return}var a=ISQ.Widget.Cnf.SpeechRecognition.recognizer=new b();a.continuous=true;a.interimResults=true;a.maxAlternatives=1;a.lang=ISQ.Widget.TranslationHelper.detectedLanguage||ISQ.Cnf.kbLanguageCode;
a.onresult=ISQ.Widget.Cnf.SpeechRecognition.onResult;a.onaudiostart=ISQ.Widget.Cnf.SpeechRecognition.onStart;a.onend=ISQ.Widget.Cnf.SpeechRecognition.onEnd;a.onerror=function(c){ISQ.Widget.Cnf.SpeechRecognition.stop();ISQ.Widget.Log.add("Speech recognition error: "+c.error)};ISQ.Widget.HTML.speechButton.onclick=function(){if(ISQ.Widget.Cnf.SpeechRecognition.active){ISQ.Widget.Cnf.SpeechRecognition.stop()}else{ISQ.Widget.Cnf.SpeechRecognition.start()}}};ISQ.Widget.Cnf.SpeechRecognition.updateLanguage=function(){if(!ISQ.Widget.Cnf.SpeechRecognition.recognizer){return}var a=ISQ.Widget.TranslationHelper.detectedLanguage||ISQ.Cnf.kbLanguageCode||"en";ISQ.Widget.Cnf.SpeechRecognition.recognizer.lang=a};ISQ.Widget.Cnf.SpeechRecognition.onResult=function(a){if(!ISQ.Widget.Cnf.SpeechRecognition.active){return}var c="";for(var b=a.resultIndex;b<a.results.length;b++){if(a.results[b].isFinal){c=a.results[b][0].transcript}else{c+=a.results[b][0].transcript}}ISQ.Widget.Cnf.SpeechRecognition.log("Results "+c);if(!ISQ.Widget.Cnf.SpeechRecognition.listenCommand){ISQ.Widget.Cnf.SpeechRecognition.processSearchText(c)}else{ISQ.Widget.Cnf.SpeechRecognition.processCommandText(c)}if(ISQ.Widget.Cnf.SpeechRecognition.autoStopTimeout!==null){clearTimeout(ISQ.Widget.Cnf.SpeechRecognition.autoStopTimeout)}ISQ.Widget.Cnf.SpeechRecognition.autoStopTimeout=setTimeout(ISQ.Widget.Cnf.SpeechRecognition.stop,ISQ.Widget.Cnf.SpeechRecognition.idleTime)};ISQ.Widget.Cnf.SpeechRecognition.processSearchText=function(a){if(ISQ.Widget.Cnf.SpeechRecognition.text!==a){ISQ.Widget.Cnf.SpeechRecognition.text=a;ISQ.Widget.Cnf.SpeechRecognition.applyText(ISQ.Widget.Cnf.SpeechRecognition.text)}};ISQ.Widget.Cnf.SpeechRecognition.processCommandText=function(e){var a=ISQ.Widget.Cnf.SpeechRecognition.actions;for(var b=0;b<a.length;b++){for(var c=0;c<a[b].phrases.length;c++){var d=a[b].phrases[c].toLowerCase().trim();if(e.toLowerCase().trim().indexOf(d)!==-1){ISQ.Widget.Cnf.SpeechRecognition.stop();ISQ.Widget.Cnf.SpeechRecognition.executeAction(a[b]);return}}}};ISQ.Widget.Cnf.SpeechRecognition.setCommandMode=function(a){ISQ.Widget.Cnf.SpeechRecognition.listenCommand=a;
if(a){ISQ.CSS.addClass(ISQ.Widget.HTML.speechButton,"command-mode")}else{ISQ.CSS.removeClass(ISQ.Widget.HTML.speechButton,"command-mode")}};ISQ.Widget.Cnf.SpeechRecognition.executeAction=function(a){switch(a.name){case"show_pricings":window.open("http://www.nanorep.com/product/pricing","_blank");break;case"contact_sales":window.open("http://www.nanorep.com/product/pricing","_blank");break;case"howitworks":window.open("http://www.nanorep.com/howitworks","_blank");break}};ISQ.Widget.Cnf.SpeechRecognition.updateActions=function(a){ISQ.Widget.Cnf.SpeechRecognition.actions=[];if(!a){return}for(var b=0;b<a.length;b++){ISQ.Widget.Cnf.SpeechRecognition.actions.push(a[b])}};ISQ.Widget.Cnf.SpeechRecognition.log=function(a){};ISQ.Widget.Cnf.SpeechRecognition.onStart=function(a){ISQ.Widget.Cnf.SpeechRecognition.text="";ISQ.Widget.HTML.clearQuery.hide();ISQ.CSS.addClass(ISQ.Widget.HTML.speechButton,"active");ISQ.Widget.Cnf.SpeechRecognition.autoStopTimeout=setTimeout(ISQ.Widget.Cnf.SpeechRecognition.stop,ISQ.Widget.Cnf.SpeechRecognition.idleTime)};ISQ.Widget.Cnf.SpeechRecognition.onEnd=function(a){ISQ.CSS.removeClass(ISQ.Widget.HTML.speechButton,"active");ISQ.Widget.Cnf.SpeechRecognition.active=false;ISQ.Widget.Cnf.SpeechRecognition.applyText(ISQ.Widget.Cnf.SpeechRecognition.text);clearTimeout(ISQ.Widget.Cnf.SpeechRecognition.autoStopTimeout);clearTimeout(ISQ.Widget.Cnf.SpeechRecognition.commandTimeout);if(ISQ.Widget.Cnf.SpeechRecognition.showClearQueryOnStop){ISQ.Widget.Cnf.SpeechRecognition.showClearQueryOnStop=false;ISQ.Widget.HTML.clearQuery.show()}ISQ.Widget.Cnf.SpeechRecognition.setCommandMode(false);if(typeof ISQ.Widget.Cnf.SpeechRecognition.onStopCallback==="function"){ISQ.Widget.Cnf.SpeechRecognition.onStopCallback();ISQ.Widget.Cnf.SpeechRecognition.onStopCallback=null}};ISQ.Widget.Cnf.SpeechRecognition.start=function(){if(!ISQ.Widget.Cnf.SpeechRecognition.recognizer){return}try{ISQ.Widget.Cnf.SpeechRecognition.recognizer.start();ISQ.Widget.Cnf.SpeechRecognition.active=true}catch(a){ISQ.Widget.Log.add("Speech recognition not started: "+a.message)
}};ISQ.Widget.Cnf.SpeechRecognition.stop=function(a){if(!ISQ.Widget.Cnf.SpeechRecognition.recognizer){return}if(a){ISQ.Widget.Cnf.SpeechRecognition.onStopCallback=a}ISQ.Widget.Cnf.SpeechRecognition.recognizer.stop();ISQ.Widget.Cnf.SpeechRecognition.active=false};ISQ.Widget.Cnf.SpeechRecognition.applyText=function(a){if(a&&a.length){ISQ.Widget.HTML.queryField.value=a;ISQ.Widget.Query.mobile_ignoreNextChange=true;ISQ.Widget.Query.analyzeQuery(a,ISQ.Widget.Query.enumTextQuerySource.suggestion)}};ISQ.Widget.Cnf.SpeechRecognition.hideButton=function(){if(!ISQ.Widget.HTML.speechButton){return}ISQ.Widget.HTML.speechButton.style.display="none"};ISQ.Widget.Cnf.SpeechRecognition.showButton=function(){if(!ISQ.Widget.HTML.speechButton){return}ISQ.Widget.HTML.speechButton.style.display="block"};ISQ.Widget.Cnf.SpeechRecognition.activate=function(){ISQ.Widget.Cnf.SpeechRecognition.showButton()};ISQ.Widget.Cnf.SpeechRecognition.deactivate=function(){ISQ.Widget.Cnf.SpeechRecognition.hideButton()};ISQ.Widget.Css=initializeNS("ISQ.Widget.Css");ISQ.Widget.Css.RTL_CSS_identifier="html.rtl_css_file";ISQ.Widget.Css.dynamic_RTL_CSS_identifier="html.dynamic_rtl_css_file";ISQ.Widget.loadHandler=function(){if(ISQ.Cnf.controlGroup){return}if(typeof ISQ.Cnf.customServerHost==="string"){ISQ.Widget.setCustomHost(ISQ.Cnf.customServerHost)}if(ISQ.Widget.isFloat&&ISQ.Cnf.limited){return}var size=ISQ.Html.screenSize();if(size.h===0&&(ISQ.Http.browser.isMobile||!ISQ.Widget.isFloat||!ISQ.Http.browser.isIE7)){setTimeout(function(){ISQ.Widget.loadHandler()},10);return}var ctxStr=ISQ.Http.hashArguments.context;if(ctxStr){var contextObject={};var ctxSplit=ctxStr.split(",");iteration(ctxSplit,function(item){var itemSplit=item.split(":");if(itemSplit.length!=2){return}contextObject[itemSplit[0]]=itemSplit[1]});ISQ.Widget.API.updateContext(contextObject,true)}var newContexts=ISQ.Widget.combineContext(ISQ.Cnf.contextAttributes,_session().contexts(),ISQ.Widget.API.getCustomParams());if(newContexts){if(ISQ.Http.browser.isMobile){var tmp=[];ISQ.Widget.CDC_appendKeyValueToMessage(newContexts,tmp);
ISQ.Widget.HTML.Mobile.context=tmp.join("")}if(!ISQ.Http.browser.isMobile||ISQ.Widget.HTML.Mobile.adjustableEmbedWidth){ISQ.Widget.API.updateContext(newContexts,false)}}if(ISQ.Cnf.languageDictionary){eval(ISQ.Cnf.languageDictionary)}ISQ.Widget.FAQ.scriptLoadState=ISQ.Widget.FAQ.initEnum.loaded;ISQ.Widget.FAQ.handleCnfData();if(ISQ.Widget.FAQ.pendingFAQCallback){ISQ.Widget.FAQ.pendingFAQCallback()}ISQ.Widget.skinName=(ISQ.Cnf.skinName)?ISQ.Cnf.skinName:null;ISQ.Widget.addCssStyles(ISQ.Cnf.skinCSS);if(ISQ.Cnf.skinCSS_rtl){ISQ.Widget.rtlCssLoaded=true;ISQ.CSS.addNewStyle(ISQ.Cnf.skinCSS_rtl,"fileloaderStyleSheet",true)}if(typeof(ISQ.Cnf.customCSS)==="string"){var customCssProcessed=false;var customCssSource=ISQ.Cnf.customCSS;var ndx=customCssSource.indexOf("@import");if(ndx!==-1&&!ISQ.Http.browser.isAndroid){var customCssErr=false;var customCSSBuilder=[];var endNdx=-1;var imports=[];do{customCSSBuilder.push('htmlCustomCSS{"visibility:visible;"}');customCSSBuilder.push(customCssSource.substring(0,ndx));ndx=customCssSource.indexOf("(",ndx);if(ndx===-1){customCssErr=true;break}endNdx=customCssSource.indexOf(")",ndx);if(endNdx===-1){customCssErr=true;break}imports.push(customCssSource.substring(ndx+2,endNdx-1));endNdx=customCssSource.indexOf(";",endNdx);if(endNdx++===-1){customCssErr=true;break}ndx=customCssSource.indexOf("@import",endNdx)}while(ndx!==-1);if(!customCssErr){if(endNdx!==customCssSource.length){customCSSBuilder.push(customCssSource.substring(endNdx))}ISQ.CSS.addNewStyle(customCSSBuilder.join(""));customCssProcessed=true;for(i=0;i<imports.length;++i){var lnk=createElement("link");lnk.rel="stylesheet";lnk.setAttribute("rel","stylesheet");lnk.href=imports[i];lnk.setAttribute("href",imports[i]);document.getElementsByTagName("HEAD")[0].appendChild(lnk)}}}if(!customCssProcessed){ISQ.CSS.addNewStyle('htmlCustomCSS{"visibility:visible;"}'+customCssSource)}}if(ISQ.Cnf.applyLabelToTickets){var parts=ISQ.Cnf.applyLabelToTickets.split(",");for(i=0;i<parts.length;i++){ISQ.Widget.ContactForm.reportPreDefinedValue("label_"+parts[i],parts[i],"label")
}}if(ISQ.Http.browser.isIE6||ISQ.Http.browser.isIE7){setTimeout(function(){document.body.style.position="relative";document.body.style.left=0;document.body.style.top=0},0)}ISQ.Widget.Localize={};if(!ISQ.Cnf.ignoreScriptCustomValues){if(ISQ.Http.hashArguments.languagecode){ISQ.Cnf.initialUiLanguage=ISQ.Tools.getUniformLanguageCode(ISQ.Http.hashArguments.languagecode)}else{if(ISQ.Http.urlArguments.languagecode){ISQ.Cnf.initialUiLanguage=ISQ.Tools.getUniformLanguageCode(ISQ.Http.urlArguments.languagecode)}}}if(!ISQ.Cnf.initialUiLanguage){if(ISQ.Cnf.uiLanguageCode){ISQ.Cnf.initialUiLanguage=ISQ.Cnf.uiLanguageCode}else{ISQ.Cnf.initialUiLanguage=ISQ.Cnf.kbLanguageCode}}nanoRep.FAQ.init(ISQ.Cnf.initialUiLanguage,window.location.protocol+"//"+ISQ.Http.domain(true));ISQ.Widget.Localize.array=ISQ.Widget.Texts[ISQ.Cnf.initialUiLanguage];if(!ISQ.Widget.Localize.array){ISQ.Cnf.initialUiLanguage="en";ISQ.Widget.Localize.array=ISQ.Widget.Texts.en}ISQ.Cnf.currentUiLanguage=ISQ.Cnf.initialUiLanguage;ISQ.Widget.Log.add("<b>UI</b> Language code:<u>"+ISQ.Cnf.currentUiLanguage+"</u>");ISQ.Widget.Log.add("<b>KB</b> Language code:<u>"+ISQ.Cnf.kbLanguageCode+"</u>");if(ISQ.Widget.Localize.array.dir!=="rtl"){ISQ.CSS.toggleCss(ISQ.Widget.Css.RTL_CSS_identifier,false);ISQ.CSS.toggleCss(ISQ.Widget.Css.dynamic_RTL_CSS_identifier,false);ISQ.Widget.HTML.dynamicRTLCssLoaded=false}var footerNanoRepLink=_("footerNanoRepLink");if(!ISQ.Cnf.goResponseBranding){footerNanoRepLink.href=ISQ.Widget.buildNRLinkUrl(ISQ.Widget.account,ISQ.Widget.referer.normal,ISQ.Widget.isFloat?"float":"embed");footerNanoRepLink.className="link_nano_img padding"}else{footerNanoRepLink.className="link_nano_img padding link_go_response"}if(ISQ.Http.browser.app==="chrome"){window.onbeforeunload=ISQ.Widget.pageUnload}else{window.onunload=ISQ.Widget.pageUnload}document.body.onclick=function(evt){evt=window.event||evt;var tar=evt.target||evt.srcElement;if(tar.nodeName!="A"){return}var p=tar.parentNode;var pane=_("answerPane");while(p!=null&&p!=pane){p=p.parentNode}if(p!=pane){return
}var href=tar.href;if(href.startsWith("javascript")){return}ISQ.Widget.setOngoingData(href)};ISQ.Widget.HTML.setPointers();ISQ.Widget.HTML.enablePIE();_("txtChatInput").value="";ISQ.Widget.HTML.queryField.value="";if(ISQ.Http.browser.isIPad||ISQ.Http.browser.isIPhone){ISQ.Widget.HTML.queryField.className+=" apple"}if(window.top===window||ISQ.Widget.isFullScreen){ISQ.CSS.addClass(_("widgetContainer"),"fullScreen")}if(ISQ.Widget.isFullScreen){ISQ.CSS.addClass(document.body,"fullscreenMobile")}if(!ISQ.Cnf.ignoreScriptCustomValues){if(ISQ.Http.hashArguments.bgcolor||ISQ.Http.urlArguments.bgcolor){var color;if(ISQ.Http.hashArguments.bgcolor){color=ISQ.Http.Cookies.decode64(ISQ.Http.hashArguments.bgcolor)}else{color=ISQ.Http.Cookies.decode64(ISQ.Http.urlArguments.bgcolor)}_("widgetTitleWrapper").style.backgroundColor=color;ISQ.Widget.HTML.footerWrapper.style.backgroundColor=color;_("widgetMinimizedFooter").style.backgroundColor=color}if(ISQ.Http.hashArguments.teaser){ISQ.Widget.customTeaserText=ISQ.Http.Cookies.decode64(ISQ.Http.hashArguments.teaser)}else{if(ISQ.Http.urlArguments.teaser){ISQ.Widget.customTeaserText=ISQ.Http.Cookies.decode64(ISQ.Http.urlArguments.teaser)}}if(ISQ.Http.hashArguments.title){ISQ.Widget.customTitle=ISQ.Http.Cookies.decode64(ISQ.Http.hashArguments.title)}else{if(ISQ.Http.urlArguments.title){ISQ.Widget.customTitle=ISQ.Http.Cookies.decode64(ISQ.Http.urlArguments.title)}}if(ISQ.Http.hashArguments.color){_("widgetTitleText").style.color=ISQ.Http.Cookies.decode64(ISQ.Http.hashArguments.color)}else{if(ISQ.Http.urlArguments.color){_("widgetTitleText").style.color=ISQ.Http.Cookies.decode64(ISQ.Http.urlArguments.color)}}}ISQ.Widget.HTML.widgetContainer.style.display="block";_("widgetLoading").style.display="none";ISQ.Widget.setInitialTexts();ISQ.Widget.HTML.clearQuery.onclick=function(){ISQ.Widget.HTML.queryField.value="";ISQ.Widget.Query.analyzeQuery(_query(false),ISQ.Widget.Query.enumTextQuerySource.regular);this.hide()};ISQ.Widget.HTML.clearQuery.hide=function(){this.style.opacity=0;this.style.display="none";
ISQ.Widget.Cnf.SpeechRecognition.showButton()};ISQ.Widget.HTML.clearQuery.show=function(){if(ISQ.Widget.Cnf.SpeechRecognition.active){return}if(ISQ.Widget.HTML.queryField.value&&ISQ.Widget.HTML.queryField.value.length>0){if(!ISQ.Widget.userActive&&ISQ.Cnf.initialText&&ISQ.Widget.HTML.queryField.value==ISQ.Cnf.initialText){return}if(ISQ.Widget.HTML.isTeaser){return}this.style.opacity=1;this.style.display="block";ISQ.Widget.Cnf.SpeechRecognition.hideButton()}};if(ISQ.Cnf.floatTeaser_width){ISQ.Cnf.floatTeaser_WidgetSize[0]=ISQ.Cnf.floatTeaser_width}if(!ISQ.Widget.isFloat){_("minimizeButtonWrapper").style.display="none"}var footerResult=ISQ.Data.getDBAnswerAsHtml(ISQ.Cnf.answerFooter,true,null,null,null,ISQ.Widget.referer.normal);ISQ.Cnf.answerFooter=footerResult.text;ISQ.Cnf.answerFooterScript=footerResult.script;if(ISQ.Widget.isFloat&&ISQ.Cnf.customerBrandingLogo&&ISQ.CSS.getElementStyle(_("customerLogo"),"visibility")!=="hidden"){var img=new Image();img.onload=function(){this.loaded=true;ISQ.Widget.onCustomerLogoLoad()};ISQ.Cnf.customerBrandingLogo_img=img;img.src=ISQ.Cnf.customerBrandingLogo;ISQ.Cnf.customerBrandingLogo_img.loaded=false}else{ISQ.Cnf.customerBrandingLogo=null}ISQ.Widget.HTML.Mobile.setMode();ISQ.Widget.Query.init();if(ISQ.Cnf.limited){ISQ.Widget.HTML.limitedMode()}else{if(ISQ.Cnf.chatConfiguration&&ISQ.Cnf.chatEnabled&&ISQ.Widget.mobileHandlingMode!==ISQ.Widget.enumMobileHandlingMode.inactive){ISQ.Widget.Chat.init()}if(((ISQ.Widget.state&ISQ.Widget.enumState.allChat)===0)&&!ISQ.Widget.onloadQuestion&&!ISQ.Widget.onloadQuestionId&&ISQ.Cnf.autoQuestions){ISQ.Widget.AutoQuestions.init(ISQ.Cnf.autoQuestions,ISQ.Cnf.autoQuestionsInterval,ISQ.Cnf.repeatAutoQuestions)}var initialText=ISQ.Cnf.initialText||ISQ.Widget.onloadQuestion||ISQ.Widget.onloadQuestionId;if(initialText&&((ISQ.Widget.state&ISQ.Widget.enumState.allChat)===0)){ISQ.Widget.HTML.queryField.className+=" initialText";ISQ.Widget.HTML.queryField.value=ISQ.Cnf.initialText;ISQ.Widget.HTML.queryField.setAttribute("arial-lable",initialText)}if(ISQ.Widget.state!==ISQ.Widget.enumState.autoQuestions||initialText){ISQ.Widget.Query.setFocus()
}if(ISQ.Http.hashArguments.onloadquestion){ISQ.Widget.onloadQuestion=ISQ.Http.Cookies.decode64(ISQ.Http.hashArguments.onloadquestion)}else{if(ISQ.Http.urlArguments.onloadquestion){ISQ.Widget.onloadQuestion=ISQ.Http.Cookies.decode64(ISQ.Http.urlArguments.onloadquestion)}}if(ISQ.Http.hashArguments.onloadquestionid){ISQ.Widget.onloadQuestionId=ISQ.Http.hashArguments.onloadquestionid;ISQ.Widget.onloadQuestionIdFromURL=true;if(((ISQ.Widget.state&ISQ.Widget.enumState.allChat)===0)&&ISQ.Widget.onloadQuestionId){ISQ.Widget.state=ISQ.Widget.enumState.questions}}else{if(ISQ.Http.urlArguments.onloadquestionid){ISQ.Widget.onloadQuestionId=ISQ.Http.urlArguments.onloadquestionid;if(((ISQ.Widget.state&ISQ.Widget.enumState.allChat)===0)&&ISQ.Widget.onloadQuestionId){ISQ.Widget.state=ISQ.Widget.enumState.questions}}else{if(((ISQ.Widget.state&ISQ.Widget.enumState.allChat)===0)&&ISQ.Cnf.onloadQuestionId&&ISQ.Cnf.onloadQuestionId!="-1"){ISQ.Widget.onloadQuestionId=ISQ.Cnf.onloadQuestionId;if(ISQ.Widget.isFloat){ISQ.Widget.state=ISQ.Widget.enumState.questions}else{ISQ.Widget.state=ISQ.Widget.enumState.autoQuestions}}else{if(((ISQ.Widget.state&ISQ.Widget.enumState.allChat)==0)&&(!ISQ.Widget.isFloat||ISQ.Http.browser.isMobile)&&!ISQ.Cnf.autoQuestions){ISQ.Widget.FAQ.show(ISQ.Widget.FAQ.behavior.OnWidgetLoad)}}}}}ISQ.Widget.HTML.resizeHandler();if(ISQ.Cnf.hideBranding){_("footerNanoRepLink").style.display="none";_("logoInCollapsedMode").style.display="none"}if(ISQ.Cnf.customerBrandingText){_("customerBrandingText").style.display="block";_("customerBrandingText").innerHTML=ISQ.Cnf.customerBrandingText}if(ISQ.Cnf.hideByEmailIcon){_("repByEmail").className="noActionBarIcon"}if(ISQ.Cnf.faqWidgetConfig&&ISQ.Cnf.faqWidgetConfig!="[]"){_("footerNanoRepLink").style.visibility="hidden";ISQ.Widget.HTML.widgetFooter.className="widgetFooter"}if(!ISQ.Http.browser.isIE6&&(!ISQ.Http.browser.usesViewport||ISQ.Http.browser.isIOS7)){ISQ.Html.ReSize.init(ISQ.Html.ReSize.enumListenTo.both,true);var lastTime=0;var prevSize={w:0,h:0};var ignoreNext=false;var ios7SizeFix=ISQ.Http.browser.isIOS7&&!ISQ.Widget.isFloat&&window!==window.top;
ISQ.Html.ReSize.Event.addHandler(function(){if(ios7SizeFix){viewportSize=ISQ.Html.screenSize();var now=new Date().getTime();if(ignoreNext&&viewportSize.h<prevSize.h){lastTime=now;if(now-lastTime<100){return}}prevSize=viewportSize;ignoreNext=false;lastTime=now}ISQ.Widget.HTML.resizeHandler(null,true);if(ios7SizeFix){ignoreNext=true}})}else{if(ISQ.Http.browser.isTablet||ISQ.Http.browser.isIE6||ISQ.Widget.HTML.Mobile.adjustableEmbedWidth){setInterval(ISQ.Widget.HTML.resizePollingHandler,20)}if(!ISQ.Http.browser.isIE6&&ISQ.Widget.mobileHandlingMode!==ISQ.Widget.enumMobileHandlingMode.inactive){window.addEventListener("orientationchange",ISQ.Widget.HTML.Mobile.orientationChanged)}}var notifyClick=ISQ.Http.hashArguments.notifyclick||false;if(notifyClick==="true"&&!ISQ.Http.browser.isMobile){if(!ISQ.Http.browser.isTablet){document.onclick=function(e){var evt=e||window.event;if(ISQ.Widget.HTML.ignoreNextClickEvent){ISQ.Widget.HTML.ignoreNextClickEvent=false;return}if(ISQ.Http.browser.isIE6){setTimeout(function(){ISQ.Widget.CDC.sendMessage("subject=click")},0)}else{ISQ.Widget.CDC.sendMessage("subject=click");var target=evt.target||evt.srcElement;if(target.tagName!=="INPUT"){ISQ.Widget.Expand()}}}}else{_("chatStatusWrapper").addEventListener("click",function(evt){ISQ.Widget.CDC.sendMessage("subject=click")});_("widgetTitleWrapper").addEventListener("click",function(evt){if(ISQ.Widget.HTML.Mobile.ignoreClickEvent){ISQ.Widget.HTML.Mobile.ignoreClickEvent=false;return}ISQ.Widget.CDC.sendMessage("subject=click")});ISQ.Widget.HTML.queryField.addEventListener("click",function(evt){ISQ.Widget.CDC.sendMessage("subject=click")});_("contentAreaWrapper").addEventListener("click",function(evt){ISQ.Widget.CDC.sendMessage("subject=click")});_("actionBarWrapper").addEventListener("click",function(evt){ISQ.Widget.CDC.sendMessage("subject=click")})}}if(ISQ.Cnf.answerPeeksEnabled){if(document.addEventListener){ISQ.Widget.HTML.contentWrapper.addEventListener("scroll",ISQ.Widget.Query.contentWrapperScroll)}else{if(document.attachEvent){ISQ.Widget.HTML.contentWrapper.attachEvent("onscroll",ISQ.Widget.Query.contentWrapperScroll)
}}}if(ISQ.Widget.sendingCDCMessages){var msg=null;if(ISQ.Widget.isFloat){msg="subject=load";if(typeof(ISQ.Cnf.dockRTL)!=="undefined"){msg+="&dockrtl="+ISQ.Cnf.dockRTL}if(ISQ.Cnf.floatOpenOnLoad===true||ISQ.Widget.state===ISQ.Widget.enumState.autoQuestions||((ISQ.Widget.state&ISQ.Widget.enumState.allChat)!=0)){msg+="&stateonload=";if((ISQ.Widget.state&ISQ.Widget.enumState.allChat)!=0){msg+="chat"}else{if(ISQ.Widget.state===ISQ.Widget.enumState.autoQuestions||ISQ.Widget.onloadQuestion||ISQ.Widget.onloadQuestionId){msg+="expand"}else{if(ISQ.Cnf.floatOpenOnLoad===true){msg+="collapse"}else{msg+="teaser"}}}}if(typeof(ISQ.Cnf.floatAutoMinimizeTimeout)!=="undefined"&&ISQ.Widget.state!==ISQ.Widget.enumState.chat&&!ISQ.Widget.onloadQuestion&&!ISQ.Widget.onloadQuestionId){msg+="&autominimize="+ISQ.Cnf.floatAutoMinimizeTimeout}if(typeof(ISQ.Cnf.floatOpenOnHover)!=="undefined"){msg+="&openonhover="+ISQ.Cnf.floatOpenOnHover}if(ISQ.Cnf.titleTeaserText){msg+="&teasertext="+ISQ.Http.Cookies.encode64(ISQ.Cnf.titleTeaserText)}if(ISQ.Cnf.generatedTeaser_textFont){msg+="&teaserfont="+ISQ.Http.Cookies.encode64(ISQ.Cnf.generatedTeaser_textFont)}if(ISQ.Cnf.titleColor){msg+="&teasercolor="+ISQ.Http.Cookies.encode64(ISQ.Cnf.titleColor)}msg+="&teaserdir="+ISQ.Widget.Localize.array.dir;if(ISQ.Cnf.generatedTeaser_textPosition){msg+="&teaserposition="+ISQ.Cnf.generatedTeaser_textPosition[0]+","+ISQ.Cnf.generatedTeaser_textPosition[1]}if(ISQ.Cnf.generatedTeaser_textSize){msg+="&teasersize="+ISQ.Cnf.generatedTeaser_textSize[0]+","+ISQ.Cnf.generatedTeaser_textSize[1]}if(ISQ.Cnf.floatMarginSide){msg+="&marginside="+ISQ.Cnf.floatMarginSide}if(ISQ.Cnf.floatMarginBottom){msg+="&marginbottom="+ISQ.Cnf.floatMarginBottom}if(ISQ.Cnf.floatTeaser_width){msg+="&teaserwidth="+ISQ.Cnf.floatTeaser_width}if(ISQ.Cnf.containerBoxShadow){msg+="&containerBoxShadow="+ISQ.Http.Cookies.encode64(ISQ.Cnf.containerBoxShadow)}if(ISQ.Cnf.ignoreScriptCustomValues){msg+="&ignorescriptcustomvalues="+ISQ.Cnf.ignoreScriptCustomValues}ISQ.Widget.CDC.sendMessage(msg)}else{if(ISQ.Widget.dynamicSize){ISQ.Widget.HTML.dynamicSize_sendMessage()
}}}ISQ.Widget.reportEvents|=(ISQ.Cnf.integrateWithGA===true);if(ISQ.Widget.reportEvents){ISQ.Widget.CDC.sendMessage("subject=event&type=load&integrate_ga="+(ISQ.Cnf.integrateWithGA===true))}if(!ISQ.Cnf.limited){var ongoingdata=ISQ.Tools.Storage.get("ongoingdata");if(ongoingdata){ISQ.Tools.Storage.remove("ongoingdata");ongoingdata=eval("("+ongoingdata+")");var ongoingRef=ongoingdata.href;var thisRef=ISQ.Widget.referer.normal;ISQ.Widget.onloadQuestionId=ongoingdata.onloadQuestionId;var ongoingRelRef=ISQ.Http.relativePath(ongoingRef);var thisRelRef=ISQ.Http.relativePath(thisRef);var refsAreEqual=(ISQ.Http.domain(true,ongoingRef)===ISQ.Http.domain(true,thisRef))&&(ongoingRelRef.filename===thisRelRef.filename)&&(ongoingRelRef.path===thisRelRef.path);if(refsAreEqual&&ISQ.Widget.account==ongoingdata.account&&ISQ.Cnf.kbLanguageCode==ongoingdata.kb){if(ISQ.Widget.isFloat){ISQ.Widget.CDC.sendMessage("subject=widgetToExpand")}else{ISQ.Widget.HTML.dynamicSize_sendMessage()}_session().loadSessionFromId(ongoingdata.sid);setTimeout(function(){ISQ.Widget.runOnloadQuestion()},100)}}else{if(ISQ.Widget.onloadQuestion){ISQ.Widget.state=ISQ.Widget.enumState.questions;if(ISQ.Cnf.autoQuestionsTypeEffect){ISQ.Widget.Query.typeTimer=new ISQ.Timer(new ISQ.Handler(ISQ.Widget.Query.typeQuestion),false,ISQ.Widget.onloadQuestion,0);ISQ.Widget.Query.typeTimer.start(ISQ.Widget.Query.typeInterval)}else{ISQ.Widget.HTML.queryField.value=ISQ.Widget.onloadQuestion}ISQ.Widget.Query.analyzeQuery(ISQ.Widget.onloadQuestion,ISQ.Widget.Query.enumTextQuerySource.linkedAnswer);ISQ.Widget.Query.clearTextboxOnInteraction=true}else{if(ISQ.Widget.onloadQuestionId){if(!ISQ.Widget.isFloat){ISQ.Widget.runOnloadQuestion(null,ISQ.Widget.onloadQuestionIdFromURL?"direct":"onload")}}else{if(ISQ.Widget.state===ISQ.Widget.enumState.autoQuestions){ISQ.Widget.AutoQuestions.go()}}}}}ISQ.Widget.Cnf.SpeechRecognition.init()};ISQ.Widget.setOngoingData=function(b){var a=ISQ.Data.jsonToString({href:b,sid:_session().id(),onloadQuestionId:ISQ.Widget.lastQuestionId,kb:ISQ.Widget.Query.kbLanguageCode,account:ISQ.Widget.account});
ISQ.Tools.Storage.set("ongoingdata",a)};ISQ.Widget.runOnloadQuestion=function(a,b){if(!b){b="onload"}ISQ.Widget.Query.tempQuestionTrailId=ISQ.Widget.onloadQuestionId;ISQ.Widget.Query.getAnswerById(ISQ.Widget.onloadQuestionId,ISQ.Cnf.onloadQuestionId&&ISQ.Cnf.onloadQuestionId!="-1",b,a);ISQ.Widget.Query.clearTextboxOnInteraction=true};ISQ.Widget.expandedFirstTime=false;ISQ.Widget.Expand=function(){if(!ISQ.Widget.isFloat){return}if(!ISQ.Cnf.floatOpenOnClick){return}ISQ.Widget.CDC.sendMessage("subject=openOnClick");if(ISQ.Widget.expandedFirstTime){return}ISQ.Widget.expandedFirstTime=true;ISQ.Widget.FAQ.initalize();ISQ.Widget.FAQ.pendingFAQCallbackList.push(function(){if(!ISQ.Widget.FAQ.shown){ISQ.Widget.FAQ.show(ISQ.Widget.FAQ.behavior.OnClearSearchField)}});if(ISQ.Widget.onloadQuestionId){var a=function(b){ISQ.Widget.Query.fader_callback=function(){if(ISQ.Widget.userActive){return}ISQ.Widget.FAQ.show(ISQ.Widget.FAQ.behavior.OnWidgetLoad)};ISQ.Widget.Query.hideAnswers(b,true)};ISQ.Widget.runOnloadQuestion(a)}};ISQ.Widget.loadLanguageDictionary=function(c,a){if(!ISQ.Widget.Texts[c]){for(var b=0;b<ISQ.Widget.Texts.available.length;b++){if(ISQ.Widget.Texts.available[b]==c){ISQ.Tools.FileLoader.load("/widget/languages/lang-"+c+".js",new ISQ.Handler(function(d){if(a){a()}}));return}}}if(a){a()}};ISQ.Widget.setUiLanguage=function(b){b=b||ISQ.Cnf.currentUiLanguage;var a=ISQ.Translation.Infra.getLanguageDirection(b);var c=function(){ISQ.Widget.rtlCssLoaded=true;ISQ.CSS.toggleCss("html.rtl_css_file",true);ISQ.CSS.toggleCss("html.skinrtl_css_file",true);ISQ.CSS.bringToFront("html.widgetskin_css_file");ISQ.CSS.bringToFront("html.skinrtl_css_file");ISQ.CSS.bringToFront("htmlCustomCSS");ISQ.Widget.HTML.dynamicRTLCssLoaded=true;ISQ.CSS.addClass(document.body,"isRtl");ISQ.Widget.Cnf.SpeechRecognition.updateLanguage();if(ISQ.Widget.reportEvents){ISQ.Widget.CDC.sendMessage("subject=event&type=directionchanged&rtl=true")}};if(a==="rtl"&&!ISQ.Widget.HTML.dynamicRTLCssLoaded){if(ISQ.Widget.rtlCssLoaded){c()}else{if(ISQ.Cnf.skinCustomRTLCSSfile){ISQ.Tools.FileLoader.load(ISQ.Cnf.skinCustomRTLCSSfile,new ISQ.Handler(function(d){c()
}),null,true)}}}else{if(a=="rtl"){c()}else{if(a==="ltr"&&ISQ.Widget.HTML.dynamicRTLCssLoaded){ISQ.CSS.toggleCss("html.rtl_css_file",false);ISQ.CSS.toggleCss("html.skinrtl_css_file",false);ISQ.CSS.removeClass(document.body,"isRtl");ISQ.Widget.Cnf.SpeechRecognition.updateLanguage();ISQ.Widget.HTML.dynamicRTLCssLoaded=false;if(ISQ.Widget.reportEvents){ISQ.Widget.CDC.sendMessage("subject=event&type=directionchanged&rtl=false")}}}}if(ISQ.Cnf.currentUiLanguage===b){return}ISQ.Widget.loadLanguageDictionary(b,function(){if(ISQ.Widget.Texts[b]){ISQ.Cnf.currentUiLanguage=b;ISQ.Widget.Localize.array=ISQ.Widget.Texts[b]}else{if(ISQ.Widget.Texts[ISQ.Cnf.initialUiLanguage]){ISQ.Cnf.currentUiLanguage=ISQ.Cnf.initialUiLanguage;ISQ.Widget.Localize.array=ISQ.Widget.Texts[ISQ.Cnf.initialUiLanguage]}else{ISQ.Cnf.currentUiLanguage="en";ISQ.Widget.Localize.array=ISQ.Widget.Texts.en}}ISQ.Widget.setTitle();if(ISQ.Widget.Chat.chatConfig.active){ISQ.Widget.Chat.updateCaptions()}})};ISQ.Widget.HTML=initializeNS("ISQ.Widget.HTML");ISQ.Widget.HTML.customLink_onclick=function(){return ISQ.Widget.Escalate.send(ISQ.Widget.Escalate.enumType.customEmail)};ISQ.Widget.HTML.customChat_onclick=function(){return ISQ.Widget.Escalate.send(ISQ.Widget.Escalate.enumType.customChat,ISQ.Widget.enumChatEscalationActions.normal)};ISQ.Widget.HTML.setPointers=function(){ISQ.Widget.HTML.widgetContainer=_("widgetContainer");ISQ.Widget.HTML.queryField=_("txtSearch");ISQ.Widget.HTML.clearQuery=_("clearQuery");ISQ.Widget.HTML.searchContainer=_("searchContainer");ISQ.Widget.HTML.answerPane=_("answerPane");ISQ.Widget.HTML.chatPane=_("chatPane");ISQ.Widget.HTML.contentWrapper=_("contentAreaWrapper");ISQ.Widget.HTML.contentArea=_("contentArea");ISQ.Widget.HTML.titleWrapper=_("widgetTitleWrapper");ISQ.Widget.HTML.titleText=_("widgetTitleText");ISQ.Widget.HTML.actionBarWrapper=_("actionBarWrapper");ISQ.Widget.HTML.actionBarContainer=_("actionBarContainer");ISQ.Widget.HTML.actionBarQuery=_("actionBarQuery");ISQ.Widget.HTML.contactForm=_("contactForm");ISQ.Widget.HTML.searchWrapper=_("searchContainerWrapper");
ISQ.Widget.HTML.chatStatus=_("chatStatus");ISQ.Widget.HTML.chatInputWrapper=_("chatInputWrapper");ISQ.Widget.HTML.txtEmailChat=_("txtEmailChat");ISQ.Widget.HTML.footerWrapper=_("widgetFooterWrapper");ISQ.Widget.HTML.widgetFooter=_("widgetFooter");ISQ.Widget.HTML.speechButton=_("speechButton")};ISQ.Widget.HTML.fixBrandingColor=function(){var e=ISQ.Widget.HTML.footerWrapper;var b=ISQ.CSS.getSelectorStyle("#widgetFooterWrapper");if(!b){return}var c=ISQ.Tools.stringToPairArray(b.cssText,":",";",true,true);if(c.display==="none"||c.visibility==="hidden"){return}var a=b.backgroundColor;if(!a){a=b["background-color"]}alert(a)};ISQ.Widget.HTML.Mobile={};ISQ.Widget.HTML.Mobile.ignoreClickEvent=false;ISQ.Widget.HTML.Mobile.formPredefinedData=null;ISQ.Widget.HTML.Mobile.context=null;ISQ.Widget.HTML.Mobile.positionSet=false;ISQ.Widget.HTML.Mobile.incrementedBottom=0;ISQ.Widget.HTML.Mobile.incrementedBottom_withChat=0;ISQ.Widget.HTML.Mobile.adjustableEmbedWidth=null;ISQ.Widget.HTML.Mobile.setMode=function(){if(!ISQ.Http.browser.isMobile){return}document.body.style.webkitTextSizeAdjust="100%";if(ISQ.Widget.HTML.Mobile.adjustableEmbedWidth){ISQ.Widget.mobileHandlingMode=ISQ.Widget.enumMobileHandlingMode.normalWidget;ISQ.Widget.HTML.Mobile.setWidths();return}ISQ.Http.Cookies._delete("nouserstats","/",ISQ.Http.domain(false),false);if(window.top===window||ISQ.Widget.isFullScreen){ISQ.Widget.mobileHandlingMode=ISQ.Widget.enumMobileHandlingMode.normalWidget;document.body.parentNode.style.overflow="visible";document.body.parentNode.style.height="auto";document.body.style.overflow="visible";document.body.style.height="auto";if(!ISQ.Widget.isFullScreen){ISQ.Widget.HTML.contentWrapper.style.overflow="visible";ISQ.Widget.HTML.contentWrapper.style.overflowY="visible"}ISQ.Widget.HTML.Mobile.hideAddressbar();ISQ.Widget.HTML.queryField.style.display="block";ISQ.Widget.setTitle();_("minimizeButtonWrapper").style.display="none";ISQ.Widget.HTML.Mobile.getMobileAPIData(function(b){var a=b&&b[ISQ.Widget.referer.normal];if(a){var a=ISQ.Tools.stringToPairArray(unescape(a),"=","&",false,false);
if(a.f){ISQ.Widget.ContactForm.preDefinedValuesFromMessage=a.f}if(a.c){_session().setContext(ISQ.Widget.CDC_getKeyValueArrayFromMessage(a.c))}}});ISQ.Widget.HTML.Mobile.setWidths();ISQ.Widget.HTML.Mobile.setPositions()}else{ISQ.Widget.mobileHandlingMode=ISQ.Widget.enumMobileHandlingMode.inactive;ISQ.Widget.HTML.queryField.onclick=null;_("minimizeButtonWrapper").style.display="block";ISQ.Widget.HTML.showMinimizeIcon();_("txtSearch").disabled=true}};ISQ.Widget.HTML.Mobile.orientationChanged=function(){var a=ISQ.Html.screenSize();if(a.h==ISQ.Widget.HTML.currentHeight||a.w===ISQ.Widget.HTML.currentWidth){setTimeout(ISQ.Widget.HTML.Mobile.orientationChanged,20);return}ISQ.Widget.HTML.Mobile.hideAddressbar();ISQ.Widget.HTML.resizeHandler(a,true);ISQ.Widget.Query.resizeAnswerElements()};ISQ.Widget.HTML.Mobile.setPositions=function(){if(ISQ.Widget.mobileHandlingMode!==ISQ.Widget.enumMobileHandlingMode.normalWidget||ISQ.Widget.HTML.Mobile.adjustableEmbedWidth){return}if(ISQ.Cnf.customerBrandingLogo&&(!ISQ.Cnf.customerBrandingLogo_img||!ISQ.Cnf.customerBrandingLogo_img.loaded)){return}if(ISQ.Widget.HTML.Mobile.positionSet){return}ISQ.Widget.HTML.Mobile.positionSet=true;var b=new Array();b.push(ISQ.Widget.HTML.footerWrapper);b.push(_("actionBarWrapper"));b.push(_("chatInputWrapper"));iteration(b,function(f){if(f.id&&f.id=="actionBarWrapper"&&ISQ.Widget.skinName=="Arcade"){f.style.zIndex=2;f.style.bottom="3px"}else{f.style.zIndex=1;f.style.bottom=ISQ.Widget.HTML.Mobile.incrementedBottom+"px"}f.style.position="fixed";f.style.width="100%";if(f.id!="actionBarWrapper"||ISQ.Widget.skinName!="Arcade"){ISQ.Widget.HTML.Mobile.incrementedBottom+=ISQ.CSS.getElementHeight(f,true)}if(ISQ.CSS.getElementStyle(f,"display")==="none"){f.style.display="none"}});ISQ.Widget.HTML.Mobile.incrementedBottom_withChat=ISQ.Widget.HTML.Mobile.incrementedBottom;_("chatInputWrapper").style.display="block";ISQ.Widget.HTML.Mobile.incrementedBottom_withChat+=ISQ.CSS.getElementHeight(_("chatInputWrapper"),true);_("chatInputWrapper").style.display="none";if(window==window.top){ISQ.Widget.HTML.contentWrapper.style.minHeight=(window.outerHeight+ISQ.Widget.HTML.Mobile.incrementedBottom)+"px"
}var c=ISQ.CSS.getElementStyle(ISQ.Widget.HTML.footerWrapper,"background-color");var d=ISQ.CSS.getElementStyle(ISQ.Widget.HTML.footerWrapper,"opacity");if(ISQ.Tools.getOpacityFromRGBA(c)===0||d===0){var a=ISQ.CSS.getElementStyle(document.body,"background-color");if(ISQ.Tools.getOpacityFromRGBA(a)===0){ISQ.Widget.HTML.footerWrapper.style.backgroundColor="#fff"}else{ISQ.Widget.HTML.footerWrapper.style.backgroundColor=a}}if(ISQ.Http.browser.oldAndroid){var e=null;window.addEventListener("touchmove",function(){iteration(b,function(f){if(f.style.display!=="none"){f.style.display="none";f.toShow=true}});clearTimeout(e)});window.addEventListener("touchend",function(){clearTimeout(e);e=setTimeout(function(){iteration(b,function(f){if(f.toShow){f.style.display="block"}f.toShow=false})},200)})}if(ISQ.Http.browser.isIPhone){window.addEventListener("touchstart",function(){ISQ.Widget.HTML.queryField.blur()})}ISQ.Widget.HTML.Mobile.setScrollPaddingHeight()};ISQ.Widget.HTML.Mobile.setScrollPaddingHeight=function(a){if(ISQ.Widget.mobileHandlingMode!==ISQ.Widget.enumMobileHandlingMode.normalWidget||ISQ.Widget.HTML.Mobile.adjustableEmbedWidth){return}_("mobileScrollPadding").style.display="block";var b;if(a){b=ISQ.Widget.HTML.Mobile.incrementedBottom_withChat}else{b=ISQ.Widget.HTML.Mobile.incrementedBottom}if(ISQ.Widget.isFullScreen){b=0}_("mobileScrollPadding").style.height=b+"px"};ISQ.Widget.HTML.Mobile.beforeOpeningWidget=function(){ISQ.Http.Cookies._write("nouserstats","1","/",ISQ.Http.domain(false),false);var a=[];if(ISQ.Widget.HTML.Mobile.formPredefinedData){a.push("f=");a.push(ISQ.Widget.HTML.Mobile.formPredefinedData)}if(ISQ.Widget.HTML.Mobile.context){if(a.length!==0){a.push("&")}a.push("c=");a.push(ISQ.Widget.HTML.Mobile.context)}if(a.length===0){return}var b={};b[ISQ.Widget.referer.normal]=a.join("");ISQ.Widget.CDC.sendMessage("subject=setMobileAPI&api="+ISQ.Tools.Base64.encodeString(JSON.stringify(b)))};ISQ.Widget.HTML.Mobile.getMobileAPIData=function(a){if(window.opener){var b=function(c){if(c.data&&c.data.type==="setMobileAPI"){window.removeEventListener("message",b,false);
a(c.data.api||null)}};window.addEventListener("message",b,false);window.opener.postMessage({type:"getMobileAPI"},"*")}else{a(null)}};ISQ.Widget.HTML.Mobile.hideAddressbar=function(a){if(ISQ.Widget.mobileHandlingMode!==ISQ.Widget.enumMobileHandlingMode.normalWidget){return}setTimeout(function(){window.scrollTo(0,1)},a||0)};ISQ.Widget.HTML.Mobile.setWidths=function(a){if(!ISQ.Http.browser.usesViewport){return}if(ISQ.Widget.HTML.currentlyResizing&&!a){return}if(ISQ.Http.browser.isMobile&&ISQ.Widget.mobileHandlingMode!==ISQ.Widget.enumMobileHandlingMode.normalWidget){return}var b;b=ISQ.CSS.getElementWidth(_("widgetTitleWrapper"),true);b-=ISQ.CSS.getElementWidth(_("widgetTitleLeft"),true);b-=ISQ.CSS.getElementWidth(_("widgetTitleRight"),true);b-=ISQ.CSS.getElementWidth(_("minimizeButtonWrapper"),true);ISQ.CSS.setWidthIncludingPadding(ISQ.Widget.HTML.titleText,b-20);if(_("searchContainer").offsetWidth!==0&&ISQ.Widget.HTML.searchContainer.firstChild!==null){b=ISQ.CSS.getElementWidth(_("searchContainerWrapper"),true);ISQ.CSS.setWidthIncludingPadding(_("txtSearch"),b-20);b-=ISQ.CSS.getElementWidth(_("searchContainerLeft"),true);ISQ.Widget.HTML.searchContainer.firstChild.style.display="block";b-=ISQ.CSS.getElementWidth(ISQ.Widget.HTML.searchContainer.firstChild,true);b-=ISQ.CSS.getElementWidth(_("searchContainerRight"),true);b-=ISQ.CSS.getHorizonalMargin(_("txtSearch"));ISQ.CSS.setWidthIncludingPadding(_("txtSearch"),b-20);ISQ.Widget.HTML.searchContainer.firstChild.style.display="none"}if(_("chatStatusContainer").offsetWidth!==0){b=ISQ.CSS.getElementWidth(_("chatStatusContainer"),true);b-=ISQ.CSS.getElementWidth(_("chatStatusIcon"),true);b-=ISQ.CSS.getElementWidth(_("closeChat"),true);b-=ISQ.CSS.getHorizonalMargin(_("chatStatus"));ISQ.CSS.setWidthIncludingPadding(_("chatStatus"),b-20)}if(_("chatInputContainer").offsetWidth!==0){b=ISQ.CSS.getElementWidth(_("chatInputContainer"),true);b-=ISQ.CSS.getElementWidth(_("btnSendChat"),true);b-=ISQ.CSS.getHorizonalMargin(_("btnSendChat"));b-=ISQ.CSS.getHorizonalMargin(_("txtChatInput"));
ISQ.CSS.setWidthIncludingPadding(_("txtChatInput"),b-40)}};ISQ.Widget.HTML.enablePIE=function(){if(!ISQ.Http.browser.isIE6&&!ISQ.Http.browser.isIE7&&!ISQ.Http.browser.isIE8){return}if(typeof(ISQ.Cnf.roundedCornersIEEnabled)!=="undefined"&&!ISQ.Cnf.roundedCornersIEEnabled){return}if(ISQ.Http.browser.isIE6&&!ISQ.Widget.isFloat){return}if(ISQ.Http.browser.isIE6&&window.location.href.startsWith("https://")){return}if(typeof PIE_init==="undefined"){ISQ.Tools.FileLoader.load("/library/vendor/pie-1.0beta5/PIE_uncompressed.js",new ISQ.Handler(function(a){ISQ.Widget.HTML.enablePIE()}),this);return}PIE_init();if(typeof(PIE)==="undefined"){return}setTimeout(function(){PIE.attach(ISQ.Widget.HTML.titleWrapper)},0);setTimeout(function(){PIE.attach(ISQ.Widget.HTML.footerWrapper)},0);setTimeout(function(){PIE.attach(_("widgetMinimizedFooter"))},0);setTimeout(function(){PIE.attach(_("searchContainer"))},0);setTimeout(function(){PIE.attach(_("actionBarWrapper"))},0)};ISQ.Widget.HTML.disablePIE=function(){if(!ISQ.Http.browser.isIE6&&!ISQ.Http.browser.isIE7&&!ISQ.Http.browser.isIE8){return}if(typeof(ISQ.Cnf.roundedCornersIEEnabled)!=="undefined"&&!ISQ.Cnf.roundedCornersIEEnabled){return}if(typeof(PIE)==="undefined"){return}if(ISQ.Http.browser.isIE6&&!ISQ.Widget.isFloat){return}if(ISQ.Http.browser.isIE6&&window.location.href.startsWith("https://")){return}PIE.detach(ISQ.Widget.HTML.titleWrapper);PIE.detach(ISQ.Widget.HTML.footerWrapper);PIE.detach(_("widgetMinimizedFooter"));PIE.detach(_("searchContainer"));PIE.detach(_("actionBarWrapper"))};ISQ.Widget.HTML.highlightSearchFieldError=function(c,a){var b=ISQ.Widget.HTML.searchContainer;if(a){if(b.className.indexOf("error")==-1){b.oldClassName=b.className}b.className+=" error";c--}else{b.className=b.oldClassName}if(c){setTimeout(function(){ISQ.Widget.HTML.highlightSearchFieldError(c,!a)},150)}};if(!ISQ.Widget.stateChangedEvent){ISQ.Widget.stateChangedEvent=new ISQ.Event()}ISQ.Widget.HTML.resizeHandler=function(h,a){if(!h){h=ISQ.Html.screenSize()}ISQ.Widget.HTML.currentHeight=h.h;ISQ.Widget.HTML.currentWidth=h.w;
if(ISQ.Http.browser.isMobile&&ISQ.Widget.mobileHandlingMode==ISQ.Widget.enumMobileHandlingMode.normalWidget){ISQ.Widget.HTML.Mobile.setWidths();if(ISQ.Http.browser.oldAndroid){return}}if(a&&!ISQ.Widget.HTML.resizeTimer){ISQ.Widget.HTML.currentlyResizing=true;ISQ.Widget.HTML.resizeTimer=setInterval(ISQ.Widget.HTML.resizeTimerElapsed,ISQ.Widget.HTML.resizeTimerInterval)}if(!ISQ.Widget.dynamicSize){if(ISQ.Widget.HTML.currentHeight<=ISQ.Widget.HTML.htmlCollapseHeight){ISQ.Widget.HTML.toTeaser()}else{if(ISQ.Widget.HTML.isTeaser){ISQ.Widget.HTML.toNormal()}}}if(ISQ.Http.browser.isMobile){_("minimizeButtonWrapper").style.display="none";ISQ.Widget.setTitle()}if(!ISQ.Http.browser.isMobile||window.top!==window||ISQ.Widget.isFullScreen){var e=h.h;e-=_("widgetTitleWrapper").offsetHeight;e-=ISQ.Widget.HTML.searchWrapper.offsetHeight;if(ISQ.Widget.HTML.isTeaser&&!ISQ.Widget.isFullScreen){e-=_("widgetMinimizedFooter").offsetHeight;e-=_("chatStatusWrapper").offsetHeight}else{e-=ISQ.Widget.HTML.footerWrapper.offsetHeight;var d=ISQ.CSS.getElementStyle(ISQ.Widget.HTML.widgetFooter,"margin-top");if(d){e-=parseInt(d)}if(!ISQ.Widget.isFullScreen){if(ISQ.CSS.getElementStyle(ISQ.Widget.HTML.actionBarWrapper,"position")!=="absolute"){e-=ISQ.Widget.HTML.actionBarWrapper.offsetHeight}}if(_("searchSuggestions").offsetHeight>0){e-=_("searchSuggestions").offsetHeight}if(_("chatStatusWrapper").style.display!=="none"){e-=_("chatStatusWrapper").offsetHeight}e-=ISQ.Widget.HTML.chatInputWrapper.offsetHeight;var g=ISQ.CSS.getElementStyle(ISQ.Widget.HTML.contentWrapper,"margin-top");if(g){e-=parseInt(g)}var f=ISQ.CSS.getElementStyle(ISQ.Widget.HTML.contentWrapper,"margin-bottom");if(f){e-=parseInt(f)}}var b=ISQ.CSS.getElementStyle(ISQ.Widget.HTML.widgetContainer,"border-top-width",true);var c=parseInt(b);if(!isNaN(c)){e-=c}b=ISQ.CSS.getElementStyle(ISQ.Widget.HTML.widgetContainer,"border-bottom-width");c=parseInt(b);if(!isNaN(c)){e-=c}if(e<10){e=0}ISQ.Widget.HTML.contentWrapper.style.height=e+"px"}if(ISQ.Cnf.showLogoInCollapsedMode&&ISQ.Widget.isFloat){if(!ISQ.Cnf.hideBranding&&ISQ.Widget.HTML.currentWidth===ISQ.Cnf.floatCollapsed_WidgetSize[0]&&ISQ.Widget.HTML.currentHeight===ISQ.Cnf.floatCollapsed_WidgetSize[1]){_("logoInCollapsedMode").style.display="block"
}else{_("logoInCollapsedMode").style.display="none"}}ISQ.Widget.HTML.Mobile.setWidths(true)};ISQ.Widget.HTML.actionBarIsShown=false;ISQ.Widget.HTML.showActionBar=function(){if(ISQ.Widget.HTML.currentlyResizing||ISQ.Widget.HTML.isTeaser){ISQ.Widget.HTML.pendingShowActionBar=true;return}ISQ.Widget.HTML.pendingShowActionBar=false;ISQ.Widget.HTML.actionBarIsShown=true;if(ISQ.Widget.HTML.canPerformFade(ISQ.Widget.HTML.actionBarContainer)){if(ISQ.Widget.HTML.actionBarFader===null){ISQ.Widget.HTML.actionBarFader=new VisualEffects.Fade(ISQ.Widget.HTML.actionBarContainer);ISQ.Widget.HTML.actionBarFader.fadeOutEvent.addHandler(ISQ.Widget.HTML.post_hideActionBarFader);ISQ.Widget.HTML.actionBarFader.fadeInEvent.addHandler(ISQ.Widget.HTML.post_showActionBar)}ISQ.Widget.HTML.actionBarFader.setOpacity(0);ISQ.Widget.HTML.actionBarWrapper.style.display="block";ISQ.Widget.HTML.actionBarContainer.style.display="block";ISQ.Widget.HTML.actionBarFader.fadeIn(500,true);if(ISQ.Widget.skinName=="Arcade"){var b=document.getElementById("customerBrandingText");var e=document.getElementById("footerNanoRepLink").offsetWidth;var d=0;if(b){d=b.offsetWidth}var c=e+d;var a=70;while(c+ISQ.Widget.HTML.actionBarWrapper.offsetWidth+10>ISQ.Widget.HTML.footerWrapper.offsetWidth&&a>0){a--;ISQ.Widget.HTML.actionBarWrapper.style.width=a+"%"}}ISQ.Widget.HTML.resizeHandler()}else{ISQ.Widget.HTML.actionBarWrapper.style.display="block";ISQ.Widget.HTML.actionBarContainer.style.display="block";ISQ.Widget.HTML.resizeHandler()}};ISQ.Widget.HTML.hide_finishFunction=null;ISQ.Widget.HTML.hideActionBar=function(a,b){ISQ.Widget.HTML.pendingShowActionBar=false;ISQ.Widget.Log.add("hide action bar");ISQ.Widget.HTML.actionBarIsShown=false;if(a){ISQ.Widget.HTML.hide_finishFunction=a}if(!b&&ISQ.Widget.HTML.canPerformFade(ISQ.Widget.HTML.actionBarContainer)){if(ISQ.Widget.HTML.actionBarFader===null){ISQ.Widget.HTML.post_hideActionBarFader();return}ISQ.Widget.HTML.actionBarFader.fadeOut(200)}else{ISQ.Widget.HTML.post_hideActionBarFader()}};ISQ.Widget.HTML.post_hideActionBarFader=function(){ISQ.Widget.HTML.actionBarWrapper.style.display="none";
ISQ.Widget.HTML.actionBarContainer.style.display="none";ISQ.Widget.HTML.resizeHandler();if(ISQ.Widget.HTML.hide_finishFunction){ISQ.Widget.HTML.hide_finishFunction();ISQ.Widget.HTML.hide_finishFunction=null}};ISQ.Widget.HTML.post_showActionBar=function(){};ISQ.Widget.HTML.scrollContentToBottom=function(){ISQ.Widget.HTML.contentWrapper.scrollTop=ISQ.Widget.HTML.contentWrapper.scrollHeight-ISQ.Widget.HTML.contentWrapper.offsetHeight};ISQ.Widget.HTML.limitedMode=function(){ISQ.Widget.Log.add("Widget is running in limited mode");ISQ.Widget.HTML.queryField.style.display="none";ISQ.Widget.HTML.queryField.style.visibility="hidden";ISQ.Widget.HTML.queryField.value="Limited mode";ISQ.Widget.Escalate.send(ISQ.Widget.Escalate.enumType.email,null,true);ISQ.Widget.HTML.queryField.value=""};ISQ.Widget.HTML.resizePollingHandler=function(){var a=ISQ.Html.screenSize();if(a.h==ISQ.Widget.HTML.currentHeight&&a.w===ISQ.Widget.HTML.currentWidth){return}ISQ.Widget.HTML.Mobile.hideAddressbar();ISQ.Widget.HTML.resizeHandler(a,true)};ISQ.Widget.HTML.timeoutFixContent=0;ISQ.Widget.HTML.fixContentWidths=function(){ISQ.Widget.HTML.timeoutFixContent=0;ISQ.Widget.HTML.fixContentWidths_internal()};ISQ.Widget.HTML.fixContentWidths_internal=function(){if(ISQ.Http.browser.isIE7||ISQ.Http.browser.isIE6){if(ISQ.Widget.HTML.contentWrapper.scrollHeight>ISQ.Widget.HTML.contentWrapper.offsetHeight){var a,c,b;if((ISQ.Widget.state&ISQ.Widget.enumState.allChat)!==0){a=(ISQ.Widget.HTML.contentWrapper.offsetWidth-ISQ.Html.scrollBarWidth())-2;b=ISQ.CSS.getElementStyle(ISQ.Widget.HTML.chatPane,"padding-left");c=ISQ.CSS.getElementStyle(ISQ.Widget.HTML.chatPane,"padding-right")}else{a=(ISQ.Widget.HTML.searchWrapper.offsetWidth-ISQ.Html.scrollBarWidth())-2;b=ISQ.CSS.getElementStyle(ISQ.Widget.HTML.answerPane,"padding-left");c=ISQ.CSS.getElementStyle(ISQ.Widget.HTML.answerPane,"padding-right")}if(a<=0){if(++ISQ.Widget.HTML.timeoutFixContent<40){setTimeout(ISQ.Widget.HTML.fixContentWidths_internal,50)}return}if(b){a-=parseInt(b)}if(c){a-=parseInt(c)}a+="px";_("answerPane").style.width=a;
_("contentArea").style.width=a;if(ISQ.Http.browser.isIE6&&ISQ.Widget.Localize.array.dir==="rtl"){var d=ISQ.Widget.HTML.searchWrapper.offsetWidth;if(d){d=d+"px"}else{d="auto"}setTimeout(function(){ISQ.Widget.HTML.searchWrapper.style.width=d},0)}}else{_("answerPane").style.width="auto";_("contentArea").style.width="100%"}}};ISQ.Widget.HTML.hasContent=function(){if((ISQ.Widget.state&ISQ.Widget.enumState.allEscalations)!==0){return true}if(ISQ.Widget.state===ISQ.Widget.enumState.autoQuestions){return _query(true,true).length!==0}if(ISQ.Widget.state&ISQ.Widget.enumState.questions){return _query(true,false).length!==0}return false};ISQ.Widget.HTML.minimizeBtnClicked=function(){ISQ.Widget.HTML.Mobile.ignoreClickEvent=true;var a=ISQ.Widget.HTML.hasContent();ISQ.Widget.HTML.ignoreNextClickEvent=true;ISQ.Widget.CDC.sendMessage("subject=minimize&openExpand="+a,true);if(ISQ.Widget.state===ISQ.Widget.enumState.autoQuestions){ISQ.Widget.Query.clearTextboxOnInteraction=true;ISQ.Widget.AutoQuestions.stop_()}};ISQ.Widget.HTML.toTeaser=function(){ISQ.Widget.HTML.isTeaser=true;ISQ.Widget.HTML.contentWrapper.className="empty";ISQ.Widget.HTML.footerWrapper.style.display="none";_("widgetMinimizedFooter").style.display="block";if(ISQ.Widget.isFloat){_("minimizeButtonWrapper").style.display="none"}if(_("searchSuggestions").childNodes.length>0){_("searchSuggestions").style.display="none"}ISQ.Widget.HTML.actionBarWrapper.style.display="none";ISQ.Widget.HTML.clearQuery.hide();if((ISQ.Widget.state&ISQ.Widget.enumState.allChat)!==0){if(!ISQ.Widget.HTML.chatStatus.originalText){ISQ.Widget.HTML.chatStatus.originalText=ISQ.Widget.HTML.chatStatus.innerHTML;ISQ.Data.autoEllipseText(ISQ.Widget.HTML.chatStatus.innerHTML,ISQ.Widget.HTML.chatStatus.offsetWidth,ISQ.Widget.HTML.chatStatus)}_("closeChat").style.display="none";_("chatPane").style.display="none";ISQ.Widget.HTML.chatInputWrapper.style.display="none";_("chatStatusContainer").className="chatStatusContainerMinimized"}else{if(ISQ.Widget.state===ISQ.Widget.enumState.contactForm){_("contactForm").style.display="none"
}else{_("answerPane").style.display="none"}}ISQ.Widget.setTitle();ISQ.Widget.stateChangedEvent.dispatch("teaser")};ISQ.Widget.HTML.showMinimizeIcon=function(){if(!ISQ.Widget.spriteLoaded){_("minimizeButton").className+="widgetActive";ISQ.Widget.spriteLoaded=true}};ISQ.Widget.HTML.toNormal=function(){ISQ.Widget.HTML.isTeaser=false;ISQ.Widget.HTML.contentWrapper.className="";_("widgetMinimizedFooter").style.display="none";if(ISQ.Widget.isFloat){_("minimizeButtonWrapper").style.display="inline";ISQ.Widget.HTML.showMinimizeIcon()}if(ISQ.Widget.HTML.hasContent()&&ISQ.Widget.Query.numberOfTopics!==0&&(ISQ.Widget.state&ISQ.Widget.enumState.nonChatEscalations)===0){ISQ.Widget.HTML.actionBarWrapper.style.display="block"}if(_("searchSuggestions").childNodes.length>0){_("searchSuggestions").style.display="block"}if((ISQ.Widget.state&ISQ.Widget.enumState.allQuestions)!==0){_("answerPane").style.display="block"}if(ISQ.Widget.HTML.hasContent()){ISQ.Widget.HTML.clearQuery.show()}if((ISQ.Widget.state&ISQ.Widget.enumState.allChat)!==0){if(ISQ.Widget.HTML.chatStatus.originalText){ISQ.Widget.HTML.chatStatus.innerHTML=ISQ.Widget.HTML.chatStatus.originalText;ISQ.Widget.HTML.chatStatus.originalText=null}_("chatPane").style.display="block";_("closeChat").style.display="block";if(ISQ.Widget.state!==ISQ.Widget.enumState.chatSurvey){ISQ.Widget.HTML.chatInputWrapper.style.display="block"}_("chatStatusContainer").className=""}else{if(ISQ.Widget.state===ISQ.Widget.enumState.contactForm){_("contactForm").style.display="block"}}if(ISQ.Widget.state!==ISQ.Widget.enumState.contactForm||ISQ.Cnf.showFooterWithContactForm!==false){ISQ.Widget.HTML.footerWrapper.style.display="block"}ISQ.Widget.setTitle();if(ISQ.Widget.HTML.answerPane.restorePagerScroll){ISQ.Widget.HTML.answerPane.restorePagerScroll()}ISQ.Widget.stateChangedEvent.dispatch("normal")};ISQ.Widget.HTML.canPerformFade=function(b){if(typeof(b.isFadeAvailable)==="bool"){return b.isFadeAvailable}if(ISQ.Http.browser.app!=="ie"||ISQ.Http.browser.isIE11){b.isFadeAvailable=true;return b.isFadeAvailable
}var a=ISQ.CSS.getElementStyle(b,"background-color");if(!a||a.toLowerCase()=="transparent"){b.isFadeAvailable=false}else{b.isFadeAvailable=true}return b.isFadeAvailable};ISQ.Widget.HTML.resizeTimerElapsed=function(){if(!ISQ.Widget.HTML.lastWindowSize){ISQ.Widget.HTML.lastWindowSize={};ISQ.Widget.HTML.resizeStarted()}if(ISQ.Widget.HTML.currentHeight==ISQ.Widget.HTML.lastWindowSize.h&&ISQ.Widget.HTML.currentWidth==ISQ.Widget.HTML.lastWindowSize.w){clearInterval(ISQ.Widget.HTML.resizeTimer);ISQ.Widget.HTML.resizeTimer=null;ISQ.Widget.HTML.lastWindowSize=null;ISQ.Widget.HTML.currentlyResizing=false;ISQ.Widget.HTML.resizeStopped();return}ISQ.Widget.HTML.lastWindowSize.h=ISQ.Widget.HTML.currentHeight;ISQ.Widget.HTML.lastWindowSize.w=ISQ.Widget.HTML.currentWidth};ISQ.Widget.HTML.resizeStarted=function(){if(!ISQ.Widget.dynamicSize&&!ISQ.Http.browser.isMobile){ISQ.Widget.HTML.actionBarWrapper.style.display="none";ISQ.Widget.HTML.actionBarContainer.style.display="none"}};ISQ.Widget.HTML.resizeStopped=function(){if(ISQ.Http.browser.isIE6||ISQ.Http.browser.isIE7){ISQ.Widget.HTML.disablePIE();ISQ.Widget.HTML.enablePIE()}if(ISQ.Widget.dynamicSize&&ISQ.Http.browser.app=="ff"&&ISQ.Http.browser.version.indexOf("3.")===0){document.body.scrollTop=0}if(ISQ.Widget.HTML.isTeaser){return}if(ISQ.Widget.HTML.pendingShowActionBar){if(ISQ.Widget.state==ISQ.Widget.enumState.questions){ISQ.Widget.Query.showActionBar()}else{if(ISQ.Widget.state==ISQ.Widget.enumState.chat){ISQ.Widget.HTML.showActionBar();if(ISQ.Widget.iChat.instance&&ISQ.Widget.iChat.instance.resumingChat()){ISQ.Widget.HTML.scrollContentToBottom()}}else{if(ISQ.Widget.state==ISQ.Widget.enumState.chatSurvey){ISQ.Widget.HTML.showActionBar()}}}}else{if(ISQ.Widget.HTML.actionBarIsShown){if(ISQ.Http.browser.isMobile){ISQ.Widget.Query.showActionBar()}else{if(!ISQ.Widget.dynamicSize){ISQ.Widget.HTML.showActionBar();ISQ.Widget.HTML.resizeHandler()}}}else{if(ISQ.Widget.state===ISQ.Widget.enumState.contactForm&&(ISQ.Http.browser.isIE7||ISQ.Http.browser.isIE6)&&_("clientFormTabDivs")){_("clientFormTabDivs",true).style.display="none";
_("clientFormTabDivs").style.display="block"}}}if(_("customerLogo").pendingResize){ISQ.Widget.onCustomerLogoLoad()}if((ISQ.Widget.state&ISQ.Widget.enumState.allQuestions)!==0){ISQ.Widget.Query.resizeAnswerElements()}ISQ.Widget.HTML.Mobile.setWidths();if(ISQ.Widget.HTML.answerPane.restorePagerScroll){ISQ.Widget.HTML.answerPane.restorePagerScroll()}ISQ.Widget.HTML.dynamicSize_sendMessage();if(ISQ.Widget.ContactForm.mResizeContactForm){var a=ISQ.Widget.ContactForm.mResizeContactForm;ISQ.Widget.ContactForm.mResizeContactForm=null;a();a=null}};ISQ.Widget.HTML.showRechannelingChatButton=function(){_("repByChatRech").style.display="block"};ISQ.Widget.HTML.dynamicSize_sendMessageTimer=null;ISQ.Widget.HTML.dynamicSize_sendMessage=function(b,c,d){if(!ISQ.Widget.dynamicSize&&!c){return}if(ISQ.Widget.HTML.dynamicSize_sendMessageTimer){clearTimeout(ISQ.Widget.HTML.dynamicSize_sendMessageTimer)}var a=function(){d=d||ISQ.Widget.dynamicMaxSize;var l=ISQ.Widget.HTML.contentWrapper;l.style.overflowY="hidden";var h=0;if(ISQ.Widget.HTML.shownOverlay){_("widgetBlocker").style.display="none"}if(ISQ.Http.browser.app==="chrome"||ISQ.Http.browser.app==="safari"||ISQ.Http.browser.isMobile||(ISQ.Http.browser.isAndroid&&ISQ.Http.browser.isTablet)){var e=ISQ.CSS.getElementStyle(ISQ.Widget.HTML.widgetContainer,"border-top-width");var f=parseInt(e);if(!isNaN(f)){h+=f}e=ISQ.CSS.getElementStyle(ISQ.Widget.HTML.widgetContainer,"border-bottom-width");f=parseInt(e);if(!isNaN(f)){h+=f}h+=ISQ.Widget.HTML.widgetContainer.scrollHeight}else{var j=ISQ.Html.pageSize(false,true);h+=j.h}if((ISQ.Widget.state&ISQ.Widget.enumState.allChat)!==0){var g=250;if(ISQ.Widget.Chat.chatConfig.heightInDynamicEmbed){g=ISQ.Widget.Chat.chatConfig.heightInDynamicEmbed}h+=g-l.offsetHeight}else{h+=_("contentArea").scrollHeight-l.offsetHeight}if(d&&h>d){if(!ISQ.Widget.FAQ.shown&&ISQ.Widget.state!=ISQ.Widget.enumState.contactForm){l.style.overflowY="auto";h=d}}if((ISQ.Widget.state&ISQ.Widget.enumState.allChat)!==0){l.style.overflowY="auto"}if(ISQ.Widget.isFullScreen&&ISQ.Widget.state==ISQ.Widget.enumState.contactForm){l.style.overflowY="auto"
}if(ISQ.Widget.HTML.shownOverlay){_("widgetBlocker").style.display="block";var k=ISQ.Widget.HTML.shownOverlay.offsetHeight+ISQ.Widget.HTML.titleWrapper.offsetHeight+ISQ.Widget.HTML.searchWrapper.offsetHeight+ISQ.Widget.HTML.actionBarWrapper.offsetHeight;if(k>h){h=k}ISQ.Widget.HTML.updateOverlayTop(ISQ.Widget.HTML.shownOverlay)}ISQ.Widget.CDC.sendMessage("subject=setSize&height="+h)};if(b===true){a()}else{ISQ.Widget.HTML.dynamicSize_sendMessageTimer=setTimeout(function(){a()},0)}};ISQ.Widget.HTML.showOverlay=function(b){var a=_("widgetBlocker");a.style.display="block";if(_("blockerContent")!=b){_("blockerContent").style.display="none"}b.blocker=a;b.style.display="block";ISQ.Widget.HTML.shownOverlay=b;var c=(ISQ.Widget.HTML.contentWrapper.offsetWidth-b.offsetWidth)/2;b.style.left=c+"px";ISQ.Widget.HTML.updateOverlayTop(b)};ISQ.Widget.HTML.updateOverlayTop=function(a){var b=ISQ.Widget.HTML.actionBarWrapper.offsetTop-a.offsetHeight;a.style.top=b+"px"};ISQ.Widget.HTML.hideOverlay=function(a){a.style.display="none";a.blocker.style.display="none";ISQ.Widget.HTML.shownOverlay=null;ISQ.Widget.HTML.dynamicSize_sendMessage()};ISQ.Widget.HTML.currentHeight=0;ISQ.Widget.HTML.currentWidth=0;ISQ.Widget.HTML.isTeaser=false;ISQ.Widget.HTML.htmlCollapseHeight=85;ISQ.Widget.HTML.searchAnim=null;ISQ.Widget.HTML.contentFader=null;ISQ.Widget.HTML.actionBarFader=null;ISQ.Widget.HTML.ignoreNextClickEvent=false;ISQ.Widget.HTML.currentlyResizing=false;ISQ.Widget.HTML.resizeTimerInterval=100;ISQ.Widget.HTML.resizeTimer=null;ISQ.Widget.HTML.lastWindowSize=null;ISQ.Widget.HTML.pendingShowActionBar=false;ISQ.Widget.HTML.chatProviderChanged=false;ISQ.Widget.HTML.dynamicRTLCssLoaded=true;ISQ.Widget.HTML.shownOverlay=null;ISQ.Widget.AutoQuestions=initializeNS("ISQ.Widget.AutoQuestions");ISQ.Widget.AutoQuestions.array=null;ISQ.Widget.AutoQuestions.interval=10000;ISQ.Widget.AutoQuestions.currentIndex=-1;ISQ.Widget.AutoQuestions.timeout=null;ISQ.Widget.AutoQuestions.repeatMode=true;ISQ.Widget.AutoQuestions.init=function(e,b,f){if(!e){return false}ISQ.Widget.AutoQuestions.array=new Array();
var d=e.split(";");var c=d.length;for(var a=0;a<c;++a){if(d[a].Trim()!=""){ISQ.Widget.AutoQuestions.array.push(d[a])}}ISQ.Widget.AutoQuestions.interval=!isNaN(b)?parseInt(b):ISQ.Widget.AutoQuestions.interval;ISQ.Widget.AutoQuestions.repeatMode=f===true&&ISQ.Widget.AutoQuestions.array.length>1;ISQ.Widget.Log.add("Initiated "+ISQ.Widget.AutoQuestions.array.length+" auto questions with "+ISQ.Widget.AutoQuestions.interval+" interval between them");ISQ.Widget.state=ISQ.Widget.enumState.autoQuestions;return true};ISQ.Widget.AutoQuestions.showNext=function(){ISQ.Widget.AutoQuestions.timeout=setTimeout(ISQ.Widget.AutoQuestions.go,ISQ.Widget.AutoQuestions.interval)};ISQ.Widget.AutoQuestions.go=function(){if(ISQ.Widget.AutoQuestions.array===null||ISQ.Widget.AutoQuestions.array.length<1){return}var a=ISQ.Widget.AutoQuestions.array.length;var b=ISQ.Widget.AutoQuestions.currentIndex+1;if(b===a){if(!ISQ.Widget.AutoQuestions.repeatMode){return}b=0}var c=ISQ.Widget.AutoQuestions.array[b];ISQ.Widget.AutoQuestions.currentIndex=b;ISQ.Widget.Query.ask(c,ISQ.Widget.Query.enumTextQuerySource.linkedAnswer);if(ISQ.Cnf.initialText===""){ISQ.Widget.HTML.queryField.blur()}};ISQ.Widget.AutoQuestions.stop_=function(){ISQ.Widget.state=ISQ.Widget.enumState.questions;clearTimeout(ISQ.Widget.AutoQuestions.timeout);if(ISQ.Widget.Query.typeTimer!==null){ISQ.Widget.Query.typeTimer.cancel();ISQ.Widget.Query.typeTimer.dispose();ISQ.Widget.Query.typeTimer=null}ISQ.Widget.Query.lastQuerySent=""};ISQ.Widget.AutoQuestions.getCurrentQuestion=function(){return ISQ.Widget.AutoQuestions.array[ISQ.Widget.AutoQuestions.currentIndex]};ISQ.Widget.Protocol={};ISQ.Widget.Protocol.client=null;ISQ.Widget.Protocol.onConnectionStateChange=function(b,a){switch(a){case ISQ.Com.JsonP.Client.enumState.DISCONNECTED:ISQ.Widget.Log.add("connectionState has changed: Disconnected");if(ISQ.Widget.ContactForm.preview){ISQ.Widget.ContactForm.preview.sessionEnded()}break;case ISQ.Com.JsonP.Client.enumState.CONNECTED:ISQ.Widget.Log.add("connectionState has changed: Connected to account "+ISQ.Widget.account+". sid: "+_session().id());
break;case ISQ.Com.JsonP.Client.enumState.CONNECTING:ISQ.Widget.Log.add("connectionState has changed: Connecting");if(ISQ.Widget.ContactForm.preview){ISQ.Widget.ContactForm.preview.sessionEnded()}break;case ISQ.Com.JsonP.Client.enumState.FAILED:ISQ.Widget.Log.add("connectionState has changed: Login has failed",ISQ.Widget.Log.statusEnum.RED);break}};var _session=function(){if(!ISQ.Widget.Protocol.client){ISQ.Widget.Protocol.client=new ISQ.Com.JsonP.Client({host:ISQ.Widget.getAccountURL(ISQ.Widget.account),urlPrefix:"/api/widget/v1/",defaultTimeout:8000,account:ISQ.Widget.account,loginParams:{internal:"true",url:ISQ.Widget.referer.escaped,doctype:ISQ.Http.hashArguments.doctype,configId:ISQ.Widget.configId,kb:(ISQ.Http.hashArguments.kb||ISQ.Http.urlArguments.kb),nostats:!!ISQ.Widget.isPreview,ctx:null,values:null},fStateChanged:this.onConnectionStateChange})}return ISQ.Widget.Protocol.client};ISQ.Widget.Query=initializeNS("ISQ.Widget.Query");ISQ.Widget.Query.isSameQuery=false;ISQ.Widget.Query.lastQuerySent="";ISQ.Widget.Query.lastSuggestionSent="";ISQ.Widget.Query.lastWrittenQuery=null;ISQ.Widget.Query.lastQuerySource=null;ISQ.Widget.Query.lastQuerySent_time=null;ISQ.Widget.Query.pendingRequest=false;ISQ.Widget.Query.timer=null;ISQ.Widget.Query.activeRequestId=-1;ISQ.Widget.Query.ignoreKeyCodes=new Array();ISQ.Widget.Query.kbLanguageCode="";ISQ.Widget.Query.numberOfTopics=0;ISQ.Widget.Query.contextOnlyAnswers=0;ISQ.Widget.Query.currentAnswers=null;ISQ.Widget.Query.currentAnswersForComparison=null;ISQ.Widget.Query.firstAnswerId=0;ISQ.Widget.Query.ticketingInterface=null;ISQ.Widget.Query.chatEscalationAction=null;ISQ.Widget.Query.chatInviteContent=null;ISQ.Widget.Query.chatPushAnswers={pushed:false};ISQ.Widget.Query.fader=null;ISQ.Widget.Query.cachedAnswerTranslationDelimiter=":";ISQ.Widget.Query.previousDetectedLanguage=null;ISQ.Widget.Query.previousResponseWasAutoQuestion=false;ISQ.Widget.Query.queryTranslator=null;ISQ.Widget.Query.answerTranslator=null;ISQ.Widget.Query.queryChangedEvent=null;ISQ.Widget.Query.typeTimer=null;
ISQ.Widget.Query.typeInterval=50;ISQ.Widget.Query.questionsTrail=null;ISQ.Widget.Query.tempQuestionTrailId=null;ISQ.Widget.Query.gettingAnswerById=false;ISQ.Widget.Query.setFocusByScript=false;ISQ.Widget.Query.firstUserTyping=true;ISQ.Widget.Query.clearTextboxOnInteraction=false;ISQ.Widget.Query.searchDelay_min=250;ISQ.Widget.Query.searchDelay_max=2500;ISQ.Widget.Query.searchDelay_history=new ISQ.Infra.LinkedList();ISQ.Widget.Query.elementsToResize=null;ISQ.Widget.Query.resizeableTags=["IMG","OBJECT","EMBED","IFRAME"];ISQ.Widget.Query.lastQueryTranslation=null;ISQ.Widget.Query.resizeToWidth=0;ISQ.Widget.Query.mobile_previousValue=null;ISQ.Widget.Query.mobile_ignoreNextChange=false;ISQ.Widget.Query.userActiveReported=false;ISQ.Widget.Query.lastAutoQuestionRequestId=-1;ISQ.Widget.Query.contextCategories=null;ISQ.Widget.Query.scrollInterval=null;ISQ.Widget.Query.peekElementHeight=27;ISQ.Widget.Query.rechannelingOptions=null;ISQ.Widget.Query.activateAutoLink=null;ISQ.Widget.Query.resetAutoLink=null;ISQ.Widget.Query.autoLinkAnimationTime={slow:2,fast:0.85,superFast:0.5};ISQ.Widget.Query.minKeywordConfidence=0.5;var _query=function(b,a){var c=ISQ.Widget.HTML.queryField.value;if(!ISQ.Widget.userActive&&!a){return""}if(b===true){c=c.Trim()}return c};ISQ.Widget.Query.init=function(){ISQ.Widget.Query.ignoreKeyCodes[13]=true;ISQ.Widget.Query.ignoreKeyCodes[16]=true;ISQ.Widget.Query.ignoreKeyCodes[17]=true;ISQ.Widget.Query.ignoreKeyCodes[18]=true;ISQ.Widget.Query.ignoreKeyCodes[20]=true;ISQ.Widget.Query.ignoreKeyCodes[37]=true;ISQ.Widget.Query.ignoreKeyCodes[38]=true;ISQ.Widget.Query.ignoreKeyCodes[39]=true;ISQ.Widget.Query.ignoreKeyCodes[40]=true;ISQ.Widget.Query.ignoreKeyCodes[91]=true;ISQ.Widget.Query.ignoreKeyCodes[92]=true;ISQ.Widget.HTML.contentFader={show:function(){ISQ.CSS.addClass(ISQ.Widget.HTML.contentArea,"busy")},hide:function(){ISQ.CSS.removeClass(ISQ.Widget.HTML.contentArea,"busy")}};ISQ.Widget.Query.queryChangedEvent=new ISQ.Event();var a=ISQ.Http.hashArguments.searchdelay||ISQ.Http.urlArguments.searchdelay;if(a){a=parseInt(a)
}if(!isNaN(a)){ISQ.Widget.Query.searchDelay_min=a}if((ISQ.Http.browser.isMobile&&ISQ.Widget.mobileHandlingMode===ISQ.Widget.enumMobileHandlingMode.normalWidget)||ISQ.Http.browser.isTablet||((ISQ.Cnf.kbLanguageCode=="ja"||ISQ.Cnf.kbLanguageCode=="zh")&&ISQ.Http.browser.app=="ff")){ISQ.Widget.Query.mobile_previousValue=ISQ.Cnf.initialText||null;setInterval(ISQ.Widget.Query.queryInterval_mobile,100);ISQ.Widget.HTML.queryField.onkeyup=null}ISQ.Widget.Suggestions.init()};ISQ.Widget.Query.queryInterval_mobile=function(){if(ISQ.Widget.state===ISQ.Widget.enumState.autoQuestions){return}if(ISQ.Widget.Query.typeTimer&&!ISQ.Widget.Query.typeTimer.isDisposed()){return}var b=_query(false,true);if(b===ISQ.Widget.Query.mobile_previousValue){return}ISQ.Widget.Query.mobile_previousValue=b;if(ISQ.Widget.Query.mobile_ignoreNextChange){ISQ.Widget.Query.mobile_ignoreNextChange=false;return}ISQ.Widget.userActive=true;var a={keyCode:b.charCodeAt(b.length-1)};ISQ.Widget.Query.keyUpHandler(a)};ISQ.Widget.chatScriptLoaded=false;ISQ.Widget.Query.onFocusHandler=function(a){ISQ.Widget.Translation.init();ISQ.Widget.FAQ.initalize();if(ISQ.Http.browser.isMobile){if(ISQ.Widget.mobileHandlingMode===ISQ.Widget.enumMobileHandlingMode.inactive){ISQ.Widget.HTML.queryField.blur()}else{if(ISQ.Http.browser.isAndroid&&(ISQ.Widget.Query.gettingAnswerById||!ISQ.Widget.userActive)){ISQ.Widget.Query.clearTextboxOnInteraction=true;ISQ.Widget.Query.userInteractionHandler(a)}ISQ.Widget.HTML.Mobile.hideAddressbar(20)}return}if(!ISQ.Widget.sendingCDCMessages){ISQ.Widget.HTML.queryField.onfocus=null;return false}else{if(ISQ.Widget.isFloat){ISQ.Widget.CDC.sendMessage("subject=textfieldFocus")}}};var forceBlur=function(){document.activeElement.blur();window.focus()};ISQ.Widget.onBlurHandler=function(){if(ISQ.Http.browser.isIPad&&document.activeElement==ISQ.Widget.HTML.queryField){document.getElementById("ipadFocusOut").focus()}if(!ISQ.Widget.sendingCDCMessages){return}ISQ.Widget.Suggestions.hide(_("searchSuggestions"));if(ISQ.Widget.isFloat){ISQ.Widget.CDC.sendMessage("subject=blur")
}};ISQ.Widget.Query.onBlurHandler=function(){if(!ISQ.Widget.sendingCDCMessages){ISQ.Widget.HTML.queryField.onblur=null;return false}if(ISQ.Widget.isFloat){ISQ.Widget.CDC.sendMessage("subject=blur")}};ISQ.Widget.Query.setFocus=function(){if(ISQ.Http.hashArguments.autograbfocusinembed){ISQ.Cnf.autoGrabFocusInEmbed&=ISQ.Http.hashArguments.autograbfocusinembed==="true"}if(ISQ.Widget.isPreview||ISQ.Cnf.autoGrabFocusInEmbed===false||ISQ.Cnf.autoGrabFocusInEmbed===0||ISQ.Widget.isFloat||ISQ.Http.browser.isMobile){return}ISQ.Widget.Query.setFocusByScript=true;try{ISQ.Widget.HTML.queryField.focus();ISQ.Widget.Log.add("Focus:  was added to query field")}catch(a){setTimeout(function(){try{ISQ.Widget.HTML.queryField.focus();ISQ.Widget.Log.add("Focus: was added to query field with timeout")}catch(b){}},0)}};ISQ.Widget.Query.onclickHandler=function(b,a){if(ISQ.Http.browser.isAndroid){return}ISQ.Widget.Query.userInteractionHandler(b,a)};ISQ.Widget.Query.userInteractionHandler=function(b,a){if(ISQ.Widget.state===ISQ.Widget.enumState.autoQuestions||ISQ.Cnf.initialText||ISQ.Widget.Query.clearTextboxOnInteraction){if(ISQ.Widget.state===ISQ.Widget.enumState.autoQuestions){ISQ.Widget.AutoQuestions.stop_()}if((a&&!ISQ.Widget.userActive)||ISQ.Widget.Query.clearTextboxOnInteraction){ISQ.Widget.HTML.queryField.value="";ISQ.Widget.HTML.queryField.className=ISQ.Widget.HTML.queryField.className.replace("initialText","");ISQ.Widget.Query.mobile_ignoreNextChange=true;if(ISQ.Widget.Query.typeTimer){ISQ.Widget.Query.typeTimer.cancel()}}ISQ.Widget.Query.clearTextboxOnInteraction=false}return false};ISQ.Widget.Query.keyPressHandler=function(c){var b=c||window.event;var a=13;if(b.keyCode===a){if(ISQ.Widget.Query.activateAutoLink){var d=ISQ.Widget.Query.autoLinkAnimationTime.fast;ISQ.Widget.Query.activateAutoLink(d)}return false}ISQ.Widget.userActive=true};ISQ.Widget.Query.keyDownHandler=function(b){var a=(ISQ.Widget.HTML.queryField.value.length==0)?false:true;ISQ.Widget.Query.userInteractionHandler(b,a);ISQ.Widget.userActive=true;ISQ.Widget.HTML.queryField.onkeydown=null
};ISQ.Widget.Query.pasteHandler=function(a){ISQ.Widget.Query.userInteractionHandler(a,true);ISQ.Widget.userActive=true;setTimeout(function(){ISQ.Widget.Query.keyUpHandler(a)},0)};ISQ.Widget.Query.keyUpHandler=function(b){var a=b||window.event;if(!ISQ.Widget.userActive){return}if(typeof(a.keyCode)!="unknown"&&ISQ.Widget.Query.ignoreKeyCodes[a.keyCode]){return false}if(ISQ.Cnf.limited&&ISQ.Widget.state!==ISQ.Widget.enumState.contactForm){return false}if(ISQ.Widget.state===ISQ.Widget.enumState.customLink){ISQ.Widget.state=ISQ.Widget.enumState.questions}ISQ.Widget.Query.searchDelay_history.addLast(new Date());if(ISQ.Widget.Query.searchDelay_history.count()===6){ISQ.Widget.Query.searchDelay_history.remove(ISQ.Widget.Query.searchDelay_history.head())}ISQ.Widget.Query.analyzeQuery(_query(false),ISQ.Widget.Query.enumTextQuerySource.regular);return false};ISQ.Widget.setGuidanceSearchOptions=function(b){var d={};var a=b.split("|");for(var c=0;c<a.length;c++){var e=a[c].split(":");d[e[0]]=e[1]=="true"?true:false}ISQ.Widget.guidanceSearchOptions=d};ISQ.Widget.Query.openAutoLink=function(b,a){if(b.isGuidance){ISQ.Widget.Query.openAutoLinkHandler(b,a)}else{_session().request({url:"trackEvent.js",params:{text:encodeURIComponent(ISQ.Widget.Query.lastQuerySent),articleId:a.id,data:'{"type":"autoLink"}',eventType:11,},handler:function(d,c){if(d==ISQ.Com.JsonP.Request.enumResponseType.OK){ISQ.Widget.Query.openAutoLinkHandler(b,a)}}})}};ISQ.Widget.Query.openAutoLinkHandler=function(b,a){var g=["http://","https://","//"];var h=null;for(var c=0,d=g.length;c<d;++c){var f=g[c];if(b.url.substring(0,f.length)===f){h=b.url;break}}if(!h){h="http://"+b.url}if(b.keepArticleOpen){ISQ.Widget.setOngoingData(h)}if(b.isGuidance){ISQ.Widget.HTML.minimizeBtnClicked();var e=[];e.push("subject=runGuidance");e.push("&guideId="+b.guideId);e.push("&stepId="+b.stepId);e.push("&articleId="+a.id);e.push("&viewId="+ISQ.Cnf.kbId);e.push("&domainId="+ISQ.Cnf.id);ISQ.Widget.CDC.sendMessage(e.join(""))}else{window.open(h,"_top")}};ISQ.Widget.Query.ask=function(b,c){var a=(!ISQ.Cnf.initialText||ISQ.Widget.state!==ISQ.Widget.enumState.autoQuestions);
if(ISQ.Cnf.autoQuestionsTypeEffect&&a&&c!==ISQ.Widget.Query.enumTextQuerySource.api){ISQ.Widget.Query.analyzeQuery(b,c);ISQ.Widget.Query.typeTimer=new ISQ.Timer(new ISQ.Handler(ISQ.Widget.Query.typeQuestion),false,b,0);ISQ.Widget.Query.typeTimer.start(ISQ.Widget.Query.typeInterval)}else{if(a){ISQ.Widget.HTML.queryField.value=b}ISQ.Widget.Query.analyzeQuery(b,c)}};ISQ.Widget.Query.questionLinkClicked=function(b,a){if(ISQ.Widget.Query.tempQuestionTrailId===b){return}if(ISQ.Widget.state===ISQ.Widget.enumState.autoQuestions){ISQ.Widget.state=ISQ.Widget.enumState.questions}ISQ.Widget.userActive=true;ISQ.Widget.Query.appendQuestionToTrail();ISQ.Widget.Query.tempQuestionTrailId=b;ISQ.Widget.Query.getAnswerById(b,a)};ISQ.Widget.Query.clearQuestionTrail=function(){if(ISQ.Widget.Query.questionsTrail){ISQ.Widget.Query.questionsTrail.dispose();ISQ.Widget.Query.questionsTrail=null}ISQ.Widget.Query.tempQuestionTrailId=null};ISQ.Widget.Query.appendQuestionTag=function(b,a,c){b.push("<a href='javascript:void(0)' onclick='ISQ.Widget.Query.questionLinkClicked(\"");b.push(a);b.push("\")'>");b.push(c);b.push("</a>")};ISQ.Widget.Query.namedAnchorClick=function(b){var d=document.getElementsByTagName("A");b=b.substring(1);for(var c in d){try{if(d[c].getAttribute("name")===b){if(ISQ.Widget.isFloat||ISQ.Widget.HTML.contentWrapper.scrollHeight>ISQ.Widget.HTML.contentWrapper.offsetHeight){ISQ.Widget.HTML.contentWrapper.scrollTop=ISQ.Html.position(d[c]).y-ISQ.Widget.HTML.searchContainer.offsetHeight}else{d[c].scrollIntoView()}break}}catch(a){}}return false};ISQ.Widget.Query.appendQuestionToTrail=function(){if(!ISQ.Widget.Query.questionsTrail){ISQ.Widget.Query.questionsTrail=new ISQ.Infra.Stack()}if(!ISQ.Widget.Query.tempQuestionTrailId){var a=ISQ.Widget.state===ISQ.Widget.enumState.autoQuestions?ISQ.Widget.AutoQuestions.getCurrentQuestion():_query(true,true);ISQ.Widget.Query.questionsTrail.push({tag:a,isTagAnId:false})}else{ISQ.Widget.Query.questionsTrail.push({tag:ISQ.Widget.Query.tempQuestionTrailId,isTagAnId:true})}ISQ.Widget.Query.tempQuestionTrailId=null
};ISQ.Widget.Query.popQuestionFromTrail=function(){if(!ISQ.Widget.Query.questionsTrail){return null}return ISQ.Widget.Query.questionsTrail.pop()};ISQ.Widget.Query.getCurrentQuestionFromTrail=function(){if(!ISQ.Widget.Query.questionsTrail){return null}return ISQ.Widget.Query.questionsTrail.peek()};ISQ.Widget.Query.typeQuestion=function(b,a){if(a===b.length){ISQ.Widget.Query.typeTimer.dispose();return}ISQ.Widget.HTML.queryField.value=b.substr(0,a+1);ISQ.Widget.Query.typeTimer.start(ISQ.Widget.Query.typeInterval,b,a+1)};ISQ.Widget.Query.enumTextQuerySource={regular:1,api:2,linkedAnswer:3,suggestion:4};ISQ.Widget.Query.analyzeQuery=function(f,h){f=f.replace(/\n/g," ");var n=f.Trim();ISQ.Widget.Query.clearQuestionTrail();ISQ.Widget.Query.gettingAnswerById=false;ISQ.Widget.Query.lastQuerySource=h;if(ISQ.Widget.Query.resetAutoLink){ISQ.Widget.Query.resetAutoLink()}if(ISQ.Widget.state===ISQ.Widget.enumState.questions){if(n.length===0){if(ISQ.Widget.Query.timer!==null){clearTimeout(ISQ.Widget.Query.timer)}if(ISQ.Widget.Query.acTimer){clearTimeout(ISQ.Widget.Query.acTimer)}ISQ.Widget.Query.lastQuerySent="";ISQ.Widget.Query.lastSuggestionSent="";ISQ.Widget.Query.hideAnswers(null,!ISQ.Widget.dynamicSize);ISQ.Widget.HTML.contentFader.hide();ISQ.Widget.HTML.hideActionBar();ISQ.Widget.Query.firstUserTyping=true;ISQ.Widget.Query.currentAnswers=null;ISQ.Widget.Query.currentAnswersForComparison=null;ISQ.Widget.Suggestions.hide(_("searchSuggestions"));if(ISQ.Cnf.faqData){clearNode(ISQ.Widget.HTML.answerPane);ISQ.Widget.FAQ.show(ISQ.Widget.FAQ.behavior.OnClearSearchField)}if(ISQ.Widget.isFloat){ISQ.Widget.CDC.sendMessage("subject=widgetToExpand")}ISQ.Widget.HTML.clearQuery.hide();return}if(ISQ.Cnf.autocompleteEnabled&&h===ISQ.Widget.Query.enumTextQuerySource.regular&&!(ISQ.Http.hashArguments.naive)){var g=ISQ.Widget.Query.getLastWords(n,ISQ.Cnf.autocomplete_maxQueryLength);if(!g){ISQ.Widget.Suggestions.hide(_("searchSuggestions"))}if(ISQ.Widget.Query.acTimer){clearTimeout(ISQ.Widget.Query.acTimer)}ISQ.Widget.Query.acTimer=setTimeout(function(){ISQ.Widget.Query.acTimer=null;
if(ISQ.Widget.Query.lastSuggestionSent===g){return}ISQ.Widget.Query.lastSuggestionSent=g;ISQ.Widget.Suggestions.request(g,{container:_("searchSuggestions"),eventsHandler:function(r,o,q,p){if(r!="click"){return}ISQ.Widget.HTML.queryField.value=q;ISQ.Widget.Query.mobile_ignoreNextChange=true;ISQ.Widget.Query.analyzeQuery(q,ISQ.Widget.Query.enumTextQuerySource.suggestion)},documentEventsHandler:function(q,o,p){ISQ.Widget.HTML.queryField.value=p||n},includeAnswers:false})},200)}var a=ISQ.Widget.Query.previousResponseWasAutoQuestion||h!==ISQ.Widget.Query.enumTextQuerySource.regular;if(!a&&n===ISQ.Widget.Query.lastQuerySent){if(!ISQ.Widget.Query.pendingRequest){if(ISQ.Widget.Query.timer!==null){clearTimeout(ISQ.Widget.Query.timer)}ISQ.Widget.HTML.contentFader.hide();ISQ.Widget.Query.firstUserTyping=true}return}if(ISQ.Widget.Query.timer!==null){clearTimeout(ISQ.Widget.Query.timer)}ISQ.Widget.HTML.contentFader.show()}if(ISQ.Widget.state===ISQ.Widget.enumState.autoQuestions||h!==ISQ.Widget.Query.enumTextQuerySource.regular){++ISQ.Widget.Suggestions.requestId;ISQ.Widget.Suggestions.hide(_("searchSuggestions"));ISQ.Widget.Query.lastSuggestionSent="";ISQ.Widget.Query.isSameQuery=h===ISQ.Widget.Query.enumTextQuerySource.suggestion;ISQ.Widget.Query.send(n,false,h);if(ISQ.Widget.Query.enumTextQuerySource.suggestion===h){ISQ.Widget.Query.lastWrittenQuery=n}}else{if(ISQ.Widget.Query.firstUserTyping&&ISQ.Widget.state===ISQ.Widget.enumState.questions){if(ISQ.Widget.reportEvents){if(!ISQ.Widget.Query.userActiveReported){ISQ.Widget.CDC.sendMessage("subject=event&type=useractive");ISQ.Widget.Query.userActiveReported=true}ISQ.Widget.CDC.sendMessage("subject=event&type=userstartedtyping")}if(ISQ.Widget.isFloat){ISQ.Widget.CDC.sendMessage("subject=userWrites")}ISQ.Widget.Query.firstUserTyping=false}var d=new Date().getTime();var b=d-ISQ.Widget.lastQueryKeyTime;ISQ.Widget.lastQueryKeyTime=new Date().getTime();if(ISQ.Widget.Query.isSameQuery&&b>ISQ.Widget.updateQueryDiff_ms){ISQ.Widget.Query.isSameQuery=false}var j;if(ISQ.Widget.state===ISQ.Widget.enumState.contactForm){j=0
}else{if(ISQ.Widget.Query.searchDelay_history.count()>2){var m=0;var e=ISQ.Widget.Query.searchDelay_history.head();var c=e.next();while(c){var b=(c.data()-e.data());if(b<ISQ.Widget.Query.searchDelay_min){b=ISQ.Widget.Query.searchDelay_min}else{if(b>ISQ.Widget.Query.searchDelay_max){b=ISQ.Widget.Query.searchDelay_max}}m+=b;e=c;c=c.next()}j=m/ISQ.Widget.Query.searchDelay_history.count()*2}else{j=ISQ.Widget.Query.searchDelay_min*2}}ISQ.Widget.Query.lastWrittenQuery=n;var l=function(){ISQ.Widget.Query.firstUserTyping=true;ISQ.Widget.Query.timerElapsedHandler(n,a);ISQ.Widget.Query.timer=null};var k=0;if(ISQ.Widget.Query.lastQuerySent_time){k=d-ISQ.Widget.Query.lastQuerySent_time}else{if(ISQ.Widget.Query.searchDelay_history.count()!==0){k=d-ISQ.Widget.Query.searchDelay_history.tail().data()}}if(k>=5000){l()}else{ISQ.Widget.Query.timer=setTimeout(l,j)}}};ISQ.Widget.Query.getLastWords=function(h,c){var f=0;var j=0;var e=false;h=h.replacer([{from:"",to:" "},{from:"\\",to:" "},{from:"-",to:" "},{from:"=",to:" "},{from:"(",to:" "},{from:")",to:" "},{from:"[",to:" "},{from:"]",to:" "},{from:"{",to:" "},{from:"}",to:" "},{from:"<",to:" "},{from:">",to:" "},{from:"#",to:" "},{from:"@",to:" "},{from:"^",to:" "},{from:"!",to:" "},{from:"?",to:" "},{from:"/",to:" "},{from:"&",to:" "},{from:"%",to:" "},{from:"$",to:" "},{from:"*",to:" "},{from:"",to:" "},{from:"\t",to:" "},{from:"\r",to:" "},{from:"\n",to:" "}]);var d=h.length-1;var b=true;while(h.charAt(d)===" "){--d}var g=d;var k=d;var a=false;for(;d>=0;--d){b=h.charAt(d)===" ";if(e){if(!b){e=false;k=d}}else{if(b){if(++j===c){break}k=-1;e=true}}}if(j<c){return h.Trim()}if(d===-1){return h.Trim()}if(!a){return h.substring(1+d).Trim()}k=d=g;j=0;e=false;words=[];for(;d>=0;--d){b=h.charAt(d)===" ";if(e){if(!b){e=false;k=d}}else{if(b){if(k-d>1){if(g==h.length){words.push(h.substring(d+1))}else{words.push(h.substring(d+1,k+1))}if(++j===c){k=-1;break}}k=-1;e=true}}}if(k!=-1){words.push(h.substring(0,k+1))}return words.reverse().join(" ")};ISQ.Widget.Query.countWords=function(c){var a=0;
while(c.charAt(a)===" "&&a<c.length){++a}if(a===c.length){return 0}var b=false;var d=1;for(;a<c.length;++a){if(c.charAt(a)!==" "){b=false;continue}else{if(b){continue}b=true;++d}}return d};ISQ.Widget.Suggestions={init:function(){ISQ.Data.copyElementFontStyle(_("txtSearch"),_("searchSuggestions"))},request:function(c,a,b){if(!c.length){return}b=b||ISQ.Widget.TranslationHelper.detectedLanguage||ISQ.Cnf.kbLanguageCode;if(!this.running){this.request_internal(c,a,b)}else{this.pendingQuery={q:c,obj:a,kbLanguageCode:b}}},hide:function(a){clearNode(a).style.display="none";document.onkeyup=null;ISQ.Widget.HTML.resizeHandler();ISQ.Widget.HTML.dynamicSize_sendMessage()},checkForHide:function(a,b){if(!a){return false}if(ISQ.Widget.Query.countWords(b)<2){return false}if(ISQ.Widget.Query.kbLanguageCode){if(a!=ISQ.Widget.Query.kbLanguageCode){this.hide(_("searchSuggestions"));return true}}else{if(a!=ISQ.Cnf.kbLanguageCode){this.hide(_("searchSuggestions"));return true}}return false},enumSearchWord:{none:0,word:1,subword:2},request_internal:function(d,a,b){this.running=true;var c=this;_session().request({url:"suggest.js",params:{text:encodeURIComponent(d),maxResults:a.maxResults?a.maxResults:null,includeItemId:a.verbose?a.verbose:null,stemming:true,requestId:++this.requestId},handler:function(f,e){c.running=false;if(c.checkForHide(b,ISQ.Widget.Query.lastQuerySent)){return}if(f==ISQ.Com.JsonP.Request.enumResponseType.OK){c.currentLanguageCode=b;c.processResponse(e,a)}else{if(!c.pendingQuery){c.request(d,a,b)}}c.processNextRequest()}})},processResponse:function(c,f){this.hide(f.container);var d=this;if(ISQ.Widget.state===ISQ.Widget.enumState.questions&&!_query(true,false)){return}try{if(c.rid!=this.requestId){return}var a=ISQ.Translation.Infra.getLanguageDirection(c.lc);f.container.style.direction=a;if(a=="rtl"){f.container.style.textAlign="right"}else{f.container.style.textAlign="left"}var m=f.container.parentNode.offsetWidth;var l=20;var h=this.parseStemming(c.q,false);var j=[];var k=-1;var g=-1;iteration(c.a,function(r,q){var s,e=null,p="-1";
if(typeof(r)==="string"){s=r}else{s=r.w;p=r.i}var n=d.parseStemming(s,true);if(!n.text.Trim()){return}var o=createDiv(f.container,".autoCompleteDiv");if(ISQ.Http.browser.isIOS){o.style.maxWidth=(m-l)+"px"}o.index=j.length;j.push(o);o.innerHTML=d.emphasizeText(n,h);o.answerTitle=n.text;o.id=p;o.setAttribute("tabindex","4");o.onmouseover=function(){var v=this.parentNode;for(var u in v.childNodes){var t=v.childNodes[u];if(t.nodeName!="DIV"||t==this||t.className.indexOf(" autoCompleteDiv_hover")==-1){continue}t.ignoreMouseout=false;t.onmouseout()}k=this.index;if(this.className.indexOf(" autoCompleteDiv_hover")==-1){this.className+=" autoCompleteDiv_hover"}if(f.eventsHandler){f.eventsHandler("mouseover",this.id,o.answerTitle)}};o.onmouseout=function(){if(this.ignoreMouseout){return}g=this.index;this.className=this.className.replace(" autoCompleteDiv_hover","");if(f.eventsHandler){f.eventsHandler("mouseout",this.id,o.answerTitle)}};o.onclick=function(){d.clicked=true;if(f.eventsHandler){f.eventsHandler("click",this.id,o.answerTitle)}d.hide(f.container)}});f.container.style.display="block";f.container.style.overflow="hidden";f.container.style.width="100%";this.ellipsisText(f.container,f.container.offsetWidth-15);if(ISQ.Widget.state===ISQ.Widget.enumState.questions){ISQ.Widget.HTML.resizeHandler();ISQ.Widget.HTML.dynamicSize_sendMessage()}document.onkeyup=function(o){var e=ISQ.Html.getDomEvent(o);var n;switch(e.domEvent.keyCode){case 40:if(k!==-1){n=j[k];n.ignoreMouseout=false;n.onmouseout()}++k;if(k===j.length){k=-1;return}n=j[k];n.ignoreMouseout=true;if(f.documentEventsHandler){f.documentEventsHandler("down",k,n.answerTitle)}n.onmouseover();break;case 38:if(k!==-1){n=j[k];n.ignoreMouseout=false;n.onmouseout()}if(k===-1){k=j.length-1}else{--k}var p=null;if(k!==-1){n=j[k];n.ignoreMouseout=true;p=n.answerTitle;n.onmouseover()}if(f.documentEventsHandler){f.documentEventsHandler("up",k,p)}break;case 13:if(k===-1||k==g){d.hide(f.container);return}j[k].onclick();break;case 27:d.hide(f.container);break}};if(f.onDrawHandler){f.onDrawHandler()
}}catch(b){}},insertSuggestionToTextbox:function(b){var a=_query(false,false);if(!b.startsWith(a)){return false}ISQ.Widget.HTML.queryField.value=b;if(ISQ.Widget.HTML.queryField.setSelectionRange){ISQ.Widget.HTML.queryField.setSelectionRange(a.length,b.length)}else{if(ISQ.Widget.HTML.queryField.createTextRange){var c=ISQ.Widget.HTML.queryField.createTextRange();c.moveStart("character",a.length);c.moveEnd("character",b.length);c.select()}}return true},ellipsisText:function(a,g){var f={};var e=parseInt(ISQ.CSS.getElementStyle(a,"font-size"));var d=12;var b=false;for(var c=0;c<a.childNodes.length;++c){if(!f[c]){f[c]=a.childNodes[c];f[c].origText=f[c].innerHTML}f[c].style.fontSize=e+"px";ISQ.Data.autoEllipseText(f[c].origText,g,f[c]);if(f[c].origText!=f[c].innerHTML&&e>d){b=true;--e;--c}}if(!b){return}for(var c in f){f[c].origText=null;f[c].style.fontSize=e+"px";f[c].title=ISQ.Data.htmlEncode(f[c].title,"b",true)}},processNextRequest:function(){var a=this.pendingQuery;if(a){this.pendingQuery=null;this.request_internal(a.q,a.obj,a.kbLanguageCode)}},parseStemming:function(b,a){var e={stemmingData:{},text:[],lastWord:""};var d=function(m){var h=0;var f=[];var l=5;var k=0;for(var j=0;j<m.length;j++){var g=m.charAt(j);if(g=="|"){if(h==0){f.push(g)}continue}if(isNaN(g)){if(h>0){if(h<=l){f.push(m.substring(k,j))}h=0}f.push(g);continue}if(h==0){k=j}h++}if(h>0&&h<=l){f.push(m.substring(k,j))}return f.join("")};b=d(b);var c=b.split("|");iteration(c,function(f){var g=f.split(",");if(a){e.stemmingData[g[0]]=g[0]}else{e.stemmingData[g[0]]=[]}iteration(g,function(k,j){if(j!=0&&g[0]===k){return}var h=false;iteration(ISQ.Widget.Query.suggestionsBlacklist,function(l,m){if(l==k){h=true;return}});if(h){return}if(j==0){e.lastWord=k;e.text.push(k);return}if(a){e.stemmingData[k]=g[0]}else{e.stemmingData[g[0]].push(k)}})});e.text=e.text.join(" ");return e},emphasizeText:function(a,g){var b=a.text.toLowerCase();var e=[];var f=this;foreach(g.stemmingData,function(j,m){var k=f.searchForWord(e,m,b);if(k.status===f.enumSearchWord.word){e.push(k);
return}var l;var h=false;iteration(j,function(n){l=f.searchForWord(e,n,b);if(l.status===f.enumSearchWord.word){e.push(l);h=true;return}});if(h){return}var l=null;if(a.stemmingData[m]){l=f.searchForWord(e,a.stemmingData[m],b);if(l.status===f.enumSearchWord.word){e.push(l);h=true;return}}if(h){return}iteration(j,function(n){l=f.searchForWord(e,a.stemmingData[n],b);if(l.status===f.enumSearchWord.word){e.push(l);h=true;return}});if(h){return}if(k.status===f.enumSearchWord.subword&&g.lastWord===m){e.push(k);return}});var d=new Array(a.text.length);iteration(e,function(j){for(var h=j.ndx;h<j.endNdx;++h){d[h]=1}});e=[];var c=null;iteration(d,function(h,j){if(c===null){if(h){c={ndx:j}}}else{if(!h){c.endNdx=j;e.push(c);c=null}}});if(c){c.endNdx=a.text.length;e.push(c)}return this.emphasizeFinalizer(a.text,e)},searchForWord:function(b,f,a){var e={status:this.enumSearchWord.none};var d=-1;for(var c=b.length-1;c>=0&&d===-1;--c){d=a.indexOf(" "+f+" ",b[c].endNdx);if(d!==-1){d++}}if(d===-1){d=a.indexOf(" "+f+" ");if(d!==-1){d++}}if(d!==-1){e.status=this.enumSearchWord.word}if(d===-1){d=a.indexOf(f+" ");if(d===0){e.status=this.enumSearchWord.word}else{if(d>0){e.status=this.enumSearchWord.subword}}}if(d===-1){d=a.indexOf(" "+f);if(d!==-1){d++;if(d+f.length===a.length){e.status=this.enumSearchWord.word}else{e.status=this.enumSearchWord.subword}}}if(d===-1){for(var c=b.length-1;c>=0&&d===-1;--c){d=a.indexOf(f,b[c].endNdx)}if(d===-1){d=a.indexOf(f)}if(d!==-1){e.status=this.enumSearchWord.word}}if(d!==-1){e.ndx=d;e.endNdx=d+f.length;e.word=f}return e},emphasizeFinalizer:function(e,b){var d=0;var a=[];for(var c=0;c<b.length;++c){if(b[c].ndx!=d){a.push(e.substring(d,b[c].ndx))}a.push("<b>");a.push(e.substring(b[c].ndx,b[c].endNdx));a.push("</b>");d=b[c].endNdx}if(d!=e.length){a.push(e.substring(d))}return a.join("")},pendingQuery:null,running:false,clicked:false,requestId:0,currentLanguageCode:""};ISQ.Widget.Query.timerElapsedHandler=function(b,a){ISQ.Widget.Query.queryChangedEvent.dispatch(b);if((!a&&b===ISQ.Widget.Query.lastQuerySent)||b.length===0){ISQ.Widget.HTML.contentFader.hide();
if(!b.length){ISQ.Widget.Query.hideAnswers(null,true)}return}if(ISQ.Cnf.limited){return}if(ISQ.Widget.state===ISQ.Widget.enumState.questions&&(b.length>2||!ISQ.Cnf.autocompleteEnabled)){ISQ.Widget.Query.send(b)}if(b.length>0){ISQ.Widget.HTML.clearQuery.show()}else{ISQ.Widget.HTML.clearQuery.hide()}ISQ.Widget.HTML.contentFader.hide()};ISQ.Widget.Query.send=function(b,d,c){ISQ.Widget.Translation.init();if(ISQ.Widget.Translation.currentState==ISQ.Widget.Translation.enumTranslationState.pending){ISQ.Widget.Translation.loadCallback=function(){ISQ.Widget.Query.send(b,d,c)};return}if(ISQ.Cnf.limited){return}if(!d){if(ISQ.Widget.reportEvents){ISQ.Widget.CDC.sendMessage("subject=event&type=query&isAutoQuestion="+(ISQ.Widget.state==ISQ.Widget.enumState.autoQuestions)+"&data="+ISQ.Tools.Base64.encodeString(b))}if(b===""){ISQ.Widget.Log.add("empty query");return}ISQ.Widget.Log.add("Is same query: "+ISQ.Widget.Query.isSameQuery)}ISQ.Widget.Query.lastQuerySent=b;ISQ.Widget.Query.lastQuerySent_time=new Date();++ISQ.Widget.Query.activeRequestId;if(ISQ.Widget.state==ISQ.Widget.enumState.autoQuestions){ISQ.Widget.Query.lastAutoQuestionRequestId=ISQ.Widget.Query.activeRequestId}if(c===ISQ.Widget.Query.enumTextQuerySource.suggestion){var a=ISQ.Widget.Query.kbLanguageCode!==ISQ.Widget.TranslationHelper.defaultLanguage?ISQ.Widget.Query.kbLanguageCode:null;ISQ.Widget.Query.send_internal(ISQ.Widget.Query.lastQuerySent,ISQ.Widget.Query.activeRequestId,null,a,c)}else{ISQ.Widget.Query.send_internal(ISQ.Widget.Query.lastQuerySent,ISQ.Widget.Query.activeRequestId,null,null,c)}ISQ.Widget.Query.pendingRequest=true};ISQ.Widget.Query.send_internal=function(d,b,e,a,c){if(b!=ISQ.Widget.Query.activeRequestId){return}a=ISQ.Tools.getUniformLanguageCode(a);ISQ.Widget.Suggestions.checkForHide(a,d);ISQ.Widget.setUiLanguage(a);ISQ.Widget.Query.lastQueryTranslation=e;ISQ.Widget.setTitle();if(e&&ISQ.Widget.state===ISQ.Widget.enumState.questions){ISQ.Widget.HTML.contentFader.show()}_session().request({url:"q.js",params:{src:c===ISQ.Widget.Query.enumTextQuerySource.suggestion?"AutoComplete":"Search",auto:ISQ.Widget.state===ISQ.Widget.enumState.autoQuestions,requestId:b,naive:ISQ.Http.hashArguments.naive||null,text:encodeURIComponent(d),sameQ:ISQ.Widget.Query.isSameQuery,translation:e||null,translationLanguage:a||null,suggestion:c===ISQ.Widget.Query.enumTextQuerySource.suggestion},handler:function(j,f,g){var h=(f.totalKeywords-f.unknownWords)/f.totalKeywords;
if(ISQ.Cnf.translationEnabled&&ISQ.Widget.state!==ISQ.Widget.enumState.autoQuestions&&h<=ISQ.Widget.Query.minKeywordConfidence&&!ISQ.Widget.Query.translationAttemptActive){ISQ.Widget.Query.translationAttemptActive=true;ISQ.Widget.Query.queryTranslator=new ISQ.Widget.TranslationHelper.QueryTranslator({query:ISQ.Widget.Query.lastQuerySent,handler:new ISQ.Handler(ISQ.Widget.Query.send_internal),queryId:ISQ.Widget.Query.activeRequestId})}else{if(!ISQ.Widget.Query.translationAttemptActive&&f.kbLanguageCode){ISQ.Widget.setUiLanguage(f.kbLanguageCode)}ISQ.Widget.Query.translationAttemptActive=false;ISQ.Widget.Query.responseHandler(j,f,g,function(k){if(k.length===1){k[0].isSingle=true}ISQ.Widget.Query.hideAnswers(k,true)})}}});ISQ.Widget.Query.isSameQuery=true;ISQ.Widget.Query.elementsToResize=null};ISQ.Widget.Query.getAnswerById=function(a,c,d,b){ISQ.Widget.Suggestions.hide(_("searchSuggestions"));ISQ.Widget.Query.hideAnswers(null,true);ISQ.Widget.Query.currentAnswersForComparison=ISQ.Widget.Query.currentAnswers=null;++ISQ.Widget.Query.activeRequestId;ISQ.Widget.Query.lastQuerySent="";ISQ.Widget.HTML.queryField.value="";ISQ.Widget.Query.mobile_ignoreNextChange=true;ISQ.Widget.HTML.contentFader.show();ISQ.Widget.Query.gettingAnswerById=true;ISQ.Widget.Query.pendingRequest=true;ISQ.Widget.FAQ.initalize();_session().request({url:"a.js",params:{requestId:ISQ.Widget.Query.activeRequestId,answerId:a,auto:(ISQ.Widget.state===ISQ.Widget.enumState.autoQuestions||c),src:d,translationLangauge:ISQ.Widget.TranslationHelper.detectedLanguage,kbLC:ISQ.Widget.Query.kbLanguageCode},handler:function(g,e,f){ISQ.Widget.Query.responseHandler(g,e,f,b)}});ISQ.Widget.Query.elementsToResize=null};ISQ.Widget.Query.responseHandler=function(n,h,j,a){if(n!=ISQ.Com.JsonP.Request.enumResponseType.OK){_session().retry(j);return}var l=null;var m=false;var g=false;var b=false;if(ISQ.Widget.Query.activeRequestId!=h.requestId){ISQ.Widget.Log.add("Query: Request Id doesn't match. sent: "+ISQ.Widget.Query.activeRequestId+", received: "+h.requestId);return}if(h.context){ISQ.Widget.Query.contextSuggestionEnabled=(h.contextSuggestionEnabled)?true:false;
try{arr=[];for(var f=0;f<h.context.values.length;++f){arr[h.context.values[f].id]=h.context.values[f]}ISQ.Widget.Query.contextCategories=[];for(var f=0;f<h.context.order.length;++f){ISQ.Widget.Query.contextCategories.push(arr[h.context.order[f]])}}catch(c){ISQ.Widget.Query.contextCategories=null}}ISQ.Widget.Query.kbLanguageCode=h.kbLanguageCode;b=ISQ.Widget.Query.previousDetectedLanguage&&ISQ.Widget.Query.previousDetectedLanguage!==ISQ.Widget.TranslationHelper.detectedLanguage;ISQ.Widget.Query.previousDetectedLanguage=ISQ.Widget.TranslationHelper.detectedLanguage;if(ISQ.Widget.Suggestions.currentLanguageCode&&ISQ.Widget.Suggestions.currentLanguageCode!=h.kbLanguageCode){ISQ.Widget.Suggestions.hide(_("searchSuggestions"))}ISQ.Widget.Query.numberOfTopics=h.answers.length;ISQ.Widget.Query.contextOnlyAnswers=0;for(var f=0;f<ISQ.Widget.Query.numberOfTopics;++f){ISQ.Widget.Query.initResultObject(h.answers[f])}if(!a&&!ISQ.Widget.Query.previousResponseWasAutoQuestion&&!b&&ISQ.Widget.Query.currentAnswersForComparison&&h.answers.length&&h.answers.length===ISQ.Widget.Query.currentAnswersForComparison.length){var f=0;for(f=0;f<ISQ.Widget.Query.currentAnswersForComparison.length;++f){if(!ISQ.Widget.Query.compareResults(ISQ.Widget.Query.currentAnswersForComparison[f],h.answers[f])){break}}m=f===ISQ.Widget.Query.currentAnswersForComparison.length}ISQ.Widget.Query.currentAnswersForComparison=h.answers;ISQ.Widget.Query.previousResponseWasAutoQuestion=ISQ.Widget.state===ISQ.Widget.enumState.autoQuestions||ISQ.Widget.Query.gettingAnswerById;g=ISQ.Widget.state===ISQ.Widget.enumState.autoQuestions||h.requestId<=ISQ.Widget.Query.lastAutoQuestionRequestId;if(ISQ.Widget.reportEvents){var k=[];k.push("subject=event&type=incomingsearchresults&hasresults=");k.push((h.answers.length!==0));k.push("&isAutoQuestion=");k.push(g);k.push("&query=");k.push(ISQ.Tools.Base64.encodeString(ISQ.Widget.Query.lastQuerySent));k.push("&results=");var d=[];for(var f=0;f<h.answers.length;++f){d.push({answerId:h.answers[f].id,title:(h.answers[f].translation?h.answers[f].translation.title:h.answers[f].title),body:(h.answers[f].translation?h.answers[f].translation.summary:h.answers[f].summary),attachmentUrls:ISQ.Widget.buildAttachmentUrls_forEvent(h.answers[f].attachmentUrls)})
}k.push(ISQ.Tools.Base64.encodeString(ISQ.Data.jsonToString(d)));ISQ.Widget.CDC.sendMessage(k.join(""))}ISQ.Widget.Query.rechannelingOptions=h.rechanneling||null;ISQ.Widget.Query.pendingRequest=false;if(m){ISQ.Widget.HTML.contentFader.hide();ISQ.Widget.HTML.clearQuery.show();return}if(ISQ.Cnf.faqData&&!ISQ.Widget.isFloat&&!ISQ.Widget.userActive&&ISQ.Widget.Query.gettingAnswerById&&((ISQ.Widget.state&ISQ.Widget.enumState.allQuestions)!==0)&&h.answers.length){ISQ.Widget.Query.fader_callback=function(){if(ISQ.Widget.userActive){return}ISQ.Widget.FAQ.show(ISQ.Widget.FAQ.behavior.OnWidgetLoad)}}if(a){a(h.answers,true)}else{ISQ.Widget.Query.hideAnswers(h.answers,true)}};ISQ.Widget.Query.replacePlaceholders_answerObject=function(c){var b=ISQ.Widget.replacePlaceholders(c.title,ISQ.Widget.API.getCustomParams(),"{{","}}");if(b.success){c.title=b.text;b=ISQ.Widget.replacePlaceholders(c.summary,ISQ.Widget.API.getCustomParams(),"{{","}}");if(b.success){c.summary=b.text}}if(!b.success){ISQ.Widget.Query.numberOfTopics--;return}if(c.translation){var b=ISQ.Widget.replacePlaceholders(c.translation.title,ISQ.Widget.API.getCustomParams(),"{{","}}");if(b.success){c.translation.title=b.text;b=ISQ.Widget.replacePlaceholders(c.translation.summary,ISQ.Widget.API.getCustomParams(),"{{","}}");if(b.success){c.translation.summary=b.text}}if(!b.success){ISQ.Widget.Query.numberOfTopics--;return}}var d={};ISQ.Tools.extend(true,d,c);if(!ISQ.Widget.Query.currentAnswers){ISQ.Widget.Query.currentAnswers=[]}ISQ.Widget.Query.currentAnswers.push(d);var a=ISQ.Data.getDBAnswerAsHtml(d.summary,false,ISQ.Widget.Query.appendQuestionTag,null,"ISQ.Widget.Query.namedAnchorClick",ISQ.Widget.referer.normal);d.summary=a.text;d.summaryScript=a.script;if(d.translation){a=ISQ.Data.getDBAnswerAsHtml(d.translation.summary,false,ISQ.Widget.Query.appendQuestionTag,null,"ISQ.Widget.Query.namedAnchorClick",ISQ.Widget.referer.normal);d.translation.summary=a.text}};ISQ.Widget.Query.RecursiveContextReading=function(a,b,e){for(var d=0;d<a.length;d++){var c=a[d];if(typeof c=="string"&&c==""){continue
}if(typeof c=="string"){if(e!=null){e[c]=c}else{b[c]=c}}else{for(key in c){b[key]={};ISQ.Widget.Query.RecursiveContextReading(c[key],b[key],b[key])}}}};ISQ.Widget.Query.ContextResponse=function(c,d,b){var a=document.getElementById("answerPane");var e=[];d=d.split("|");for(var g=0;g<d.length;g++){e.push(d[g].split(","))}var h=function(l,k){var j={};ISQ.Widget.Query.RecursiveContextReading(l,j,null);function n(r){var u={},q,p=[];for(q in r){if(r.hasOwnProperty(q)){p.push(q)}}var t=function(o,s){var v=o.toLowerCase(),w=s.toLowerCase();if(v<w){return -1}if(v>w){return 1}return 0};p.sort(t);for(q=0;q<p.length;q++){u[p[q]]=r[p[q]]}for(q in u){if(typeof u[q]=="object"){u[q]=n(u[q])}}return u}var m=n(j);return ISQ.Widget.Query.buildContextSelection({context:m,body:a,contextCats:k})};ISQ.Widget.Query.contextSelectors=[];if(c.groups){for(var g=0;g<c.groups.length;g++){h(c.groups[g].values,e[g])}}else{if(c.values){h(c.values,e[0])}}if(!ISQ.Widget.Query.buildContextSelectionOverride){var f=document.createElement("div");f.className="contextSelectionTitle";f.innerHTML="More than one answer is available";a.insertBefore(f,a.childNodes[0])}if(b){b()}};ISQ.Widget.Query.contextSuggestionEnabled=false;ISQ.Widget.Query.processAnswers=function(results){if(!results||((ISQ.Widget.state&ISQ.Widget.enumState.allQuestions)===0)){ISQ.Widget.HTML.contentFader.hide();ISQ.Widget.HTML.clearQuery.show();return}if(ISQ.Widget.HTML.queryField.value===""&&ISQ.Widget.state===ISQ.Widget.enumState.questions&&!ISQ.Widget.Query.gettingAnswerById){ISQ.Widget.HTML.contentFader.hide();ISQ.Widget.HTML.clearQuery.show();return}try{var noActionBar=false;ISQ.Widget.Query.firstAnswerId=0;ISQ.Widget.Query.chatEscalationAction=ISQ.Widget.Query.numberOfTopics==0?ISQ.Widget.enumChatEscalationActions.normal:ISQ.Widget.enumChatEscalationActions.hide;ISQ.Widget.Query.chatPushAnswers.pushed=false;ISQ.Widget.Query.currentAnswers=null;if(ISQ.Widget.Query.numberOfTopics>0){for(var i=0;i<results.length;++i){ISQ.Widget.Query.replacePlaceholders_answerObject(results[i])}}if(ISQ.Widget.Query.numberOfTopics>0){var resultObject;
var resizeWidget=false;if(ISQ.Export){ISQ.Export.currentMaxHeight=0;ISQ.Export.currentMaxWidth=0}var buildAnswers=function(){if(ISQ.Widget.Query.contextSuggestionEnabled){ISQ.Widget.Query.contextSelectionClearContext()}var answerContactForm=[];var currentFormId=null;for(var i=0;i<ISQ.Widget.Query.numberOfTopics;i++){resultObject=ISQ.Widget.Query.currentAnswers[i];if(i==0){ISQ.Widget.lastQuestionId=resultObject.id}resultObject.answerNum=i;var answerLanguage=resultObject.languageCode||ISQ.Widget.Query.kbLanguageCode;currentFormId=null;if(resultObject&&resultObject.rechanneling&&resultObject.rechanneling.length){_it(resultObject.rechanneling,function(channel){if(channel.contactForms&&channel.showInArticle){var found=false;currentFormId=channel.contactForms;for(var k=0;k<answerContactForm.length;k++){if(answerContactForm[k].contactForms===channel.contactForms){found=true;break}}if(!found){answerContactForm.push(channel)}return false}})}if(i===0){ISQ.Widget.Query.firstAnswerId=resultObject.id;ISQ.Widget.Query.rechannelingOptions=resultObject.rechanneling;if(ISQ.Widget.Query.gettingAnswerById){ISQ.Widget.Query.clearTextboxOnInteraction=true;ISQ.Widget.Query.mobile_ignoreNextChange=true;ISQ.Widget.Query.lastQuerySent=resultObject.title;if(!ISQ.Widget.userActive&&ISQ.Cnf.initialText){ISQ.Widget.HTML.queryField.value=ISQ.Cnf.initialText}else{if(ISQ.Cnf.autoQuestionsTypeEffect){ISQ.Widget.Query.typeTimer=new ISQ.Timer(new ISQ.Handler(ISQ.Widget.Query.typeQuestion),false,(resultObject.translation?resultObject.translation.title:resultObject.title),0);ISQ.Widget.Query.typeTimer.start(ISQ.Widget.Query.typeInterval)}else{ISQ.Widget.HTML.queryField.value=(resultObject.translation?resultObject.translation.title:resultObject.title)}}if(!ISQ.Widget.Query.lastWrittenQuery){ISQ.Widget.Query.lastWrittenQuery=(resultObject.translation?resultObject.translation.title:resultObject.title)}if(ISQ.Http.browser.isMobile&&window.top===window){document.body.scrollTop=0}}if(typeof(ISQ.Widget.iChat.instance)!=="undefined"&&ISQ.Widget.iChat.instance!=null&&ISQ.Widget.state!==ISQ.Widget.enumState.autoQuestions){var skill="";
if(resultObject.chatRequiredSkill){skill=resultObject.chatRequiredSkill}else{if(ISQ.Widget.Chat.chatConfig.skill){skill=ISQ.Widget.Chat.chatConfig.skill}}noActionBar=ISQ.Widget.iChat.instance.getAvailabilityPerAnswer(skill)}}ISQ.Widget.Query.chatEscalationAction=Math.max(ISQ.Widget.Query.chatEscalationAction,resultObject.chatEscalationAction);if(!ISQ.Widget.Query.chatInviteContent){ISQ.Widget.Query.chatInviteContent=resultObject.chatInviteContent}if(ISQ.Widget.state===ISQ.Widget.enumState.autoQuestions&&ISQ.Widget.Query.chatEscalationAction==ISQ.Widget.enumChatEscalationActions.pushChat){ISQ.Widget.Query.chatEscalationAction=ISQ.Widget.enumChatEscalationActions.normal}if(ISQ.Widget.Query.chatEscalationAction==ISQ.Widget.enumChatEscalationActions.pushChat){if(ISQ.Widget.Query.chatPushAnswers[resultObject.id]){ISQ.Widget.Query.chatEscalationAction=ISQ.Widget.enumChatEscalationActions.normal}ISQ.Widget.Query.chatPushAnswers[resultObject.id]=true}if(resultObject.contextSelectionOnly){++ISQ.Widget.Query.contextOnlyAnswers}if(resultObject.translation){ISQ.Widget.Query.appendSingleAnswer({answerObject:resultObject,footer:ISQ.Widget.TranslationHelper.getStaticTranslation(ISQ.Widget.TranslationHelper.staticTranslationsEnum.footer),direction:ISQ.Translation.Infra.getLanguageDirection(ISQ.Widget.TranslationHelper.detectedLanguage),showTranslateIcon:true,visible:true,translationProvider:resultObject.translation.provider,translated:true,contactFormId:currentFormId});ISQ.Widget.Query.appendSingleAnswer({answerObject:resultObject,footer:ISQ.Cnf.answerFooter,direction:ISQ.Translation.Infra.getLanguageDirection(ISQ.Cnf.initialUiLanguage),showTranslateIcon:true,visible:false,translationProvider:resultObject.translation.provider,contactFormId:currentFormId})}else{var answerTable=ISQ.Widget.Query.appendSingleAnswer({answerObject:resultObject,footer:ISQ.Cnf.answerFooter,direction:ISQ.Translation.Infra.getLanguageDirection(answerLanguage),showTranslateIcon:false,visible:true,contactFormId:currentFormId});resultObject.answerTable=answerTable
}if(resultObject.externalSourceType){switch(resultObject.externalSourceType){case ISQ.enumContentProviders.worldManuals:resizeWidget=true;break}}}if(answerContactForm.length){ISQ.Widget.Forms.getForms(answerContactForm)}if(resizeWidget&&ISQ.Widget.isFloat){var elements=ISQ.Html.getElementsByClassName(ISQ.Widget.HTML.widgetContainer,"hoverImagesClass");if(elements.length>0){ISQ.Widget.CDC.sendMessage("subject=setSize&height="+ISQ.Export.currentHeight+"&width="+ISQ.Export.currentWidth)}else{ISQ.Widget.CDC.sendMessage("subject=widgetToExpand")}}ISQ.Widget.Query.displayAnswers(noActionBar)};if(ISQ.Widget.Query.contextCategories){ISQ.Widget.Query.processContext(buildAnswers)}else{buildAnswers()}}else{var previousQuestion=ISQ.Widget.Query.getCurrentQuestionFromTrail();if(previousQuestion){var backDiv=createDiv(ISQ.Widget.HTML.answerPane,".answerBackLinkContainer");var backLink=createLink({text:ISQ.Widget.getStaticText("back"),parent:backDiv,onclick:function(){ISQ.Widget.Query.popQuestionFromTrail();ISQ.Widget.Query.tempQuestionTrailId=null;if(ISQ.Widget.Query.typeTimer){ISQ.Widget.Query.typeTimer.cancel()}if(!this.question.isTagAnId){ISQ.Widget.Query.ask(this.question.tag,ISQ.Widget.Query.enumTextQuerySource.linkedAnswer)}else{ISQ.Widget.Query.tempQuestionTrailId=this.question.tag;ISQ.Widget.Query.getAnswerById(this.question.tag)}}});backLink.question=previousQuestion}var direction=ISQ.Widget.Query.toTranslateContent(ISQ.Cnf.kbLanguageCode)?ISQ.Translation.Infra.getLanguageDirection(ISQ.Widget.TranslationHelper.detectedLanguage):ISQ.Widget.Localize.array.dir;var d=createDiv(ISQ.Widget.HTML.answerPane,".noResults &direction:"+direction);var noResultsMessage="";var context=ISQ.Widget.Query.getContextString();if(ISQ.Widget.Query.contextSuggestionEnabled&&context){noResultsMessage=ISQ.Widget.getStaticText("searchMsgNOResultsContext")}else{noResultsMessage=ISQ.Widget.getStaticText("searchMsgNOResults")}noResultsMessage=ISQ.Widget.replacePlaceholders(noResultsMessage,ISQ.Widget.API.getCustomParams(),"{{","}}",true).text;if(ISQ.Widget.Query.contextSuggestionEnabled&&context){noResultsMessage=noResultsMessage.replace("{CONTEXT}",context);
noResultsMessage=noResultsMessage.replace("{LINK}",'<span class="clearSelectionLink" onclick="ISQ.Widget.Query.clearContext()">');noResultsMessage=noResultsMessage.replace("{/LINK}","</span>")}else{noResultsMessage=noResultsMessage.replace(/\{QUERY\}/g,ISQ.Data.unHTML(_query(true)))}d.innerHTML=noResultsMessage;try{if(ISQ.Widget.Query.contextSuggestionEnabled){var noResultsScript=ISQ.Widget.getStaticText("searchMsgNOResultsContextScript")}else{var noResultsScript=ISQ.Widget.getStaticText("searchMsgNOResultsScript")}if(noResultsScript){noResultsScript=ISQ.Widget.replacePlaceholders(noResultsScript,ISQ.Widget.API.getCustomParams(),"{{","}}",true).text;eval(noResultsScript)}if(ISQ.Cnf.faqData){ISQ.Widget.FAQ.show(ISQ.Widget.FAQ.behavior.OnNoResuls)}}catch(e){}ISQ.Widget.Query.displayAnswers(noActionBar)}}catch(e){ISQ.Widget.HTML.contentFader.hide();ISQ.Widget.Log.add("Query.parseAnswers:"+e,ISQ.Widget.Log.statusEnum.RED)}};ISQ.Widget.Query.processContext=function(b){var a={};ISQ.Widget.Query.ContextObject={};for(var k=0;k<ISQ.Widget.Query.contextCategories.length;k++){ISQ.Widget.Query.ContextObject[ISQ.Widget.Query.contextCategories[k].id]=ISQ.Widget.Query.contextCategories[k];if(!ISQ.Widget.Query.ContextObject[ISQ.Widget.Query.contextCategories[k].id].parentId){ISQ.Widget.Query.ContextObject[ISQ.Widget.Query.contextCategories[k].id].parentId=null}}var f={};var g=[];var d=[];for(var k=0;k<ISQ.Widget.Query.numberOfTopics;k++){resultObject=ISQ.Widget.Query.currentAnswers[k];if(resultObject.contextSelection&&resultObject.contextSelectionOnly){for(var l=0;l<resultObject.contextSelection.length;l++){var h=ISQ.Widget.Query.ContextObject[resultObject.contextSelection[l]];if(!f[h.id]){f[h.id]={name:ISQ.Widget.Query.ContextObject[h.id].name};if(!h.parentId){h.parentId=null}d.push({id:h.id,parentId:h.parentId})}}}}for(var k=0;k<d.length;k++){var c=d[k];if(c.parentId){if(!f[c.parentId]){f[c.parentId]={name:ISQ.Widget.Query.ContextObject[c.parentId].name};d.push({id:ISQ.Widget.Query.ContextObject[c.parentId].id,parentId:ISQ.Widget.Query.ContextObject[c.parentId].parentId})
}f[c.parentId].child=f[c.id];f[c.id].parent=f[c.parentId]}else{g.push(f[c.id])}}var j=function(m,n){n.push(m.name);if(m.child){n.push(",");j(m.child,n)}};var e=[];for(var k=0;k<g.length;k++){j(g[k],e);if(k<g.length-1){e.push("|")}}if(e.length>0){_session().request({url:"contextvalues.js",params:{account:ISQ.Widget.account,kb:ISQ.Cnf.kbId,contexts:e.join("")},handler:function(n,m){if(n==ISQ.Com.JsonP.Request.enumResponseType.OK){ISQ.Widget.Query.ContextResponse(m,e.join(""),b)}else{}}})}else{b()}};ISQ.Widget.Query.initResultObject=function(a){a.languageCode=a.languageCode||null;a.chatEscalationAction=(typeof a.chatEscalationAction=="undefined")?ISQ.Widget.enumChatEscalationActions.normal:a.chatEscalationAction;a.chatRequiredSkill=a.chatRequiredSkill||null;a.chatInviteContent=a.chatInviteContent||null;a.attachmentUrls=a.attachmentUrls||null;a.context=!a.context?null:(function(){var d=a.context.split(",");var b=[];for(var c=0;c<d.length;++c){b[d[c]]=d[++c]}return b})();a.title=ISQ.Data.htmlEncode(a.title);a.externalSourceId=a.externalSourceId;a.externalSourceType=a.externalSourceType;a.translation=a.translation||null};ISQ.Widget.Query.compareResults=function(a,b){var c=function(e,f){for(var d in e){if(e[d]!=f[d]){return false}}return true};if(!c(a,b)){return false}if(!c(b,a)){return false}return ISQ.Tools.compareArrays(a.context,b.context)};ISQ.Widget.Query.buildContextSelectionOverride=null;ISQ.Widget.Query.contextByUser=false;ISQ.Widget.Query.changeContext=function(a){_session().setContext(a,function(){ISQ.Widget.CDC.sendMessage("subject=updateContext&context="+ISQ.Data.jsonToString(a));ISQ.Widget.Query.contextByUser=true;if(window.localStorage&&!ISQ.Http.browser.isIOS7){window.localStorage.setItem("nanorep.wContext"+ISQ.Http.Cookies.encode64(ISQ.Widget.account),ISQ.Data.jsonToString(a))}else{ISQ.Http.Cookies._write("nanorep.wContext"+ISQ.Http.Cookies.encode64(ISQ.Widget.account),ISQ.Data.jsonToString(a),"/widget",ISQ.Http.domain(false),false)}ISQ.Widget.API.reAsk()},true)};ISQ.Widget.Query.clearContext=function(){_session().setContext({nocontext:"true"},function(){ISQ.Widget.API.reAsk()
},true);window.localStorage.removeItem("nanorep.wContext"+ISQ.Http.Cookies.encode64(ISQ.Widget.account));ISQ.Http.Cookies._delete("nanorep.wContext"+ISQ.Http.Cookies.encode64(ISQ.Widget.account),"/widget",ISQ.Http.domain(false),false)};ISQ.Widget.Query.compileContextDisplayName=function(b,a){var c=b;if(window.setContextDisplayName){c=window.setContextDisplayName(b)}a.push(c)};ISQ.Widget.Query.getContextString=function(e){var a=0;var c=_session().contexts();if(c&&!c.nocontext&&ISQ.Widget.Query.contextCategories){var b=[];for(var d=0;d<ISQ.Widget.Query.contextCategories.length;d++){if(!c[ISQ.Widget.Query.contextCategories[d].name.toLowerCase()]){continue}if(e){b.push(ISQ.Widget.Query.contextCategories[d].name.firstLetterUpperCase());b.push(" ")}ISQ.Widget.Query.compileContextDisplayName(c[ISQ.Widget.Query.contextCategories[d].name.toLowerCase()],b);b.push(", ")}b.splice(b.length-1,1);return b.join("")}return null};ISQ.Widget.Query.contextSelectionClearContext=function(){var b=0;var d=_session().contexts();if(d&&!d.nocontext&&ISQ.Widget.Query.contextCategories){for(var e=0;e<ISQ.Widget.Query.contextCategories.length;e++){if(!d[ISQ.Widget.Query.contextCategories[e].name.toLowerCase()]){continue}b++}if(b==ISQ.Widget.Query.contextCategories.length){}else{if(!ISQ.Widget.Query.contextByUser){return}}var c=["<span>"];var f=createDiv(null,".selectedContextElement&.borderBoxSizing");f.id="selectedContextElement";for(var e=0;e<ISQ.Widget.Query.contextCategories.length;e++){if(!d[ISQ.Widget.Query.contextCategories[e].name.toLowerCase()]){continue}c.push('<strong style="font-weight:600;">');ISQ.Widget.Query.compileContextDisplayName(d[ISQ.Widget.Query.contextCategories[e].name.toLowerCase()],c);c.push("</strong>");c.push(" | ")}c.splice(c.length-1,1);c.push("</span>");f.innerHTML=c.join("");var a=createDiv(f,".selectedContextElementChangeButton");a.innerHTML="Change";a.onclick=function(){ISQ.Widget.Query.clearContext();f.parentNode.removeChild(f)};ISQ.Widget.HTML.answerPane.appendChild(f)}};ISQ.Widget.Query.contextSelectors=[];
ISQ.Widget.Query.buildContextSelection=function(h){ISQ.Widget.Suggestions.hide(_("searchSuggestions"));if(ISQ.Widget.Query.buildContextSelectionOverride){ISQ.Widget.Query.buildContextSelectionOverride(h);return}var o=h.body;var b=h.contextCats;var d=createDiv(null);d.className="contextSelectors";var e=h.context;var a=ISQ.Widget.Query.contextCategories;var n={items:[]};var k=function(q){q.element.innerHTML="";q.uniqueValues={};q.container.style.display="none";if(q.childElement){k(q.childElement)}};for(var f=0;f<b.length;f++){var m=b[f];for(var p=0;p<ISQ.Widget.Query.contextCategories.length;p++){if(!ISQ.Widget.Query.contextCategories[p].selectionText||ISQ.Widget.Query.contextCategories[p].selectionText.length==0){continue}if(ISQ.Widget.Query.contextCategories[p].name==m){m=ISQ.Widget.Query.contextCategories[p].selectionText;break}}var j=null;var l={};l.labelName=m;l.name=b[f];l.idx=f;l.ldx=b.length-1;l.container=document.createElement("div");l.fieldName=document.createElement("div");l.fieldName.className="contextLabel";l.fieldName.innerHTML=m;l.uniqueValues={};l.element=document.createElement("select");l.element.className="borderBoxSizing cWuSelector contextSelect";l.element.selector=l;l.populateNext=false;l.element.onchange=function(){var u=this.selector;if(u.childElement){k(u.childElement);if(this.selectedIndex!=-1){ISQ.Widget.Query.populateContextSelect({selectors:n,contextIdx:u.idx+1,selector:u.childElement,contextValues:u.uniqueValues[u.element.options[u.element.selectedIndex].value],populate:true})}if(!ISQ.Widget.isFloat){ISQ.Widget.HTML.resizeHandler();ISQ.Widget.HTML.dynamicSize_sendMessage()}}else{var s=ISQ.Html.getElementsByClassName(document,"cWuSelector");for(var r=0;r<s.length;r++){if(s[r].selectedIndex==0){return false}}var q=_session().contexts()||{};if(q.nocontext){delete q.nocontext}for(var v=0;v<ISQ.Widget.Query.contextSelectors.length;v++){var t=ISQ.Widget.Query.contextSelectors[v];for(var r=0;r<t.items.length;r++){q[t.items[r].name]=t.items[r].element.options[t.items[r].element.selectedIndex].value.Trim(" ")
}}ISQ.Widget.Query.changeContext(q);return false}};if(f==0){ISQ.Widget.Query.populateContextSelect({selectors:n,contextIdx:f,selector:l,contextValues:e,categories:a})}else{l.container.style.display="none"}l.container.appendChild(l.fieldName);l.container.appendChild(l.element);d.appendChild(l.container);n.items.push(l)}ISQ.Widget.Query.contextSelectors.push(n);for(var p=n.items.length-2;p>=0;p--){n.items[p].childElement=n.items[p+1]}for(var f=0;f<n.items.length;f++){if(n.items[f].element.options.length==1){n.items[f].element.onchange()}}var g=ISQ.Html.getElementsByClassName(document,"cWuSelector");if(o.childNodes.length>0&&g.length==0){o.insertBefore(d,o.childNodes[0])}else{o.appendChild(d)}var c=document.getElementById("selectedContextElement");if(c){c.parentNode.removeChild(c)}};ISQ.Widget.Query.populateContextSelect=function(d){var j=d.selectors;var c=d.contextIdx;var h=d.selector;var b=d.contextValues;var g=d.populate;if(j.items.length==0||j.populateNext||g){j.populateNext=false;var a=function(k,m){var l=createElement("option");l.value=m;l.innerHTML=k;h.element.appendChild(l)};a("Please select",-1);h.container.style.display="block";for(key in b){if(h.uniqueValues[key]){continue}h.uniqueValues[key]=b[key];var f=key;var e=createElement("option");e.value=f;e.innerHTML=f;h.element.appendChild(e)}}};ISQ.Widget.Query.processQuotes=function(b,a){if(ISQ.Cnf.supportBlockQuotes){(function c(e){if(e.nodeName=="BLOCKQUOTE"){if(e.innerText.Trim()==""&&!e.innerHTML.contains("IMG")){return}e.className+=" enabled";e.onclick=function(){var f=ISQ.Tools.Base64.encodeString(ISQ.Widget.Query.lastQuerySent);var g=ISQ.Tools.Base64.encodeString(e.innerHTML);if(ISQ.Widget.reportEvents){ISQ.Widget.CDC.sendMessage("subject=event&type=quote&query="+f+"&answerid="+a+"&text="+g)}}}for(var d=0;d<e.childNodes.length;++d){arguments.callee(e.childNodes[d])}})(b)}};ISQ.Widget.Query.appendSingleAnswer=function(obj){if(obj.answerObject.contextSelectionOnly||obj.answerObject.summary==""){return}var summaryBuilder=[];var summary,title;var direction=ISQ.Widget.Localize.array.dir;
if(obj.translated){summary=obj.answerObject.translation.summary;title=obj.answerObject.translation.title;direction=obj.direction||ISQ.Translation.Infra.getLanguageDirection(ISQ.Widget.TranslationHelper.detectedLanguage)}else{summary=obj.answerObject.summary;title=obj.answerObject.title;var directionByLanguage=(ISQ.Widget.HTML.dynamicRTLCssLoaded)?"rtl":"ltr";direction=(directionByLanguage!="")?directionByLanguage:obj.direction}var padding;var tbody=createTable(ISQ.Widget.HTML.answerPane,"",direction,".answerTable &"+(obj.style||""));var tableId="tblAnswer_"+obj.answerObject.id;tbody.parentNode.setAttribute("id",tableId+obj.visible);var textAlign=direction==="rtl"?"right":"left";var textAlignOpp=direction==="rtl"?"left":"right";if(title&&title.Trim()!==""){var tr=createRow(tbody,".TRanswerOnMouseout");tr.onmouseover=function(){this.className="TRanswerOnMouseover"};tr.onmouseout=function(){this.className="TRanswerOnMouseout"};var td=createTd(tr,"","top");var titleText;var titleTable=createTable(td,"100%",direction);var titleTr=createRow(titleTable);var titleTd=createTd(titleTr,"",(obj.isFAQ?"middle":"top"),".answerTitle &.expanded");var externalSourceIconShown=false;titleText=ISQ.Data.breakWords(title);if(obj.answerObject.answerNum==0&&!obj.translated){var previousQuestion=ISQ.Widget.Query.getCurrentQuestionFromTrail();if(previousQuestion){var backDiv=createDiv(document.body,".answerBackLinkContainer");var backLink=createLink({text:ISQ.Widget.getStaticText("back"),parent:backDiv,onclick:function(){ISQ.Widget.Query.popQuestionFromTrail();ISQ.Widget.Query.tempQuestionTrailId=null;if(ISQ.Widget.Query.typeTimer){ISQ.Widget.Query.typeTimer.cancel()}if(ISQ.Cnf.faqData&&this.question.tag==ISQ.Cnf.initialText){clearNode(ISQ.Widget.HTML.answerPane);ISQ.Widget.Query.mobile_ignoreNextChange=true;ISQ.Widget.HTML.queryField.value=ISQ.Cnf.initialText;ISQ.Widget.FAQ.show(ISQ.Widget.FAQ.behavior.OnClearSearchField)}else{if(!this.question.isTagAnId){ISQ.Widget.Query.ask(this.question.tag,ISQ.Widget.Query.enumTextQuerySource.linkedAnswer);
ISQ.Widget.Query.clearTextboxOnInteraction=false}else{ISQ.Widget.Query.tempQuestionTrailId=this.question.tag;ISQ.Widget.Query.getAnswerById(this.question.tag)}}}});backLink.question=previousQuestion;ISQ.Widget.HTML.answerPane.insertBefore(backDiv,ISQ.Widget.HTML.answerPane.firstChild)}}var tdiv=createDiv(titleTd,".titleText");tdiv.innerHTML="<h3>"+titleText+"</h3>";tdiv.setAttribute("tabindex","5");if(obj.answerObject.context!=null&&ISQ.Widget.Query.contextCategories){var d=createDiv(titleTd,".answerContextContainer");for(var ndx=0;ndx<ISQ.Widget.Query.contextCategories.length;++ndx){var data=obj.answerObject.context[ISQ.Widget.Query.contextCategories[ndx].id];if(!data){continue}if((ISQ.Widget.Query.contextCategories[ndx]&&ISQ.Widget.Query.contextCategories[ndx].flags&ISQ.Widget.enumKBCategoriesFlags.visibleInWidget)!=ISQ.Widget.enumKBCategoriesFlags.visibleInWidget){continue}createElement("span",d,".answerContext").innerHTML=data.replace(/\|/g,",")}}var translationIcon=null;if(obj.showTranslateIcon&&ISQ.Cnf.translationEnabled){var dir=obj.visible?direction:null;translationIcon=ISQ.Widget.Translation.createTranslationIcon(tableId,obj.translationProvider,direction,obj.visible);if(translationIcon!==null){padding="&padding-"+(externalSourceIconShown?textAlign:textAlignOpp)+": 5px;";td=createTd(titleTr,"","top",".answerIcon &.globe "+padding);td.appendChild(translationIcon)}}var thumbIcon=null;var showFaqLikes=!ISQ.Http.browser.isIE7&&obj.isFAQ&&ISQ.Http.hashArguments.showlikes!=="false"&&ISQ.Http.urlArguments.showlikes!=="false";if(showFaqLikes){padding=translationIcon?"":"&padding-"+textAlign+": 5px;";td=createTd(titleTr,"","top",".answerIcon"+padding);thumbIcon=nanoRep.FAQ.Likes.buildThumbUpIcon(obj.answerObject.id,td,obj.answerObject.likes,direction==="rtl",ISQ.Cnf.cacheVar,ISQ.Widget.account,ISQ.Cnf.kbId,ISQ.Widget.isPreview,null,ISQ.Widget.referer.normal)}}if(obj.answerObject.actions){var actions=ISQ.Data.parseJson(obj.answerObject.actions);var autoLink=actions.autoLink;if(actions.guidance){var guide=actions.guidance;
autoLink={title:guide.title,url:guide.url,keepArticleOpen:!!guide.keepArticleOpen,allowToAbort:!!guide.allowToAbort,isGuidance:true};var reg=/^(.*)\|\|\|(\d+)\,(\d+)(\,\d+)?/;var match=reg.exec(guide.url);if(match){autoLink.url=match[1];autoLink.guideId=match[2];autoLink.stepId=match[3];if(!ISQ.Widget.guidanceSearchOptions||!ISQ.Widget.guidanceSearchOptions[autoLink.guideId]){autoLink=null}}}if(autoLink&&obj.visible){var autoLinkTr=createRow(tbody);var autoLinkTd=createTd(autoLinkTr,"","middle",".autoLink");var url=autoLink.url||"",text=autoLink.title||url;var allowToAbort=autoLink.hasOwnProperty("allowToAbort")?autoLink.allowToAbort:true;var progressBar=createDiv(autoLinkTd,".progressBar&.widgetBGcolor&.widgetTextColor");createTextNode(text,createDiv(progressBar,".progressBarText"));createDiv(progressBar,".progressBarHover");var progressBarBG=createDiv(progressBar,".progressBarBG");function openAutoLink(){if(ISQ.Widget.Query.resetAutoLink){ISQ.Widget.Query.resetAutoLink()}else{if(autoLinkIntervalId){clearInterval(autoLinkIntervalId);progressBarBG.style.width="0"}}autoLinkIntervalId=null;ISQ.Widget.Query.openAutoLink(autoLink,obj.answerObject)}var step;var autoLinkIntervalId;var activateAutoLink=function(timeInSeconds){step=100/(timeInSeconds*100);if(autoLinkTd.lastChild!==progressBar){return}function reset(button){clearInterval(autoLinkIntervalId);progressBarBG.style.width="0";button.parentNode.removeChild(button);ISQ.Widget.Query.resetAutoLink=null}autoLinkIntervalId=setInterval(function(){var width=parseFloat(progressBarBG.style.width,10)||0;if(width<100){progressBarBG.style.width=(width+step)+"%"}else{clearInterval(autoLinkIntervalId);if(ISQ.Widget.HTML.answerPane.contains(progressBar)){openAutoLink()}}},10);if(allowToAbort){var cancelButton=createLink({parent:autoLinkTd,text:ISQ.Widget.getStaticText("cancel"),style:".cancel",onclick:function(){reset(this)}});ISQ.Widget.Query.resetAutoLink=function(){reset(cancelButton)}}};addEvents(progressBar,"click",openAutoLink);if(obj.answerObject.isSingle){ISQ.Widget.Query.activateAutoLink=activateAutoLink;
var animTime=ISQ.Widget.Query.autoLinkAnimationTime;if(allowToAbort){var fast=(ISQ.Widget.Query.lastQuerySent.slice(-1)==="?"||ISQ.Widget.Query.lastQuerySource===ISQ.Widget.Query.enumTextQuerySource.suggestion);activateAutoLink(fast?animTime.fast:animTime.slow)}else{activateAutoLink(animTime.superFast)}}}}var summaryTr=createRow(tbody,".summaryRow");var summaryTd=createTd(summaryTr,"","top",".answerBody");var resizeWidgetContent=false;summaryTd.setAttribute("tabindex","5");if(summary){var addContent=function(parentNode,stringContent){if(obj.answerObject.externalSourceType){parentNode.innerHTML=stringContent;var parsedSummary=ISQ.Export.parseExternalSourceSummary(parentNode,obj.answerObject.externalSourceType,tbody.parentNode);if(parsedSummary){parentNode.appendChild()}tbody.externalSource=obj.answerObject.externalSourceType;resizeWidgetContent=true}else{parentNode.innerHTML=stringContent}ISQ.Widget.Query.processQuotes(parentNode,obj.answerObject.id)};var parts=summary.split(ISQ.Tools.pagerSeperator);if(parts.length>1){ISQ.Widget.Query.addAnswerPager(obj.answerObject.id,parts,summaryTd,tableId,direction,addContent)}else{addContent(summaryTd,summary)}}if(!obj.isFAQ&&obj.contactFormId){var form_placeholder_row=createRow(tbody);var form_placeholder_cell=createTd(form_placeholder_row,"","",".formId_"+obj.contactFormId)}ISQ.Widget.Query.appendAttachments(obj.answerObject.attachmentUrls,summaryTd);var answerFooterScript=null;if(summary&&(!ISQ.Cnf.showFooterOnlyOnLastAnswer||obj.answerObject.answerNum===ISQ.Widget.Query.numberOfTopics-1)){var replacerResult=ISQ.Widget.replacePlaceholders(obj.footer,ISQ.Widget.API.getCustomParams(),"{{","}}");if(replacerResult.success){answerFooterScript=ISQ.Widget.replacePlaceholders(ISQ.Cnf.answerFooterScript,ISQ.Widget.API.getCustomParams(),"{{","}}");if(answerFooterScript.success){answerFooterScript=answerFooterScript.text;var answerFooterDiv=createDiv(null,".answerFooter");answerFooterDiv.innerHTML=replacerResult.text||"";summaryTd.appendChild(answerFooterDiv)}else{answerFooterScript=null
}}}if(!obj.isFAQ&&ISQ.Widget.state===ISQ.Widget.enumState.questions&&ISQ.Widget.userActive){var row=createRow(tbody);var td=createTd(row,"","","");var likesContainer=createDiv(td,".articlelikeContainer");var likeDiv=createDiv(likesContainer,".iLike");var dislikeDiv=createDiv(likesContainer,".iDontLike");ISQ.Widget.Thumb.Rememberer.addIcon(likeDiv,ISQ.Widget.Query.lastQuerySent,obj.answerObject.id,obj.answerObject.keywordsetId,obj.visible,obj.answerObject.likes,"up");ISQ.Widget.Thumb.Rememberer.addIcon(dislikeDiv,ISQ.Widget.Query.lastQuerySent,obj.answerObject.id,obj.answerObject.keywordsetId,obj.visible,0,"down")}if(obj.isFAQ&&titleTd){titleTd.onclick=function(){if(summaryTr.className.indexOf("collapsed")==-1){titleTd.className="answerTitle collapsed";summaryTr.className="summaryRow collapsed";ISQ.Widget.FAQ.removeThumbsForFAQarticle(summaryTr);ISQ.Widget.HTML.dynamicSize_sendMessage()}else{if(summaryTd.innerHTML){titleTd.className="answerTitle expanded";summaryTr.className="summaryRow expanded";if(summaryTr.likes){ISQ.Widget.FAQ.BuildThumbsForFAQarticle(summaryTr.likes.results,summaryTr,summaryTr.likes.likeIcon)}if(tbody.externalSource){ISQ.Export.wmWidgetSize(tbody)}else{ISQ.Widget.HTML.dynamicSize_sendMessage()}}else{if(titleTd.clickDisabled){return}titleTd.clickDisabled=true;ISQ.Widget.Query.pendingRequest=true;_session().request({url:"a.js",params:{requestId:ISQ.Widget.Query.activeRequestId,answerId:obj.answerObject.id,auto:false,src:"FAQ"},handler:function(status,jsonObject,jsonRequest){titleTd.clickDisabled=false;ISQ.Widget.Query.responseHandler(status,jsonObject,jsonRequest,function(results){ISQ.Widget.FAQ.buildAnswer(results,titleTd,thumbIcon,tbody)})}})}}};titleTd.summaryTr=summaryTr;titleTd.summaryTd=summaryTd;tdiv.onkeyup=function(event4ff){var _event=ISQ.Html.getDomEvent(event4ff);if(_event.domEvent.keyCode==13){titleTd.onclick()}}}if(obj.collapsed){if(titleTd){titleTd.className="answerTitle collapsed"}summaryTr.className="summaryRow collapsed"}if(obj.answerObject.summaryScript){try{eval(obj.answerObject.summaryScript)
}catch(e){if(window.console&&window.console.error){window.console.error("Failed to execute footer script:",e)}}}if(answerFooterScript&&(obj.answerObject.answerNum===ISQ.Widget.Query.numberOfTopics-1||!ISQ.Cnf.showFooterOnlyOnLastAnswer)){eval(answerFooterScript)}if(summary){ISQ.Widget.Query.resizeSingleAnswerElements(summaryTd,true)}if(!obj.visible){tbody.parentNode.style.display="none"}return tbody.parentNode};ISQ.Widget.Query.updateWidgetHeightWidth=function(a){ISQ.Widget.HTML.contentWrapper.style.height="600px";ISQ.Widget.HTML.contentWrapper.style.width="800px";ISQ.Widget.HTML.dynamicSize_sendMessage(false,ISQ.Widget.isFloat)};ISQ.Widget.Query.addAnswerPager=function(a,n,s,u,e,j){var l=[];ISQ.Widget.HTML.answerPane.style.display="block";var x=ISQ.CSS.getElementWidth(s,false);ISQ.Widget.HTML.answerPane.style.display="none";var o=e==="rtl";var h=ISQ.Http.browser.app==="ff";var w=ISQ.Http.browser.app==="chrome"||ISQ.Http.browser.app==="safari"||(ISQ.Http.browser.isMobile&&!h)||ISQ.Http.browser.isIE7;var d=createDiv(s,".pagedContainer");d.style.width=x+"px";var t=createTable(d,n.length*x+"px","","table-layout:fixed;direction:inherit;");var v=createRow(t,"top");var f;var m=function(A){l[A].style.height="auto";if(ISQ.Widget.reportEvents){ISQ.Widget.CDC.sendMessage("subject=event&type=answerPageChanged&answerid="+a+"&page="+(A+1))}p(l[A].offset,0,function(){for(var B=0;B<l.length;B++){if(B!==A){l[B].style.height=0}}ISQ.Widget.HTML.dynamicSize_sendMessage();if(ISQ.Http.browser.isMobile||ISQ.Http.browser.isIE){var C=d.scrollLeft;ISQ.Widget.HTML.answerPane.restorePagerScroll=function(){try{d.scrollLeft=C}catch(D){}}}});ISQ.Widget.HTML.contentWrapper.scrollTop=0;var y=ISQ.Widget.HTML.answerPane.childNodes;for(var z=0;z<y.length;z++){if(!y[z].id.startsWith(u)){y[z].style.display=(A==0&&y[z].id.indexOf("true")>-1?"inline-table":"none")}}ISQ.Widget.HTML.dynamicSize_sendMessage()};var b=null;var k=ISQ.Widget.HTML.answerPane;do{b=ISQ.CSS.getValue(k,"background-color");k=k.parentNode}while(!b&&k!==document.body);if(!b){b="#FFF"
}ISQ.CSS.addNewStyle(".answerTable .pagerLink.next, .answerTable .pagerLink.prev {display:block; color: "+b+"}");var c=function(){for(var y=0;y<n.length;y++){td=createTd(v);f=createDiv(td,"width:100%");var z=new ISQ.GUI.Pagination({page:y,pageSize:1,total:n.length,clickHandler:new ISQ.Handler(m),next:ISQ.Widget.Localize.array.next,prev:ISQ.Widget.Localize.array.prev});j(createDiv(f),n[y]);td.style.width=x+"px";if(y>0){f.style.height=0}l[y]=f;if(o&&w){f.offset=x*(n.length-y-1)}else{f.offset=x*y}z.draw(createDiv(f,".pager"))}};if(ISQ.GUI.Pagination){c()}else{ISQ.Tools.FileLoader.load("/common/GUI/pagination.js",new ISQ.Handler(function(y){c()}),this)}var g=70,q=3,r=7;var p=function(C,B,z){var A=Math.abs(d.scrollLeft);C=Math.abs(C);var y=Math.abs(A-C);if(y>q){delta=Math.min(g,Math.max(Math.floor(y/r),q))}else{delta=1}switch(B){case -1:z();return;case 0:if(C>A){B=1}else{if(!(o&&h)){delta*=-1}B=2}break;case 1:if(C<=A){delta=0;B=-1}else{if(o&&h){delta*=-1}}break;case 2:if(C<A){if(!(o&&h)){delta*=-1}}else{delta=0;B=-1}break}if(delta!=0){d.scrollLeft+=delta}setTimeout(function(){p(C,B,z)},10)}};ISQ.Widget.Query.contentWrapperScroll=function(){var a=0;if(!ISQ.Widget.Query.currentAnswers){return}iteration(ISQ.Widget.Query.currentAnswers,function(b){var g;var e=b.peekElement;var f=ISQ.Html.position(b.answerTable).y;var c=f<ISQ.Widget.HTML.contentWrapper.scrollTop+ISQ.Widget.HTML.contentWrapper.offsetTop;var d=f>ISQ.Widget.HTML.contentWrapper.scrollTop+ISQ.Widget.HTML.contentWrapper.offsetHeight;if(c||d){if(!e){e=createDiv(ISQ.Widget.HTML.answerPane,".answerPeek");e.onclick=function(){ISQ.Widget.Query.scrollToElement(b.answerTable)};b.peekElement=e;ISQ.CSS.setWidthIncludingPadding(e,ISQ.Widget.HTML.answerPane.offsetWidth-ISQ.CSS.getPaddingWidth(ISQ.Widget.HTML.answerPane))}if(c){g=ISQ.Widget.HTML.contentWrapper.offsetTop+(a*ISQ.Widget.Query.peekElementHeight)+2;e.innerHTML="&#9650; "+b.title}else{g=ISQ.Widget.HTML.contentWrapper.offsetTop+ISQ.Widget.HTML.contentWrapper.offsetHeight-((3-a)*ISQ.Widget.Query.peekElementHeight)+2;
e.innerHTML="&#9660; "+b.title}e.style.top=g+"px";e.style.display="block"}else{if(e){e.style.display="none"}}a++})};ISQ.Widget.Query.scrollToElement=function(a){var b=ISQ.Html.position(a).y-ISQ.Widget.HTML.contentWrapper.offsetTop;var c=b<ISQ.Widget.HTML.contentWrapper.scrollTop;var d=b>ISQ.Widget.HTML.contentWrapper.scrollTop+30;if(!c&&!d){if(ISQ.Widget.Query.scrollInterval){clearInterval(ISQ.Widget.Query.scrollInterval);ISQ.Widget.Query.scrollInterval=null}return}if(!ISQ.Widget.Query.scrollInterval){ISQ.Widget.Query.scrollInterval=setInterval(function(){ISQ.Widget.Query.scrollToElement(a)},1);return}if(d){ISQ.Widget.HTML.contentWrapper.scrollTop+=10}else{ISQ.Widget.HTML.contentWrapper.scrollTop-=10}};ISQ.Widget.Query.appendAttachments=function(a,b){if(!a){return}var e=createElement("ul",null,".attachments");for(var c=0;c<a.length;c++){var d=createElement("li");d.innerHTML='<a href="'+a[c]+'" target="_blank">'+(a[c].replace(/.*\//,""))+"</a>";e.appendChild(d)}b.appendChild(e)};ISQ.Widget.Query.toTranslateContent=function(b,c){if(!ISQ.Cnf.translationEnabled||ISQ.Cnf.translationDetectionOnly){return false}if(!ISQ.Widget.TranslationHelper.languageEnabled){return false}if(ISQ.Widget.Suggestions.clicked){ISQ.Widget.Suggestions.clicked=false;return false}if(!c){c=ISQ.Tools.getUniformLanguageCode(ISQ.Widget.TranslationHelper.detectedLanguage)}if(!c){return false}var a=ISQ.Tools.getUniformLanguageCode(b);return c!=a};ISQ.Widget.Query.getFader=function(){if(ISQ.Widget.Query.fader===null){ISQ.Widget.Query.fader=new VisualEffects.Fade(ISQ.Widget.HTML.answerPane);ISQ.Widget.Query.fader.fadeOutEvent.addHandler(ISQ.Widget.Query.fader_fadeOutHandler);ISQ.Widget.Query.fader.fadeInEvent.addHandler(ISQ.Widget.Query.fader_fadeInHandler)}return ISQ.Widget.Query.fader};ISQ.Widget.Query.displayAnswers=function(d){var a=(ISQ.Widget.iChat.instance&&ISQ.Widget.iChat.instance.available())||(ISQ.Cnf.customEscalationLink&&ISQ.Cnf.customEscalationLink_Action===ISQ.Widget.enumCustomLinkStats.countChatEscalation);if(ISQ.Widget.state!==ISQ.Widget.enumState.autoQuestions&&ISQ.Widget.Query.chatInviteContent&&ISQ.Widget.Query.chatEscalationAction==ISQ.Widget.enumChatEscalationActions.inviteChat&&a){var b=createDiv(null,".chatInviteDiv");
b.innerHTML=ISQ.Widget.Query.chatInviteContent;ISQ.Widget.HTML.answerPane.insertBefore(b,ISQ.Widget.HTML.answerPane.firstChild);ISQ.Widget.Query.chatInviteContent=null;if(ISQ.Widget.iChat.instance&&ISQ.Widget.iChat.instance.available()){b.onclick=function(){ISQ.Widget.Chat.requestChat(ISQ.Widget.enumChatEscalationActions.inviteChat)}}else{b.onclick=function(){b.style.display="none";ISQ.Widget.Escalate.send(ISQ.Widget.Escalate.enumType.customChat,ISQ.Widget.enumChatEscalationActions.inviteChat)}}}if(!d&&ISQ.Widget.state!==ISQ.Widget.enumState.autoQuestions&&ISQ.Widget.userActive){ISQ.Widget.Query.showActionBar()}ISQ.Widget.HTML.answerPane.style.display="block";if(ISQ.Http.browser.full!=="safari3"){ISQ.Widget.HTML.contentWrapper.scrollTop=0}ISQ.Widget.HTML.dynamicSize_sendMessage();if(ISQ.Widget.HTML.canPerformFade(ISQ.Widget.HTML.answerPane)){var c=ISQ.Widget.Query.getFader();c.fadeIn(200,true)}else{ISQ.Widget.Query.fader_fadeInHandler()}ISQ.Widget.Query.resizeAnswerElements()};ISQ.Widget.Query.showActionBar=function(){var emalBtn=null;var chatBtn=null;var customLink=null;if(ISQ.Cnf.customEscalationLink&&ISQ.Cnf.customEscalationLink_Action!==ISQ.Widget.enumCustomLinkStats.countChatEscalation){emalBtn=customLink=_("customLink")}else{emalBtn=_("repByEmail")}emalBtn.innerHTML=ISQ.Widget.getStaticText("email");emalBtn.setAttribute("tabindex","6");var showChatBtn=false;switch(ISQ.Cnf.showChatConfiguration){case ISQ.Widget.enumShowChatConfiguration.always:showChatBtn=ISQ.Widget.Query.chatEscalationAction>ISQ.Widget.enumChatEscalationActions.hide;break;case ISQ.Widget.enumShowChatConfiguration.selectedAnswers:showChatBtn=ISQ.Widget.Query.chatEscalationAction>ISQ.Widget.enumChatEscalationActions.normal;break;case ISQ.Widget.enumShowChatConfiguration.selectedAnswers_and_noAnswers:showChatBtn=ISQ.Widget.Query.chatEscalationAction>ISQ.Widget.enumChatEscalationActions.normal||ISQ.Widget.Query.firstAnswerId===0;break}if(showChatBtn){if(ISQ.Cnf.customEscalationLink&&ISQ.Cnf.customEscalationLink_Action===ISQ.Widget.enumCustomLinkStats.countChatEscalation){chatBtn=customLink=_("customChat")
}else{if(ISQ.Widget.iChat.instance&&ISQ.Widget.iChat.instance.available()){chatBtn=_("repByChat")}}if(chatBtn){chatBtn.innerHTML=ISQ.Widget.getStaticText("chat");chatBtn.setAttribute("tabindex","7")}}if(customLink){customLink.href=ISQ.Widget.Query.buildCustomLink(ISQ.Cnf.customEscalationLink);ISQ.Widget.Query.switchLinkTarget(customLink,ISQ.Cnf.customEscalationLink_target)}_("customLink").style.display="none";_("repByEmail").style.display="none";_("customChat").style.display="none";_("repByChat").style.display="none";_("actionBarSep").style.display="none";if(ISQ.Widget.Query.numberOfTopics&&ISQ.Widget.Query.contextOnlyAnswers===ISQ.Widget.Query.numberOfTopics){ISQ.Widget.HTML.hideActionBar();return}if(chatBtn){chatBtn.style.display="block";if(ISQ.Widget.Chat.chatConfig.showEmailButton){_("actionBarSep").style.display="block";emalBtn.style.display="block"}}else{emalBtn.style.display="block"}for(var i=0;i<ISQ.Widget.HTML.actionBarQuery.childNodes.length;++i){var item=ISQ.Widget.HTML.actionBarQuery.childNodes[i];if(item.rechannel!=="true"){continue}ISQ.Widget.HTML.actionBarQuery.removeChild(item);--i}var chatRechanneling=false;if(ISQ.Widget.Query.rechannelingOptions){_it(ISQ.Widget.Query.rechannelingOptions,function(channelObj){var channel=parseInt(channelObj.channel);if(!channelObj.showInArticle){switch(channel){case ISQ.Widget.Escalate.enumType.clickToCall:var sep=_("actionBarSep").cloneNode();sep.rechannel="true";sep.id="";sep.style.display="block";sep.innerHTML=_("actionBarSep").innerHTML;ISQ.Widget.HTML.actionBarQuery.appendChild(sep);var node=_("repByEmail").cloneNode();node.className="repByVoice";node.id="repByVoice";node.rechannel="true";node.style.display="block";node.innerHTML=channelObj.buttonText;node.href="javascript: void(0)";node.clicked=false;switch(channelObj.actionEsc){case ISQ.Widget.Escalate.escaeTypeEnum.customUrl:node.onclick=function(){return ISQ.Widget.Escalate.send(ISQ.Widget.Escalate.enumType.clickToCall,null,null,channelObj.name,channelObj,node)};break;case ISQ.Widget.Escalate.escaeTypeEnum.customScript:if(!ISQ.Widget.sendingCDCMessages){node.style.display="none"
}else{node.onclick=function(){ISQ.Widget.API.runPageScript(channelObj.scriptContent);return ISQ.Widget.Escalate.send(ISQ.Widget.Escalate.enumType.clickToCall,null,null,channelObj.name,null,null,true)}}break;case ISQ.Widget.Escalate.escaeTypeEnum.normal:default:node.onclick=function(){var overlay=_("phoneNumberOverlay");var phoneNumber=document.querySelector("#phoneNumberOverlay .phoneNumber");var phoneDetails=document.querySelector("#phoneNumberOverlay .phoneDetails");phoneNumber.innerHTML=channelObj.phoneNumber;phoneNumber.target="_blank";phoneDetails.innerHTML=channelObj.customContent.replace(/\n/g,"<br/>");ISQ.Widget.HTML.showOverlay(overlay);ISQ.Widget.HTML.dynamicSize_sendMessage();ISQ.Widget.CDC.sendMessage("subject=event&type=channelActivated&data="+ISQ.Tools.Base64.encodeString(ISQ.Data.jsonToString({type:"phone",query:_query(),channel:channelObj,answer:ISQ.Widget.Query.currentAnswers&&ISQ.Widget.Query.currentAnswers[0]})));if(node.clicked=="true"){return}node.clicked="true";return ISQ.Widget.Escalate.send(channel,null,null,channelObj.name)};break}ISQ.Widget.HTML.actionBarQuery.appendChild(node);break;case ISQ.Widget.Escalate.enumType.customEmail:var sep=_("actionBarSep").cloneNode();sep.rechannel="true";sep.id="";sep.style.display="block";sep.innerHTML=_("actionBarSep").innerHTML;ISQ.Widget.HTML.actionBarQuery.appendChild(sep);var node=_("repByEmail").cloneNode();node.id="repByEmailRech";node.rechannel="true";node.style.display="block";node.innerHTML=channelObj.buttonText;if(channelObj.contactForms){node.onclick=function(){return ISQ.Widget.Escalate.send(ISQ.Widget.Escalate.enumType.email,null,null,channelObj.name,channelObj)}}if(channelObj.linkUrl&&channelObj.actionEsc==ISQ.Widget.Escalate.escaeTypeEnum.customUrl){node.onclick=function(){return ISQ.Widget.Escalate.send(ISQ.Widget.Escalate.enumType.customEmail,null,null,channelObj.name,channelObj,node)}}if(channelObj.scriptContent&&channelObj.actionEsc==ISQ.Widget.Escalate.escaeTypeEnum.customScript){if(!ISQ.Widget.sendingCDCMessages){node.style.display="none"
}else{node.onclick=function(){ISQ.Widget.API.runPageScript(channelObj.scriptContent);return ISQ.Widget.Escalate.send(ISQ.Widget.Escalate.enumType.customEmail,null,null,channelObj.name,null,null,true)}}}ISQ.Widget.HTML.actionBarQuery.appendChild(node);break;case ISQ.Widget.Escalate.enumType.chat:chatRechanneling=true;var node=_("repByChat").cloneNode();node.id="repByChatRech";node.rechannel="true";node.innerHTML=channelObj.buttonText;switch(channelObj.actionEsc){case ISQ.Widget.Escalate.escaeTypeEnum.customUrl:node.style.display="block";node.onclick=function(){return ISQ.Widget.Escalate.send(ISQ.Widget.Escalate.enumType.customChat,null,null,channelObj.name,channelObj,node)};break;case ISQ.Widget.Escalate.escaeTypeEnum.customScript:if(ISQ.Widget.sendingCDCMessages){node.style.display="block";node.onclick=function(){ISQ.Widget.API.runPageScript(channelObj.scriptContent);return ISQ.Widget.Escalate.send(ISQ.Widget.Escalate.enumType.customChat,null,null,channelObj.name,null,null,true)}}break;case ISQ.Widget.Escalate.escaeTypeEnum.normal:default:node.style.display="none";_("repByChat").style.display="none";var chatConfig=eval("("+ISQ.Cnf.chatConfiguration+")");if(chatConfig){ISQ.Widget.HTML.chatProviderChanged=true;chatConfig.active=channelObj.chatProvider;if(!chatConfig[channelObj.chatProvider]){chatConfig[channelObj.chatProvider]={}}chatConfig[channelObj.chatProvider].id=channelObj.accountNum;if(channelObj.engagementId){chatConfig[channelObj.chatProvider].engagementId=channelObj.engagementId}if(channelObj.engagementDivId){chatConfig[channelObj.chatProvider].engagementDivId=channelObj.engagementDivId}if(channelObj.hostName){chatConfig[channelObj.chatProvider].hostName=channelObj.hostName}if(channelObj.buttonId){chatConfig[channelObj.chatProvider].buttonId=channelObj.buttonId}if(channelObj.deploymentDomain){chatConfig[channelObj.chatProvider].deploymentDomain=channelObj.deploymentDomain}if(channelObj.apiDomain){chatConfig[channelObj.chatProvider].apiDomain=channelObj.apiDomain}if(channelObj.deploymentId){chatConfig[channelObj.chatProvider].deploymentId=channelObj.deploymentId
}if(channelObj.organizationId){chatConfig[channelObj.chatProvider].organizationId=channelObj.organizationId}if(channelObj.initCode){chatConfig[channelObj.chatProvider].initCode=channelObj.initCode}if(channelObj.agentSkill){chatConfig.skill=channelObj.agentSkill}if(channelObj.initStatus){chatConfig.initialStatus=channelObj.initStatus}chatConfig.popup.enabled=channelObj.isPopup;if(channelObj.popupSize){chatConfig.popup.size=channelObj.popupSize.split(",")}chatConfig.postChat=channelObj.postChat;chatConfig.preChat=channelObj.preChat;chatConfig.hideSendToEmail=channelObj.hideSendToEmail;ISQ.Widget.Chat.init(chatConfig,false,channelObj)}break}ISQ.Widget.HTML.actionBarQuery.appendChild(node);break}}})}if(ISQ.Widget.HTML.chatProviderChanged&&!chatRechanneling){ISQ.Widget.HTML.chatProviderChanged=false;if(ISQ.Widget.iChat.instance!==ISQ.Widget.iChat.defaultInstance){ISQ.Widget.iChat.instance.dispose()}ISQ.Widget.iChat.instance=ISQ.Widget.iChat.defaultInstance;ISQ.Widget.Chat.init(null,true)}ISQ.Widget.HTML.showActionBar();if(ISQ.Widget.HTML.pendingShowActionBar){return}var actionBarText=_("actionBarText");actionBarText.innerHTML="";var width=ISQ.Widget.HTML.actionBarQuery.offsetWidth;var paddingLeft=ISQ.CSS.getElementStyle(ISQ.Widget.HTML.actionBarQuery,"padding-left");if(paddingLeft){width-=parseInt(paddingLeft)}var paddingRight=ISQ.CSS.getElementStyle(ISQ.Widget.HTML.actionBarQuery,"padding-right");if(paddingRight){width-=parseInt(paddingRight)}var marginLeft=ISQ.CSS.getElementStyle(actionBarText,"margin-left");if(marginLeft){width-=parseInt(marginLeft)}var marginRight=ISQ.CSS.getElementStyle(actionBarText,"margin-right");if(marginRight){width-=parseInt(marginRight)}width=width-_("repByEmail").offsetWidth-_("actionBarSep").offsetWidth-_("repByChat").offsetWidth;var text=ISQ.Cnf.customAskRepByText||ISQ.Widget.getStaticText("askBy");ISQ.Data.autoEllipseText(text,width,actionBarText,null,null,"#actionBarWrapper");var actionBarWidth=ISQ.Widget.HTML.actionBarWrapper.offsetWidth-10;var totalWidth=0;for(var i=0;i<ISQ.Widget.HTML.actionBarQuery.childNodes.length;
++i){var item=ISQ.Widget.HTML.actionBarQuery.childNodes[i];if(item.offsetWidth){totalWidth+=item.offsetWidth}}if(totalWidth>actionBarWidth){for(var i=0;i<ISQ.Widget.HTML.actionBarQuery.childNodes.length&&totalWidth>actionBarWidth;++i){var item=ISQ.Widget.HTML.actionBarQuery.childNodes[i];if(item.rechannel!="true"){continue}if(item.nodeName!="A"){continue}totalWidth-=item.offsetWidth;totalWidth+=24;if(totalWidth>=actionBarWidth){item.style.width="24px"}else{var itemWidth=actionBarWidth-totalWidth-25;totalWidth+=itemWidth;item.style.width=(itemWidth+24)+"px";item.style.whiteSpace="nowrap";item.style.textOverflow="ellipsis";item.style.overflow="hidden"}}}var chatAvailable=(ISQ.Widget.iChat.instance&&ISQ.Widget.iChat.instance.available())||(ISQ.Cnf.customEscalationLink&&ISQ.Cnf.customEscalationLink_Action===ISQ.Widget.enumCustomLinkStats.countChatEscalation);if(chatAvailable&&ISQ.Widget.state===ISQ.Widget.enumState.questions&&ISQ.Widget.Query.chatEscalationAction==ISQ.Widget.enumChatEscalationActions.pushChat&&!ISQ.Widget.Query.chatPushAnswers.pushed){ISQ.Widget.Query.chatPushAnswers.pushed=true;if(ISQ.Widget.iChat.instance&&ISQ.Widget.iChat.instance.available()){ISQ.Widget.Chat.requestChat(ISQ.Widget.enumChatEscalationActions.pushChat)}else{ISQ.Widget.Escalate.send(ISQ.Widget.Escalate.enumType.customChat,ISQ.Widget.enumChatEscalationActions.pushChat)}}};ISQ.Widget.Query.switchLinkTarget=function(a,b){switch(b){case ISQ.Widget.enumCustomLinkTarget.CurrentPage:a.target="_top";break;case ISQ.Widget.enumCustomLinkTarget.NewTab:a.target="_blank";break;case ISQ.Widget.enumCustomLinkTarget.Popup:a.target="_blank";break;case ISQ.Widget.enumCustomLinkTarget.Widget:a.target="_self";break;default:a.target="_blank";break}};ISQ.Widget.Query.buildCustomLink=function(e){var d=e.replace("{QUERY}",encodeURIComponent(_query(true)));var b=nanoRep.Widget.API.getCustomParams();for(var c in b){d=d.replace("{"+c+"}",encodeURIComponent(b[c]));d=d.replace("{!"+c+"}",b[c])}var a=_session().contexts();if(a){for(var c in a){var f=new RegExp("{"+c+"}","gi");
d=d.replace(f,encodeURIComponent(a[c]));d=d.replace(f,a[c])}}d=d.replace(/\{.*?\}/g,"");return d};ISQ.Widget.Query.hideAnswers=function(c,a){ISQ.Widget.Query.fader_clearAnswers=a;ISQ.Widget.Query.fader_tempXml=c;if(a){ISQ.Widget.Query.activateAutoLink=null}ISQ.Widget.FAQ.shown=false;if(ISQ.Widget.HTML.canPerformFade(ISQ.Widget.HTML.answerPane)){var b=ISQ.Widget.Query.getFader();b.fadeOut(200)}else{ISQ.Widget.Query.fader_fadeOutHandler()}if(ISQ.Cnf.translationEnabled){ISQ.Widget.Translation.toggleTranslationTooltip(null,false)}};ISQ.Widget.Query.resizeSingleAnswerElements=function(b,a,f){if(f){ISQ.Widget.Query.resizeToWidth=f}else{ISQ.Widget.Query.resizeToWidth=0}for(var d=0;d<ISQ.Widget.Query.resizeableTags.length;++d){var c=b.getElementsByTagName(ISQ.Widget.Query.resizeableTags[d]);for(var e=0;e<c.length;++e){if(ISQ.Widget.Query.resizeableTags[d]==="IMG"){if(c[e].complete){c[e].setAttribute("loaded","true");c[e].loaded=true}else{c[e].style.visibility="hidden";c[e].onload=function(){this.loaded=true;this.setAttribute("loaded","true");this.style.visibility="visible";if(ISQ.Widget.HTML.isTeaser){return}if(ISQ.Widget.HTML.currentlyResizing){return}ISQ.Widget.Query.resizeAnswerElement(this)}}}if(!ISQ.Widget.HTML.isTeaser){ISQ.Widget.Query.resizeAnswerElement(c[e])}if(a){if(!ISQ.Widget.Query.elementsToResize){ISQ.Widget.Query.elementsToResize=new Array()}ISQ.Widget.Query.elementsToResize.push(c[e])}}}};ISQ.Widget.Query.resizeAnswerElements=function(){if(ISQ.Widget.HTML.isTeaser){return}if(ISQ.Widget.HTML.currentlyResizing){return}if(!ISQ.Widget.Query.resizeToWidth){var b=ISQ.CSS.getElementWidth(ISQ.Widget.HTML.answerPane)-ISQ.CSS.getPaddingWidth(ISQ.Widget.HTML.answerPane);ISQ.Widget.Query.resizeToWidth=b}if(!ISQ.Widget.Query.elementsToResize){return}for(var a=0;a<ISQ.Widget.Query.elementsToResize.length;++a){ISQ.Widget.Query.resizeAnswerElement(ISQ.Widget.Query.elementsToResize[a])}};ISQ.Widget.Query.resizeAnswerElement=function(c){if(ISQ.Widget.Query.resizeToWidth<=0){return}if(c.nodeName==="IMG"){var f=c.getAttribute("loaded")==="true";
if(!f&&!c.loaded){return}}ISQ.Widget.HTML.dynamicSize_sendMessage();var e=parseInt(c.getAttribute("lastResizeWidth"));if(!isNaN(e)){if(e===ISQ.Widget.Query.resizeToWidth){return}}else{if(c.lastResizeWidth===ISQ.Widget.Query.resizeToWidth){return}}c.lastResizeWidth=ISQ.Widget.Query.resizeToWidth;c.setAttribute("lastResizeWidth",ISQ.Widget.Query.resizeToWidth);var b=c.getAttribute("widthChanged")==="true";var k=c.offsetWidth;if(k===0){return}if(k>ISQ.Widget.Query.resizeToWidth||b){var a=c.getAttribute("_ratio");if(!a){var d=c.offsetHeight;a=d/k;c.setAttribute("_ratio",a)}else{a=parseFloat(a)}var j=c.getAttribute("originalWidth");if(!j){j=k;c.setAttribute("originalWidth",j)}else{j=parseFloat(j)}var h=ISQ.Widget.Query.resizeToWidth-5;if(h>j){h=j}var g=parseInt(a*h);c.style.width=h+"px";c.style.height=g+"px";c.setAttribute("widthChanged","true");c.setAttribute("width",h+"px");c.setAttribute("height",g+"px")}};ISQ.Widget.Query.fader_clearAnswers=false;ISQ.Widget.Query.fader_tempXml=null;ISQ.Widget.Query.fader_callback=null;ISQ.Widget.Query.fader_fadeOutHandler=function(){if(ISQ.Widget.Query.fader_clearAnswers){clearNode(ISQ.Widget.HTML.answerPane)}else{ISQ.Widget.HTML.answerPane.style.display="none";ISQ.Widget.HTML.dynamicSize_sendMessage()}ISQ.Widget.Query.fader_clearAnswers=false;ISQ.Widget.Query.firstAnswerId=0;if(ISQ.Widget.Query.fader_tempXml){ISQ.Widget.Query.processAnswers(ISQ.Widget.Query.fader_tempXml);ISQ.Widget.Query.fader_tempXml=null}if(typeof(ISQ.Widget.Query.fader_callback)==="function"){ISQ.Widget.Query.fader_callback();ISQ.Widget.Query.fader_callback=null}};ISQ.Widget.Query.fader_fadeInHandler=function(){ISQ.Widget.HTML.contentFader.hide();ISQ.Widget.HTML.clearQuery.show();ISQ.Widget.HTML.fixContentWidths();if(ISQ.Widget.state===ISQ.Widget.enumState.autoQuestions){ISQ.Widget.AutoQuestions.showNext()}if(ISQ.Cnf.answerPeeksEnabled){ISQ.Widget.Query.contentWrapperScroll()}};ISQ.Widget.getText=function(b){var d=ISQ.Widget.Localize.array[b];if(!d&&ISQ.Widget.TranslationHelper.detectedLanguage){var c=ISQ.Translation.Infra.rtlLanguages[ISQ.Widget.TranslationHelper.detectedLanguage];
var a=ISQ.Translation.Infra.rtlLanguages[ISQ.Cnf.initialUiLanguage];if(c&&a){d=ISQ.Widget.Texts.iw[b]}}if(!d){d=ISQ.Widget.Texts[ISQ.Cnf.initialUiLanguage][b]}if(!d){d=ISQ.Widget.Texts.en[b]}return d};ISQ.Widget.getStaticText=function(b){var a;if(ISQ.Cnf.translationEnabled&&ISQ.Widget.TranslationHelper.detectedLanguage&&ISQ.Widget.TranslationHelper.staticTranslationsEnum[b]){a=ISQ.Widget.TranslationHelper.getStaticTranslation(ISQ.Widget.TranslationHelper.staticTranslationsEnum[b])}else{if(!a){a=ISQ.Cnf[b]}}if(!a||(ISQ.Cnf.translationEnabled&&((ISQ.Cnf.uiLanguageCode&&ISQ.Widget.TranslationHelper.detectedLanguage!==ISQ.Cnf.uiLanguageCode)||(ISQ.Widget.TranslationHelper.detectedLanguage&&ISQ.Widget.TranslationHelper.detectedLanguage!==ISQ.Cnf.kbLanguageCode)))){a=ISQ.Widget.Localize.array[b]}return a};ISQ.Widget.setInitialTexts=function(){if(ISQ.Cnf.customEmailButtonText){ISQ.Widget.Localize.array.email=ISQ.Cnf.customEmailButtonText.Trim()}if(ISQ.Cnf.customAskRepByText){ISQ.Widget.Localize.array.askBy=ISQ.Cnf.customAskRepByText.Trim()}if(ISQ.Cnf.customChatButtonText){ISQ.Widget.Localize.array.chat=ISQ.Cnf.customChatButtonText.Trim()}if(ISQ.Cnf.customNoAnswersTextContext){ISQ.Widget.Localize.array.searchMsgNOResultsContext=ISQ.Cnf.customNoAnswersTextContext.Trim();var a=ISQ.Data.getDBAnswerAsHtml(ISQ.Cnf.customNoAnswersTextContext.Trim(),true,null,null,null,ISQ.Widget.referer.normal);ISQ.Widget.Localize.array.searchMsgNOResultsContext=a.text;ISQ.Widget.Localize.array.searchMsgNOResultsContextScript=a.script}if(ISQ.Cnf.customNoAnswersText){ISQ.Widget.Localize.array.searchMsgNOResults=ISQ.Cnf.customNoAnswersText.Trim();var a=ISQ.Data.getDBAnswerAsHtml(ISQ.Cnf.customNoAnswersText.Trim(),true,null,null,null,ISQ.Widget.referer.normal);ISQ.Widget.Localize.array.searchMsgNOResults=a.text;ISQ.Widget.Localize.array.searchMsgNOResultsScript=a.script}if(ISQ.Cnf.titleTeaserText){ISQ.Widget.Localize.array.titleTeaserText=ISQ.Cnf.titleTeaserText.Trim()}if(ISQ.Cnf.titleNormalText){ISQ.Widget.Localize.array.titleNormalText=ISQ.Cnf.titleNormalText.Trim()
}ISQ.Widget.setTitle()};ISQ.Widget.setTitle=function(){var a;if(ISQ.Widget.customTitle){a=ISQ.Widget.customTitle}if(ISQ.Widget.HTML.isTeaser&&(!ISQ.Widget.isFloat||ISQ.Widget.HTML.currentWidth!==ISQ.Cnf.floatCollapsed_WidgetSize[0])){if(ISQ.Widget.customTeaserText){a=ISQ.Widget.customTeaserText}else{if(!ISQ.Widget.customTitle){a=ISQ.Widget.getStaticText("titleTeaserText")}}ISQ.Widget.HTML.titleWrapper.style.cursor="pointer"}else{if(ISQ.Widget.customTitle){a=ISQ.Widget.customTitle}else{a=ISQ.Widget.getStaticText("titleNormalText")}ISQ.Widget.HTML.titleWrapper.style.cursor="default"}ISQ.Widget.HTML.titleText["textContent" in ISQ.Widget.HTML.titleText?"textContent":"innerText"]=a};ISQ.Widget.onCustomerLogoLoad=function(){var c=ISQ.Cnf.customerBrandingLogo_img;var a=_("customerLogo");a.src=c.src;var b=_("widgetFooter");if(ISQ.Widget.HTML.currentlyResizing||ISQ.Widget.HTML.isTeaser){a.pendingResize=true;return}a.pendingResize=false;a.style.display="block";if(b.offsetHeight<c.height){b.style.height=c.height+"px";ISQ.Widget.HTML.resizeHandler();ISQ.Widget.HTML.dynamicSize_sendMessage()}else{var d=Math.floor(b.offsetHeight/2)-Math.floor(c.height/2)+"px";a.style.marginTop=d;if(ISQ.Cnf.customerBrandingText){_("customerBrandingText").style.lineHeight=b.offsetHeight+"px"}}ISQ.Widget.HTML.Mobile.setPositions()};ISQ.Widget.Translation=initializeNS("ISQ.Widget.Translation");ISQ.Widget.Translation.enumTranslationState={none:0,pending:1,loaded:2,failed:3};ISQ.Widget.Translation.currentState=ISQ.Widget.Translation.enumTranslationState.none;ISQ.Widget.Translation.init=function(){if(!ISQ.Cnf.translationEnabled||ISQ.Widget.Translation.currentState!=ISQ.Widget.Translation.enumTranslationState.none){return}ISQ.Widget.Translation.currentState=ISQ.Widget.Translation.enumTranslationState.pending;ISQ.Tools.FileLoader.load("/widget/scripts/translations.js",new ISQ.Handler(function(a){ISQ.Widget.Translation.afterInit()}))};ISQ.Widget.Translation.afterInit=function(){var staticTexts=[ISQ.Cnf.answerFooter,ISQ.Widget.Localize.array.searchMsgNOResults,ISQ.Widget.Localize.array.searchMsgResults,ISQ.Widget.Localize.array.newSearch,ISQ.Widget.Localize.array.askBy,ISQ.Widget.Localize.array.email,ISQ.Widget.Localize.array.chat,"Translating","Translated from "+ISQ.Tools.getLanguageName(ISQ.Cnf.kbLanguageCode)+", click to turn on or off"];
try{var apiKeys=eval("({"+ISQ.Cnf.translationApiKey+"})");ISQ.Widget.TranslationHelper.init(staticTexts,ISQ.Cnf.kbLanguageCode,apiKeys,ISQ.Cnf.translationLanguages);ISQ.Translation.Infra.failureEvent.addHandler(ISQ.Widget.Translation.translationFailedHandler);ISQ.Widget.Translation.currentState=ISQ.Widget.Translation.enumTranslationState.loaded;if(ISQ.Widget.Translation.loadCallback){ISQ.Widget.Translation.loadCallback()}}catch(ex){ISQ.Widget.Log.add("Exception initializing translations: "+ex,ISQ.Widget.Log.statusEnum.RED);ISQ.Cnf.translationEnabled=false;ISQ.Widget.Translation.currentState=ISQ.Widget.Translation.enumTranslationState.failed}};ISQ.Widget.Translation.createTranslationIcon=function(e,a,b,f){var d=createLink({style:f?".translationIcon":".translationIconOff",onclick:function(){ISQ.Widget.Translation.toggleTranslationTooltip(this,false);ISQ.Widget.Translation.toggleAnswerTranlsationVisibility(e);if(ISQ.Widget.HTML.answerPane.restorePagerScroll){ISQ.Widget.HTML.answerPane.restorePagerScroll()}}});d.onmouseover=function(){ISQ.Widget.Translation.toggleTranslationTooltip(this,true)};d.onmouseout=function(){ISQ.Widget.Translation.toggleTranslationTooltip(this,false)};if(ISQ.Widget.Translation.translationTooltipDiv===null){ISQ.Widget.Translation.translationTooltipDiv=createDiv(document.body,".translationTooltip")}if(b){ISQ.Widget.Translation.translationTooltipDiv.style.direction=b}var c=new Array();c.push(ISQ.Widget.TranslationHelper.getStaticTranslation(ISQ.Widget.TranslationHelper.staticTranslationsEnum.translatedFrom));c.push("<p dir=ltr>");switch(a){case ISQ.Translation.Infra.providerEnum.Microsoft:c.push("Translation powered by Microsoft&reg; Translator");break;case ISQ.Translation.Infra.providerEnum.GoogleV1:case ISQ.Translation.Infra.providerEnum.GoogleV2:c.push("Translation powered by <img src='/widget/skins/googleLogo.png?cv=1' align='absmiddle' alt=''/>");break}c.push("</p>");ISQ.Widget.Translation.translationTooltipDiv.innerHTML=c.join("");return d};ISQ.Widget.Translation.toggleTranslationTooltip=function(a,d){if(!ISQ.Widget.Translation.translationTooltipDiv){return
}var e=ISQ.Widget.Translation.translationTooltipDiv;if(d){if(!a){return}var c=ISQ.Html.position(a);var g=ISQ.Html.screenSize().w;var f=e.offsetWidth;var b=(c.x-f/2+8);b=b<0?0:b+f>g?g-f:b;e.style.left=b+"px";e.style.top=(c.y+20-ISQ.Widget.HTML.contentWrapper.scrollTop)+"px";e.style.visibility="visible"}else{e.style.visibility="hidden"}};ISQ.Widget.Translation.toggleAnswerTranlsationVisibility=function(e){var a=e+"true";var b=e+"false";var c=_(a,true);var d=_(b,true);if(c&&d){var f=c.style.display;c.style.display=d.style.display;d.style.display=f;ISQ.Widget.Query.resizeSingleAnswerElements(d,false);ISQ.Widget.HTML.dynamicSize_sendMessage()}};ISQ.Widget.Translation.translationFailedHandler=function(b,a){var c=null;var d=a==null?"":ISQ.Translation.Infra.getProviderName(a);switch(b){case ISQ.Translation.Infra.failureEnum.DetectionTimeout:c="Language detection has timed out using provider: "+d;break;case ISQ.Translation.Infra.failureEnum.DetectionApiFallback:c="Language detection: falling back from provider: "+d;break;case ISQ.Translation.Infra.failureEnum.TranslationTimeout:c="Translation has timed out using provider: "+d;break;case ISQ.Translation.Infra.failureEnum.TranslationApiFallback:c="Translation: falling back to provider: "+d;break;case ISQ.Translation.Infra.failureEnum.TranslationDead:c="Both API Providers have failed. Translations are now turned off.";ISQ.Cnf.translationEnabled=false;if(ISQ.Widget.Query.answerTranslator){ISQ.Widget.Query.answerTranslator.translationFailed();ISQ.Widget.Query.answerTranslator=null}else{if(ISQ.Widget.Query.queryTranslator){ISQ.Widget.Query.queryTranslator.translationFailed();ISQ.Widget.Query.queryTranslator=null}}break}_session().request({url:"translationfailed.js",params:{errorCode:b,provider:a,message:c},handler:function(){}})};ISQ.Widget.Translation.translationTooltipDiv=null;ISQ.Widget.Thumb={};ISQ.Widget.Thumb.send=function(a,c,e){if(!a){return}var d=_query(true);if(!d){if(ISQ.Widget.Query.currentAnswers&&ISQ.Widget.Query.currentAnswers.length!=0){d=ISQ.Widget.Query.currentAnswers[0].title
}}if(!d){return}ISQ.Widget.Suggestions.hide(_("searchSuggestions"));if(ISQ.Widget.reportEvents){var b="";iteration(ISQ.Widget.Query.currentAnswers,function(f){if(f.id===a){b=f.title;return false}});ISQ.Widget.CDC.sendMessage("subject=event&type=like&query="+ISQ.Tools.Base64.encodeString(d)+"&answer="+ISQ.Tools.Base64.encodeString(b)+"&action="+e)}if(ISQ.Widget.TranslationHelper.detectedLanguage!=ISQ.Widget.Query.kbLanguageCode&&ISQ.Widget.Query.lastQueryTranslation){d=ISQ.Widget.Query.lastQueryTranslation}_session().request({url:"thumb.js",params:{text:encodeURIComponent(d),kbLC:ISQ.Widget.Query.kbLanguageCode,type:e,ksId:c,articleId:a},handler:function(g,f){if(g!=ISQ.Com.JsonP.Request.enumResponseType.OK||!f.result){return}var h=(e==nanoRep.FAQ.Likes.enumFeedback.positive)?"up":"down";ISQ.Widget.Thumb.Rememberer.set(a,h)}})};ISQ.Widget.Thumb.Rememberer={};ISQ.Widget.Thumb.Rememberer.idArray=new Array();ISQ.Widget.Thumb.Rememberer.queryArray=new Array();ISQ.Widget.Thumb.Rememberer.currentQuery="";ISQ.Widget.Thumb.Rememberer.addIcon=function(g,h,k,d,l,e,c){var b="thumbUpApplied";var a="thumbUp";if(c=="down"){b="thumbDownApplied";a="thumbDown"}if(typeof(ISQ.Widget.Thumb.Rememberer.queryArray[" "+h])==="undefined"){ISQ.Widget.Thumb.Rememberer.queryArray[" "+h]=new Array()}else{if(ISQ.Widget.Thumb.Rememberer.currentQuery!==h){delete ISQ.Widget.Thumb.Rememberer.queryArray[" "+h];ISQ.Widget.Thumb.Rememberer.queryArray[" "+h]=new Array()}}ISQ.Widget.Thumb.Rememberer.currentQuery=h;ISQ.Widget.Thumb.Rememberer.queryArray[" "+h].push(k);var f=null;if(typeof(ISQ.Widget.Thumb.Rememberer.idArray[k])!=="undefined"&&typeof(ISQ.Widget.Thumb.Rememberer.idArray[k])!=="undefined"&&(ISQ.Widget.Thumb.Rememberer.idArray[k]==="1"||ISQ.Widget.Thumb.Rememberer.idArray[k]==="2")){f=createLink({parent:g});if((ISQ.Widget.Thumb.Rememberer.idArray[k]==="1"&&c=="up")||(ISQ.Widget.Thumb.Rememberer.idArray[k]==="2"&&c=="down")){f.className=b}else{f.className=a}}else{var j="";if(nanoRep.FAQ&&nanoRep.FAQ.Localization){j=(c=="up")?nanoRep.FAQ.Localization.like:nanoRep.FAQ.Localization.dislike
}f=createLink({parent:g,onclick:function(){if(c=="up"){ISQ.Widget.Thumb.send(k,d,nanoRep.FAQ.Likes.enumFeedback.positive);var m=this.likesCounter.innerHTML|0;this.likesCounter.innerHTML=m+1}else{ISQ.Widget.Thumb.Rememberer.dislikeOptions(this,k,d,ISQ.Widget.Thumb.send)}},title:j});f.id=ISQ.Widget.Thumb.Rememberer.getIconElement(k,l,c);f.oppositeId=ISQ.Widget.Thumb.Rememberer.getIconElement(k,l,(c=="up")?"down":"up");f.className=a;f.widgetAnswer=true;if(ISQ.Widget.Localize.array.dir==="rtl"){f.style.cssText="display:block !important;float:right;direction:rtl;"}}if(c=="down"){return}if(ISQ.Widget.Localize.array.dir==="rtl"){createDiv(g,".newLikesRightEdge");f.likesCounter=createDiv(g,".newlikes");f.style["float"]="right";f.likesCounter.className+=" newlikesRTL";if(f.style.setProperty){f.style.setProperty("float","right")}else{f.style.setAttribute("float","right")}}else{createDiv(g,".newLikesLeftEdge");f.likesCounter=createDiv(g,".newlikes")}f.likesCounter.innerHTML=(e)?e:"0"};ISQ.Widget.Thumb.Rememberer.dislikeOptions=function(b,f,c,a){var e=ISQ.Widget.Localize.array.dir==="rtl";var d={};d.thumbDown=b;d.thumbDown.newPosition={left:"-1px",top:"-135px"};nanoRep.FAQ.Likes.saveData(d,f,e,null,null,null,null,null,a,c);nanoRep.FAQ.Likes.toggleDislikeOptions(false,e)};ISQ.Widget.Thumb.Rememberer.set=function(j,f){if(!ISQ.Widget.Thumb.Rememberer.queryArray[" "+ISQ.Widget.Thumb.Rememberer.currentQuery]){return}var h=ISQ.Widget.Thumb.Rememberer.queryArray[" "+ISQ.Widget.Thumb.Rememberer.currentQuery].length;for(var g=0;g<h;++g){var e=ISQ.Widget.Thumb.Rememberer.queryArray[" "+ISQ.Widget.Thumb.Rememberer.currentQuery][g];var a=_(ISQ.Widget.Thumb.Rememberer.getIconElement(e,true,f),true);var c=_(ISQ.Widget.Thumb.Rememberer.getIconElement(e,false,f),true);var b=_(ISQ.Widget.Thumb.Rememberer.getIconElement(e,true,(f=="up")?"down":"up"),true);var d=_(ISQ.Widget.Thumb.Rememberer.getIconElement(e,false,(f=="up")?"down":"up"),true);if(e==j){if(a!==null){ISQ.Widget.Thumb.Rememberer.disableLikeIcon(a,f);a.style.cursor="default";a.title="";
b.className+=(f=="up")?" opacity20":" opacity30";b.title=""}if(c!==null){ISQ.Widget.Thumb.Rememberer.disableLikeIcon(c,f);c.style.cursor="default";c.title="";d.className+=(f=="up")?" opacity20":" opacity30";d.title=""}if(!ISQ.Widget.Thumb.Rememberer.idArray[j]){ISQ.Widget.Thumb.Rememberer.idArray[j]={}}ISQ.Widget.Thumb.Rememberer.idArray[j]=(f=="up")?"1":"2"}else{if(a!==null){a.className+=(f=="up")?" opacity20":" opacity30";a.title="";b.className+=(f=="up")?" opacity20":" opacity30";b.title="";a.onclick=b.onclick=null}if(c!==null){c.className+=(f=="up")?" opacity20":" opacity30";c.title="";d.className+=(f=="up")?" opacity20":" opacity30";d.title="";c.onclick=d.onclick=null}}}ISQ.Widget.Thumb.Rememberer.currentQuery=""};ISQ.Widget.Thumb.Rememberer.isIdThumbed=function(b,a){return(typeof(ISQ.Widget.Thumb.Rememberer.idArray[b][a])!=="undefined"&&(ISQ.Widget.Thumb.Rememberer.idArray[b][a]==="1"||ISQ.Widget.Thumb.Rememberer.idArray[b][a]==="2"))};ISQ.Widget.Thumb.Rememberer.disableLikeIcon=function(a,c){var b="thumbUpApplied";if(c=="down"){b="thumbDownApplied"}a.className=b;a.onclick=null;a.title="";var d=_(a.oppositeId);if(d){d.onclick=null;d.title=""}};ISQ.Widget.Thumb.Rememberer.getIconElement=function(b,c,a){return"thumb"+a+"Image"+b+c};ISQ.Widget.Escalate=initializeNS("ISQ.Widget.Escalate");ISQ.Widget.Escalate.enumType={email:0,customEmail:1,customChat:2,chat:3,customEmail_fromContactForm:4,clickToCall:5};ISQ.Widget.Escalate.escaeTypeEnum={normal:"0",customUrl:"1",customScript:"2"};ISQ.Widget.Escalate.toEmail=function(){if(ISQ.Cnf.customEscalationLink&&ISQ.Cnf.customEscalationLink_Action!==ISQ.Widget.enumCustomLinkStats.countChatEscalation){_("customLink").onclick()}else{_("repByEmail").onclick()}};ISQ.Widget.Escalate.send=function(n,e,g,c,d,h,a){if(typeof(e)==="undefined"){e=null}if(typeof(g)==="undefined"){g=false}if(e){g=true}ISQ.Widget.Suggestions.hide(_("searchSuggestions"));var k=_query(true);if(ISQ.Widget.Query.lastWrittenQuery){if(ISQ.Widget.Query.typeTimer){ISQ.Widget.Query.typeTimer.cancel();ISQ.Widget.Query.clearTextboxOnInteraction=false
}k=ISQ.Widget.Query.lastWrittenQuery;if(n!=ISQ.Widget.Escalate.enumType.customEmail_fromContactForm){ISQ.Widget.HTML.queryField.value=ISQ.Widget.Query.lastWrittenQuery}}if(!g&&!k){return}if(ISQ.Widget.state===ISQ.Widget.enumState.autoQuestions){ISQ.Widget.AutoQuestions.stop_()}if(n!=ISQ.Widget.Escalate.enumType.chat&&n!=ISQ.Widget.Escalate.enumType.clickToCall){ISQ.Widget.HTML.hideActionBar()}if(n!==ISQ.Widget.Escalate.enumType.chat){ISQ.Widget.HTML.Mobile.hideAddressbar();if(n===ISQ.Widget.Escalate.enumType.customEmail){ISQ.Widget.state=ISQ.Widget.enumState.customLink}else{ISQ.Widget.state=ISQ.Widget.enumState.contactForm}}if(n!==ISQ.Widget.Escalate.enumType.chat){ISQ.Widget.Query.lastQuerySent=""}ISQ.Widget.Query.ticketingInterface=null;var l=0;if(d){if(d.contactForms){l=d.contactForms}if(d.ticketingInterface){ISQ.Widget.Query.ticketingInterface=d.ticketingInterface}}_session().request({url:"escalate.js",params:{type:n,text:encodeURIComponent(k),articleId:ISQ.Widget.Query.firstAnswerId,translation:ISQ.Widget.Query.lastQueryTranslation,translationLanguage:ISQ.Tools.getUniformLanguageCode(ISQ.Widget.TranslationHelper.detectedLanguage),chatType:e,apiName:c,contactFormId:l},handler:function(q,p){ISQ.Widget.Escalate.parseResponse(q,p,n,k,null,d)}});var b="ticket";if(n===ISQ.Widget.Escalate.enumType.clickToCall){b="phone"}else{if(n===ISQ.Widget.Escalate.enumType.chat||n===ISQ.Widget.Escalate.enumType.customChat){b="chat"}}if(b!=="chat"||(d&&d.linkTarget)){ISQ.Widget.CDC.sendMessage("subject=event&type=channelActivated&data="+ISQ.Tools.Base64.encodeString(ISQ.Data.jsonToString({type:b,query:_query(),channel:d,answer:ISQ.Widget.Query.currentAnswers&&ISQ.Widget.Query.currentAnswers[0]})))}if(d&&(n===ISQ.Widget.Escalate.enumType.customEmail||n===ISQ.Widget.Escalate.enumType.customChat||n===ISQ.Widget.Escalate.enumType.clickToCall)){if(d.popupSize&&d.linkTarget==ISQ.Widget.enumCustomLinkTarget.Popup){var m=d.popupSize.split(",");var j={};if(m.length>0){j.w=parseInt(m[0])||800}else{j.w=800}if(m.length>1){j.h=parseInt(m[1])||600
}else{j.h=600}window.open(ISQ.Widget.Query.buildCustomLink(d.linkUrl),"nr_escalationWindow","height="+j.h+",width="+j.w)}else{h.href=d.linkUrl;ISQ.Widget.Query.switchLinkTarget(h,parseInt(d.linkTarget)||0)}}else{if(!a&&(n===ISQ.Widget.Escalate.enumType.customEmail||n===ISQ.Widget.Escalate.enumType.customChat)){if(ISQ.Cnf.customEscalationLink_target===ISQ.Widget.enumCustomLinkTarget.Popup||(n===ISQ.Widget.Escalate.enumType.customChat&&e!=ISQ.Widget.enumChatEscalationActions.normal)){var o=800,f=600;if(ISQ.Cnf.customLinkPopupSize!=null){o=ISQ.Cnf.customLinkPopupSize[0];f=ISQ.Cnf.customLinkPopupSize[1]}window.open(ISQ.Widget.Query.buildCustomLink(ISQ.Cnf.customEscalationLink),"nr_escalationWindow","height="+f+",width="+o);return false}else{return true}}}};ISQ.Widget.Escalate.parseResponse=function(j,h,f,d,b,a){if(j!=ISQ.Com.JsonP.Request.enumResponseType.OK){ISQ.Widget.Log.add("Error parsing escalation response");return}if(ISQ.Http.browser.isIE6||ISQ.Http.browser.isIE7){ISQ.Widget.HTML.contentWrapper.scrollTop=0}try{var g={query:d};switch(f){case ISQ.Widget.Escalate.enumType.email:g.escType="email";break;case ISQ.Widget.Escalate.enumType.customEmail:g.escType="customEmail";break;case ISQ.Widget.Escalate.enumType.customChat:g.escType="customChat";break;case ISQ.Widget.Escalate.enumType.chat:g.escType="chat";break}switch(h.action){case"noAction":if(ISQ.Widget.reportEvents){ISQ.Widget.CDC.sendMessage("subject=event&type=escalation&query="+ISQ.Tools.Base64.encodeString(g.query)+"&esctype="+g.escType)}if(h.status){if(h.status==="readOnly"){txt=ISQ.Cnf.readOnlyModeAlert||ISQ.Widget.Localize.array.readOnlyModeAlert;if(!txt){txt=ISQ.Widget.Texts.en["readOnlyModeAlert"]}}else{if(h.status==="success"){txt=(a&&a.ThankYouMessage)||ISQ.Cnf.topicPostConfirmationText||ISQ.Widget.Localize.array.topicPostConfirmationText;if(!txt){txt=ISQ.Widget.Texts.en["topicPostConfirmationText"]}}else{txt=""}}if(txt&&ISQ.Widget.Query.toTranslateContent(ISQ.Cnf.initialUiLanguage)){ISQ.Translation.Infra.translate(txt,null,ISQ.Widget.TranslationHelper.detectedLanguage,new ISQ.Handler(function(e){ISQ.Widget.Escalate.showThankYouMessage(e,b)
}))}else{if(txt){ISQ.Widget.Escalate.showThankYouMessage(txt,b)}}return}else{if(ISQ.Widget.state===ISQ.Widget.enumState.contactForm){ISQ.Widget.state=ISQ.Widget.enumState.questions}}break;case"contactForm":if(ISQ.Widget.reportEvents){ISQ.Widget.CDC.sendMessage("subject=event&type=contactForm&query="+ISQ.Tools.Base64.encodeString(g.query))}ISQ.Widget.ContactForm.detectedLanguageKBExists=h.detectedLanguageKBExists;ISQ.Widget.ContactForm.show(h.data,h.allowedAttachments,null,a);break;case"customLink":if(ISQ.Widget.reportEvents){ISQ.Widget.CDC.sendMessage("subject=event&type=escalation&query="+ISQ.Tools.Base64.encodeString(g.query)+"&esctype="+g.escType)}break}}catch(c){ISQ.Widget.Log.add("Escalate.parseResponse:"+c.message,ISQ.Widget.Log.statusEnum.RED)}};ISQ.Widget.Escalate.showThankYouMessage=function(b,a){ISQ.Widget.state=ISQ.Widget.enumState.questions;if(ISQ.Cnf.limited){ISQ.Widget.HTML.queryField.style.display="none";ISQ.Widget.HTML.queryField.style.visibility="hidden"}if(!a){ISQ.Widget.Query.displayAnswers(true);ISQ.Widget.HTML.answerPane.style.display="block";ISQ.Widget.HTML.answerPane.innerHTML=b}else{a.style.padding="10px";a.style.borderRadius="3px";a.style.backgroundColor="#f2f2f2";a.style.fontFamily="Open Sans";a.style.fontSize="14px";a.style.color="#516166";a.innerHTML=b}ISQ.Widget.ContactForm.thankYouShown=true;ISQ.Widget.ContactForm.closeComplete()};ISQ.Widget.ContactForm=initializeNS("ISQ.Widget.ContactForm");ISQ.Widget.ContactForm.fader=null;ISQ.Widget.ContactForm.fader_submit=false;ISQ.Widget.ContactForm.blockedCreditCardReplacement="*";ISQ.Widget.ContactForm.closed=false;ISQ.Widget.ContactForm.thankYouShown=false;ISQ.Widget.ContactForm.canceled=false;ISQ.Widget.ContactForm.detectedLanguageKBExists=null;ISQ.Widget.ContactForm.preview=null;ISQ.Widget.ContactForm.preDefinedValues=[];ISQ.Widget.ContactForm.mSessionOpenTimer=null;ISQ.Widget.ContactForm.mResizeContactForm=null;ISQ.Widget.ContactForm.showContactForm=null;ISQ.Widget.ContactForm.preDefinedValuesFromMessage=null;ISQ.Widget.ContactForm.getPreDefinedValues=function(){if(!ISQ.Widget.ContactForm.preDefinedValues){return[]
}var a=[];for(var b in ISQ.Widget.ContactForm.preDefinedValues){a[ISQ.Widget.ContactForm.preDefinedValues[b].name]=ISQ.Widget.ContactForm.preDefinedValues[b].value}return a};ISQ.Widget.ContactForm.show=function(d,a,c,b){if(ISQ.Widget.ContactForm.showContactForm){ISQ.Widget.ContactForm.showContactForm(d,a,c,b)}else{ISQ.Tools.FileLoader.load("/widget/scripts/contactform.js",new ISQ.Handler(function(e){if(ISQ.Widget.ContactForm.preDefinedValuesFromMessage){ISQ.WebForms.PreviewContact.incomingPreDefinedValuesFromMessage(ISQ.Widget.ContactForm.preDefinedValuesFromMessage)}ISQ.Widget.ContactForm.showContactForm(d,a,c,b)}))}};ISQ.Widget.ContactForm.incomingPreDefinedValuesFromMessage=function(a){var d=a.split(ISQ.Widget.APIKeyEndDelimiter);var c;for(var b=0;b<d.length;++b){c=d[b].split("(");if(c.length===3){ISQ.Widget.ContactForm.reportPreDefinedValue(ISQ.Http.Cookies.decode64(c[0]),ISQ.Http.Cookies.decode64(c[1]),ISQ.Http.Cookies.decode64(c[2]))}else{ISQ.Widget.ContactForm.reportPreDefinedValue(ISQ.Http.Cookies.decode64(c[0]),ISQ.Http.Cookies.decode64(c[1]))}}if((ISQ.Widget.state&ISQ.Widget.enumState.contactForm)!==0&&ISQ.Widget.ContactForm.preview){ISQ.Widget.ContactForm.preview.populateValues(ISQ.Widget.ContactForm.preDefinedValues,_query(true,false))}_session().setValues(ISQ.Widget.ContactForm.getPreDefinedValues())};ISQ.Widget.ContactForm.reportPreDefinedValue=function(a,c,b){b=b||"text";ISQ.Widget.ContactForm.preDefinedValues[a]=new ISQ.Widget.ContactForm.preDefinedValue(a,c,b)};ISQ.Widget.ContactForm.preDefinedValue=function(a,c,b){this.name=a;this.value=c;this.type=b};ISQ.Widget.ContactForm.preDefinedValue.prototype.name="";ISQ.Widget.ContactForm.preDefinedValue.prototype.value="";ISQ.Widget.ContactForm.preDefinedValue.prototype.type="";ISQ.Widget.CDC=initializeNS("ISQ.Widget.CDC");ISQ.Widget.CDC.lastMessage="load";ISQ.Widget.CDC.waitingForFrameToLoad=false;ISQ.Widget.CDC.nextMessage="";ISQ.Widget.CDC.user=null;ISQ.Widget.CDC.messageOrdinal_cdc2=0;ISQ.Widget.CDC.init=function(){var a;if(ISQ.Widget.isPreview){a=window.location.protocol+"//"+ISQ.Http.domain(true)
}else{a=ISQ.Widget.referer.normal.substring(0,ISQ.Widget.referer.normal.indexOf("/",8))}if(ISQ.Widget.sendingCDCMessages){if(ISQ.Widget.supportsPostMessage){ISQ.Widget.cdcVersion="3"}switch(ISQ.Widget.cdcVersion){case"1":case"2":break;case"3":ISQ.Widget.CDC.user=new ISQ.CDC.User({targetWindowName:"parent",proxyIFrameUrl:ISQ.Widget.cdcFrame,allowMessagesFrom:a,server:window.location.protocol+"//"+window.location.host});break}}if(!ISQ.Widget.CDC.user){ISQ.Widget.CDC.user=new ISQ.CDC.User({allowMessagesFrom:a})}ISQ.Widget.CDC.user.incomingMessageEvent.addHandler(ISQ.Widget.CDC.incomingMessage)};ISQ.Widget.contextSetAlready=false;ISQ.Widget.CDC.incomingMessage=function(message){switch(message.subject){case"scrolledOrReiszed":if(ISQ.Widget.embedCallback){ISQ.Widget.embedCallback({scrollLeft:message.scrollleft,scrollTop:message.scrolltop,width:message.width,height:message.height,offsetTop:message.offsettop})}break;case"api":var formData=message.form;if(formData){if(ISQ.Http.browser.isMobile&&!ISQ.Widget.HTML.Mobile.adjustableEmbedWidth){ISQ.Widget.HTML.Mobile.formPredefinedData=formData}else{ISQ.Widget.ContactForm.incomingPreDefinedValuesFromMessage(formData)}}var custParams=message.customparams;if(custParams){ISQ.Widget.API.customParams=ISQ.Widget.CDC_getKeyValueArrayFromMessage(custParams,true)}var context=message.context;if(context){var currentContext=ISQ.Widget.CDC_getKeyValueArrayFromMessage(context);_session().setContext(currentContext);ISQ.Widget.contextSetAlready=true;var contextObject={};for(var prop in currentContext){if(currentContext.hasOwnProperty(prop)){contextObject[prop]=currentContext[prop]}}ISQ.Widget.CDC.sendMessage("subject=updateContext&context="+ISQ.Data.jsonToString(contextObject))}break;case"cnf":if(!ISQ.Cnf){ISQ.Cnf=[]}ISQ.Cnf.push(message.data);var finished=message.finished;if(finished){var completeCnf=ISQ.Cnf.join("");if(!completeCnf){return}ISQ.Cnf=eval("("+ISQ.Http.Cookies.decode64(completeCnf)+")");setTimeout(function(){var customScript=ISQ.Cnf.customScript;delete ISQ.Cnf.customScript;if(customScript){try{eval(customScript)
}catch(e){}}ISQ.Widget.Cnf.postDownload()},0)}break;case"refreshSize":ISQ.Widget.HTML.resizeHandler(null,true);break;case"setHeight":ISQ.Widget.HTML.resizeHandler({w:ISQ.Html.screenSize().w,h:parseInt(message.size)},true);break;case"dynamicSizeRequest":ISQ.Widget.HTML.dynamicSize_sendMessage();break;case"openContactForm":var contactFormData=message.data?ISQ.Http.Cookies.decode64(message.data):null;if((ISQ.Widget.state&ISQ.Widget.enumState.allQuestions)===0){if((ISQ.Widget.state&ISQ.Widget.enumState.contactForm)===0){break}if(!contactFormData){break}ISQ.Widget.ContactForm.close(false,true)}if(contactFormData){ISQ.Widget.ContactForm.show(contactFormData)}else{ISQ.Widget.Escalate.send(ISQ.Widget.Escalate.enumType.email,null,true)}break;case"customize":if(message.bgcolor){_("widgetTitleWrapper").style.backgroundColor=message.bgcolor;_("widgetContainer").style.borderColor=message.bgcolor}if(message.title){ISQ.Widget.customTitle=message.title;ISQ.Widget.HTML.titleText.innerHTML=message.title}break;case"startChat":if((ISQ.Widget.state&ISQ.Widget.enumState.allQuestions)===0){break}if(ISQ.Widget.state===ISQ.Widget.enumState.autoQuestions){ISQ.Widget.Query.clearTextboxOnInteraction=true;ISQ.Widget.AutoQuestions.stop_()}var countStatsOnly=message.countstatsonly;if(countStatsOnly){ISQ.Widget.Escalate.send(ISQ.Widget.Escalate.enumType.chat,ISQ.Widget.enumChatEscalationActions.normal);break}if(!ISQ.Widget.iChat.instance||!ISQ.Widget.iChat.instance.available()){break}ISQ.Widget.Chat.requestChat(ISQ.Widget.enumChatEscalationActions.normal);break;case"ask":if((ISQ.Widget.state&ISQ.Widget.enumState.allQuestions)===0){break}var q=message.question||"";ISQ.Widget.userActive=true;ISQ.Widget.Query.ask(q,ISQ.Widget.Query.enumTextQuerySource.api);if(ISQ.Widget.isFloat){setTimeout(function(){ISQ.Widget.CDC.sendMessage("subject=userWrites")},0)}break;case"askById":if((ISQ.Widget.state&ISQ.Widget.enumState.allQuestions)===0){break}var id=message.questionid||"";var sender=message.sender||"";if(id.length===0){break}ISQ.Widget.userActive=true;ISQ.Widget.Query.clearQuestionTrail();
ISQ.Widget.Query.getAnswerById(id);ISQ.Widget.Query.clearTextboxOnInteraction=true;if(ISQ.Widget.isFloat){setTimeout(function(){ISQ.Widget.CDC.sendMessage("subject=userWrites")},0)}break;case"mobileOpenNewWindow":ISQ.Widget.HTML.Mobile.beforeOpeningWidget();break;case"closesession":_session().die();setTimeout(function(){ISQ.Widget.CDC.sendMessage("subject=sessionclosed")},0);break;case"faqData":switch(ISQ.Widget.FAQ.scriptLoadState){case ISQ.Widget.FAQ.initEnum.loaded:ISQ.Widget.FAQ.dataReady(ISQ.Http.Cookies.decode64(message.data));break;case ISQ.Widget.FAQ.initEnum.loading:case ISQ.Widget.FAQ.initEnum.none:ISQ.Widget.FAQ.pendingFAQCallbackList.push(function(){ISQ.Widget.FAQ.dataReady(ISQ.Http.Cookies.decode64(message.data))});break}break;case"chatResumeApproved":ISQ.Widget.Chat.resumeChat(true);break;case"preventChatResuming":ISQ.Widget.Chat.preventChatResuming();break;case"chat":if(!ISQ.Widget.iChat.instance){return}ISQ.Widget.iChat.instance.handleCDCMessage(message);break;case"widgetLog":ISQ.Widget.Log.add(message.entry);break;case"visitorId":if(!ISQ.Widget.iChat.instance){return}ISQ.Widget.iChat.instance.setVisitorId(message.data);break;case"backImageClicked":ISQ.Widget.Expand();break;case"startSpeechRecognition":ISQ.Widget.Cnf.SpeechRecognition.start();break;case"voiceEnabled":if(message.value=="true"){ISQ.Widget.Cnf.SpeechRecognition.activate()}else{ISQ.Widget.Cnf.SpeechRecognition.deactivate()}break;case"setUiLanguage":ISQ.Widget.setUiLanguage(message.lang);break;case"blurQueryField":document.activeElement.blur();break;case"guidesOptions":ISQ.Widget.setGuidanceSearchOptions(message.data);break}};ISQ.Widget.CDC.sendMessage=function(d,c){if(!ISQ.Widget.sendingCDCMessages){return}if(!d){return}c=c===true;d+="&widget="+(ISQ.Widget.isFloat?"float":"embed");if(ISQ.Widget.CDC.lastMessage===d&&!c){return}var b,a;switch(ISQ.Widget.cdcVersion){case"1":if(ISQ.Widget.CDC.waitingForFrameToLoad){ISQ.Widget.CDC.nextMessage=d;return}ISQ.Widget.CDC.waitingForFrameToLoad=true;ISQ.Widget.CDC.nextMessage="";b=_("iframeContainer");
a=ISQ.Widget.CDC.createIFrame(b);if(ISQ.Http.browser.app==="opera"){a.onload=ISQ.Widget.CDC.frameOnload}else{if(document.addEventListener){a.addEventListener("load",ISQ.Widget.CDC.cdc1_frameLoad,true)}else{if(document.attachEvent){a.attachEvent("onload",ISQ.Widget.CDC.cdc1_frameLoad)}}}a.src=ISQ.Widget.cdcFrame+"?"+d;b.appendChild(a);var e;while(b.childNodes.length!==1){e=b.firstChild;if(ISQ.Http.browser.app==="opera"){e.onload=null}else{if(document.addEventListener){e.removeEventListener("load",ISQ.Widget.CDC.cdc1_frameLoad,true)}else{if(document.attachEvent){e.detachEvent("onload",ISQ.Widget.CDC.cdc1_frameLoad)}}}b.removeChild(e)}b=null;ISQ.Widget.CDC.lastMessage=d;break;case"2":b=_("iframeContainer");a=ISQ.Widget.CDC.createIFrame(b);if(ISQ.Http.browser.app==="opera"){a.onload=ISQ.Widget.CDC.cdc2_frameLoad}else{if(document.addEventListener){a.addEventListener("load",ISQ.Widget.CDC.cdc2_frameLoad,true)}else{if(document.attachEvent){a.attachEvent("onload",ISQ.Widget.CDC.cdc2_frameLoad)}}}a.src=ISQ.Widget.cdcFrame+"#"+d+"&ord="+(++ISQ.Widget.CDC.messageOrdinal_cdc2);b.appendChild(a);break;case"3":ISQ.Widget.CDC.user.sendMessage(d);break}};ISQ.Widget.CDC.cdc2_frameLoad=function(){var a=this;setTimeout(function(){if(a.parentNode){a.parentNode.removeChild(a)}},1000)};ISQ.Widget.CDC.cdc1_frameLoad=function(a){ISQ.Widget.CDC.waitingForFrameToLoad=false;if(ISQ.Widget.CDC.nextMessage!==""){ISQ.Widget.CDC.sendMessage(ISQ.Widget.CDC.nextMessage)}};ISQ.Widget.CDC.createIFrame=function(b){var a=createElement("iframe",null,"visibility:hidden;z-index:-1;border:0px;height:1px;width:1px;background:transparent;");a.id="cdcFrame"+new Date().getTime();a.setAttribute("allowTransparency",true);a.setAttribute("frameBorder",false);return a};ISQ.Widget.Chat=initializeNS("ISQ.Widget.Chat");ISQ.Widget.Chat.enumChatLineType={user:0,agent:1,quickAnswer:2};ISQ.Widget.Chat.intuitiveInput=null;ISQ.Widget.Chat.chatStartAction=null;ISQ.Widget.Chat.selectedLinksToAnswers=null;ISQ.Widget.Chat.linksToAnswersBaseId=new Date().getTime();ISQ.Widget.Chat.widgetFooterContent=null;
ISQ.Widget.Chat.mobileCss="";ISQ.Widget.Chat.chatConfig={};ISQ.Widget.Chat.loadProvider=(function(){var a={};return function(d,b){var c=a[d];if(!c){a[d]={callbacks:[],loaded:false};c=a[d];ISQ.Tools.FileLoader.load(d,function(){c.loaded=true;for(var e=0;e<c.callbacks.length;e++){c.callbacks[e]()}})}if(c.loaded){b()}else{c.callbacks.push(b)}}}());ISQ.Widget.Chat.init=function(chatConfigRechanneling,dontCreateInstance,channelObj){var chatConfig=chatConfigRechanneling||eval("("+ISQ.Cnf.chatConfiguration+")");ISQ.Widget.Chat.chatConfig=chatConfig;if(dontCreateInstance){return}switch(chatConfig.active){case"nR":ISQ.Widget.Chat.settingUI();new ISQ.Widget.Chat.nR({account:ISQ.Widget.account,config:chatConfig,hIncomingMessage:new ISQ.Handler(ISQ.Widget.Chat.incomingMessageHandler),hChatStarted:new ISQ.Handler(function(){ISQ.Widget.Chat.chatStartedHandler(channelObj)}),hChatEnded:new ISQ.Handler(ISQ.Widget.Chat.chatStoppedHandler),hAgentTyping:new ISQ.Handler(ISQ.Widget.Chat.agentTypingHandler),hResumingChat:new ISQ.Handler(ISQ.Widget.Chat.chatResumed),hChatRequested:new ISQ.Handler(ISQ.Widget.Chat.chatRequested),hChatAvailableChanged:new ISQ.Handler(ISQ.Widget.Chat.chatAvailableChanged),hConnectionError:new ISQ.Handler(ISQ.Widget.Chat.connectionError),isDefault:!chatConfigRechanneling});break;case"LP":ISQ.Widget.Chat.loadProvider("/widget/scripts/livePersonV3.js",function(){ISQ.Widget.Chat.settingUI();new ISQ.Widget.Chat.LP({config:chatConfig,hIncomingMessage:new ISQ.Handler(ISQ.Widget.Chat.incomingMessageHandler),hChatStarted:new ISQ.Handler(function(){ISQ.Widget.Chat.chatStartedHandler(channelObj)}),hChatEnded:new ISQ.Handler(ISQ.Widget.Chat.chatStoppedHandler),hAgentTyping:new ISQ.Handler(ISQ.Widget.Chat.agentTypingHandler),hResumingChat:new ISQ.Handler(ISQ.Widget.Chat.chatResumed),hChatRequested:new ISQ.Handler(ISQ.Widget.Chat.chatRequested),hChatAvailableChanged:new ISQ.Handler(ISQ.Widget.Chat.chatAvailableChanged),hConnectionError:new ISQ.Handler(ISQ.Widget.Chat.connectionError),hShowActionBar:new ISQ.Handler(ISQ.Widget.Query.showActionBar),isDefault:!chatConfigRechanneling})
});break;case"LiveEngage":if(!chatConfig.LiveEngage){return}ISQ.Widget.Chat.loadProvider("/widget/scripts/liveengage.js",function(){ISQ.Widget.Chat.settingUI();new ISQ.Widget.Chat.LiveEngage({config:chatConfig,hChatRequested:new ISQ.Handler(function(requestChatStatus){ISQ.Widget.Chat.chatRequested(requestChatStatus,channelObj)}),isDefault:!chatConfigRechanneling})});break;case"SalesForce":if(!chatConfig.SalesForce){return}ISQ.Widget.Chat.loadProvider("/widget/scripts/salesforce.js",function(){ISQ.Widget.Chat.settingUI();new ISQ.Widget.Chat.SalesForce({config:chatConfig,hChatRequested:new ISQ.Handler(function(requestChatStatus){ISQ.Widget.Chat.chatRequested(requestChatStatus,channelObj)}),isDefault:!chatConfigRechanneling})});break;case"LiveChatInc":if(!chatConfig.LiveChatInc){return}ISQ.Widget.Chat.loadProvider("/widget/scripts/livechatinc.js",function(){ISQ.Widget.Chat.settingUI();new ISQ.Widget.Chat.LiveChatInc({config:chatConfig,hChatRequested:new ISQ.Handler(function(requestChatStatus){ISQ.Widget.Chat.chatRequested(requestChatStatus,channelObj)}),isDefault:!chatConfigRechanneling})});break;case"SnapEngage":if(!chatConfig.SnapEngage){return}ISQ.Widget.Chat.loadProvider("/widget/scripts/snapengage.js",function(){ISQ.Widget.Chat.settingUI();new ISQ.Widget.Chat.SnapEngage({config:chatConfig,hChatRequested:new ISQ.Handler(function(requestChatStatus){ISQ.Widget.Chat.chatRequested(requestChatStatus,channelObj)}),isDefault:!chatConfigRechanneling})});break;case"Zopim":if(!chatConfig.Zopim){return}ISQ.Widget.Chat.loadProvider("/widget/scripts/zopim.js",function(){ISQ.Widget.Chat.settingUI();new ISQ.Widget.Chat.Zopim({config:chatConfig,hChatRequested:new ISQ.Handler(function(requestChatStatus){ISQ.Widget.Chat.chatRequested(requestChatStatus,channelObj)}),isDefault:!chatConfigRechanneling})});break;case"Olark":if(!chatConfig.Olark){return}ISQ.Widget.Chat.loadProvider("/widget/scripts/olark.js",function(){ISQ.Widget.Chat.settingUI();new ISQ.Widget.Chat.Olark({config:chatConfig,hChatRequested:new ISQ.Handler(function(requestChatStatus){ISQ.Widget.Chat.chatRequested(requestChatStatus,channelObj)
}),isDefault:!chatConfigRechanneling})});break;default:return}};ISQ.Widget.Chat.updateCaptions=function(){ISQ.Data.autoEllipseText(ISQ.Widget.getStaticText("closeChat"),69,_("closeChat"));_("btnSendChat").value=_("ancEmailChatSend").innerHTML=ISQ.Widget.getStaticText("sendChat");_("emailChatLink").innerHTML=ISQ.Widget.getStaticText("emailChat");_("ancEmailChatCancel").innerHTML=ISQ.Widget.getStaticText("cancel")};ISQ.Widget.Chat.settingUI=function(){ISQ.Widget.Chat.mobileCss=ISQ.Http.browser.isMobile?" &.mobile":"";ISQ.Widget.Chat.intuitiveInput=new ISQ.GUI.IntuitiveInput({input:_("txtChatInput"),onTimeElapsedHandler:new ISQ.Handler(ISQ.Widget.Chat.chatInput_userTypes),enterKeyHandler:new ISQ.Handler(ISQ.Widget.Chat.chatInput_enterKeyup),onBeginWritingHandler:new ISQ.Handler(function(){ISQ.Widget.iChat.instance.userTyping(true)})});ISQ.Widget.Chat.updateCaptions()};ISQ.Widget.Chat.chatResumed=function(){ISQ.Widget.Log.add("resuming chat");ISQ.Widget.Chat.requestChat()};ISQ.Widget.Chat.requestChat=function(a){if((ISQ.Widget.state&ISQ.Widget.enumState.allChat)!==0){return false}if(!ISQ.Widget.iChat.instance.available()){this.chatAvailableChanged(false);return false}else{ISQ.Widget.Chat.intuitiveInput.enable();ISQ.Widget.state=ISQ.Widget.enumState.chat;if(typeof(a)==="undefined"){a=ISQ.Widget.Query.chatEscalationAction||ISQ.Widget.enumChatEscalationActions.normal}ISQ.Widget.Chat.chatStartAction=a;ISQ.Widget.HTML.Mobile.hideAddressbar();return ISQ.Widget.iChat.instance.requestChat()}};ISQ.Widget.Chat.chatAvailableChanged=function(b){var a=ISQ.Widget.iChat.instance.inChat()||ISQ.Widget.iChat.instance.resumingChat();if(ISQ.Widget.state==ISQ.Widget.enumState.chat&&!b&&!a){ISQ.Widget.Chat.endChat(false,true)}if(ISQ.Widget.reportEvents){ISQ.Widget.CDC.sendMessage("subject=event&type=chatavailable&value="+b)}};ISQ.Widget.Chat.perpareForIntegratedChat=function(b,a){ISQ.Widget.HTML.searchWrapper.style.display="none";ISQ.Widget.Suggestions.hide(_("searchSuggestions"));ISQ.Widget.HTML.answerPane.style.display="none";ISQ.Widget.HTML.chatPane.style.display="block";
if(ISQ.Widget.Chat.intuitiveInput){ISQ.Widget.Chat.intuitiveInput.resetValue()}ISQ.Widget.HTML.dynamicSize_sendMessage();if(!b){clearNode(ISQ.Widget.HTML.chatPane)}};ISQ.Widget.Chat.chatRequested=function(b,a){switch(b){case ISQ.Widget.iChat.enumRequestChatStatus.inChat:return;case ISQ.Widget.iChat.enumRequestChatStatus.popup:_("repByChat").href=arguments[1];ISQ.Widget.HTML.hideActionBar(function(){ISQ.Widget.state=ISQ.Widget.enumState.questions});ISQ.Widget.Escalate.send(ISQ.Widget.Escalate.enumType.chat,ISQ.Widget.Chat.chatStartAction,null,a?a.name:null);break;case ISQ.Widget.iChat.enumRequestChatStatus.preChat:if(ISQ.Widget.isFloat){ISQ.Widget.CDC.sendMessage("subject=startChat")}ISQ.Widget.Suggestions.hide(_("searchSuggestions"));ISQ.Widget.state=ISQ.Widget.enumState.chatSurvey;ISQ.Widget.HTML.actionBarQuery.style.display="none";ISQ.Widget.HTML.chatInputWrapper.style.display="none";ISQ.Widget.HTML.showActionBar();break;case ISQ.Widget.iChat.enumRequestChatStatus.requestingChat:ISQ.Widget.Chat.perpareForIntegratedChat(ISQ.Widget.iChat.instance.resumingChat());ISQ.Widget.HTML.actionBarQuery.style.display="none";ISQ.Widget.state=ISQ.Widget.enumState.chat;ISQ.Widget.HTML.chatStatus.innerHTML=ISQ.Widget.HTML.chatStatus.originalText=(ISQ.Widget.Chat.chatConfig&&ISQ.Widget.Chat.chatConfig.initialStatus)?ISQ.Widget.Chat.chatConfig.initialStatus:ISQ.Widget.getStaticText("chatCallingStatus");_("chatStatusWrapper").style.display="block";ISQ.Widget.HTML.Mobile.setScrollPaddingHeight(true);ISQ.Widget.HTML.showActionBar();if(ISQ.Widget.iChat.instance.supportingEmailChat()&&!ISQ.Widget.Chat.chatConfig.hideSendToEmail){_("emailChatLink").style.display="block"}else{_("emailChatLink").style.display="none"}_("actionBarChat").style.display="block";if(ISQ.Cnf.customerBrandingLogo){_("customerLogo").style.display="none"}if(ISQ.Cnf.customerBrandingText){_("customerBrandingText").style.display="none"}ISQ.Widget.HTML.chatInputWrapper.style.display="block";if(ISQ.Http.browser.isIPhone){++document.body.scrollTop}if(ISQ.Widget.isFloat){ISQ.Widget.CDC.sendMessage("subject=startChat")
}ISQ.Widget.HTML.resizeHandler();ISQ.Widget.iChat.instance.sendMessage(_query(true));ISQ.Widget.HTML.dynamicSize_sendMessage();if(ISQ.Widget.reportEvents){ISQ.Widget.CDC.sendMessage("subject=event&type=requestChat")}if(ISQ.Widget.iChat.instance.userActive()){clearNode(_("chatPane"));ISQ.Widget.Chat.appendMyLine(_query(true))}break;case ISQ.Widget.iChat.enumRequestChatStatus.newChat:break;case ISQ.Widget.iChat.enumRequestChatStatus.resumingChat:ISQ.Widget.CDC.sendMessage("subject=chatResumeRequest");break}};ISQ.Widget.Chat.resumeChat=function(a){if(a){var b=ISQ.Widget.iChat.instance.pendingMessages();if(b){_it(b,function(c){ISQ.Widget.Chat.incomingMessageHandler(c)})}}};ISQ.Widget.Chat.preventChatResuming=function(){ISQ.Widget.iChat.instance.setChatNotActive();ISQ.Widget.Chat.endChat(false,true);return false};ISQ.Widget.Chat.incomingMessageHandler=function(e){var f=new Array();var c;var b=_("chatStatusSystem");switch(e.type){case ISQ.Widget.iChat.enumMessageType.visitor_id:case ISQ.Widget.iChat.enumMessageType.agent_id:ISQ.Widget.Chat.appendSuggestionsToGUI(e);break;case ISQ.Widget.iChat.enumMessageType.visitor_text:if(e.resuming){ISQ.Widget.Chat.appendMyLine(e.text)}clearNode(b);return;case ISQ.Widget.iChat.enumMessageType.agent_text:clearNode(b);var d="chatLine_"+Math.floor(Math.random()*1000000);var a=createDiv(null,".chatLine");createDiv(a,".agentIcon");c=createDiv(a,".padded "+ISQ.Widget.Chat.mobileCss+" &.agent");c.id=d;f.push("<span class='chatAgentName'>");f.push(ISQ.Widget.iChat.instance.agentName());f.push(":</span> ");f.push(e.text);c.innerHTML=f.join("");ISQ.Widget.Chat.appendLine(a,d);break;case ISQ.Widget.iChat.enumMessageType.system:var d="chatLine_"+Math.floor(Math.random()*1000000);c=createDiv(null,".padded chatSysMsg");c.id=d;c.innerHTML=e.text;b.style.display="block";clearNode(b);b.appendChild(c);break}ISQ.Widget.HTML.resizeHandler()};ISQ.Widget.Chat.chatStartedHandler=function(a){if(!ISQ.Widget.iChat.instance.resumingChat()){ISQ.Widget.Escalate.send(ISQ.Widget.Escalate.enumType.chat,ISQ.Widget.Chat.chatStartAction,null,a?a.name:null)
}ISQ.Widget.HTML.chatStatus.innerHTML=ISQ.Widget.HTML.chatStatus.originalText=ISQ.Widget.getStaticText("chattingNow")+'<span dir="ltr" class="chatStatusAgentName">'+ISQ.Widget.iChat.instance.agentName()+"</span>";if(ISQ.Http.browser.isIE9){ISQ.Widget.HTML.contentWrapper.style.overflow="auto"}if(ISQ.Widget.iChat.instance.resumingChat()){ISQ.Widget.HTML.scrollContentToBottom()}_session().keepAlive()};ISQ.Widget.Chat.agentTypingHandler=function(a){if(!a){ISQ.Widget.HTML.chatStatus.className="agentTyping";ISQ.Widget.HTML.chatStatus.innerHTML=ISQ.Widget.getStaticText("chattingNow")+'<span dir="ltr" class="chatStatusAgentName">'+ISQ.Widget.iChat.instance.agentName()+"</span>"}else{ISQ.Widget.HTML.chatStatus.className="";ISQ.Widget.HTML.chatStatus.innerHTML=ISQ.Widget.iChat.instance.agentName()+ISQ.Widget.getStaticText("chatTyping")}};ISQ.Widget.Chat.chatStoppedHandler=function(a){if((ISQ.Widget.state&ISQ.Widget.enumState.allChat)===0){return}if(a){ISQ.Widget.Chat.endChat(false,true)}else{ISQ.Widget.state=ISQ.Widget.enumState.chatEnded;ISQ.Widget.HTML.chatStatus.innerHTML=ISQ.Widget.getStaticText("chatClosed");_("chatPane").innerHTML+=ISQ.Widget.getStaticText("chatClosed")+".<br/>";ISQ.Widget.Chat.intuitiveInput.disable()}_session().stopKeepAlive()};ISQ.Widget.Chat.connectionError=function(){ISQ.Widget.HTML.chatStatus.innerHTML=ISQ.Widget.getStaticText("chatConnectionError");_("chatPane").innerHTML+=ISQ.Widget.getStaticText("chatConnectionError")+".<br/>"};ISQ.Widget.Chat.ignoreSendingLineOnEnter=false;ISQ.Widget.Chat.pendingSuggestions=null;ISQ.Widget.Chat.hideSuggestionDiv=function(){ISQ.Widget.Chat.ignoreSendingLineOnEnter=false;if(ISQ.Http.browser.isIE7||ISQ.Http.browser.isIE6){if(ISQ.Widget.isFloat){ISQ.Widget.HTML.footerWrapper.style.visibility="visible"}else{if(ISQ.Widget.Chat.widgetFooterContent){ISQ.Widget.HTML.widgetFooter.innerHTML=ISQ.Widget.Chat.widgetFooterContent}}}};ISQ.Widget.Chat.chatInput_userTypes=function(b,a){ISQ.Widget.iChat.instance.userTyping(false);if(!a){return}if(!b){ISQ.Widget.Suggestions.hide(_("chatSuggestions"));
ISQ.Widget.Chat.hideSuggestionDiv();return}ISQ.Widget.Suggestions.request(b,{container:_("chatSuggestions"),maxResults:2,eventsHandler:function(e,c,d){if(e!=="click"){return}ISQ.Widget.Chat.hideSuggestionDiv();ISQ.Widget.Chat.intuitiveInput.resetValue();_session().request({url:"a.js",params:{requestId:++ISQ.Widget.Query.activeRequestId,answerId:c,auto:false,src:"chat"},handler:ISQ.Widget.Chat.getAnswerById_response})},documentEventsHandler:function(d,c){if(d==="up"&&c===-1){ISQ.Widget.Chat.ignoreSendingLineOnEnter=false}else{if(d==="down"){ISQ.Widget.Chat.ignoreSendingLineOnEnter=true}}},onDrawHandler:function(){if(!ISQ.Widget.Chat.intuitiveInput.value()){ISQ.Widget.Chat.hideSuggestionDiv()}if(ISQ.Http.browser.isMobile){var c=ISQ.CSS.getElementHeight(_("chatSuggestions"),true);_("chatSuggestions").style.top=(-c)+"px"}if(ISQ.Http.browser.isIE7||ISQ.Http.browser.isIE6){if(ISQ.Widget.isFloat){ISQ.Widget.HTML.footerWrapper.style.visibility="hidden"}else{ISQ.Widget.Chat.widgetFooterContent=ISQ.Widget.HTML.widgetFooter.innerHTML;ISQ.Widget.HTML.widgetFooter.innerHTML=""}}},verbose:true})};ISQ.Widget.Chat.chatInput_enterKeyup=function(){if(ISQ.Widget.Chat.ignoreSendingLineOnEnter){return false}ISQ.Widget.Chat.sendLine()};ISQ.Widget.Chat.quickAnswerPicked=function(a){ISQ.Widget.Chat.appendSuggestionsToGUI(a);ISQ.Widget.iChat.instance.sendAnswerId(a)};ISQ.Widget.Chat.sendButtonClicked=function(){ISQ.Widget.Suggestions.hide(_("chatSuggestions"));ISQ.Widget.Chat.sendLine()};ISQ.Widget.Chat.sendLine=function(){ISQ.Widget.Chat.hideSuggestionDiv();var a=_("txtChatInput").value.Trim();if(!a){return}ISQ.Widget.Chat.intuitiveInput.resetValue();if(ISQ.Cnf.blockCreditCardNumbers){a=ISQ.Data.blockCreditCardNumbers(a,ISQ.Widget.ContactForm.blockedCreditCardReplacement)}ISQ.Widget.iChat.instance.sendMessage(a);ISQ.Widget.Chat.appendMyLine(a)};ISQ.Widget.Chat.appendSuggestionsToGUI=function(b){if(!b.body){return}var d=ISQ.Data.getDBAnswerAsHtml(b.body,false,ISQ.Widget.Chat.appendLinksToNanoRepQuestions,null,null,ISQ.Widget.referer.normal).text;
d=d.replaceAll(ISQ.Tools.pagerSeperator,"");var a="";var e=ISQ.Data.uniqueId();div=createDiv(null,".quickAnswer");div.id="chatSDiv_"+e;var c=new Array();c.push("<div class='quickAnswerHeading'>");c.push(ISQ.Widget.getStaticText("quickAnswer"));c.push("</div> ");c.push("<div class='quickAnswerContainer'>");c.push("<table cellpadding='0' cellspacing='0'>");c.push("<tr valign='top' onclick='ISQ.Widget.Chat.toggleQuickAnswer(\""+e+"\")' style='cursor:pointer'>");c.push("<td class='quickAnswerExpandIcon'><div class='quickAnswerExpand' id='quickAnswerExpand_"+e+"'></div></td>");c.push("<td class='quickAnswerTitle'>");c.push(b.title);c.push("<td></tr></table>");c.push("<div class='quickAnswerBody' id='quickAnswerBody_"+e+"'>");c.push(d);c.push("</div>");c.push("</div>");div.innerHTML=c.join("");if(b.attachmentUrls){ISQ.Widget.Query.appendAttachments(b.attachmentUrls,div)}ISQ.Widget.Chat.appendLine(div,div.id);ISQ.Widget.Chat.toggleQuickAnswer(e)};ISQ.Widget.Chat.appendLinksToNanoRepQuestions=function(c,a,d){var b="linkToAnswer_"+(ISQ.Widget.Chat.linksToAnswersBaseId++);c.push("<a id='");c.push(b);c.push("' href='javascript:void(0)' onclick='ISQ.Widget.Chat.questionLinkClicked(this, \"");c.push(a);c.push("\")'>");c.push(d);c.push("</a>")};ISQ.Widget.Chat.questionLinkClicked=function(b,a){if(!ISQ.Widget.Chat.selectedLinksToAnswers){ISQ.Widget.Chat.selectedLinksToAnswers=new Array()}if(ISQ.Widget.Chat.selectedLinksToAnswers[b.id]===true){return}ISQ.Widget.Chat.selectedLinksToAnswers[b.id]=true;_session().request({url:"a.js",params:{requestId:++ISQ.Widget.Query.activeRequestId,answerId:a,auto:false,src:"chat_link"},handler:ISQ.Widget.Chat.getAnswerById_response})};ISQ.Widget.Chat.getAnswerById_response=function(b,a){if((ISQ.Widget.state&ISQ.Widget.enumState.chat)===0){return}if(a.requestId!=ISQ.Widget.Query.activeRequestId){ISQ.Widget.Log.add("Chat question link response: Request Id doesn't match. sent: "+ISQ.Widget.Query.activeRequestId+", received: "+requestId);return}a=a.answers[0];ISQ.Widget.Chat.quickAnswerPicked({id:a.id,title:a.title,body:a.summary,attachmentUrls:a.attachmentUrls})
};ISQ.Widget.Chat.appendMyLine=function(e){if(!e){return}var d=new Array();var f=Math.floor(Math.random()*1000000);var c="chatLine_"+f;var a=createDiv(null,".chatLine");createDiv(a,".clientIcon");var b=createDiv(a,".padded "+ISQ.Widget.Chat.mobileCss+" &.client");b.id=c;b.uniqueId=f;d.push("<b class='chatMe'>");d.push(ISQ.Widget.Localize.array.me);d.push(":</b> ");d.push(e);b.innerHTML=d.join("");ISQ.Widget.Chat.appendLine(a,c);return b};ISQ.Widget.Chat.appendLine=function(d,c){var b=_("chatPane");var l=ISQ.Widget.HTML.contentWrapper;b.appendChild(d);ISQ.Widget.HTML.fixContentWidths();if(c){if(ISQ.Http.browser.isMobile&&(window.top===window||self===self.top||ISQ.Widget.isFullScreen)){var e=ISQ.Http.browser.app=="ff";var f=ISQ.Html.position(c);var g=ISQ.Html.screenSize();g.h-=(ISQ.Widget.HTML.Mobile.incrementedBottom+50);var j=e?document.documentElement.scrollTop:document.body.scrollTop;var a=j+g.h;if(f.y<j||f.y>a){if(e){document.documentElement.scrollTop=f.y}else{document.body.scrollTop=f.y}}}else{var h=b.scrollHeight;var k=l.offsetHeight;if(h>k){l.scrollTop=_(c).offsetTop-b.offsetTop}}}};ISQ.Widget.Chat.toggleQuickAnswer=function(c){var b=_("quickAnswerExpand_"+c);var a=_("quickAnswerBody_"+c);if(a.style.display==="none"){a.style.display="block";b.className="quickAnswerExpand"}else{a.style.display="none";b.className="quickAnswerExpand quickAnswerCollapsed"}};ISQ.Widget.Chat.prepereSurveyPane=function(){ISQ.Widget.state=ISQ.Widget.enumState.chatSurvey;ISQ.Widget.HTML.answerPane.style.display="none";ISQ.Widget.HTML.searchWrapper.style.display="none";clearNode(ISQ.Widget.HTML.chatPane);ISQ.Widget.HTML.chatPane.style.display="block";ISQ.Widget.Suggestions.hide(_("chatSuggestions"));ISQ.Widget.HTML.actionBarQuery.style.display="none";ISQ.Widget.HTML.chatInputWrapper.style.display="none";ISQ.Widget.HTML.showActionBar()};ISQ.Widget.Chat.endChat=function(d,b){if(!b&&!d&&!confirm(ISQ.Widget.Localize.array.confirmEndChat)){return}ISQ.Widget.iChat.instance.endChat();ISQ.Widget.Suggestions.hide(_("chatSuggestions"));var a=!d&&(!_query(true)||!ISQ.Widget.userActive);
ISQ.Widget.Chat.pendingSuggestions=null;ISQ.Widget.HTML.searchWrapper.style.display="block";_("chatStatusWrapper").style.display="none";ISQ.Widget.HTML.Mobile.setScrollPaddingHeight(false);try{ISQ.Widget.Query.setFocus()}catch(c){}if(!a){ISQ.Widget.HTML.answerPane.style.display="block"}_("chatPane").style.display="none";ISQ.Widget.HTML.contentWrapper.scrollTop=0;if(!a&&_query(true,false)&&ISQ.Widget.userActive){ISQ.Widget.HTML.showActionBar()}else{ISQ.Widget.HTML.hideActionBar(null,true)}ISQ.Widget.HTML.actionBarQuery.style.display="block";_("actionBarChat").style.display="none";_("footerChatLink").style.display="none";if(ISQ.Cnf.customerBrandingLogo){_("customerLogo").style.display="block"}if(ISQ.Cnf.customerBrandingText){_("customerBrandingText").style.display="block"}ISQ.Widget.HTML.chatInputWrapper.style.display="none";if(ISQ.Widget.HTML.answerPane.restorePagerScroll){ISQ.Widget.HTML.answerPane.restorePagerScroll()}if(ISQ.Widget.isFloat){ISQ.Widget.CDC.sendMessage("subject=endChat")}ISQ.Widget.HTML.resizeHandler();ISQ.Widget.HTML.dynamicSize_sendMessage();ISQ.Widget.state=ISQ.Widget.enumState.questions;if(!ISQ.Widget.userActive&&!ISQ.Widget.FAQ.shown){ISQ.Widget.FAQ.show(ISQ.Widget.FAQ.behavior.OnNoResuls)}ISQ.Widget.Chat.emailChat_txtToggle(false)};ISQ.Widget.Chat.pageUnload=function(){};ISQ.Widget.Chat.emailChat_Show=function(){ISQ.Widget.HTML.txtEmailChat.defaultValue=ISQ.Widget.HTML.txtEmailChat.value=ISQ.Widget.Localize.array.enterEmail;ISQ.Widget.Chat.emailChat_txtToggle(true)};ISQ.Widget.Chat.emailChat_Hide=function(){ISQ.Widget.Chat.emailChat_txtToggle(false)};ISQ.Widget.Chat.emailChat_txtFocus=function(){if(ISQ.Widget.HTML.txtEmailChat.value==ISQ.Widget.HTML.txtEmailChat.defaultValue){ISQ.Widget.HTML.txtEmailChat.value=""}};ISQ.Widget.Chat.emailChat_txtBlur=function(){if(ISQ.Widget.HTML.txtEmailChat.value==""){ISQ.Widget.HTML.txtEmailChat.value=ISQ.Widget.HTML.txtEmailChat.defaultValue}};ISQ.Widget.Chat.emailChat_txtToggle=function(a){if(ISQ.Widget.Chat.chatConfig.hideSendToEmail){_("emailChatLink").style.display="none";
_("emailChatContainer").style.display="none"}else{if(a){_("emailChatLink").style.display="none";_("emailChatContainer").style.display="block"}else{_("emailChatLink").style.display="block";_("emailChatContainer").style.display="none"}}};ISQ.Widget.Chat.emailChat_Send=function(){if(ISQ.Cnf.chatHideSendToMail){return}var a=ISQ.Widget.HTML.txtEmailChat.value;if(!a){return}if(!ISQ.Data.checkString(a,"email")){alert(ISQ.Widget.Localize.array.emailValidation);return}ISQ.Widget.iChat.instance.emailChat(a);alert(ISQ.Widget.getStaticText("emailChatSent"));ISQ.Widget.Chat.emailChat_txtToggle(false)};ISQ.Widget.enumCustomLinkTarget={CurrentPage:0,NewTab:1,Popup:2,Widget:3};ISQ.Widget.enumShowChatConfiguration={always:0,selectedAnswers:1,selectedAnswers_and_noAnswers:2};ISQ.Widget.enumChatEscalationActions={hide:0,normal:1,showChatOption:2,inviteChat:3,pushChat:4};ISQ.Widget.enumCustomLinkStats={none:0,countTicketEscalation:1,countChatEscalation:2};ISQ.Widget.enumKBCategoriesFlags={none:0,visibleInWidget:1,autoLearn:2,all:3};ISQ.Widget.API=initializeNS("ISQ.Widget.API");ISQ.Widget.API.customParams=null;ISQ.Widget.API.getCurrentURL=function(){return ISQ.Widget.referer.normal};ISQ.Widget.API.getCustomParams=function(){return ISQ.Widget.API.customParams||{}};ISQ.Widget.API.openContactForm=function(){ISQ.Widget.Escalate.send(ISQ.Widget.Escalate.enumType.email)};ISQ.Widget.API.updateContext=function(d,b){var c=null;if(!b){c=_session().contexts()}if(!c||b===true){c=d}else{for(var a in d){c[a.toLowerCase()]=d[a]}}_session().setContext(c||[])};ISQ.Widget.API.reAsk=function(){ISQ.Widget.Query.timerElapsedHandler(_query(true),true)};ISQ.Widget.API.runPageScript=function(a){if(!a){return}ISQ.Widget.CDC.sendMessage("subject=pagescript&data="+ISQ.Tools.Base64.encodeString(a))};ISQ.Widget.FAQ=initializeNS("ISQ.Widget.FAQ");ISQ.Widget.FAQ.shown=false;ISQ.Widget.FAQ.show=function(){};ISQ.Widget.FAQ.initEnum={none:0,loading:1,loaded:2};ISQ.Widget.FAQ.scriptLoadState=ISQ.Widget.FAQ.initEnum.none;ISQ.Widget.FAQ.pendingFAQCallbackList=[];ISQ.Widget.FAQ.pendingFAQCallback=function(){var a=ISQ.Widget.FAQ.pendingFAQCallbackList.length;
if(a){for(var b=0;b<a;b++){ISQ.Widget.FAQ.pendingFAQCallbackList[b]()}ISQ.Widget.FAQ.pendingFAQCallbackList=[]}};ISQ.Widget.FAQ.shown=false;ISQ.Widget.FAQ.handleCnfData=function(){var a=ISQ.Cnf.faqData;if(!a||typeof(a)!=="string"){return}if(ISQ.Widget.isContained){return}nanoRep.FAQ.requestFaqLists({host:window.location.protocol+"//"+ISQ.Http.domain(true),account:ISQ.Widget.account,kb:ISQ.Http.hashArguments.kb||ISQ.Http.urlArguments.kb,referer:ISQ.Widget.referer.normal,context:_session().contexts(),isFloat:ISQ.Widget.isFloat,faqData:a,callback:ISQ.Widget.FAQ.dataReady,disableContextCombine:true,configId:ISQ.Widget.configId})};ISQ.Widget.FAQ.dataReady=function(data){if(!data){return}var callback=ISQ.Cnf.faqData.callback;if(typeof(data)==="string"){ISQ.Cnf.faqData=eval("("+data+")")}else{ISQ.Cnf.faqData=data}if(callback){callback()}};ISQ.Widget.FAQ.show=function(k){var b=ISQ.Cnf.faqData;if(!b){return}if(typeof(b)==="string"){ISQ.Cnf.faqData={callback:function(){ISQ.Widget.FAQ.show(k)}};return}var h=[];var g=false;for(var e in b){if(b[e].behavior!=null&&((b[e].behavior&k)==0)){continue}if(!b[e].data.length||!b[e].data[0].data.length){continue}h[0]=true;if(b[e].title){createDiv(ISQ.Widget.HTML.answerPane,".faqTitle").innerHTML="<h2>"+b[e].title+"</h2>"}for(var f in b[e].data[0].data){var d=b[e].data[0].data[f];if(h[d.objectId]){continue}h[d.objectId]=true;var a={title:d.label,id:d.objectId,likes:d.likes,summary:null,answerNum:f};ISQ.Widget.Query.appendSingleAnswer({answerObject:a,footer:null,visible:true,collapsed:true,isFAQ:true,style:".faq",direction:ISQ.Translation.Infra.getLanguageDirection(ISQ.Widget.TranslationHelper.detectedLanguage||ISQ.Cnf.initialUiLanguage)});switch(a.externalSourceType){case ISQ.enumContentProviders.worldManuals:g=true;break}}}if(g&&ISQ.Widget.isFloat){var c=ISQ.Html.getElementsByClassName(ISQ.Widget.HTML.widgetContainer,"hoverImagesClass");if(c.length>0){ISQ.Widget.CDC.sendMessage("subject=setSize&height="+ISQ.Export.currentHeight+"&width="+ISQ.Export.currentWidth)}else{ISQ.Widget.CDC.sendMessage("subject=widgetToExpand")
}}if(h.length>0&&(ISQ.Widget.state&ISQ.Widget.enumState.allQuestions)!==0){ISQ.Widget.FAQ.shown=true;ISQ.Widget.state=ISQ.Widget.enumState.questions;ISQ.Widget.Query.displayAnswers(_query(true).length===0)}};ISQ.Widget.FAQ.BuildThumbsForFAQarticle=function(g,k,d){var j=k;var e=d.parentNode;var b=e.parentNode;while(k.nodeName!="TBODY"&&k.parentNode){k=k.parentNode}var h=createRow(k);var l=createTd(h,"","",".likesDefaultPadding&.faqLikesPadding");var f=createDiv(l,".articlelikeContainer");var c=createDiv(f,".iLike");var a=createDiv(f,".iDontLike");j.likes={};j.likes.results=g;j.likes.currentContainer=h;j.likes.likeContainer=c;j.likes.likeIcon=d;j.likes.initialContainer=b;c.appendChild(e);nanoRep.FAQ.Likes.buildThumbDownIcon(g[0].id,a,d,false,ISQ.Cnf.cacheVar,ISQ.Widget.account,ISQ.Cnf.kbId,ISQ.Widget.isPreview,null,ISQ.Widget.referer.normal)};ISQ.Widget.FAQ.removeThumbsForFAQarticle=function(b){if(b.likes){var a=b.likes.initialContainer;a.appendChild(b.likes.likeContainer);b.likes.currentContainer.parentNode.removeChild(b.likes.currentContainer)}};ISQ.Widget.FAQ.buildAnswer=function(results,titleTd,likeIcon,tbody){if(ISQ.Widget.HTML.searchAnim){ISQ.Widget.HTML.searchAnim.hide()}var parsedSummary=ISQ.Data.getDBAnswerAsHtml(results[0].summary,false,ISQ.Widget.Query.appendQuestionTag,null,"ISQ.Widget.Query.namedAnchorClick",ISQ.Widget.referer.normal);var replacerResult=ISQ.Widget.replacePlaceholders(parsedSummary.text,ISQ.Widget.API.getCustomParams(),"{{","}}");if(replacerResult.success){parsedSummary.text=replacerResult.text}var answerScript=null;if(parsedSummary.script){answerScript=parsedSummary.script}var textDiv=createDiv(titleTd.summaryTd,".faqText");var resizeToExternal=false;ISQ.Export.currentMaxHeight=0;ISQ.Export.currentMaxWidth=0;if(results[0].externalSourceType){resizeToExternal=true;var container=createDiv(textDiv);container.innerHTML=parsedSummary.text;ISQ.Export.parseExternalSourceSummary(container,results[0].externalSourceType,tbody.parentNode)}else{textDiv.innerHTML=parsedSummary.text}if(ISQ.Widget.Query.processQuotes){ISQ.Widget.Query.processQuotes(textDiv,results[0].id)
}ISQ.Widget.Query.appendAttachments(results[0].attachmentUrls,textDiv);titleTd.className="answerTitle expanded";titleTd.summaryTr.className="summaryRow expanded";if(likeIcon){ISQ.Widget.FAQ.BuildThumbsForFAQarticle(results,titleTd.summaryTr,likeIcon)}if(answerScript){eval(answerScript)}ISQ.Widget.Query.resizeSingleAnswerElements(textDiv,true,textDiv.offsetWidth);if(resizeToExternal){var elements=ISQ.Html.getElementsByClassName(ISQ.Widget.HTML.widgetContainer,"hoverImagesClass");if(elements.length>0){ISQ.Widget.CDC.sendMessage("subject=setSize&height="+ISQ.Export.currentHeight+"&width="+ISQ.Export.currentWidth)}else{ISQ.Widget.CDC.sendMessage("subject=widgetToExpand")}}else{ISQ.Widget.HTML.dynamicSize_sendMessage()}};nanoRep.FAQ=initializeNS("nanoRep.FAQ");nanoRep.FAQ.Texts={en:{like:"Good answer!",likeActive:"You like this",dislike:"Needs improvement",dislikeActive:"You dislike this",ok:"OK",cancel:"Cancel",dislikeOptionsTitle:"What's wrong with this answer?",likeTexts:{0:"Like",2:"Answer is incorrect or inaccurate",3:"Missing important information",4:"Answer irrelevant to the page",5:"Didn't find what I was looking for",6:"Missing or incorrect information"}},pl:{like:"Like",likeActive:"Chcesz tego",dislike:"Nie lubi",dislikeActive:"Nie lubi",ok:"OK",cancel:"Anuluj",dislikeOptionsTitle:"Jaki jest problem z odpowiedzi?",likeTexts:{0:"Like",2:"Odpowied jest niepoprawna bd nieprecyzyjna",3:"Brakuje wanych informacji",4:"Odpowied jest niezwizana z tematem",5:"Nie mog znale to, czego szukasz",6:"Brak lub nieprawidowe informacje"}},da:{like:"Like",likeActive:"Du kan lide denne",dislike:"Dislike",dislikeActive:"Du kan ikke lide denne",ok:"OK",cancel:"Annuller",dislikeOptionsTitle:"Hvad er der galt med dette svar?",likeTexts:{0:"Like",2:"Svaret er forkert eller uprcist",3:"Mangler vigtig information",4:"Svaret er irrelevant",5:"Jeg kunne ikke finde, hvad jeg ledte efter",6:"Manglende eller forkerte oplysninger"}},hu:{like:"Like",likeActive:"You like this",dislike:"Dislike",dislikeActive:"You dislike this",ok:"Rendben",cancel:"Mgse",dislikeOptionsTitle:"Mi a baj a vlasszal?",likeTexts:{0:"Like",2:"A vlasz helytelen vagy pontatlan",3:"Fontos informci hinyzik belle",4:"A vlasz nem relevns",5:"n nem talltam, amit kerestem",6:"Hinyz vagy helytelen informci"}},tr:{like:"Like",likeActive:"You like this",dislike:"Dislike",dislikeActive:"You dislike this",ok:"OK",cancel:"Cancel",dislikeOptionsTitle:"What's wrong with this answer?",likeTexts:{0:"Like",2:"Answer is incorrect or inaccurate",3:"Missing important information",4:"Answer irrelevant to the page",5:"Didn't find what I was looking for",6:"Missing or incorrect information"}},sv:{like:"Liksom",likeActive:"Du gillar det hr inlgget",dislike:"Motvilja",dislikeActive:"Du gillar inte det hr",ok:"OK",cancel:"Avbryt",dislikeOptionsTitle:"Vad r det fr fel p detta svar?",likeTexts:{0:"Liksom",2:"Svaret r felaktigt eller oriktigt",3:"Saknar viktig information",4:"Svaret r irrelevant",5:"Jag hittade inte det jag letade efter",6:"Saknas eller felaktig information"}},de:{like:"Gefllt mir",likeActive:"Sie mgen dieses",dislike:"Dislike",dislikeActive:"Sie mgen diese",ok:"OK",cancel:"Abbrechen",dislikeOptionsTitle:"Was ist falsch mit dieser Antwort?",likeTexts:{0:"Gefllt mir",2:"Antwort ist nicht richtig oder ungenau",3:"Es fehlen wichtige Informationen",4:"Die Antwort ist irrelevant",5:"Ich fand nicht, was ich gesucht habe",6:"Fehlende oder falsche Informationen"}},ar:{like:"",likeActive:"  ",dislike:"",dislikeActive:"  ",ok:"",cancel:"",dislikeOptionsTitle:"    ",likeTexts:{0:"",2:"     ",3:"  ",4:"   ",5:"     ",6:"    "}},zh:{like:"Like",likeActive:"",dislike:"",dislikeActive:"",ok:"",cancel:"",dislikeOptionsTitle:"",likeTexts:{0:"Like",2:"",3:"",4:"",5:"",6:""}},ru:{like:"Like",likeActive:"  ",dislike:" ",dislikeActive:"  ",ok:"OK",cancel:"",dislikeOptionsTitle:"     ?",likeTexts:{0:"Like",2:"   ",3:"    ",4:"    ",5:"    ,   ",6:"   "}},ja:{like:"Like",likeActive:"",dislike:"",dislikeActive:"",ok:"OK",cancel:"",dislikeOptionsTitle:"?",likeTexts:{0:"Like",2:"",3:"",4:"",5:"",6:""}},ko:{like:"Like",likeActive:" ",dislike:"",dislikeActive:" ",ok:"",cancel:"",dislikeOptionsTitle:"   ?",likeTexts:{0:"Like",2:"   .",3:"  .",4:"  .",5:"      ",6:"   "}},fr:{like:"J'aime",likeActive:"Vous aimez ce",dislike:"Antipathie",dislikeActive:"Yous n'aime pas ce",ok:"OK",cancel:"annuler",dislikeOptionsTitle:"Pourquoi cette rponse est-elle errone ?",likeTexts:{0:"J'aime",2:"La rponse est inexacte ou imprcise",3:"Des informations importantes sont manquantes",4:"La rponse est hors sujet",5:"Je n'ai pas trouv ce que je cherchais",6:"Information manquante ou incorrecte"}},it:{like:"Mi piace",likeActive:"Ti piace questo",dislike:"Antipatia",dislikeActive:"Non ti piace questo",ok:"OK",cancel:"Annulla",dislikeOptionsTitle:"Cosa c' di sbagliato in questa risposta?",likeTexts:{0:"Mi piace",2:"La risposta  errata o inaccurata",3:"Mancano informazioni importanti",4:"La risposta  irrilevante",5:"Non ho trovato quello che cercavo",6:"Informazioni mancanti o errate"}},nl:{like:"Vind ik leuk",likeActive:"U houdt van dit",dislike:"Afkeer",dislikeActive:"Je vind dit niet leuk",ok:"OK",cancel:"Annuleren",dislikeOptionsTitle:"Wat klopt er niet aan dit antwoord?",likeTexts:{0:"Vind ik leuk",2:"Antwoord is onjuist of onnauwkeurig",3:"Belangrijke informatie ontbreekt",4:"Het antwoord doet niet ter zake",5:"Heeft u niet gevonden wat ik zocht",6:"Ontbrekende of onjuiste informatie"}},pt:{like:"Gosto",likeActive:"Voc gosta disso",dislike:"Antipatia",dislikeActive:"Voc no gosta deste",ok:"OK",cancel:"Cancelar",dislikeOptionsTitle:"O que h de errado com esta resposta?",likeTexts:{0:"Gosto",2:"A resposta  incorreta ou inexata",3:"Faltam informaes importantes",4:"A resposta  irrelevante",5:"No encontrou o que estava procurando",6:"Informaes ausentes ou incorretas"}},es:{like:"Me gusta",likeActive:"Si le gusta este",dislike:"No me gusta",dislikeActive:"No le gusta este",ok:"Aceptar",cancel:"Cancelar",dislikeOptionsTitle:"Cul es el problema con esta respuesta?",likeTexts:{0:"Me gusta",2:"La respuesta es incorrecta o inexacta",3:"Falta informacin importante",4:"La respuesta es irrelevante",5:"No encontr lo que buscaba",6:"Informacin faltante o incorrecta"}},iw:{like:"",likeActive:"  ",dislike:" ",dislikeActive:"   ",ok:"",cancel:"",dislikeOptionsTitle:"    ?",likeTexts:{0:"",2:"   /  ",3:"  ",4:"   ",5:"    ",6:"    "}},no:{like:"Like",likeActive:"Du liker dette",dislike:"Dislike",dislikeActive:"Du liker ikke dette",ok:"OK",cancel:"Avbryt",dislikeOptionsTitle:"Hva er galt med dette svaret?",likeTexts:{0:"Like",2:"Svaret er feil eller unyaktig",3:"Mangler viktig informasjon",4:"Svaret er ikke relevant",5:"Fant ikke det jeg var ute etter",6:"Mangelfull eller feilaktig informasjon"}},fi:{like:"Tykk",likeActive:"Pidt tst",dislike:"En tykk",dislikeActive:"Et pid tm",ok:"Ok",cancel:"Peruuta",dislikeOptionsTitle:"Miksi tm vastaus ei ole riittv?",likeTexts:{0:"Tykk",2:"Vastaus on virheellisi tai eptarkkoja",3:"Puuttuu trkeit tietoja",4:"Vastaus on epolennainen",5:"Etk lytnyt mit olin etsimss",6:"Puuttuva tai vr tieto"}}};
nanoRep.FAQ.Texts.nb=nanoRep.FAQ.Texts.no;nanoRep.FAQ.Texts.nn=nanoRep.FAQ.Texts.no;ISQ.Widget=initializeNS("ISQ.Widget");ISQ.Widget.combineContext=function(c,d,e){if(!c){return d}if(d){for(var f in d){var g=f.toLowerCase();d[g]=d[f];if(g!==f){delete d[f]}}}var j=null;if(d||e){for(var b in c){if(d&&d[b.toLowerCase()]){continue}for(var a=0;a<c[b].length;++a){var h=null;if(e){h=e[c[b][a]]}if(!h){continue}if(!j){j=[];for(var k in d){j[k]=d[k]}}j[b.toLowerCase()]=h;break}}}return j||d};if(typeof nanoRep.FAQ.Localization=="undefined"){nanoRep.FAQ.Localization={}}nanoRep.FAQ.init=function(a,b){nanoRep.FAQ.Localization=nanoRep.FAQ.Texts[a]||nanoRep.FAQ.Texts.en;nanoRep.FAQ.dynamicHost=b};nanoRep.FAQ.dynamicHost=null;nanoRep.FAQ.Likes={};nanoRep.FAQ.Likes.enumFeedback={positive:1,wrongAnswer:2,wrongContent:4,wrongContext:8};nanoRep.FAQ.Likes.mData={div:null,options:[],pastActions:null,hasContext:false};nanoRep.FAQ.Likes.buildThumbUpIcon=function(b,n,h,q,c,a,f,o,l,p,m){l=l||nanoRep.FAQ.Localization;var r=createDiv(null,".nanoRepMP_likeIcon");r.onclick=function(){nanoRep.FAQ.Likes.saveData(r,b,q,c,a,f,o,p);nanoRep.FAQ.Likes.sendThumbAction(nanoRep.FAQ.Likes.enumFeedback.positive,l)};var g=nanoRep.FAQ.Likes.getLastAction(b);nanoRep.FAQ.Likes.setThumbStyles(g.action,r,null,false,l);if(g.action==0&&g.cacheVar==c){h++}if(m){n.appendChild(r);r.className+=" nanoRepMP_likeIconStandAlone";r.innerHTML=h?ISQ.Tools.getPrettyNumber(h,0,false,true):"0";r.likes=h;return r}var j=createDiv(n,"white-space:nowrap;");var k=createDiv(null,"white-space:nowrap;display:inline;");if(h&&h>999){k.title=ISQ.Tools.getPrettyNumber(h)}var e=(ISQ.Widget.HTML.dynamicRTLCssLoaded)?"rtl":"ltr";if(e=="ltr"){j.appendChild(r);j.appendChild(k);createDiv(k,".newLikesLeftEdge&display:inline-block;float:none;vertical-align:top;")}var d=createDiv(k,".newlikes&display:inline-block;float:none;vertical-align:top;cursor:default");if(e=="rtl"){d.className+=" newlikesRTL";createDiv(k,".newLikesRightEdge&display:inline-block;float:none;vertical-align:top;");k.appendChild(d);
j.appendChild(r);j.appendChild(k)}d.innerHTML=h?ISQ.Tools.getPrettyNumber(h,0,false,true):"0";r.likes=h;r.countElement=d;r.countContainer=k;return r};nanoRep.FAQ.Likes.buildThumbDownIcon=function(b,h,e,l,c,a,d,j,f,k,g,n){f=f||nanoRep.FAQ.Localization;var m=createDiv(h,".nanoRepMP_likeIcon &.nanoRepMP_dislikeIcon");m.widgetAnswer=n||false;e.thumbDown=m;m.onclick=function(){nanoRep.FAQ.Likes.saveData(e,b,l,c,a,d,j,k);var o=nanoRep.FAQ.Likes.getLastAction(b);if(o.action>nanoRep.FAQ.Likes.enumFeedback.positive){nanoRep.FAQ.Likes.sendThumbAction(o.action,f)}else{nanoRep.FAQ.Likes.toggleDislikeOptions(false,f)}};nanoRep.FAQ.Likes.setThumbStyles(nanoRep.FAQ.Likes.getLastAction(b).action,e,m,false,f);return m};nanoRep.FAQ.Likes.getLastAction=function(articleId){var pastActions=nanoRep.FAQ.Likes.mData.pastActions;var lastAction={action:null,cacheVar:null};if(!pastActions){var currentVal=ISQ.Tools.Storage.get("faqActions");if(currentVal){pastActions=eval("("+currentVal+")")}}if(!pastActions){pastActions={}}nanoRep.FAQ.Likes.mData.pastActions=pastActions;if(pastActions[articleId]&&typeof(pastActions[articleId].action)!=="undefined"){lastAction=pastActions[articleId]}return lastAction};nanoRep.FAQ.Likes.saveData=function(k,b,j,c,a,e,g,h,d,f){nanoRep.FAQ.Likes.mData.thumbUp=k;nanoRep.FAQ.Likes.mData.thumbDown=k.thumbDown||null;nanoRep.FAQ.Likes.mData.articleId=b;nanoRep.FAQ.Likes.mData.account=a;nanoRep.FAQ.Likes.mData.rtl=j||false;nanoRep.FAQ.Likes.mData.cacheVar=c;nanoRep.FAQ.Likes.mData.account=a;nanoRep.FAQ.Likes.mData.kb=e;nanoRep.FAQ.Likes.mData.preview=g;nanoRep.FAQ.Likes.mData.referrer=h;nanoRep.FAQ.Likes.mData.keywordsetId=f||null;nanoRep.FAQ.Likes.mData.callback=d||null};nanoRep.FAQ.Likes.setThumbStyles=function(a,d,c,e,b){b=b||nanoRep.FAQ.Localization;d=d||nanoRep.FAQ.Likes.mData.thumbUp;c=c||nanoRep.FAQ.Likes.mData.thumbDown;if(d){if(a==nanoRep.FAQ.Likes.enumFeedback.positive){ISQ.CSS.addClass(d,"nanoRepMP_likeIconCurrent");d.title=b.likeActive}else{ISQ.CSS.removeClass(d,"nanoRepMP_likeIconCurrent");d.title=b.like}}if(c){if(a>nanoRep.FAQ.Likes.enumFeedback.positive){ISQ.CSS.addClass(c,"nanoRepMP_dislikeIconCurrent");
c.title=b.dislikeActive}else{ISQ.CSS.removeClass(c,"nanoRepMP_dislikeIconCurrent");c.title=b.dislike}}if(e){nanoRep.FAQ.Likes.updateLikeCount(d,a==nanoRep.FAQ.Likes.enumFeedback.positive)}};nanoRep.FAQ.Likes.updateLikeCount=function(b,a){b.likes=a?b.likes+1:b.likes-1;if(b.countElement){b.countElement.innerHTML=b.likes>0?ISQ.Tools.getPrettyNumber(b.likes,0,false,true):"0";if(b.likes&&b.likes>999){b.countElement.parentNode.title=ISQ.Tools.getPrettyNumber(b.likes)}}else{b.innerHTML=b.likes>0?ISQ.Tools.getPrettyNumber(b.likes,0,false,true):"0"}};nanoRep.FAQ.Likes.toggleDislikeOptions=function(c,e){e=e||nanoRep.FAQ.Localization;if(typeof(nanoRep.FAQ.Likes.mData)=="undefined"){return}var a=nanoRep.FAQ.Likes.mData.thumbDown;if(!a){return}if(!nanoRep.FAQ.Likes.mData.div){nanoRep.FAQ.Likes.buildDislikeOptions(a)}var b=nanoRep.FAQ.Likes.mData.div;if(b.style.display=="block"||c){b.style.display="none";a.title=a.oldTitle;ISQ.CSS.removeClass(a,"nanoRepMP_dislikeIconOpen");if(b.faqFader){b.faqFader.parentNode.removeChild(b.faqFader);b.faqFader=null}a.removeChild(b);for(var d in nanoRep.FAQ.Likes.mData.options){nanoRep.FAQ.Likes.mData.options[d].checked=false}ISQ.Tools.addRemoveClickOutsideElementsListener("dislikeOptions",false);clearNode(nanoRep.FAQ.Likes.mData.div);nanoRep.FAQ.Likes.mData.div=null}else{a.appendChild(b);a.oldTitle=a.title;a.title="";b.style.display="block";ISQ.CSS.addClass(a,"nanoRepMP_dislikeIconOpen");nanoRep.FAQ.Likes.setDislikeOptionsPosition();ISQ.Tools.addRemoveClickOutsideElementsListener("dislikeOptions",true,[b],new ISQ.Handler(function(f){if(ISQ.Html.getEventTarget(f)==nanoRep.FAQ.Likes.mData.thumbDown){return}nanoRep.FAQ.Likes.toggleDislikeOptions(true,e);if(nanoRep.FAQ.Likes.dislikeTimer){clearInterval(nanoRep.FAQ.Likes.dislikeTimer)}}))}ISQ.Tools.blinkElement(b,0,false,"validationErr")};nanoRep.FAQ.Likes.dislikeTimer=null;nanoRep.FAQ.Likes.setDislikeOptionsPosition=function(){var b=nanoRep.FAQ.Likes.mData.div;if(!b.parentNode){return}b.style.height="auto";if(ISQ.Widget.HTML&&ISQ.Widget.HTML.contentWrapper&&ISQ.Widget.HTML.contentWrapper.offsetWidth<420){b.className+=" narrowWidget_dislikeOptions"
}else{}var d="0";var e=ISQ.Html.pageSize(true);if(e.h>400){if(b.parentNode.offsetTop+150>e.h-30){d="-130"}else{d="0"}}b.style.bottom="auto";if(ISQ.Widget.HTML&&ISQ.Widget.HTML.contentWrapper){var c=createDiv(ISQ.Widget.HTML.widgetContainer,".widgetFAQBlocker");b.faqFader=c;b.faqFader.style.position="fixed";b.faqFader.onclick=function(){};var f=(ISQ.Widget.HTML.contentWrapper.offsetWidth-b.offsetWidth)/2;b.style.left=f+"px";var g=ISQ.Widget.HTML.widgetContainer.offsetHeight;if(ISQ.Widget.isFloat){var d=(ISQ.Widget.HTML.contentWrapper.offsetHeight-b.offsetHeight)/2;d+=ISQ.Widget.HTML.searchWrapper.offsetHeight+ISQ.Widget.HTML.titleWrapper.offsetHeight;b.style.top=d+"px";if(ISQ.Http.browser.isMobile){b.style.top=(screen.height-b.offsetHeight)/2+"px"}}else{var a=b.parentNode.getBoundingClientRect();b.style.top=a.top-(b.offsetHeight)/2+"px";if(a.top+b.offsetHeight>g){b.style.top=g-b.offsetHeight-ISQ.Widget.HTML.footerWrapper.offsetHeight+"px"}}if(ISQ.Http.browser.isMobile){nanoRep.FAQ.Likes.dislikeTimer=setInterval(function(){var h=(ISQ.Widget.HTML.contentWrapper.offsetWidth-b.offsetWidth)/2;b.style.left=h+"px"},250)}}else{if(nanoRep.FAQ.Likes.mData.rtl){b.style.left="20px"}else{b.style.right="20px"}}};nanoRep.FAQ.Likes.buildDislikeOptions=function(a,h){h=h||nanoRep.FAQ.Localization;var j=ISQ.Http.browser.isMobile?" &.mobile":"";var c=nanoRep.FAQ.Likes.mData.div=createDiv(document.body,".nanoRepMP_dislikeOptions"+j);c.onclick=function(o){ISQ.Html.getDomEvent(o).cancel()};createLink({parent:c,text:"x",style:".closeIcon",onclick:function(){nanoRep.FAQ.Likes.toggleDislikeOptions(false,h)}});createDiv(c,".nanoRepMP_dislikeOptionsTitle").innerHTML=h.dislikeOptionsTitle;var k=[];var d=nanoRep.FAQ.Likes.mData.hasContext||(typeof(_session)==="function"&&_session().hasContext&&_session().hasContext());if(a.widgetAnswer){k=[6,5];if(d){k.push(4)}}else{if(d){k=[6,4]}else{k=[2,3]}}var n={0:nanoRep.FAQ.Likes.enumFeedback.positive,2:nanoRep.FAQ.Likes.enumFeedback.wrongContent,3:nanoRep.FAQ.Likes.enumFeedback.wrongContent,4:nanoRep.FAQ.Likes.enumFeedback.wrongContext,5:nanoRep.FAQ.Likes.enumFeedback.wrongAnswer,6:nanoRep.FAQ.Likes.enumFeedback.wrongContent};
var m=h.likeTexts;for(var e=0;e<k.length;e++){var f=k[e];var l=createRadio({type:"radio",name:"dislike",parent:c,text:m[f],value:n[f],holderStyle:"padding-top:4px;",onclick:function(){ISQ.Tools.blinkElement(c,0,false,"validationErr");if(ISQ.Http.isChrome()){var o=c.style.position;c.style.position="static";c.offsetHeight;c.style.position=o}}});nanoRep.FAQ.Likes.mData.options.push(l)}var b=createDiv(c,".nanoRepMP_dislikeOptionsBtns");var g=createLink({parent:b,text:h.ok,style:".button",onclick:function(){var o=-1;for(var p in nanoRep.FAQ.Likes.mData.options){if(nanoRep.FAQ.Likes.mData.options[p].checked){o=parseInt(nanoRep.FAQ.Likes.mData.options[p].value)}}if(o==-1){ISQ.Tools.blinkElement(c,3,true,"validationErr");return}if(nanoRep.FAQ.Likes.mData.callback){nanoRep.FAQ.Likes.mData.callback(nanoRep.FAQ.Likes.mData.articleId,nanoRep.FAQ.Likes.mData.keywordsetId,o)}else{nanoRep.FAQ.Likes.sendThumbAction(o,h)}nanoRep.FAQ.Likes.toggleDislikeOptions(false,h)}});g=createLink({parent:b,text:h.cancel,style:".button &.buttonLink",onclick:function(){nanoRep.FAQ.Likes.toggleDislikeOptions(false,h)}})};nanoRep.FAQ.Likes.sendThumbAction=function(b,g){g=g||nanoRep.FAQ.Localization;var c=nanoRep.FAQ.Likes.mData.articleId;var h=nanoRep.FAQ.Likes.mData.pastActions;var d=nanoRep.FAQ.Likes.mData.cacheVar;var a=nanoRep.FAQ.Likes.mData.account;var f=nanoRep.FAQ.Likes.mData.kb;var j=nanoRep.FAQ.Likes.mData.preview;var k=nanoRep.FAQ.Likes.mData.referrer;if(!c){throw ("articleId must be specified")}var l=null;if(typeof(h[c])!=="undefined"&&typeof(h[c].action)!=="undefined"){l=h[c].action;if(l==b){b=null}}if(b==null){delete h[c]}else{h[c]={};h[c].action=b;if(d){h[c].cacheVar=d}}if(!j){ISQ.Tools.Storage.set("faqActions",ISQ.Data.jsonToString(h));nanoRep.FAQ.Likes.mData.pastActions=h;var m=new Array();m.push(ISQ.Widget.getAccountURL(a));m.push("/widget/faqAction.gif?rnd=");m.push(Math.floor(Math.random()*1000000));m.push("&src=FAQ");m.push("&account=");m.push(a);if(f){m.push("&kb="+f)}m.push("&id=");m.push(c);if(b!=null){m.push("&action="+b)}if(l!=null){m.push("&undo="+l)
}if(k){m.push("&referer="+escape(k))}var e=new Image();e.src=m.join("");e.style.width="1px";e.style.height="1px";e.style.display="none"}nanoRep.FAQ.Likes.setThumbStyles(b,null,null,b==nanoRep.FAQ.Likes.enumFeedback.positive||l==nanoRep.FAQ.Likes.enumFeedback.positive,g)};nanoRep.FAQ.combineAndFormatContext=function(b,e){if(!b){b={}}var c;var j={};for(var g in b){if(b.hasOwnProperty(g)){j[g.toLowerCase()]=b[g]}}b=j;if(typeof(_nRepData)=="undefined"||!_nRepData.customParams){c=b}if(!e){if(ISQ.Cnf_Float){c=ISQ.Widget.combineContext(ISQ.Cnf_Float.contextAttributes,b,_nRepData.customParams)}else{if(ISQ.Cnf_Embed){c=ISQ.Widget.combineContext(ISQ.Cnf_Embed.contextAttributes,b,_nRepData.customParams)}}}var f=false;if(c){for(var a in c){f=true;break}}if(f){nanoRep.FAQ.Likes.mData.hasContext=true;var h=[{from:",",to:" "},{from:":",to:" "}];var d=[];for(var a in c){if(!c[a]||typeof(c[a])!=="string"){continue}if(d.length!=0){d.push(",")}d.push(a.replacer(h));d.push(":");d.push(c[a].replacer(h))}return"&context="+ISQ.Http.Cookies.encode64(d.join(""))}return""};nanoRep.FAQ.requestFaqLists=function(b){var c=new Array();var a=b.account||_nRepData.account;c.push(ISQ.Widget.getAccountURL(a,b.host&&b.host.replace("//","")));c.push("/api/faq/v1/list.js");c.push("?account=");c.push(a);if(b.isFloat){c.push("&isFloat=true")}if(b.kb){c.push("&kb="+b.kb)}c.push("&referer=");if(b.configId){c.push("!"+b.configId)}else{if(window.location.href.contains("nanorep.com")&&b.referer){c.push(escape(b.referer))}else{c.push(escape(window.location.href))}}if(b.encoding){c.push("&encoding="+b.encoding)}c.push(nanoRep.FAQ.combineAndFormatContext(b.context,b.disableContextCombine));ISQ.Tools.appendScript(c.join(""),function(){if(!nanoRep.FAQ.faqData){throw ("Invalid FAQ Data received")}if(b.callback){b.callback(nanoRep.FAQ.faqData)}else{nanoRep.FAQ.faqData=ISQ.Data.jsonToString(nanoRep.FAQ.faqData);var d=ISQ.Http.Cookies.encode64(nanoRep.FAQ.faqData);b.cdcUser.sendMessage("subject=faqData&data="+d)}delete nanoRep.FAQ.faqData})};ISQ.Widget.FAQ.initalize=function(){if(ISQ.Widget.FAQ.scriptLoadState!=ISQ.Widget.FAQ.initEnum.none){if(ISQ.Widget.FAQ.scriptLoadState===ISQ.Widget.FAQ.initEnum.loaded){setTimeout(ISQ.Widget.FAQ.pendingFAQCallback,0)
}return}ISQ.Widget.FAQ.scriptLoadState=ISQ.Widget.FAQ.initEnum.loading;ISQ.Tools.FileLoader.load("/widget/scripts/faq-widgetui.js",new ISQ.Handler(function(a){ISQ.Widget.FAQ.scriptLoadState=ISQ.Widget.FAQ.initEnum.loaded;ISQ.Widget.FAQ.handleCnfData();if(ISQ.Widget.FAQ.pendingFAQCallback){ISQ.Widget.FAQ.pendingFAQCallback()}nanoRep.FAQ.init(ISQ.Cnf.initialUiLanguage,window.location.protocol+"//"+ISQ.Http.domain(true))}))};ISQ.Widget.FAQ.behavior={OnWidgetLoad:1,OnNoResuls:2,OnClearSearchField:4};ISQ.Widget.Forms=initializeNS("ISQ.Widget.Forms");ISQ.Widget.Forms.getForms=function(a){var b=[];for(var c=0;c<a.length;c++){b.push(a[c].contactForms)}var d=ISQ.Widget.Query.activeRequestId;_session().request({url:"getForms.js",params:{contactFormId:b.join(",")},handler:function(f,e){if(d!=ISQ.Widget.Query.activeRequestId){ISQ.Widget.Log.add("Chat question link response: Request Id doesn't match. sent: "+ISQ.Widget.Query.activeRequestId+", received: "+d);return}ISQ.Widget.Forms.parseResponse(f,e,b,a)}})};ISQ.Widget.Forms.parseResponse=function(m,c,l,a){if(c.forms.length){for(var e=0;e<l.length;e++){var h=document.querySelectorAll(".formId_"+l[e]);var b=null;for(var f=0;f<a.length;f++){if(a[f].contactForms===l[e]){b=a[f]}}if(b!==null){for(var d=0;d<h.length;d++){var g=h[d];g.className="contactForm";ISQ.Widget.ContactForm.show(c.forms[e],null,g,b)}}}}};</script>
    <script type="text/javascript" mini="true">ISQ.Widget.Query.suggestionsBlacklist=["aryan","ass","asshole","bastard","bastards","bitch","bitches","bitching","bitchy","boob","boobie","booby","boobs","boobies","boobys","bullshit","bullshitter","bullshitters","bullshitting","chickenshit","chickenshits","clit","cock","cockhead","cocks","cocksuck","cocksucker","cocksucking","cum","cums","cumming","cunt","cuntree","cuntry","cunts","damn","dipshit","dipshits","dumbfuck","dumbfucks","dumbshit","dumbshits","fag","fags","faggy","faggot","faggots","fuck","fucks","fukk","fukka","fucka","fucke","fucker","fuckers","fucked","fuckin","fucken","fucking","fuckup","fuckups","fuckhead","fuckhed","fuckheads","fuckface","golem","goniff","hebe","hebes","heb","kike","kikes","kunt","kuntree","kuntry","kunts","motherfuck","motherfucker","motherfuckers","motherfucking","motherfuckin","motherfucken","nazi","nigger","niggers","nigga","niggas","niggaz","niggah","niggahs","niggard","niggardly","penis","piss","porn","porno","pussy","shit","shits","shitty","shitting","shitface","shitfaced","shithead","shithed","shitheads","slut","sluts","slutty","tit","tits","titty","titties","vagina","vaginal","whore","whores","whoring"];</script>
    <script type="text/javascript" mini="true">ISQ.Widget=initializeNS("ISQ.Widget");ISQ.Widget.combineContext=function(c,d,e){if(!c){return d}if(d){for(var f in d){var g=f.toLowerCase();d[g]=d[f];if(g!==f){delete d[f]}}}var i=null;if(d||e){for(var b in c){if(d&&d[b.toLowerCase()]){continue}for(var a=0;a<c[b].length;++a){var h=null;if(e){h=e[c[b][a]]}if(!h){continue}if(!i){i=[];for(var j in d){i[j]=d[j]}}i[b.toLowerCase()]=h;break}}}return i||d};</script>
    <style type="text/css">html,body{height:100%;margin:0;padding:0;direction:ltr;overflow:hidden}body,table,td,input,textarea{font-size:12px;font-family:Arial}
input,textarea{outline:0;resize:none}img{border:0}h1,h2,h3,h4,h5,h6,tbody,div{margin:0;padding:0}
a,a:hover,a:focus,a:active{outline:0}pre{white-space:pre-wrap}*{outline:0}
select.contactform{margin:0;position:absolute;left:3px;left:3px\9}@media screen and (min-width:0\0){select.contactform{left:6px\9\0}
}@media \0screen{select.contactform{left:1px}}#iframeContainer{position:absolute;top:0;left:0;z-index:-10;width:1px;height:1px}
#txtSearch::-ms-clear{display:none}.contextSelectionTitle{font-weight:bold;color:black;padding:7px 0}
.contextSelectors:last-child{padding-bottom:15px;overflow:hidden}.contextSelectors>div{height:30px}
.contextSelectors .contextLabel{font-size:14px;color:#4a4949;margin-top:4px;float:left;clear:both;padding-right:10px}
.contextSelectors .contextSelect{font-size:13px;float:left;margin-top:4px;min-width:150px;max-width:200px}
.selectedContextElement{height:33px;display:block;background-color:#D9D9D9;color:#516166;border:solid 1px #e1e1e1;padding:6px 8px;line-height:18px;margin-bottom:5px;margin:5px 0 10px 0;width:100%}
.selectedContextElement span{font-size:12px;color:#516166;text-align:left;display:block;text-overflow:ellipsis;float:left;white-space:nowrap;width:78%;box-sizing:border-box;overflow:hidden;height:16px}
.clearSelectionLink{font-size:13px;cursor:pointer;font-weight:600;text-decoration:underline}
@media screen and (max-width:340px){.selectedContextElement{width:270px}.selectedContextElement span{width:75%}
}.selectedContextElementChangeButton{padding-left:5px;font-size:12px;display:block;float:right;line-height:17px;padding:0 5px;color:#516166;cursor:pointer;border-left:1px solid #ACBBBF;width:47px;text-align:right;text-decoration:underline}
#clearQuery{z-index:1;position:absolute;right:8px;left:auto;top:1px;color:#4a4949;padding:2px 4px;font-size:20px;display:none;cursor:pointer;opacity:0;-webkit-transition:opacity 150ms ease-in-out;-moz-transition:opacity 150ms ease-in-out;-ms-transition:opacity 150ms ease-in-out;-o-transition:opacity 150ms ease-in-out;transition:opacity 150ms ease-in-out;text-decoration:none}
.hoverImagesClass{-webkit-transition:top 1000ms ease,opacity 600ms ease-in-out;-moz-transition:top 1000ms ease,opacity 600ms ease-in-out;-ms-transition:top 1000ms ease,opacity 600ms ease-in-out;-o-transition:top 1000ms ease,opacity 600ms ease-in-out;transition:top 1000ms ease,opacity 600ms ease-in-out;opacity:0;position:absolute;z-index:1;top:150px;right:-600px;border:1px solid #dfdfdf;border-radius:11px;box-shadow:2px 2px 10px gray;display:block;left:auto}
.opacity30{opacity:.3;-ms-filter:"alpha(opacity=30)";filter:alpha(opacity=30);-khtml-opacity:.30;-moz-opacity:.30;cursor:default}
.opacity20{opacity:.2;-ms-filter:"alpha(opacity=20)";filter:alpha(opacity=20);-khtml-opacity:.20;-moz-opacity:.20;cursor:default}
.normal{font-size:12px}.large{font-size:13px}.bold{font-weight:bold}.borderBoxSizing{-moz-box-sizing:border-box;-webkit-box-sizing:border-box;box-sizing:border-box}
.busy{opacity:.50;filter:alpha(opacity=50);-ms-filter:"alpha(opacity=50)"}
#widgetContainer{display:none;width:100%}.fullscreenMobile #widgetContainer{border:0;height:100%;box-sizing:border-box}
.fullscreenMobile{background:rgba(230,230,230,0.9)}.fullscreenMobile>iframe{border:0}
.fullscreenMobile #contentAreaWrapper{background:0}.fullscreenMobile #widgetContainer{background:0}
.fullscreenMobile #widgetTitleWrapper{display:none}.fullscreenMobile #searchContainerWrapper{height:50px}
.fullscreenMobile #txtSearch,.fullscreenMobile #txtSearch.apple{height:36px;font-size:16px;width:88%}
.fullscreenMobile #txtSearch.initialText{font-size:15px}.fullscreenMobile #clearQuery{top:5px;right:13px;font-size:26px;padding-left:10px;padding-right:10px}
.fullscreenMobile.isRtl #clearQuery{right:auto;left:15px;font-family:'Open Sans',Arial!important}
.fullscreenMobile .contactForm{width:100%;margin:0;border-radius:0}#widgetLoading{margin:15px 0 0 15px;direction:ltr}
#widgetTitleWrapper{position:relative;width:100%;height:25px;line-height:25px}
#widgetTitleDecoration{position:absolute;width:100%;height:2px;top:0;left:0;background:#fff;opacity:.15;filter:alpha(opacity=15);-ms-filter:"alpha(opacity=15)";line-height:1px;font-size:0}
#widgetTitleLeft{display:none;float:left;width:0;height:100%}#widgetTitleRight{display:none;float:right;width:0;height:100%}
#widgetTitleText{float:left;width:85%;padding:0 5px;font-size:17px;font-weight:bold;overflow:hidden;white-space:nowrap}
#minimizeButton{float:right;width:13px;height:14px;line-height:0;cursor:pointer;margin:0;border-bottom:4px solid #FFF;font-size:0}
#minimizeButtonWrapper{float:right;margin:0;padding:0 5px 0 8px;width:15px}
#searchContainerWrapper{position:relative;text-align:center;height:28px}#searchContainerLeft{display:none;position:absolute;left:0;width:0;height:100%}
#searchContainerRight{display:none;position:absolute;right:0;width:0;height:100%}
#searchContainer{position:absolute;top:2px;bottom:2px;left:2px;right:2px;text-align:left;background-color:#FFF}
#searchContainer.error{border:solid 1px #8B0000}*html #searchContainer{width:expression(document.getElementById('searchContainerWrapper').clientWidth-5);height:expression(document.getElementById('searchContainerWrapper').clientHeight-5)}
#searchTextboxContainer{position:absolute;top:2px;bottom:2px;left:2px;right:25px}
*html #searchTextboxContainer{width:expression(document.getElementById('searchContainerWrapper').clientWidth-28);height:expression(document.getElementById('searchContainerWrapper').clientHeight-4)}
#txtSearch{margin-top:2px;padding-left:5px;width:98%;height:17px;border:0;font-size:14px;vertical-align:middle}
input,input:focus,textarea,textarea:focus{outline:0 none;outline-width:0;-webkit-tap-highlight-color:rgba(255,255,255,0);-webkit-user-modify:read-write}
#txtSearch.apple{margin-top:1px;height:15px;border:0}#txtSearch.initialText{font-size:13px;font-style:italic;color:#888}
#searchSuggestions{text-align:left;background-color:#fff;border-left:solid 1px #cdcdcd;border-right:solid 1px #cdcdcd;border-bottom:solid 1px #cdcdcd;display:none;margin:auto;overflow:hidden}
.autoCompleteDiv{background-color:#fff;cursor:pointer;white-space:nowrap;padding:3px 7px;font-size:16px!important}
.autoCompleteDiv B{color:#000}.autoCompleteDiv_hover{background:#eee}DIV.searchAnim{float:right;margin:2px 0 0 5px;width:20px;height:18px;display:block;border:0;background:transparent}
DIV.searchAnim DIV{float:left;height:4px;width:4px;margin:7px 2px 0 0;background:#000;line-height:1px;font-size:1px}
DIV.searchAnimTranslating{padding:0 0 0 1px;height:19px;background:url(/widget/skins/sprites.png?cv=8D676D38AE5D900) no-repeat 0 -68px}
#contentAreaWrapper{overflow:auto;overflow-x:hidden;overflow-y:auto;background-color:#FFF;width:100%}
#contentAreaWrapper.empty{padding:0}#contentArea{width:100%}#resultsHint{padding:2px 5px 0 5px;font-style:italic;display:none;overflow:hidden}
#answerPane{padding-top:10px;padding-bottom:10px;padding-left:7px;padding-right:7px;display:none}
.answerTable{width:100%;margin:0 0 20px 0;table-layout:fixed;position:relative}
.answerTable TR{vertical-align:top}.pointer[data-image-url],.answerTable TD A,.answerBackLinkContainer A{color:#e9682d}
.answerIcon{text-align:right;width:50px}.answerTitle,.answerTitle h3{font-size:13px;font-weight:bold;line-height:19px}
.answerTitle h3{padding-bottom:2px}.summaryRow.expanded{display:table-row}
.summaryRow.collapsed{display:none}.answerContextContainer{margin-top:2px}
.answerContext{font-size:11px;font-weight:normal;color:#aaa;margin-right:5px}
.answerBody{padding:0}TD.autoLink{padding:0 0 15px 0}TD.autoLink .progressBar,TD.autoLink .cancel{display:block;float:left;clear:none;height:40px;border-radius:2px}
TD.autoLink .progressBar{min-width:100px;padding:0;overflow:hidden;cursor:pointer;text-decoration:none;max-width:75%}
TD.autoLink .progressBar .progressBarHover{z-index:10;position:relative;top:-40px;width:100%;height:40px;background-color:black;opacity:0;filter:alpha(opacity=0)}
TD.autoLink .progressBar:hover .progressBarHover{opacity:.4;filter:alpha(opacity=40)}
TD.autoLink .progressBar .progressBarBG{z-index:11;position:relative;top:-43px;margin:0;padding:0;width:0;height:3px;background-color:black;opacity:.5;filter:alpha(opacity=50)}
TD.autoLink .progressBar .progressBarText{z-index:12;position:relative;margin:0 20px;line-height:40px;overflow:hidden;text-overflow:clip;white-space:nowrap;text-overflow:ellipsis}
TD.autoLink .cancel{padding:0 10px;margin:0 5px;line-height:40px;text-decoration:none;font-size:12px;color:#333;background-color:#f8f8f8}
TD.autoLink .cancel:hover{background-color:#eee}A.thumbUp{float:left;display:block;width:22px;height:21px;background:url(/widget/skins/sprites.png?cv=8D676D38AE5D900) no-repeat 0 -244px;margin-top:-1px;text-decoration:none}
A.thumbUpApplied{float:left;display:block;width:22px;height:21px;background:url(/widget/skins/sprites.png?cv=8D676D38AE5D900) no-repeat 0 -265px;margin-top:-1px;text-decoration:none}
A.thumbDown{float:left;display:block;width:22px;height:21px;background:url(/widget/skins/sprites.png?cv=8D676D38AE5D900) no-repeat 0 -286px;margin-top:-1px;text-decoration:none}
A.thumbDownApplied{float:left;display:block;width:22px;height:21px;background:url(/widget/skins/sprites.png?cv=8D676D38AE5D900) no-repeat 0 -310px;margin-top:-1px;text-decoration:none}
A.translationIcon{float:left;display:block;width:19px;height:19px;background:url(/widget/skins/sprites.png?cv=8D676D38AE5D900) no-repeat 0 -45px;text-decoration:none}
A.translationIconOff{float:left;display:block;width:19px;height:19px;background:url(/widget/skins/sprites.png?cv=8D676D38AE5D900) no-repeat 0 -68px;text-decoration:none}
.nanoRepMP_likeIcon{width:21px;height:21px;line-height:19px;font-size:11px;text-align:left;cursor:pointer;background:url(/widget/skins/sprites.png?cv=8D676D38AE5D900) no-repeat 2px -244px;display:inline-block}
.answerIcon .nanoRepMP_likeIcon{width:21px;height:21px;background:url(/widget/skins/sprites.png?cv=8D676D38AE5D900) no-repeat 2px -597px}
.answerIcon .nanoRepMP_likeIconCurrent,.nanoRepMP_likeIconCurrent{color:#479503;font-weight:bold;background:url(/widget/skins/sprites.png?cv=8D676D38AE5D900) no-repeat 2px -265px}
.nanoRepCSStransition{-webkit-transition:background-color 300ms ease-in-out,width 300ms ease-in-out,height 300ms ease-in-out,top 300ms ease-in-out,left 300ms ease-in-out,bottom 300ms ease-in-out,right 300ms ease-in-out;-moz-transition:background-color 300ms ease-in-out,width 300ms ease-in-out,height 300ms ease-in-out,top 300ms ease-in-out,left 300ms ease-in-out,bottom 300ms ease-in-out,right 300ms ease-in-out;-ms-transition:background-color 300ms ease-in-out,width 300ms ease-in-out,height 300ms ease-in-out,top 300ms ease-in-out,left 300ms ease-in-out,bottom 300ms ease-in-out,right 300ms ease-in-out;-o-transition:background-color 300ms ease-in-out,width 300ms ease-in-out,height 300ms ease-in-out,top 300ms ease-in-out,left 300ms ease-in-out,bottom 300ms ease-in-out,right 300ms ease-in-out;transition:background-color 300ms ease-in-out,width 300ms ease-in-out,height 300ms ease-in-out,top 300ms ease-in-out,left 300ms ease-in-out,bottom 300ms ease-in-out,right 300ms ease-in-out}
.nanoRepMP_dislikeIcon{background:url(/widget/skins/sprites.png?cv=8D676D38AE5D900) no-repeat 1px -287px}
.nanoRepMP_dislikeIconCurrent{background:url(/widget/skins/sprites.png?cv=8D676D38AE5D900) no-repeat 1px -310px}
.nanoRepMP_dislikeIconOpen{background-position:1px -287px}.nanoRepMP_dislikeOptions{box-shadow:0 4px 8px #8B8B8B;-moz-box-shadow:0 4px 8px #8B8B8B;cursor:default;z-index:2;display:none;position:fixed;top:0;-moz-border-radius:6px;-webkit-border-radius:6px;border-radius:6px;font-family:'Open Sans',Arial;padding:15px;width:359px;height:214px;border:6px solid #c3c3c3;background-color:white;color:#333}
.nanoRepMP_dislikeOptions table td:first-child{width:24px}.nanoRepMP_dislikeOptionsTitle{font-weight:400;padding:18px 0 15px;font-size:20px;text-align:center}
.nanoRepMP_dislikeOptions table{margin:12px auto;width:83%}.nanoRepMP_dislikeOptions table label{font-size:15px}
.nanoRepMP_dislikeOptions table tr{height:20px}.nanoRepMP_dislikeOptions input{font-size:13px}
.nanoRepMP_dislikeOptions input[type="radio"]{cursor:pointer;position:static}
.nanoRepMP_dislikeOptionsBtns{width:166px;height:44px;margin:0 auto}.nanoRepMP_dislikeOptions.validationErr table td:first-child{background-color:#a00;color:#fff}
.nanoRepMP_dislikeOptions table tr td:last-child{font-size:13px;color:#333;padding:0 10px}
.nanoRepMP_dislikeOptions .button{display:block;width:75px;float:left;padding:0;margin-top:10px;height:32px;line-height:32px;color:#FFF;text-decoration:none;background-color:#1b0476;font-size:16px;text-align:center;text-indent:0!important}
.nanoRepMP_dislikeOptionsBtns a.buttonLink{margin-left:15px;background-color:#e7e5e6;color:#333!important}
.nanoRepMP_dislikeOptions .closeIcon{width:10px;height:10px;position:absolute;top:7px;right:7px;text-decoration:none;color:#cbcbcb;font-family:arial;font-weight:bold;font-size:14px;display:block;display:none}
.narrowWidget_dislikeOptions{width:282px;height:174px;padding:6px}.narrowWidget_dislikeOptions .nanoRepMP_dislikeOptionsTitle{font-size:16px;padding:13px 0 6px}
.narrowWidget_dislikeOptions table{margin:7px auto;width:87%}.narrowWidget_dislikeOptions table label{font-size:13px;line-height:18px;color:#333;font-weight:normal}
.narrowWidget_dislikeOptions .nanoRepMP_dislikeOptionsBtns{width:100%;text-align:center}
.narrowWidget_dislikeOptions .button{min-width:63px;height:30px;line-height:29px;font-size:14px;display:inline-block;float:none}
.answerIcon .likes{float:left;text-align:left;font-size:11px;margin-top:1px}
.newlikes{float:left;text-align:center;font-size:11px;margin-top:5px;border:1px solid #aaa;border-left:0;height:16px;line-height:16px;color:#666;padding:0 4px 0 3px;min-width:24px}
.articlelikeContainer{box-sizing:border-box;float:left;width:100%;height:37px;border-top:solid 1px #F2F2F2;padding-top:8px;margin-top:5px}
.articlelikeContainer>.iLike{text-align:center;float:left;height:25px;border-radius:0 0 4px 0;padding-right:5px}
.articlelikeContainer>.iDontLike{float:left;width:20px;height:25px;border-radius:0 0 0 4px;padding-left:2px;padding-top:3px;margin-top:3px}
.newLikesLeftEdge{background:url(/widget/skins/sprites.png?cv=8D676D38AE5D900) no-repeat 0 -558px;width:5px;height:18px;float:left;margin-left:3px;margin-top:5px}
.answerIcon .newLikesLeftEdge{background:url(/widget/skins/sprites.png?cv=8d19a47a95f9b9c) no-repeat 0 -558px;width:5px;height:16px;float:left;margin-left:3px;margin-top:4px}
.answerIcon .newlikes{height:14px;min-width:20px;margin-top:4px;line-height:14px;color:#A6A6A6}
.newlikesRTL{float:right;border-left:1px solid #aaa;border-right:0;padding:0 4px 0 3px}
.newLikesRightEdge{background:url(/widget/skins/sprites.png?cv=8D676D38AE5D900) no-repeat 0 -577px;width:5px;height:16px;float:right;margin-left:0;margin-right:3px;margin-top:6px}
.answerFooter{padding:15px 0 0 0}.answerBackLinkContainer{padding:0 0 4px 0}
.chatInviteDiv{width:100%;text-align:center;cursor:pointer}.answerPeek{position:fixed;background-color:#777;color:#FFF;padding:5px;font-weight:bold;font-size:13px;cursor:pointer;opacity:.9;-ms-filter:"alpha(opacity=90)"}
.pagedContainer{overflow:hidden}.answerTable .pager .pagerLink,.answerTable .pager .pagerCurrent{font-size:15px;margin-right:6px}
.answerTable .pager .pagerCurrent{font-weight:bold;padding:2px 6px 2px 0}
.answerTable .pager .pagerMiddle{font-size:15px;padding-right:6px}.answerTable .pagerLink.next,.answerTable .pagerLink.prev{background-color:#e9682d;padding:1px 5px;font-size:14px;text-decoration:none}
.answerTable .pagerLink.next{margin:0 10px}.noResults{padding:0 0 10px 0;clear:both}
.faqTitle,.faqTitle h2{font-size:15px;font-weight:bold;margin:10px 0 10px 0}
.faqTitle h2{margin:0}.answerTable.faq{padding:6px 0;margin:0;line-height:100%;border-bottom:solid 1px #E5E5E5}
.answerTable.faq .answerTitle{line-height:normal;cursor:pointer}.answerTable.faq:hover{background-color:#E5E5E5}
.answerTable.faq .titleText,.answerTable.faq .titleText h3{color:#00005A;font-weight:normal;padding:0 0 0 34px}
.answerTable.faq .titleText h3{font-size:12px;padding:0;display:table-cell;line-height:14px}
.answerTable.faq .titleText:before{content:'?';float:left;background-color:#A9A9A9;width:17px;height:17px;line-height:17px;margin:0 12px 0 -27px;padding:0;color:#FFF;font-size:12px;font-weight:bold;text-align:center}
.answerTable.faq .answerTitle.expanded>DIV.titleText:before{background-color:#333}
.answerTable.faq .faqText,.answerTable.faq[dir=ltr] .faqText{clear:both;width:80%;margin:10px 0 5px 37px;line-height:140%}
@media screen and (max-width:480px){.answerTable.faq .faqText,.answerTable.faq[dir=ltr] .faqText{width:79%}
}.contactForm .contactFormField{background-color:White}#actionBarWrapper{width:100%;display:none;height:27px;font-weight:bold;font-size:13px;background-color:#FFF}
#actionBarContainer{height:100%;background-color:inherit}.actionBar{padding-top:5px;padding-right:5px;padding-left:5px}
.actionBar A,.actionBar A:visited{text-decoration:none}.actionBarText{float:left;margin-right:15px}
.actionBarSep{padding:0 10px;text-align:center;float:left;display:none}#actionBarContainer{direction:ltr}
#actionBarQuery A,#actionBarChat A{display:none;float:left}A#ancEmailChatSend,A#ancEmailChatCancel{display:inherit}
.repByEmail,.customLink{text-align:right;background:url(/widget/skins/sprites.png?cv=8D676D38AE5D900) no-repeat 0 -111px;padding:0 0 0 24px}
.noActionBarIcon{background:0}.repByChat,.customChat{text-align:right;background:url(/widget/skins/sprites.png?cv=8D676D38AE5D900) no-repeat 0 -128px;padding:0 0 0 24px}
.repByVoice{text-align:right;background:url(/widget/skins/sprites.png?cv=8D676D38AE5D900) no-repeat 0 -627px;padding:0 0 0 22px}
#chatPane .clientIcon,#chatPane .agentIcon{display:none}#widgetFooterWrapper{position:relative;width:100%}
.widgetFooterDecoration{background:#fff;height:2px;opacity:.25;filter:alpha(opacity=25);-ms-filter:"alpha(opacity=25)";width:100%;position:absolute;bottom:0;left:0;font-size:0;line-height:1px}
#widgetFooter{height:20px;padding:0 5px;line-height:19px;font-size:11px;vertical-align:middle}
#widgetMinimizedFooter{display:none;height:4px;font-size:0;position:relative}
#widgetFooter A,#widgetFooter A:visited{text-decoration:none}#customerLogo,#customerBrandingText{display:none;float:left}
#footerChatLink{display:none;float:left;cursor:default}#footerNanoRepLink{float:right;margin-right:-5px}
#chatStatusWrapper{display:none;width:100%}#chatStatusSystem{display:none;line-height:20px;clear:both;width:70%;margin:0 25px}
#chatStatusContainer{min-height:37px;font-size:12px;padding:0 0 0 10px;line-height:37px}
#chatStatus{float:left;width:70%;white-space:nowrap;overflow:hidden}#chatStatusIcon{float:left;height:18px;width:22px;background:url(/widget/skins/sprites.png?cv=8D676D38AE5D900) no-repeat 0 -128px;margin:11px 3px 0 0}
#chatStatusContainer.chatStatusContainerMinimized{height:28px;line-height:28px}
#chatStatusContainer.chatStatusContainerMinimized #chatStatusIcon{margin-top:6px}
#chatStatusContainer.chatStatusContainerMinimized #chatStatus{width:80%}.chatStatusAgentName{font-weight:bold}
#closeChat{float:right;width:69px;white-space:nowrap;overflow:hidden;font-size:12px}
#chatPane{display:none;line-height:150%;font-size:13px;padding:5px 10px 10px}
#actionBarChat,#actionBarChatSurvey{display:none}#chatInputWrapper{position:relative;display:none;height:52px;padding-top:3px}
#chatInputContainer{height:46px;padding:3px 0 0 0;margin:0 3px 0;background-color:#FFF}
#txtChatInput{width:70%;height:40px;float:left;border:0;resize:none;overflow:auto;font-size:13px;margin:0 0 0 5px;border:0}
#btnSendChat{height:30px;float:right;margin:6px 3px 0 0;-webkit-appearance:none}
#chatPane .padded{padding:0 0 5px 0;word-wrap:break-word}#chatPane .chatSysMsg{font-style:italic;color:#aaa}
#chatPane .chatAgentName{font-weight:bold;color:#13469F}#emailChatContainer{width:100%;margin-top:-2px;display:none}
#txtEmailChat{float:left;width:130px;height:15px}#ancEmailChatSend,#ancEmailChatCancel{display:block;float:left;margin:2px 0 0 7px}
#chatSuggestions{display:none;position:absolute;width:98%;top:54px;left:3px;overflow:hidden;z-index:10;opacity:.95;filter:alpha(opacity=95);-ms-filter:"alpha(opacity=95)"}
.chatSuggestion{overflow:hidden;padding:3px 5px 2px;cursor:pointer}.quickAnswerHeading{font-style:italic;padding:2px 0 4px 0}
.quickAnswerTitle{font-weight:bold;padding:0 0 2px 5px;font-size:13px}.quickAnswerExpand{width:12px;height:12px;margin:4px 0 0 0;background:url(/widget/skins/sprites.png?cv=8D676D38AE5D900) no-repeat 0 -183px}
.quickAnswerCollapsed{background:url(/widget/skins/sprites.png?cv=8D676D38AE5D900) no-repeat 0 -149px}
.quickAnswerBody{padding:0 0 0 15px;margin:0 0 0 6px;border-left:solid 1px}
.translationTooltip{position:absolute;top:0;left:0;padding:3px;font-size:11px;visibility:hidden}
.translationTooltip P{margin:0}.answerSourceIcon{display:block;width:21px;height:15px;background-repeat:no-repeat}
.twitterSourceIcon{background:url(/widget/skins/sprites.png?cv=8D676D38AE5D900) no-repeat 0 -92px}
#customLink{display:none}ul.attachments{margin:0;padding:10px 0 0 10px}ul.attachments li{list-style:none;min-height:18px;margin:4px 0 0 0}
ul.attachments li:before{float:left;width:23px;height:18px;content:'';background:url(/widget/skins/sprites.png?cv=8D676D38AE5D900) no-repeat 0 -222px}
#logoInCollapsedMode{display:none}.link_nano{color:#346a7a}.link_nano_img{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADEAAAAKCAYAAAAdIbZyAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAxhpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDM0MiwgMjAxMC8wMS8xMC0xODowNjo0MyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDowRkFENDRDRkY3N0QxMUUzQjAwQThCOEJEMjZCNjZFNyIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDowRkFENDREMEY3N0QxMUUzQjAwQThCOEJEMjZCNjZFNyI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOjBGQUQ0NENERjc3RDExRTNCMDBBOEI4QkQyNkI2NkU3IiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjBGQUQ0NENFRjc3RDExRTNCMDBBOEI4QkQyNkI2NkU3Ii8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+WLmBvAAAAvxJREFUeNrUldtvy2EYx3+HdoatmIh1dHMYLS6IkIgYF4Q4lAvRxCGIQ+J0gTl1CTckJMIFhguHmyHBZMFMZBLEFnHBhZhlGTaqkQXdWtp1v7Y/3ye+Td41+wc8yafv7/Q873N8q2uatgr8AAvAeNAE7oNf2j9xgZVgPvgOboEPYBiffQFzgAe8BC9AnLrDwVK+7wS3Qcjr9Wp+vz8vEomsxf0+8A7sBeUgCKaDMLgEboIMMMASfj8NfARnwEMTP6/BZjACpMEmMBs0UvEa2Aa6+XwneEXDz8BGMBkUg11gDHgOhlB3O79dDNYYhtHk8/m63G53ZTKZrMaz36COe0mCimi/iH5ZoFl0QQ3IB2/ABPry3kHHa8EWZm8WuA42gCSYAlbTkMgNcAxU0TlxYCtIgeXgMhNQwowt46bi1B1d16ssyzqJAPbgusG27XVMkFR/NB2TbigDF+lXM1fpBD9oBWO5d1CCiNKxrEhpH4BFvK+XaJX35xikly1ylQGIPAKPGXQhuKvoSntegOMHTNOch+sC7tPN7JaCPrACrAcJ8Jnvpc0msfKttBfKBpethKU4aTDDUmYbjKNDPXwvzg8Fedworug6ea8rug5W1OTMpZH9OIJJch+RXuol2OdtbG+ZqXbayWcgxazIIDAVdBn8eLDWX9x0qIbtdJYDugOcpkFxdNQAuiVcpb8rwAkwF+wGh5xOZ63L5QrRmQJFr5p2g5yzSg6xJCvCSlawCw6De2Ch6DnYi2HFWJo9LME9BUdoWNooxpYZCb6CJ5IJRVcy+5aZb+Ts7OfpZnPQz6MKM0BdJpNpwaopQUuFDzJhP8EVrhOZ1G88BU/xRD0qM6jToajSUjqNmXQ6w+yWsqU6GGCEVYgqM6HzSNYU3XIOoXzf4vF4rEAgkBeLxQpTqdQfBNGbU8kyVjjGvSQhM+UoBQ3gONtMWu+T+O1gpKrYnAdVwjnVSuSsqm5PzrN2okrfAPtmpZOooist3JGrYGj/h0T5R9rGQPrJXwEGAA8b5+lRZh6uAAAAAElFTkSuQmCC);background-repeat:no-repeat;background-position:0 6px;width:57px;height:17px;display:block;padding-top:1px;line-height:17px}
.link_go_response{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADUAAAASCAYAAAGMSKZoAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA3ZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMDE0IDc5LjE1Njc5NywgMjAxNC8wOC8yMC0wOTo1MzowMiAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDpmY2FhYzMzZC04MGFhLTY0NDQtOGVjZC1hNzFmZDA3OTA4MTMiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6QkY5M0E0NDAwRDI4MTFFNUE0NUFGMjc2NTZEMzAwOUYiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6QkY5M0E0M0YwRDI4MTFFNUE0NUFGMjc2NTZEMzAwOUYiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTQgKFdpbmRvd3MpIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6ZmNhYWMzM2QtODBhYS02NDQ0LThlY2QtYTcxZmQwNzkwODEzIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOmZjYWFjMzNkLTgwYWEtNjQ0NC04ZWNkLWE3MWZkMDc5MDgxMyIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/Pmb6KhAAAARdSURBVHjaYvz//z8DLsDi7+8Pou2YmZlDgHTe379/FYD0cyAuYcSnEyCA8EqyBAQENAIV6AONrQXyTYDGzgfSUkBsjVcnQAAx+vn5MQB1cQDZzEBdOkC6C8i3hykAiqFo2LhxI8RKqOR2IHUPiOcCNV0B0plAvBaIfwOxKchQIH4GxBJAn4PYfwECCK9zCDmTG6iZ8d+/fx5A9hpkBdicyQJUxAqUWA7k+4IMgcptBeKvQHwQiNmAmBuIQU5qBTrRjwmoAeR2kL8EoBpmA/FhIK4CYiMg7gfivUAM8q8MEJ8gy08AAQT2EwHQB/RCES5JdD+jA1hUgQATiAAa5gnE/2GYkZExAOp3kFw3kIok4CAxLGJqGMkRKW14A3EoEH8D4nYgFoeqSYDy5YA4CYgXQsUFgfgqEDcAMTsQg3xfBkqUUD1vgPgWMKIygPQWIP4OC0YrIPYE4lQgXgDVmAfEG4D4BQMFADkYAQKIrIgmB+BLHKDgbQbGVyU+A4hNHEwwAaCBvKAcxsTEJAjKOEChz0DMCzSIiRo+gqXAeUDqExB/Aaa+u0DDn0HjKgcoFw2kRfGYIYVDXBFb0FkC8SogLgdiWyAGpRhGoCWzgHQaVO1cYHwuBDqEE5SSoEWCKNBRbVA1oGLjJzRV3gbip0DsCM35M2DBchyID0At/ABN6iDAi+SoI0BLEqFJ+BAQr4Qm5cvQFAsqf48CsTAQnwNibSDmAcYRyKJJyOEP0mwAxBagcgcqlg3NP6CaxBiI3wMxJ1ROHVhaFgDpydD8dBIaEruAOBZq1nFgfgL5VhMUdCCXhAPxTCCeDy3gQAXiMiBeQ2kigKU6uuUjgADdljsoxWEYxqOjDEI6iRTlUlIni5QyGBRlo9gZlAyGw8CkDEixKIYzmSwoO5EMLpEJJbcMEg6TW/I89VN/OuUyIP96+t+/9/u+932f5/mxQD95fEY5Eh3W5UbhSsgSatQNS98Z6CNy+QqlvhENOMLVXyuMmCdozTu6JFUZ7VZRV9Kiiyh7WHjQv7d/KVOhwHVcE9/Wuc88Izrwu2Zc0qgWFGFB9yiiN8K8My5cCk/CmLD5Qcw8c5RiTSvGI89sgRx7KPCd3dgz8p8EfF9Kwx/4IzFDsrL1rHOObgvMfaFAGZzhnwaElHcTqQpcdwpHXPcLC8Jg4H0YK1AvFGEjXZprWAGT7pgWZL82C6HH4NgSqsP2LIq3a2Fjo4xvutw1pwrtWlAHzwuFOnN26N3k91ltLzuaxo4dM5kDZScW6IO7BPIUg68XMEmm0lO4+BrfvCVMaZxinSNku0xowvN4IyqwNsMIRyOt4DEy0IEOZaiBOSwz/9NEwt3GbmfihF1ydv0rLjFNJD2Q3VYEY47AzkwX6tSDCT4RduhRH6vcT8lIFNDDcZ5PkuVyMjeBKFUL58K8uUG4IIbN9o0wo4ztMW6+2S+P9GZTv3aM69RtsK5fHaUHyqW3NoTD3ySFROz3L3XqBdvBaDBJrnH7AAAAAElFTkSuQmCC)!important;margin-top:-8px!important;padding-top:8px!important;padding-left:4px}
.link_nano_img.padding{padding-right:53px;background-position:60px 6px}*+html .link_nano_img.padding{padding-right:0;width:107px}
.link_rep{color:#315552}#widgetBlocker{display:none;position:absolute;left:0;top:0;width:100%;height:100%}
.widgetFAQBlocker,#blockerOverlay{position:fixed;top:0;left:0;width:100%;height:100%;background:#000;opacity:.4;z-index:1;filter:alpha(opacity=40);-ms-filter:"alpha(opacity=40)"}
.overlay{position:fixed;z-index:2;display:none}.widgetFAQBlocker{background-color:#555}
#blockerContent{position:absolute;left:50%;top:50%;width:121px;height:20px;padding:10px;margin:-59px 0 0 -60px;color:#000;background-color:#c0c0c0;text-align:center;direction:ltr;z-index:1;border-radius:5px 5px 5px 5px;-moz-border-radius:5px 5px 5px 5px}
#phoneNumberOverlay{padding:10px 20px;background:#fff;width:290px;min-height:205px;border:3px solid #bbb;text-align:center}
#phoneNumberOverlay A.phoneNumber{margin-top:20px;font-size:27px;color:#0099c8;max-width:250px;text-overflow:ellipsis;white-space:nowrap;overflow:hidden;direction:ltr;display:inline-block}
#phoneNumberOverlay A.phoneNumber:before{content:'';float:left;width:24px;height:32px;background:url(/widget/skins/phone_big.png?cv=8D676D38AE5D900) no-repeat 0 0;margin-right:12px;margin-top:5px;background-clip:content-box;display:inline-block}
#phoneNumberOverlay div.phoneDetails{float:left;width:90%;font-size:14px;text-align:center;padding:15px 5%;color:#252525;max-height:100px;overflow:auto;display:inline-block}
#phoneNumberOverlay div.buttonWrapper{display:block;position:absolute;bottom:4px;text-align:center;width:290px;background:#fff;padding:9px 0}
#phoneNumberOverlay A.button{height:26px;line-height:26px;background-color:#0099c8;color:#FFF;font-size:14px;font-family:Arial;text-align:center;padding:2px 24px;text-decoration:none;display:inline-block}
.surveyLoading{position:absolute;left:50%;top:50%;width:142px;height:20px;margin:10px 0 0 -58px;font-size:16px}
#blockerContent .surveyLoading{margin-top:-11px}.surveyLoading .searchAnim{float:left;margin:-1px 0 0 5px}
.surveyLoading .searchAnim DIV{float:left;height:13px;width:4px;margin:5px 2px 0 0;background:#000;line-height:1px;font-size:1px}
#actionBarChatSurvey{width:100%;padding-top:7px}INPUT.inputTxt,TEXTAREA.inputTxt{border:solid 1px #c0c0c0;width:155px}
SELECT.surveySelect{width:155px}.mandatory{color:#A00;font-size:15px}.surveryHeading{font-size:13px;font-weight:bold;margin:0 0 10px 0}
TD.question{width:155px;font-weight:bold;vertical-align:top}#chatSurveySubmitButton{border-radius:5px;-moz-border-radius:5px;padding:3px 22px 3px 20px;margin:0;background:#1A85D5;color:white}
#chatSurveyCloseButton{border-radius:5px;-moz-border-radius:5px;padding:3px 15px;margin:0;background:#777;color:white;margin-right:15px}
.validationError TR TD{background-color:#a00;color:#fff}.validationError .mandatory{color:#fff}
A#mobileBackBtn{background:none repeat scroll 0 0 #FFF;border:1px solid #BBB;border-radius:4px;color:#000;font-size:12px;opacity:.6;padding:3px 3px 1px 3px;text-decoration:none}
A#mobileLink{display:none;text-decoration:none;position:absolute;top:0;left:0;z-index:1}
#mobileScrollPadding{width:100%;display:none}#debugPopup{position:absolute;top:0;left:0;width:130px;border:1px solid #aaa;background:#f8f8f8;display:none;padding:2px;direction:ltr;text-align:left;z-index:5}
#debugPopup A{color:#07c;padding:1px;text-decoration:none;font-size:10px;display:block}
.olrk-state-expanded{display:none!important}#SnapABug_Button,#SnapABug_W,#SnapABug_WP{display:none}
.likesDefaultPadding{padding:0 15px}.answerTable.faq .faqLikesPadding{padding:0 34px}
blockquote.enabled{padding:20px 25px 20px 35px;margin:0;color:#eb7600!important;cursor:pointer;background-color:#fff9e6;position:relative}
blockquote.enabled *{color:#eb7600!important}blockquote.enabled *:first-child{margin-top:15px!important}
blockquote.enabled p:last-child{margin-bottom:0!important;padding-bottom:0!important}
blockquote.enabled *:last-child{margin-bottom:15px!important;padding-bottom:0!important}
blockquote.enabled::before{content:"";background-image:url(/widget/skins/sprites.png?cv=8D676D38AE5D900);background-position:0 -677px;background-color:#fff9e6;background-repeat:no-repeat;width:16px;height:16px;position:absolute;right:auto;left:10px;top:10px}
blockquote.enabled::after{content:"";background-repeat:no-repeat;background-image:url(/widget/skins/sprites.png?cv=8D676D38AE5D900);background-position:0 -699px;background-color:#fff9e6;width:16px;height:16px;position:absolute;left:auto;right:10px;bottom:10px}
blockquote.enabled:hover::before{background-position:0 -721px;background-color:#ffe2b3}
blockquote.enabled:hover::after{background-position:0 -743px;background-color:#ffe2b3}
blockquote.enabled:hover{background-color:#ffe2b3}blockquote.enabled:hover *{color:#ad3700!important}
blockquote.enabled:hover{color:#ad3700!important}@-moz-document url-prefix(){body>img{position:fixed;top:-500px}
}#speechButton{width:28px;height:28px;position:absolute;right:16px;top:9px;cursor:pointer;display:none}
.fullscreenMobile.isRtl #speechButton{left:18px;right:auto}#speechButton .speech_microphone{width:28px;height:28px;background:url(/widget/skins/sprites.png?cv=8D676D38AE5D900) no-repeat 0 -870px;position:absolute;z-index:2}
#speechButton.active .speech_microphone{background:url(/widget/skins/sprites.png?cv=8D676D38AE5D900) no-repeat 0 -906px}
#speechButton.active .speech_ring{display:block}#speechButton .speech_ring{display:none;position:absolute;top:0;left:0;width:20px;height:20px;border:4px solid #aaa;-webkit-border-radius:30px;-webkit-animation:pulsate 1s ease-out;-webkit-animation-iteration-count:infinite;opacity:.0}
#speechButton.command-mode .speech_ring{border:4px solid orange}@-webkit-keyframes pulsate{0%{-webkit-transform:scale(0.1,0.1);opacity:.0}
30%{opacity:1.0}50%{opacity:1.0}100%{-webkit-transform:scale(1.1,1.1);opacity:.0}
}</style>
</head>
<body onload="ISQ.Widget.init()" onunload="" onblur="ISQ.Widget.onBlurHandler()">
    <!-- widget container -->
    <div id="widgetContainer" class="borderBoxSizing" tabindex="1">
        <!-- widget title -->
        <div id="widgetTitleWrapper">
            <div id="widgetTitleDecoration"></div>
            <div id="widgetTitleLeft"></div>
            <div><h1 id="widgetTitleText" tabindex="2"></h1></div>
            <div id="widgetTitleRight"></div>
            <div id="minimizeButtonWrapper" onclick="ISQ.Widget.HTML.minimizeBtnClicked();">
                <div id="minimizeButton">&nbsp;</div>
            </div>
        </div>
        <!-- /widget title -->

        <!-- chat status -->
        <div id="chatStatusWrapper">
            <div id="chatStatusContainer">
                <div id="chatStatusIcon"></div>
                <div id="chatStatus"></div>
                <a id="closeChat" onclick="ISQ.Widget.Chat.endChat();return false;" href="javascript:void(0);"></a> 
                <div id="chatStatusSystem"></div>
            </div>
        </div>
        <!-- /chat status -->

        <!-- search -->
        <div id="searchContainerWrapper">
            <a id="clearQuery"></a>
            <div id="searchContainerLeft"></div>
            <div id="searchContainer"></div>
            <div id="searchTextboxContainer">
                <input tabindex="3" type="text" id="txtSearch" maxlength="250" value="" onkeyup="ISQ.Widget.Query.keyUpHandler(event)" onkeypress="ISQ.Widget.Query.keyPressHandler(event)" onfocus="ISQ.Widget.Query.onFocusHandler(event)" onblur="ISQ.Widget.Query.onBlurHandler(event)" onclick="ISQ.Widget.Query.onclickHandler(event, true)" onkeydown="ISQ.Widget.Query.keyDownHandler(event)" onpaste="ISQ.Widget.Query.pasteHandler(event)">
            <a id="ipadFocusOut" href="javascript:void(0);" style="display:block"></a></div>
            <div id="searchContainerRight"></div>
			<div id="speechButton">
				<div class="speech_microphone"></div> 
				<div class="speech_ring"></div>
			</div>

        </div>
        <!-- /search -->

        <div id="searchSuggestions" tabindex="4"></div> <!-- search suggestions -->

        <!-- content area -->
        <div id="contentAreaWrapper" class="borderBoxSizing">
            <div id="contentArea" aria-live="polite">
                <div id="answerPane"></div>
                <div id="chatPane" class="borderBoxSizing"></div>
                <div id="contactForm"></div>                
            </div>
            <div id="mobileScrollPadding"></div>
        </div>
        <!-- /content area -->

        <!-- chat input -->
        <div id="chatInputWrapper" class="borderBoxSizing">
            <div id="chatInputContainer">
                <textarea id="txtChatInput" rows="2" maxlength="1000"></textarea>
                <input type="button" id="btnSendChat" onclick="ISQ.Widget.Chat.sendButtonClicked()">
            </div>
            <div id="chatSuggestions"></div>
        </div>
        <!-- /chat input -->

        <!-- action bar -->
        <div id="actionBarWrapper">
            <div id="actionBarContainer">
                <!-- query -->
                <div id="actionBarQuery" class="actionBar">
                    <div class="actionBarText" id="actionBarText"></div>
                    <a class="customLink" id="customLink" href="javascript:void(0)" onclick="return ISQ.Widget.HTML.customLink_onclick();"></a>
                    <a class="repByEmail" id="repByEmail" href="javascript:void(0)" onclick="return ISQ.Widget.Escalate.send(ISQ.Widget.Escalate.enumType.email);"></a>
                    <div class="actionBarSep" id="actionBarSep">|</div>
                    <a class="customChat" id="customChat" href="javascript:void(0)" onclick="return ISQ.Widget.HTML.customChat_onclick();"></a>
                    <a class="repByChat" id="repByChat" onclick="return ISQ.Widget.Chat.requestChat();" href="javascript:void(0);"></a>
                </div>
                <!-- chat -->
                <div id="actionBarChat" class="actionBar">
                    <!--<a href="javascript:void(0);">Print chat</a> 
                        <div class="actionBarSep" id='actionBarSep'>|</div>-->
                    <a id="emailChatLink" class="repByEmail" onclick="ISQ.Widget.Chat.emailChat_Show()" href="javascript:void(0);"></a>
                    <div id="emailChatContainer">
                        <input type="text" id="txtEmailChat" maxlength="60" onfocus="ISQ.Widget.Chat.emailChat_txtFocus()" onblur="ISQ.Widget.Chat.emailChat_txtBlur()">
                        <a id="ancEmailChatSend" onclick="ISQ.Widget.Chat.emailChat_Send()" href="javascript:void(0);"></a>
                        <a id="ancEmailChatCancel" onclick="ISQ.Widget.Chat.emailChat_Hide()" href="javascript:void(0);"></a>
                    </div>                    
                </div>
                <!-- chat survey -->
                <div id="actionBarChatSurvey" class="actionBar">
                    <table align="center" cellspacing="0" cellpadding="0">
                    <tbody><tr>
                        <td><a id="chatSurveyCloseButton" onclick="ISQ.Widget.iChat.closeSurvey()" href="javascript:void(0)"></a></td>
                        <td><a id="chatSurveySubmitButton" onclick="ISQ.Widget.iChat.submitSurvey()" href="javascript:void(0)"></a></td>
                    </tr>
                    </tbody></table>
                </div>
            </div>
        </div>
        <!-- /action bar -->
	
        <!-- widget footer -->
        <div id="widgetFooterWrapper">
            <div class="widgetFooterDecoration"></div>
            <div id="widgetFooter">
                <img id="customerLogo" alt="">
                <div id="customerBrandingText"></div>
                <a id="footerNanoRepLink" target="_blank"><i>powered by</i><!--[if IE 7]> nanoRep<![endif]--></a>
                <a id="footerChatLink" target="_blank" href="javascript:void(0);">Chat by <span class="normal bold">LivePerson</span></a>
            </div>
        </div>
        <div id="widgetMinimizedFooter">
            <div class="widgetFooterDecoration"></div>
        </div>
        <!-- /widget footer -->

        <!-- blocker -->
        <div id="widgetBlocker">
            <div id="blockerOverlay"></div>
            <div id="blockerContent"></div>
        </div>
        <!-- /blocker -->

        <!-- overlays -->
        <div id="phoneNumberOverlay" class="overlay">
            <a class="phoneNumber"></a>
            <div class="phoneDetails"></div>
            <div class="buttonWrapper"><a class="button" href="javascript:void(0)" onclick="ISQ.Widget.HTML.hideOverlay(_(&#39;phoneNumberOverlay&#39;));">OK</a></div>
        </div>
        <!-- /blocker -->

    </div>
    <!-- widget container -->

    <!-- logo in collapsed mode -->
    <div id="logoInCollapsedMode"></div>

    <!-- loading div -->
    <div id="widgetLoading">
    </div>

    <!-- debug popup -->
    <div id="debugPopup">
        <a href="javascript:void(0)" onclick="ISQ.Widget.Log.openPopup()">Open Log</a>
        <a href="javascript:void(0)" onclick="ISQ.Widget.Debug.closeSession()">Close session</a>
    </div>

    <!-- cdc iframe container -->
    <div id="iframeContainer"></div>



</body></html>